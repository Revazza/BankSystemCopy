2023-04-07 10:59:25.101 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-07 10:59:25.239 +04:00 [DBG] Hosting starting
2023-04-07 10:59:25.275 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-07 10:59:25.293 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-07 10:59:25.305 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-07 10:59:25.314 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-07 10:59:25.321 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-07 10:59:25.334 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-07 10:59:25.343 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-07 10:59:25.348 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-07 10:59:25.351 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-07 10:59:25.357 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-07 10:59:25.364 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-07 10:59:25.371 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-07 10:59:25.373 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-07 10:59:25.523 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-07 10:59:25.525 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-07 10:59:25.526 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-07 10:59:25.528 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-07 10:59:25.529 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-07 10:59:25.530 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-07 10:59:25.532 +04:00 [INF] Hosting environment: Development
2023-04-07 10:59:25.533 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-07 10:59:25.533 +04:00 [DBG] Hosting started
2023-04-07 10:59:25.925 +04:00 [DBG] Connection id "0HMPN6MFV23EP" accepted.
2023-04-07 10:59:25.928 +04:00 [DBG] Connection id "0HMPN6MFV23EP" started.
2023-04-07 10:59:25.931 +04:00 [DBG] Connection id "0HMPN6MFV23EQ" received FIN.
2023-04-07 10:59:25.931 +04:00 [DBG] Connection id "0HMPN6MFV23EP" received FIN.
2023-04-07 10:59:25.934 +04:00 [DBG] Connection id "0HMPN6MFV23EQ" accepted.
2023-04-07 10:59:25.938 +04:00 [DBG] Connection id "0HMPN6MFV23EQ" started.
2023-04-07 10:59:25.953 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-07 10:59:25.953 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-07 10:59:25.987 +04:00 [DBG] Connection id "0HMPN6MFV23EQ" stopped.
2023-04-07 10:59:25.987 +04:00 [DBG] Connection id "0HMPN6MFV23EP" stopped.
2023-04-07 10:59:25.993 +04:00 [DBG] Connection id "0HMPN6MFV23EP" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-07 10:59:25.993 +04:00 [DBG] Connection id "0HMPN6MFV23EQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-07 10:59:26.124 +04:00 [DBG] Connection id "0HMPN6MFV23ER" accepted.
2023-04-07 10:59:26.126 +04:00 [DBG] Connection id "0HMPN6MFV23ER" started.
2023-04-07 10:59:26.172 +04:00 [DBG] Connection 0HMPN6MFV23ER established using the following protocol: "Tls12"
2023-04-07 10:59:26.222 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-07 10:59:26.245 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-07 10:59:26.273 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-07 10:59:26.275 +04:00 [DBG] Request did not match any endpoints
2023-04-07 10:59:26.430 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-07 10:59:26.443 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-07 10:59:26.448 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 229.1989ms
2023-04-07 10:59:26.464 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-07 10:59:26.471 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 6.7086ms
2023-04-07 10:59:26.525 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-07 10:59:26.550 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 24.9640ms
2023-04-07 10:59:26.777 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-07 10:59:26.780 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-07 10:59:26.786 +04:00 [DBG] Request did not match any endpoints
2023-04-07 10:59:26.932 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 154.3240ms
2023-04-07 10:59:29.565 +04:00 [DBG] Connection id "0HMPN6MFV23ER" received FIN.
2023-04-07 10:59:29.568 +04:00 [DBG] The connection queue processing loop for 0HMPN6MFV23ER completed.
2023-04-07 10:59:29.570 +04:00 [DBG] Connection id "0HMPN6MFV23ER" is closed. The last processed stream ID was 7.
2023-04-07 10:59:29.572 +04:00 [DBG] Connection id "0HMPN6MFV23ER" sending FIN because: "The client closed the connection."
2023-04-07 10:59:29.575 +04:00 [DBG] Connection id "0HMPN6MFV23ER" stopped.
2023-04-07 11:13:13.525 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-07 11:13:13.589 +04:00 [DBG] Hosting starting
2023-04-07 11:13:13.613 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-07 11:13:13.619 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-07 11:13:13.625 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-07 11:13:13.629 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-07 11:13:13.632 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-07 11:13:13.638 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-07 11:13:13.641 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-07 11:13:13.644 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-07 11:13:13.645 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-07 11:13:13.648 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-07 11:13:13.651 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-07 11:13:13.655 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-07 11:13:13.656 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-07 11:13:13.757 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-07 11:13:13.759 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-07 11:13:13.760 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-07 11:13:13.760 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-07 11:13:13.761 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-07 11:13:13.762 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-07 11:13:13.763 +04:00 [INF] Hosting environment: Development
2023-04-07 11:13:13.764 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-07 11:13:13.765 +04:00 [DBG] Hosting started
2023-04-07 11:13:14.150 +04:00 [DBG] Connection id "0HMPN6U6PKV6N" accepted.
2023-04-07 11:13:14.152 +04:00 [DBG] Connection id "0HMPN6U6PKV6N" started.
2023-04-07 11:13:14.158 +04:00 [DBG] Connection id "0HMPN6U6PKV6N" received FIN.
2023-04-07 11:13:14.158 +04:00 [DBG] Connection id "0HMPN6U6PKV6O" received FIN.
2023-04-07 11:13:14.161 +04:00 [DBG] Connection id "0HMPN6U6PKV6O" accepted.
2023-04-07 11:13:14.162 +04:00 [DBG] Connection id "0HMPN6U6PKV6O" started.
2023-04-07 11:13:14.165 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-07 11:13:14.165 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-07 11:13:14.187 +04:00 [DBG] Connection id "0HMPN6U6PKV6O" stopped.
2023-04-07 11:13:14.187 +04:00 [DBG] Connection id "0HMPN6U6PKV6N" stopped.
2023-04-07 11:13:14.188 +04:00 [DBG] Connection id "0HMPN6U6PKV6O" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-07 11:13:14.189 +04:00 [DBG] Connection id "0HMPN6U6PKV6N" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-07 11:13:14.503 +04:00 [DBG] Connection id "0HMPN6U6PKV6P" accepted.
2023-04-07 11:13:14.505 +04:00 [DBG] Connection id "0HMPN6U6PKV6P" started.
2023-04-07 11:13:14.549 +04:00 [DBG] Connection 0HMPN6U6PKV6P established using the following protocol: "Tls12"
2023-04-07 11:13:14.601 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-07 11:13:14.620 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-07 11:13:14.640 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-07 11:13:14.642 +04:00 [DBG] Request did not match any endpoints
2023-04-07 11:13:14.829 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-07 11:13:14.845 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-07 11:13:14.848 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 247.9114ms
2023-04-07 11:13:14.861 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-07 11:13:14.866 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 4.3559ms
2023-04-07 11:13:14.883 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-07 11:13:14.926 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 42.7356ms
2023-04-07 11:13:15.017 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-07 11:13:15.018 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-07 11:13:15.019 +04:00 [DBG] Request did not match any endpoints
2023-04-07 11:13:15.135 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 118.2405ms
2023-04-07 11:13:15.873 +04:00 [DBG] Connection id "0HMPN6U6PKV6P" received FIN.
2023-04-07 11:13:15.876 +04:00 [DBG] The connection queue processing loop for 0HMPN6U6PKV6P completed.
2023-04-07 11:13:15.879 +04:00 [DBG] Connection id "0HMPN6U6PKV6P" is closed. The last processed stream ID was 7.
2023-04-07 11:13:15.880 +04:00 [DBG] Connection id "0HMPN6U6PKV6P" sending FIN because: "The client closed the connection."
2023-04-07 11:13:15.888 +04:00 [DBG] Connection id "0HMPN6U6PKV6P" stopped.
2023-04-07 11:13:43.750 +04:00 [DBG] Connection id "0HMPN6U6PKV6Q" accepted.
2023-04-07 11:13:43.751 +04:00 [DBG] Connection id "0HMPN6U6PKV6Q" started.
2023-04-07 11:13:43.755 +04:00 [DBG] Connection 0HMPN6U6PKV6Q established using the following protocol: "Tls12"
2023-04-07 11:13:43.757 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-07 11:13:43.761 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-07 11:13:43.762 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:13:43.765 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:13:43.767 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:13:43.768 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:13:43.769 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:13:43.770 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 13.0138ms
2023-04-07 11:13:43.772 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 48
2023-04-07 11:13:43.774 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-07 11:13:43.777 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-07 11:13:43.778 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-07 11:13:43.779 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:13:43.780 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:13:43.780 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:13:43.801 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-07 11:13:43.807 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-07 11:13:43.832 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:13:43.835 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:13:43.836 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:13:43.837 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:13:43.839 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:13:43.841 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:13:43.843 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:13:43.958 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-07 11:13:43.975 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:13:43.984 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-07 11:13:43.989 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-07 11:13:43.991 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-07 11:13:43.997 +04:00 [DBG] Connection id "0HMPN6U6PKV6Q", Request id "0HMPN6U6PKV6Q:00000003": started reading request body.
2023-04-07 11:13:43.999 +04:00 [DBG] Connection id "0HMPN6U6PKV6Q", Request id "0HMPN6U6PKV6Q:00000003": done reading request body.
2023-04-07 11:13:44.003 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-07 11:13:44.005 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-07 11:13:44.007 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-07 11:13:44.008 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-07 11:13:44.017 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-07 11:13:44.344 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2023-04-07 11:13:44.346 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2023-04-07 11:13:44.581 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:13:44.653 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.CardNumber == __request_CardNumber_0 && c.Pin == __request_Pin_1)'
2023-04-07 11:13:44.698 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-07 11:13:44.821 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE (c.CardNumber == @__request_CardNumber_0) && (c.Pin == @__request_Pin_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-07 11:13:44.855 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:13:44.858 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:13:44.881 +04:00 [DBG] Created DbConnection. (21ms).
2023-04-07 11:13:44.887 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (32ms).
2023-04-07 11:13:44.896 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (42ms).
2023-04-07 11:13:44.899 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:45.051 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:45.059 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-07 11:13:45.112 +04:00 [INF] Executed DbCommand (53ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-07 11:13:45.142 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:45.180 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:45.189 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:45.204 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:45.211 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 92ms reading results.
2023-04-07 11:13:45.216 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:45.222 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (5ms).
2023-04-07 11:13:45.298 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:13:45.303 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:13:45.304 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:13:45.305 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:13:45.306 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:13:45.308 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:13:45.318 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 1474.134ms
2023-04-07 11:13:45.320 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-07 11:13:45.323 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:13:45.326 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:45.329 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-07 11:13:45.331 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 48 - 200 - application/json;+charset=utf-8 1558.6627ms
2023-04-07 11:13:45.917 +04:00 [DBG] Connection id "0HMPN6U6PKV6Q" received FIN.
2023-04-07 11:13:45.918 +04:00 [DBG] Connection id "0HMPN6U6PKV6Q" is closed. The last processed stream ID was 3.
2023-04-07 11:13:45.919 +04:00 [DBG] The connection queue processing loop for 0HMPN6U6PKV6Q completed.
2023-04-07 11:13:45.920 +04:00 [DBG] Connection id "0HMPN6U6PKV6Q" sending FIN because: "The client closed the connection."
2023-04-07 11:13:45.933 +04:00 [DBG] Connection id "0HMPN6U6PKV6Q" stopped.
2023-04-07 11:13:46.126 +04:00 [DBG] Connection id "0HMPN6U6PKV6R" accepted.
2023-04-07 11:13:46.127 +04:00 [DBG] Connection id "0HMPN6U6PKV6R" started.
2023-04-07 11:13:46.129 +04:00 [DBG] Connection 0HMPN6U6PKV6R established using the following protocol: "Tls12"
2023-04-07 11:13:46.131 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:13:46.131 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:13:46.132 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:13:46.133 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:13:46.134 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:13:46.136 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:13:46.137 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:13:46.138 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:13:46.140 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:13:46.140 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:13:46.141 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:13:46.142 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:13:46.143 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:13:46.143 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:13:46.144 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 12.3808ms
2023-04-07 11:13:46.144 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 13.1259ms
2023-04-07 11:13:46.146 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:13:46.147 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:13:46.148 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:13:46.149 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:13:46.150 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:13:46.151 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:13:46.152 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:13:46.184 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:13:46.186 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:13:46.192 +04:00 [DBG] Authorization was successful.
2023-04-07 11:13:46.193 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:13:46.198 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:13:46.200 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:13:46.201 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:13:46.202 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:13:46.204 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:13:46.205 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:13:46.207 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:13:46.210 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:13:46.224 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:13:46.228 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.Id == __cardId_0)'
2023-04-07 11:13:46.230 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-07 11:13:46.239 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-07 11:13:46.243 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:13:46.244 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:13:46.245 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:13:46.247 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:13:46.248 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:13:46.250 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:46.253 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:46.255 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:13:46.262 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:13:46.265 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:46.266 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:46.268 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:46.269 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:46.270 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-07 11:13:46.272 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:46.273 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:13:46.275 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:13:46.277 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:13:46.278 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:13:46.279 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:13:46.280 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:13:46.281 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:13:46.285 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 77.9983ms
2023-04-07 11:13:46.286 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:13:46.287 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:13:46.288 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:13:46.289 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:13:46.290 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:46.291 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:13:46.292 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:13:46.293 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:13:46.294 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 148.2831ms
2023-04-07 11:13:46.295 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:13:46.297 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:13:46.297 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:13:46.300 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:13:46.301 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:13:46.302 +04:00 [DBG] Authorization was successful.
2023-04-07 11:13:46.304 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:13:46.304 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:13:46.307 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:13:46.308 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:13:46.309 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:13:46.311 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:13:46.312 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:13:46.313 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:13:46.315 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:13:46.352 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:13:46.357 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:13:46.358 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:13:46.359 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-07 11:13:46.360 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:13:46.361 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:13:46.362 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:46.363 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:46.364 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:13:46.366 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:13:46.368 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:46.370 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:46.371 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:46.373 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:46.374 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-07 11:13:46.375 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:46.376 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-07 11:13:46.377 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:13:46.379 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:13:46.380 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:13:46.381 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:13:46.381 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:13:46.382 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:13:46.384 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 70.6535ms
2023-04-07 11:13:46.385 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:13:46.385 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:13:46.386 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:46.387 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:13:46.389 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 102.3534ms
2023-04-07 11:13:52.266 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-07 11:13:52.267 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-07 11:13:52.268 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:13:52.269 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:13:52.269 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:13:52.270 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:13:52.271 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:13:52.272 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 5.5983ms
2023-04-07 11:13:52.273 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 29
2023-04-07 11:13:52.274 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-07 11:13:52.275 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-07 11:13:52.276 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:13:52.277 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:13:52.278 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:13:52.279 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:13:52.279 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:13:52.280 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:13:52.281 +04:00 [DBG] Authorization was successful.
2023-04-07 11:13:52.282 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:13:52.285 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-07 11:13:52.286 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:13:52.288 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:13:52.289 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:13:52.291 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:13:52.292 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:13:52.293 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-07 11:13:52.295 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-07 11:13:52.296 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-07 11:13:52.297 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-07 11:13:52.299 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-07 11:13:52.303 +04:00 [DBG] Connection id "0HMPN6U6PKV6R", Request id "0HMPN6U6PKV6R:0000000B": started reading request body.
2023-04-07 11:13:52.304 +04:00 [DBG] Connection id "0HMPN6U6PKV6R", Request id "0HMPN6U6PKV6R:0000000B": done reading request body.
2023-04-07 11:13:52.319 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-07 11:13:52.320 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:13:52.321 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:13:52.323 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-07 11:13:52.328 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:13:52.334 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:13:52.336 +04:00 [DBG] Compiling query expression: 
'DbSet<CurrencyEntity>()'
2023-04-07 11:13:52.341 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CurrencyEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CurrencyEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CurrencyEntity.Code (string), 1], [Property: CurrencyEntity.Date (DateTime) Required, 2], [Property: CurrencyEntity.Diff (decimal) Required, 3], [Property: CurrencyEntity.DiffFormated (string), 4], [Property: CurrencyEntity.LastUpdatedAt (DateTime) Required, 5], [Property: CurrencyEntity.Name (string), 6], [Property: CurrencyEntity.Quantity (int) Required, 7], [Property: CurrencyEntity.Rate (decimal) Required, 8], [Property: CurrencyEntity.RateFormated (string), 9], [Property: CurrencyEntity.ValidFromDate (DateTime) Required, 10] }
        SELECT c.Id, c.Code, c.Date, c.Diff, c.DiffFormated, c.LastUpdatedAt, c.Name, c.Quantity, c.Rate, c.RateFormated, c.ValidFromDate
        FROM Currencies AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CurrencyEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-07 11:13:52.344 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:13:52.345 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:13:52.345 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-07 11:13:52.346 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:13:52.347 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:13:52.348 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:52.349 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:52.351 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-07 11:13:52.354 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-07 11:13:52.358 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:52.359 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-07 11:13:52.360 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:52.361 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-07 11:13:52.365 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-07 11:13:52.368 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-07 11:13:52.370 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-07 11:13:52.374 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 0 entities written to the database.
2023-04-07 11:13:52.766 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.769 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.770 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.771 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.773 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.774 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.776 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.777 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.779 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.780 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.781 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.783 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.784 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.785 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.786 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.788 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.789 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.791 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.792 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.793 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.795 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.796 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.797 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.798 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.800 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.801 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.802 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.803 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.805 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.807 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.808 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.809 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.810 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.812 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.813 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.814 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.815 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.817 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.818 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.819 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.820 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.822 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.823 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.825 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-07 11:13:52.826 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-07 11:13:52.836 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-07 11:13:52.873 +04:00 [DBG] Executing 42 update commands as a batch.
2023-04-07 11:13:52.880 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:52.881 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:52.883 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-07 11:13:52.889 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-07 11:13:52.892 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:13:52.893 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-07 11:13:52.895 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:13:52.896 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Size = 4000), @p21='?' (DbType = DateTime2), @p22='?' (DbType = Guid), @p23='?' (Size = 4000), @p24='?' (DbType = DateTime2), @p25='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p26='?' (Size = 4000), @p27='?' (DbType = DateTime2), @p28='?' (Size = 4000), @p29='?' (DbType = Int32), @p30='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p31='?' (Size = 4000), @p32='?' (DbType = DateTime2), @p33='?' (DbType = Guid), @p34='?' (Size = 4000), @p35='?' (DbType = DateTime2), @p36='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p37='?' (Size = 4000), @p38='?' (DbType = DateTime2), @p39='?' (Size = 4000), @p40='?' (DbType = Int32), @p41='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p42='?' (Size = 4000), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Guid), @p45='?' (Size = 4000), @p46='?' (DbType = DateTime2), @p47='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p48='?' (Size = 4000), @p49='?' (DbType = DateTime2), @p50='?' (Size = 4000), @p51='?' (DbType = Int32), @p52='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p53='?' (Size = 4000), @p54='?' (DbType = DateTime2), @p55='?' (DbType = Guid), @p56='?' (Size = 4000), @p57='?' (DbType = DateTime2), @p58='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p59='?' (Size = 4000), @p60='?' (DbType = DateTime2), @p61='?' (Size = 4000), @p62='?' (DbType = Int32), @p63='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p64='?' (Size = 4000), @p65='?' (DbType = DateTime2), @p66='?' (DbType = Guid), @p67='?' (Size = 4000), @p68='?' (DbType = DateTime2), @p69='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p70='?' (Size = 4000), @p71='?' (DbType = DateTime2), @p72='?' (Size = 4000), @p73='?' (DbType = Int32), @p74='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p75='?' (Size = 4000), @p76='?' (DbType = DateTime2), @p77='?' (DbType = Guid), @p78='?' (Size = 4000), @p79='?' (DbType = DateTime2), @p80='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p81='?' (Size = 4000), @p82='?' (DbType = DateTime2), @p83='?' (Size = 4000), @p84='?' (DbType = Int32), @p85='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p86='?' (Size = 4000), @p87='?' (DbType = DateTime2), @p88='?' (DbType = Guid), @p89='?' (Size = 4000), @p90='?' (DbType = DateTime2), @p91='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p92='?' (Size = 4000), @p93='?' (DbType = DateTime2), @p94='?' (Size = 4000), @p95='?' (DbType = Int32), @p96='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p97='?' (Size = 4000), @p98='?' (DbType = DateTime2), @p99='?' (DbType = Guid), @p100='?' (Size = 4000), @p101='?' (DbType = DateTime2), @p102='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p103='?' (Size = 4000), @p104='?' (DbType = DateTime2), @p105='?' (Size = 4000), @p106='?' (DbType = Int32), @p107='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p108='?' (Size = 4000), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Guid), @p111='?' (Size = 4000), @p112='?' (DbType = DateTime2), @p113='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p114='?' (Size = 4000), @p115='?' (DbType = DateTime2), @p116='?' (Size = 4000), @p117='?' (DbType = Int32), @p118='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p119='?' (Size = 4000), @p120='?' (DbType = DateTime2), @p121='?' (DbType = Guid), @p122='?' (Size = 4000), @p123='?' (DbType = DateTime2), @p124='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p125='?' (Size = 4000), @p126='?' (DbType = DateTime2), @p127='?' (Size = 4000), @p128='?' (DbType = Int32), @p129='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p130='?' (Size = 4000), @p131='?' (DbType = DateTime2), @p132='?' (DbType = Guid), @p133='?' (Size = 4000), @p134='?' (DbType = DateTime2), @p135='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p136='?' (Size = 4000), @p137='?' (DbType = DateTime2), @p138='?' (Size = 4000), @p139='?' (DbType = Int32), @p140='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p141='?' (Size = 4000), @p142='?' (DbType = DateTime2), @p143='?' (DbType = Guid), @p144='?' (Size = 4000), @p145='?' (DbType = DateTime2), @p146='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p147='?' (Size = 4000), @p148='?' (DbType = DateTime2), @p149='?' (Size = 4000), @p150='?' (DbType = Int32), @p151='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p152='?' (Size = 4000), @p153='?' (DbType = DateTime2), @p154='?' (DbType = Guid), @p155='?' (Size = 4000), @p156='?' (DbType = DateTime2), @p157='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p158='?' (Size = 4000), @p159='?' (DbType = DateTime2), @p160='?' (Size = 4000), @p161='?' (DbType = Int32), @p162='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p163='?' (Size = 4000), @p164='?' (DbType = DateTime2), @p165='?' (DbType = Guid), @p166='?' (Size = 4000), @p167='?' (DbType = DateTime2), @p168='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p169='?' (Size = 4000), @p170='?' (DbType = DateTime2), @p171='?' (Size = 4000), @p172='?' (DbType = Int32), @p173='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p174='?' (Size = 4000), @p175='?' (DbType = DateTime2), @p176='?' (DbType = Guid), @p177='?' (Size = 4000), @p178='?' (DbType = DateTime2), @p179='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p180='?' (Size = 4000), @p181='?' (DbType = DateTime2), @p182='?' (Size = 4000), @p183='?' (DbType = Int32), @p184='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p185='?' (Size = 4000), @p186='?' (DbType = DateTime2), @p187='?' (DbType = Guid), @p188='?' (Size = 4000), @p189='?' (DbType = DateTime2), @p190='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p191='?' (Size = 4000), @p192='?' (DbType = DateTime2), @p193='?' (Size = 4000), @p194='?' (DbType = Int32), @p195='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p196='?' (Size = 4000), @p197='?' (DbType = DateTime2), @p198='?' (DbType = Guid), @p199='?' (Size = 4000), @p200='?' (DbType = DateTime2), @p201='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p202='?' (Size = 4000), @p203='?' (DbType = DateTime2), @p204='?' (Size = 4000), @p205='?' (DbType = Int32), @p206='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p207='?' (Size = 4000), @p208='?' (DbType = DateTime2), @p209='?' (DbType = Guid), @p210='?' (Size = 4000), @p211='?' (DbType = DateTime2), @p212='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p213='?' (Size = 4000), @p214='?' (DbType = DateTime2), @p215='?' (Size = 4000), @p216='?' (DbType = Int32), @p217='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p218='?' (Size = 4000), @p219='?' (DbType = DateTime2), @p220='?' (DbType = Guid), @p221='?' (Size = 4000), @p222='?' (DbType = DateTime2), @p223='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p224='?' (Size = 4000), @p225='?' (DbType = DateTime2), @p226='?' (Size = 4000), @p227='?' (DbType = Int32), @p228='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p229='?' (Size = 4000), @p230='?' (DbType = DateTime2), @p231='?' (DbType = Guid), @p232='?' (Size = 4000), @p233='?' (DbType = DateTime2), @p234='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p235='?' (Size = 4000), @p236='?' (DbType = DateTime2), @p237='?' (Size = 4000), @p238='?' (DbType = Int32), @p239='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p240='?' (Size = 4000), @p241='?' (DbType = DateTime2), @p242='?' (DbType = Guid), @p243='?' (Size = 4000), @p244='?' (DbType = DateTime2), @p245='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p246='?' (Size = 4000), @p247='?' (DbType = DateTime2), @p248='?' (Size = 4000), @p249='?' (DbType = Int32), @p250='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p251='?' (Size = 4000), @p252='?' (DbType = DateTime2), @p253='?' (DbType = Guid), @p254='?' (Size = 4000), @p255='?' (DbType = DateTime2), @p256='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p257='?' (Size = 4000), @p258='?' (DbType = DateTime2), @p259='?' (Size = 4000), @p260='?' (DbType = Int32), @p261='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p262='?' (Size = 4000), @p263='?' (DbType = DateTime2), @p264='?' (DbType = Guid), @p265='?' (Size = 4000), @p266='?' (DbType = DateTime2), @p267='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p268='?' (Size = 4000), @p269='?' (DbType = DateTime2), @p270='?' (Size = 4000), @p271='?' (DbType = Int32), @p272='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p273='?' (Size = 4000), @p274='?' (DbType = DateTime2), @p275='?' (DbType = Guid), @p276='?' (Size = 4000), @p277='?' (DbType = DateTime2), @p278='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p279='?' (Size = 4000), @p280='?' (DbType = DateTime2), @p281='?' (Size = 4000), @p282='?' (DbType = Int32), @p283='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p284='?' (Size = 4000), @p285='?' (DbType = DateTime2), @p286='?' (DbType = Guid), @p287='?' (Size = 4000), @p288='?' (DbType = DateTime2), @p289='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p290='?' (Size = 4000), @p291='?' (DbType = DateTime2), @p292='?' (Size = 4000), @p293='?' (DbType = Int32), @p294='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p295='?' (Size = 4000), @p296='?' (DbType = DateTime2), @p297='?' (DbType = Guid), @p298='?' (Size = 4000), @p299='?' (DbType = DateTime2), @p300='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p301='?' (Size = 4000), @p302='?' (DbType = DateTime2), @p303='?' (Size = 4000), @p304='?' (DbType = Int32), @p305='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p306='?' (Size = 4000), @p307='?' (DbType = DateTime2), @p308='?' (DbType = Guid), @p309='?' (Size = 4000), @p310='?' (DbType = DateTime2), @p311='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p312='?' (Size = 4000), @p313='?' (DbType = DateTime2), @p314='?' (Size = 4000), @p315='?' (DbType = Int32), @p316='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p317='?' (Size = 4000), @p318='?' (DbType = DateTime2), @p319='?' (DbType = Guid), @p320='?' (Size = 4000), @p321='?' (DbType = DateTime2), @p322='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p323='?' (Size = 4000), @p324='?' (DbType = DateTime2), @p325='?' (Size = 4000), @p326='?' (DbType = Int32), @p327='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p328='?' (Size = 4000), @p329='?' (DbType = DateTime2), @p330='?' (DbType = Guid), @p331='?' (Size = 4000), @p332='?' (DbType = DateTime2), @p333='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p334='?' (Size = 4000), @p335='?' (DbType = DateTime2), @p336='?' (Size = 4000), @p337='?' (DbType = Int32), @p338='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p339='?' (Size = 4000), @p340='?' (DbType = DateTime2), @p341='?' (DbType = Guid), @p342='?' (Size = 4000), @p343='?' (DbType = DateTime2), @p344='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p345='?' (Size = 4000), @p346='?' (DbType = DateTime2), @p347='?' (Size = 4000), @p348='?' (DbType = Int32), @p349='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p350='?' (Size = 4000), @p351='?' (DbType = DateTime2), @p352='?' (DbType = Guid), @p353='?' (Size = 4000), @p354='?' (DbType = DateTime2), @p355='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p356='?' (Size = 4000), @p357='?' (DbType = DateTime2), @p358='?' (Size = 4000), @p359='?' (DbType = Int32), @p360='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p361='?' (Size = 4000), @p362='?' (DbType = DateTime2), @p363='?' (DbType = Guid), @p364='?' (Size = 4000), @p365='?' (DbType = DateTime2), @p366='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p367='?' (Size = 4000), @p368='?' (DbType = DateTime2), @p369='?' (Size = 4000), @p370='?' (DbType = Int32), @p371='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p372='?' (Size = 4000), @p373='?' (DbType = DateTime2), @p374='?' (DbType = Guid), @p375='?' (Size = 4000), @p376='?' (DbType = DateTime2), @p377='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p378='?' (Size = 4000), @p379='?' (DbType = DateTime2), @p380='?' (Size = 4000), @p381='?' (DbType = Int32), @p382='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p383='?' (Size = 4000), @p384='?' (DbType = DateTime2), @p385='?' (DbType = Guid), @p386='?' (Size = 4000), @p387='?' (DbType = DateTime2), @p388='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p389='?' (Size = 4000), @p390='?' (DbType = DateTime2), @p391='?' (Size = 4000), @p392='?' (DbType = Int32), @p393='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p394='?' (Size = 4000), @p395='?' (DbType = DateTime2), @p396='?' (DbType = Guid), @p397='?' (Size = 4000), @p398='?' (DbType = DateTime2), @p399='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p400='?' (Size = 4000), @p401='?' (DbType = DateTime2), @p402='?' (Size = 4000), @p403='?' (DbType = Int32), @p404='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p405='?' (Size = 4000), @p406='?' (DbType = DateTime2), @p407='?' (DbType = Guid), @p408='?' (Size = 4000), @p409='?' (DbType = DateTime2), @p410='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p411='?' (Size = 4000), @p412='?' (DbType = DateTime2), @p413='?' (Size = 4000), @p414='?' (DbType = Int32), @p415='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p416='?' (Size = 4000), @p417='?' (DbType = DateTime2), @p418='?' (DbType = Guid), @p419='?' (Size = 4000), @p420='?' (DbType = DateTime2), @p421='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p422='?' (Size = 4000), @p423='?' (DbType = DateTime2), @p424='?' (Size = 4000), @p425='?' (DbType = Int32), @p426='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p427='?' (Size = 4000), @p428='?' (DbType = DateTime2), @p429='?' (DbType = Guid), @p430='?' (Size = 4000), @p431='?' (DbType = DateTime2), @p432='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p433='?' (Size = 4000), @p434='?' (DbType = DateTime2), @p435='?' (Size = 4000), @p436='?' (DbType = Int32), @p437='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p438='?' (Size = 4000), @p439='?' (DbType = DateTime2), @p440='?' (DbType = Guid), @p441='?' (Size = 4000), @p442='?' (DbType = DateTime2), @p443='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p444='?' (Size = 4000), @p445='?' (DbType = DateTime2), @p446='?' (Size = 4000), @p447='?' (DbType = Int32), @p448='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p449='?' (Size = 4000), @p450='?' (DbType = DateTime2), @p451='?' (DbType = Guid), @p452='?' (Size = 4000), @p453='?' (DbType = DateTime2), @p454='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p455='?' (Size = 4000), @p456='?' (DbType = DateTime2), @p457='?' (Size = 4000), @p458='?' (DbType = Int32), @p459='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p460='?' (Size = 4000), @p461='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Currencies] ([Id], [Code], [Date], [Diff], [DiffFormated], [LastUpdatedAt], [Name], [Quantity], [Rate], [RateFormated], [ValidFromDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10),
(@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21),
(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32),
(@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43),
(@p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54),
(@p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65),
(@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76),
(@p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87),
(@p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98),
(@p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109),
(@p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120),
(@p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131),
(@p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142),
(@p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153),
(@p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164),
(@p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186),
(@p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197),
(@p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207, @p208),
(@p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219),
(@p220, @p221, @p222, @p223, @p224, @p225, @p226, @p227, @p228, @p229, @p230),
(@p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239, @p240, @p241),
(@p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252),
(@p253, @p254, @p255, @p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263),
(@p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271, @p272, @p273, @p274),
(@p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285),
(@p286, @p287, @p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296),
(@p297, @p298, @p299, @p300, @p301, @p302, @p303, @p304, @p305, @p306, @p307),
(@p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318),
(@p319, @p320, @p321, @p322, @p323, @p324, @p325, @p326, @p327, @p328, @p329),
(@p330, @p331, @p332, @p333, @p334, @p335, @p336, @p337, @p338, @p339, @p340),
(@p341, @p342, @p343, @p344, @p345, @p346, @p347, @p348, @p349, @p350, @p351),
(@p352, @p353, @p354, @p355, @p356, @p357, @p358, @p359, @p360, @p361, @p362),
(@p363, @p364, @p365, @p366, @p367, @p368, @p369, @p370, @p371, @p372, @p373),
(@p374, @p375, @p376, @p377, @p378, @p379, @p380, @p381, @p382, @p383, @p384),
(@p385, @p386, @p387, @p388, @p389, @p390, @p391, @p392, @p393, @p394, @p395),
(@p396, @p397, @p398, @p399, @p400, @p401, @p402, @p403, @p404, @p405, @p406),
(@p407, @p408, @p409, @p410, @p411, @p412, @p413, @p414, @p415, @p416, @p417),
(@p418, @p419, @p420, @p421, @p422, @p423, @p424, @p425, @p426, @p427, @p428),
(@p429, @p430, @p431, @p432, @p433, @p434, @p435, @p436, @p437, @p438, @p439),
(@p440, @p441, @p442, @p443, @p444, @p445, @p446, @p447, @p448, @p449, @p450),
(@p451, @p452, @p453, @p454, @p455, @p456, @p457, @p458, @p459, @p460, @p461);
2023-04-07 11:13:52.931 +04:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Size = 4000), @p21='?' (DbType = DateTime2), @p22='?' (DbType = Guid), @p23='?' (Size = 4000), @p24='?' (DbType = DateTime2), @p25='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p26='?' (Size = 4000), @p27='?' (DbType = DateTime2), @p28='?' (Size = 4000), @p29='?' (DbType = Int32), @p30='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p31='?' (Size = 4000), @p32='?' (DbType = DateTime2), @p33='?' (DbType = Guid), @p34='?' (Size = 4000), @p35='?' (DbType = DateTime2), @p36='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p37='?' (Size = 4000), @p38='?' (DbType = DateTime2), @p39='?' (Size = 4000), @p40='?' (DbType = Int32), @p41='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p42='?' (Size = 4000), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Guid), @p45='?' (Size = 4000), @p46='?' (DbType = DateTime2), @p47='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p48='?' (Size = 4000), @p49='?' (DbType = DateTime2), @p50='?' (Size = 4000), @p51='?' (DbType = Int32), @p52='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p53='?' (Size = 4000), @p54='?' (DbType = DateTime2), @p55='?' (DbType = Guid), @p56='?' (Size = 4000), @p57='?' (DbType = DateTime2), @p58='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p59='?' (Size = 4000), @p60='?' (DbType = DateTime2), @p61='?' (Size = 4000), @p62='?' (DbType = Int32), @p63='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p64='?' (Size = 4000), @p65='?' (DbType = DateTime2), @p66='?' (DbType = Guid), @p67='?' (Size = 4000), @p68='?' (DbType = DateTime2), @p69='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p70='?' (Size = 4000), @p71='?' (DbType = DateTime2), @p72='?' (Size = 4000), @p73='?' (DbType = Int32), @p74='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p75='?' (Size = 4000), @p76='?' (DbType = DateTime2), @p77='?' (DbType = Guid), @p78='?' (Size = 4000), @p79='?' (DbType = DateTime2), @p80='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p81='?' (Size = 4000), @p82='?' (DbType = DateTime2), @p83='?' (Size = 4000), @p84='?' (DbType = Int32), @p85='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p86='?' (Size = 4000), @p87='?' (DbType = DateTime2), @p88='?' (DbType = Guid), @p89='?' (Size = 4000), @p90='?' (DbType = DateTime2), @p91='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p92='?' (Size = 4000), @p93='?' (DbType = DateTime2), @p94='?' (Size = 4000), @p95='?' (DbType = Int32), @p96='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p97='?' (Size = 4000), @p98='?' (DbType = DateTime2), @p99='?' (DbType = Guid), @p100='?' (Size = 4000), @p101='?' (DbType = DateTime2), @p102='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p103='?' (Size = 4000), @p104='?' (DbType = DateTime2), @p105='?' (Size = 4000), @p106='?' (DbType = Int32), @p107='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p108='?' (Size = 4000), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Guid), @p111='?' (Size = 4000), @p112='?' (DbType = DateTime2), @p113='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p114='?' (Size = 4000), @p115='?' (DbType = DateTime2), @p116='?' (Size = 4000), @p117='?' (DbType = Int32), @p118='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p119='?' (Size = 4000), @p120='?' (DbType = DateTime2), @p121='?' (DbType = Guid), @p122='?' (Size = 4000), @p123='?' (DbType = DateTime2), @p124='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p125='?' (Size = 4000), @p126='?' (DbType = DateTime2), @p127='?' (Size = 4000), @p128='?' (DbType = Int32), @p129='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p130='?' (Size = 4000), @p131='?' (DbType = DateTime2), @p132='?' (DbType = Guid), @p133='?' (Size = 4000), @p134='?' (DbType = DateTime2), @p135='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p136='?' (Size = 4000), @p137='?' (DbType = DateTime2), @p138='?' (Size = 4000), @p139='?' (DbType = Int32), @p140='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p141='?' (Size = 4000), @p142='?' (DbType = DateTime2), @p143='?' (DbType = Guid), @p144='?' (Size = 4000), @p145='?' (DbType = DateTime2), @p146='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p147='?' (Size = 4000), @p148='?' (DbType = DateTime2), @p149='?' (Size = 4000), @p150='?' (DbType = Int32), @p151='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p152='?' (Size = 4000), @p153='?' (DbType = DateTime2), @p154='?' (DbType = Guid), @p155='?' (Size = 4000), @p156='?' (DbType = DateTime2), @p157='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p158='?' (Size = 4000), @p159='?' (DbType = DateTime2), @p160='?' (Size = 4000), @p161='?' (DbType = Int32), @p162='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p163='?' (Size = 4000), @p164='?' (DbType = DateTime2), @p165='?' (DbType = Guid), @p166='?' (Size = 4000), @p167='?' (DbType = DateTime2), @p168='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p169='?' (Size = 4000), @p170='?' (DbType = DateTime2), @p171='?' (Size = 4000), @p172='?' (DbType = Int32), @p173='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p174='?' (Size = 4000), @p175='?' (DbType = DateTime2), @p176='?' (DbType = Guid), @p177='?' (Size = 4000), @p178='?' (DbType = DateTime2), @p179='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p180='?' (Size = 4000), @p181='?' (DbType = DateTime2), @p182='?' (Size = 4000), @p183='?' (DbType = Int32), @p184='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p185='?' (Size = 4000), @p186='?' (DbType = DateTime2), @p187='?' (DbType = Guid), @p188='?' (Size = 4000), @p189='?' (DbType = DateTime2), @p190='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p191='?' (Size = 4000), @p192='?' (DbType = DateTime2), @p193='?' (Size = 4000), @p194='?' (DbType = Int32), @p195='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p196='?' (Size = 4000), @p197='?' (DbType = DateTime2), @p198='?' (DbType = Guid), @p199='?' (Size = 4000), @p200='?' (DbType = DateTime2), @p201='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p202='?' (Size = 4000), @p203='?' (DbType = DateTime2), @p204='?' (Size = 4000), @p205='?' (DbType = Int32), @p206='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p207='?' (Size = 4000), @p208='?' (DbType = DateTime2), @p209='?' (DbType = Guid), @p210='?' (Size = 4000), @p211='?' (DbType = DateTime2), @p212='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p213='?' (Size = 4000), @p214='?' (DbType = DateTime2), @p215='?' (Size = 4000), @p216='?' (DbType = Int32), @p217='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p218='?' (Size = 4000), @p219='?' (DbType = DateTime2), @p220='?' (DbType = Guid), @p221='?' (Size = 4000), @p222='?' (DbType = DateTime2), @p223='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p224='?' (Size = 4000), @p225='?' (DbType = DateTime2), @p226='?' (Size = 4000), @p227='?' (DbType = Int32), @p228='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p229='?' (Size = 4000), @p230='?' (DbType = DateTime2), @p231='?' (DbType = Guid), @p232='?' (Size = 4000), @p233='?' (DbType = DateTime2), @p234='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p235='?' (Size = 4000), @p236='?' (DbType = DateTime2), @p237='?' (Size = 4000), @p238='?' (DbType = Int32), @p239='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p240='?' (Size = 4000), @p241='?' (DbType = DateTime2), @p242='?' (DbType = Guid), @p243='?' (Size = 4000), @p244='?' (DbType = DateTime2), @p245='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p246='?' (Size = 4000), @p247='?' (DbType = DateTime2), @p248='?' (Size = 4000), @p249='?' (DbType = Int32), @p250='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p251='?' (Size = 4000), @p252='?' (DbType = DateTime2), @p253='?' (DbType = Guid), @p254='?' (Size = 4000), @p255='?' (DbType = DateTime2), @p256='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p257='?' (Size = 4000), @p258='?' (DbType = DateTime2), @p259='?' (Size = 4000), @p260='?' (DbType = Int32), @p261='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p262='?' (Size = 4000), @p263='?' (DbType = DateTime2), @p264='?' (DbType = Guid), @p265='?' (Size = 4000), @p266='?' (DbType = DateTime2), @p267='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p268='?' (Size = 4000), @p269='?' (DbType = DateTime2), @p270='?' (Size = 4000), @p271='?' (DbType = Int32), @p272='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p273='?' (Size = 4000), @p274='?' (DbType = DateTime2), @p275='?' (DbType = Guid), @p276='?' (Size = 4000), @p277='?' (DbType = DateTime2), @p278='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p279='?' (Size = 4000), @p280='?' (DbType = DateTime2), @p281='?' (Size = 4000), @p282='?' (DbType = Int32), @p283='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p284='?' (Size = 4000), @p285='?' (DbType = DateTime2), @p286='?' (DbType = Guid), @p287='?' (Size = 4000), @p288='?' (DbType = DateTime2), @p289='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p290='?' (Size = 4000), @p291='?' (DbType = DateTime2), @p292='?' (Size = 4000), @p293='?' (DbType = Int32), @p294='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p295='?' (Size = 4000), @p296='?' (DbType = DateTime2), @p297='?' (DbType = Guid), @p298='?' (Size = 4000), @p299='?' (DbType = DateTime2), @p300='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p301='?' (Size = 4000), @p302='?' (DbType = DateTime2), @p303='?' (Size = 4000), @p304='?' (DbType = Int32), @p305='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p306='?' (Size = 4000), @p307='?' (DbType = DateTime2), @p308='?' (DbType = Guid), @p309='?' (Size = 4000), @p310='?' (DbType = DateTime2), @p311='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p312='?' (Size = 4000), @p313='?' (DbType = DateTime2), @p314='?' (Size = 4000), @p315='?' (DbType = Int32), @p316='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p317='?' (Size = 4000), @p318='?' (DbType = DateTime2), @p319='?' (DbType = Guid), @p320='?' (Size = 4000), @p321='?' (DbType = DateTime2), @p322='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p323='?' (Size = 4000), @p324='?' (DbType = DateTime2), @p325='?' (Size = 4000), @p326='?' (DbType = Int32), @p327='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p328='?' (Size = 4000), @p329='?' (DbType = DateTime2), @p330='?' (DbType = Guid), @p331='?' (Size = 4000), @p332='?' (DbType = DateTime2), @p333='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p334='?' (Size = 4000), @p335='?' (DbType = DateTime2), @p336='?' (Size = 4000), @p337='?' (DbType = Int32), @p338='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p339='?' (Size = 4000), @p340='?' (DbType = DateTime2), @p341='?' (DbType = Guid), @p342='?' (Size = 4000), @p343='?' (DbType = DateTime2), @p344='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p345='?' (Size = 4000), @p346='?' (DbType = DateTime2), @p347='?' (Size = 4000), @p348='?' (DbType = Int32), @p349='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p350='?' (Size = 4000), @p351='?' (DbType = DateTime2), @p352='?' (DbType = Guid), @p353='?' (Size = 4000), @p354='?' (DbType = DateTime2), @p355='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p356='?' (Size = 4000), @p357='?' (DbType = DateTime2), @p358='?' (Size = 4000), @p359='?' (DbType = Int32), @p360='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p361='?' (Size = 4000), @p362='?' (DbType = DateTime2), @p363='?' (DbType = Guid), @p364='?' (Size = 4000), @p365='?' (DbType = DateTime2), @p366='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p367='?' (Size = 4000), @p368='?' (DbType = DateTime2), @p369='?' (Size = 4000), @p370='?' (DbType = Int32), @p371='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p372='?' (Size = 4000), @p373='?' (DbType = DateTime2), @p374='?' (DbType = Guid), @p375='?' (Size = 4000), @p376='?' (DbType = DateTime2), @p377='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p378='?' (Size = 4000), @p379='?' (DbType = DateTime2), @p380='?' (Size = 4000), @p381='?' (DbType = Int32), @p382='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p383='?' (Size = 4000), @p384='?' (DbType = DateTime2), @p385='?' (DbType = Guid), @p386='?' (Size = 4000), @p387='?' (DbType = DateTime2), @p388='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p389='?' (Size = 4000), @p390='?' (DbType = DateTime2), @p391='?' (Size = 4000), @p392='?' (DbType = Int32), @p393='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p394='?' (Size = 4000), @p395='?' (DbType = DateTime2), @p396='?' (DbType = Guid), @p397='?' (Size = 4000), @p398='?' (DbType = DateTime2), @p399='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p400='?' (Size = 4000), @p401='?' (DbType = DateTime2), @p402='?' (Size = 4000), @p403='?' (DbType = Int32), @p404='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p405='?' (Size = 4000), @p406='?' (DbType = DateTime2), @p407='?' (DbType = Guid), @p408='?' (Size = 4000), @p409='?' (DbType = DateTime2), @p410='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p411='?' (Size = 4000), @p412='?' (DbType = DateTime2), @p413='?' (Size = 4000), @p414='?' (DbType = Int32), @p415='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p416='?' (Size = 4000), @p417='?' (DbType = DateTime2), @p418='?' (DbType = Guid), @p419='?' (Size = 4000), @p420='?' (DbType = DateTime2), @p421='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p422='?' (Size = 4000), @p423='?' (DbType = DateTime2), @p424='?' (Size = 4000), @p425='?' (DbType = Int32), @p426='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p427='?' (Size = 4000), @p428='?' (DbType = DateTime2), @p429='?' (DbType = Guid), @p430='?' (Size = 4000), @p431='?' (DbType = DateTime2), @p432='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p433='?' (Size = 4000), @p434='?' (DbType = DateTime2), @p435='?' (Size = 4000), @p436='?' (DbType = Int32), @p437='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p438='?' (Size = 4000), @p439='?' (DbType = DateTime2), @p440='?' (DbType = Guid), @p441='?' (Size = 4000), @p442='?' (DbType = DateTime2), @p443='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p444='?' (Size = 4000), @p445='?' (DbType = DateTime2), @p446='?' (Size = 4000), @p447='?' (DbType = Int32), @p448='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p449='?' (Size = 4000), @p450='?' (DbType = DateTime2), @p451='?' (DbType = Guid), @p452='?' (Size = 4000), @p453='?' (DbType = DateTime2), @p454='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p455='?' (Size = 4000), @p456='?' (DbType = DateTime2), @p457='?' (Size = 4000), @p458='?' (DbType = Int32), @p459='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p460='?' (Size = 4000), @p461='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Currencies] ([Id], [Code], [Date], [Diff], [DiffFormated], [LastUpdatedAt], [Name], [Quantity], [Rate], [RateFormated], [ValidFromDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10),
(@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21),
(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32),
(@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43),
(@p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54),
(@p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65),
(@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76),
(@p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87),
(@p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98),
(@p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109),
(@p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120),
(@p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131),
(@p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142),
(@p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153),
(@p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164),
(@p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186),
(@p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197),
(@p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207, @p208),
(@p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219),
(@p220, @p221, @p222, @p223, @p224, @p225, @p226, @p227, @p228, @p229, @p230),
(@p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239, @p240, @p241),
(@p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252),
(@p253, @p254, @p255, @p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263),
(@p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271, @p272, @p273, @p274),
(@p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285),
(@p286, @p287, @p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296),
(@p297, @p298, @p299, @p300, @p301, @p302, @p303, @p304, @p305, @p306, @p307),
(@p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318),
(@p319, @p320, @p321, @p322, @p323, @p324, @p325, @p326, @p327, @p328, @p329),
(@p330, @p331, @p332, @p333, @p334, @p335, @p336, @p337, @p338, @p339, @p340),
(@p341, @p342, @p343, @p344, @p345, @p346, @p347, @p348, @p349, @p350, @p351),
(@p352, @p353, @p354, @p355, @p356, @p357, @p358, @p359, @p360, @p361, @p362),
(@p363, @p364, @p365, @p366, @p367, @p368, @p369, @p370, @p371, @p372, @p373),
(@p374, @p375, @p376, @p377, @p378, @p379, @p380, @p381, @p382, @p383, @p384),
(@p385, @p386, @p387, @p388, @p389, @p390, @p391, @p392, @p393, @p394, @p395),
(@p396, @p397, @p398, @p399, @p400, @p401, @p402, @p403, @p404, @p405, @p406),
(@p407, @p408, @p409, @p410, @p411, @p412, @p413, @p414, @p415, @p416, @p417),
(@p418, @p419, @p420, @p421, @p422, @p423, @p424, @p425, @p426, @p427, @p428),
(@p429, @p430, @p431, @p432, @p433, @p434, @p435, @p436, @p437, @p438, @p439),
(@p440, @p441, @p442, @p443, @p444, @p445, @p446, @p447, @p448, @p449, @p450),
(@p451, @p452, @p453, @p454, @p455, @p456, @p457, @p458, @p459, @p460, @p461);
2023-04-07 11:13:52.949 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:52.950 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-07 11:13:52.953 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:13:52.954 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-07 11:13:52.956 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:13:52.957 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Currencies] ([Id], [Code], [Date], [Diff], [DiffFormated], [LastUpdatedAt], [Name], [Quantity], [Rate], [RateFormated], [ValidFromDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2023-04-07 11:13:52.961 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Currencies] ([Id], [Code], [Date], [Diff], [DiffFormated], [LastUpdatedAt], [Name], [Quantity], [Rate], [RateFormated], [ValidFromDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2023-04-07 11:13:52.963 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:52.964 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 0ms reading results.
2023-04-07 11:13:52.967 +04:00 [DBG] Committing transaction.
2023-04-07 11:13:52.970 +04:00 [DBG] Committed transaction.
2023-04-07 11:13:52.972 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:52.974 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:13:52.976 +04:00 [DBG] Disposing transaction.
2023-04-07 11:13:52.981 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.984 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.985 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.987 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.989 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.990 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.992 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.993 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.995 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.996 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:52.998 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.000 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.002 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.003 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.005 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.007 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.009 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.010 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.012 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.013 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.015 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.017 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.018 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.020 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.021 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.023 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.025 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.026 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.028 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.029 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.031 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.032 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.034 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.035 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.037 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.038 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.040 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.042 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.043 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.045 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.047 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.048 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.049 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.052 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 43 entities written to the database.
2023-04-07 11:13:53.056 +04:00 [DBG] Compiling query expression: 
'DbSet<AccountEntity>()
    .Include(a => a.UserEntity)
    .FirstOrDefault(a => a.Cards
        .Any(c => c.Id == __cardId_0))'
2023-04-07 11:13:53.061 +04:00 [DBG] Including navigation: 'AccountEntity.UserEntity'.
2023-04-07 11:13:53.081 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AccountEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<AccountEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AccountEntity.Amount (decimal) Required, 1], [Property: AccountEntity.Currency (CurrencyType) Required, 2], [Property: AccountEntity.Iban (string), 3], [Property: AccountEntity.UserId (Guid) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: UserEntity.AccessFailedCount (int) Required, 6], [Property: UserEntity.BirthDate (DateTime) Required, 7], [Property: UserEntity.ConcurrencyStamp (string) Concurrency, 8], [Property: UserEntity.Email (string) MaxLength(256), 9], [Property: UserEntity.EmailConfirmed (bool) Required, 10], [Property: UserEntity.FirstName (string), 11], [Property: UserEntity.LastName (string), 12], [Property: UserEntity.LockoutEnabled (bool) Required, 13], [Property: UserEntity.LockoutEnd (DateTimeOffset?), 14], [Property: UserEntity.NormalizedEmail (string) Index MaxLength(256), 15], [Property: UserEntity.NormalizedUserName (string) Index MaxLength(256), 16], [Property: UserEntity.PasswordHash (string), 17], [Property: UserEntity.PersonalNumber (string), 18], [Property: UserEntity.PhoneNumber (string), 19], [Property: UserEntity.PhoneNumberConfirmed (bool) Required, 20], [Property: UserEntity.RegisteredAt (DateTime) Required, 21], [Property: UserEntity.SecurityStamp (string), 22], [Property: UserEntity.TwoFactorEnabled (bool) Required, 23], [Property: UserEntity.UserName (string) MaxLength(256), 24] }
            SELECT TOP(1) a.Id, a.Amount, a.Currency, a.Iban, a.UserId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.FirstName, a0.LastName, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.PersonalNumber, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RegisteredAt, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
            FROM Accounts AS a
            INNER JOIN AspNetUsers AS a0 ON a.UserId == a0.Id
            WHERE EXISTS (
                SELECT 1
                FROM Cards AS c
                WHERE ((a.Id != NULL) && (a.Id == c.AccountId)) && (c.Id == @__cardId_0))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-07 11:13:53.087 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:13:53.088 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-07 11:13:53.089 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:13:53.091 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:53.092 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:53.093 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-07 11:13:53.102 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-07 11:13:53.106 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.117 +04:00 [DBG] The navigation 'AccountEntity.UserEntity' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.120 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:53.146 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:53.148 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 42ms reading results.
2023-04-07 11:13:53.149 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:53.150 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:13:53.158 +04:00 [DBG] Compiling query expression: 
'DbSet<TransactionEntity>()
    .Where(t => t.AccountFromId == __accountId_0 && t.CreatedAt.Date == DateTime.Now.Date && (int)t.TransactionType == 0)'
2023-04-07 11:13:53.168 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<TransactionEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TransactionEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TransactionEntity.AccountFromIban (string), 1], [Property: TransactionEntity.AccountFromId (Guid?), 2], [Property: TransactionEntity.AccountToIban (string), 3], [Property: TransactionEntity.AccountToId (Guid?), 4], [Property: TransactionEntity.CreatedAt (DateTime) Required, 5], [Property: TransactionEntity.CurrencyFrom (CurrencyType) Required, 6], [Property: TransactionEntity.CurrencyTo (CurrencyType) Required, 7], [Property: TransactionEntity.Fee (decimal) Required, 8], [Property: TransactionEntity.ReceivedAmount (decimal) Required, 9], [Property: TransactionEntity.TransactionType (TransactionType) Required, 10], [Property: TransactionEntity.WithDrawnAmount (decimal) Required, 11] }
        SELECT t.Id, t.AccountFromIban, t.AccountFromId, t.AccountToIban, t.AccountToId, t.CreatedAt, t.CurrencyFrom, t.CurrencyTo, t.Fee, t.ReceivedAmount, t.TransactionType, t.WithDrawnAmount
        FROM Transactions AS t
        WHERE ((t.AccountFromId == @__accountId_0) && (CONVERT(date, t.CreatedAt) == CONVERT(date, GETDATE()))) && (t.TransactionType == 0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TransactionEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-07 11:13:53.174 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:13:53.175 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-07 11:13:53.176 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:13:53.177 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:53.178 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:53.179 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-07 11:13:53.186 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-07 11:13:53.189 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:53.190 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-07 11:13:53.192 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:53.193 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:13:53.199 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 905.8232ms
2023-04-07 11:13:53.201 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:13:53.203 +04:00 [ERR] Cashout limit is 10000 per day
BankSystem.Atm.Exceptions.CashOutLimitExceededException: Cashout limit is 10000 per day
   at BankSystem.Atm.Services.CashoutService.ValidateCashOutAsync(AccountEntity account, Decimal totalPayment) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\CashoutService.cs:line 76
   at BankSystem.Atm.Services.CashoutService.PerformCashOutAsync(CashOutRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\CashoutService.cs:line 95
   at ATM.Api.Controllers.TransactionController.CashOut(CashOutRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\TransactionController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-07 11:13:53.231 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:13:53.233 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:53.234 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:13:53.235 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 29 - 1 - application/json 961.9995ms
2023-04-07 11:13:55.929 +04:00 [DBG] Connection id "0HMPN6U6PKV6R" received FIN.
2023-04-07 11:13:55.932 +04:00 [DBG] Connection id "0HMPN6U6PKV6R" is closed. The last processed stream ID was 11.
2023-04-07 11:13:55.932 +04:00 [DBG] The connection queue processing loop for 0HMPN6U6PKV6R completed.
2023-04-07 11:13:55.933 +04:00 [DBG] Connection id "0HMPN6U6PKV6R" sending FIN because: "The client closed the connection."
2023-04-07 11:13:55.944 +04:00 [DBG] Connection id "0HMPN6U6PKV6R" stopped.
2023-04-07 11:13:57.859 +04:00 [DBG] Connection id "0HMPN6U6PKV6S" accepted.
2023-04-07 11:13:57.861 +04:00 [DBG] Connection id "0HMPN6U6PKV6S" started.
2023-04-07 11:13:57.863 +04:00 [DBG] Connection 0HMPN6U6PKV6S established using the following protocol: "Tls12"
2023-04-07 11:13:57.864 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-07 11:13:57.865 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-07 11:13:57.866 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:13:57.867 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:13:57.867 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:13:57.868 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:13:57.869 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:13:57.870 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 6.0444ms
2023-04-07 11:13:57.871 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-07 11:13:57.872 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-07 11:13:57.873 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-07 11:13:57.874 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:13:57.875 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:13:57.876 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:13:57.877 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:13:57.878 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:13:57.879 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:13:57.880 +04:00 [DBG] Authorization was successful.
2023-04-07 11:13:57.880 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:13:57.881 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-07 11:13:57.883 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:13:57.884 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:13:57.885 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:13:57.887 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:13:57.889 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:13:57.890 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-07 11:13:57.892 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-07 11:13:57.893 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-07 11:13:57.894 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-07 11:13:57.896 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-07 11:13:57.897 +04:00 [DBG] Connection id "0HMPN6U6PKV6S", Request id "0HMPN6U6PKV6S:00000003": started reading request body.
2023-04-07 11:13:57.898 +04:00 [DBG] Connection id "0HMPN6U6PKV6S", Request id "0HMPN6U6PKV6S:00000003": done reading request body.
2023-04-07 11:13:57.899 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-07 11:13:57.900 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:13:57.901 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:13:57.902 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-07 11:13:57.903 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:13:57.906 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:13:57.907 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:13:57.908 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:13:57.909 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-07 11:13:57.910 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:13:57.911 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:13:57.912 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:57.913 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:57.914 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-07 11:13:57.917 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-07 11:13:57.919 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.920 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.922 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.923 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.924 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.926 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.927 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.928 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.930 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.931 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.932 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.933 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.935 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.936 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.937 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.939 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.940 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.942 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.943 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.944 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.945 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.946 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.947 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.949 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.950 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.951 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.953 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.954 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.955 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.957 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.958 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.959 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.961 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.962 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.963 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.964 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.965 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.966 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.968 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.969 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.970 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.974 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.975 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.976 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:57.978 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 58ms reading results.
2023-04-07 11:13:57.979 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:57.980 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:13:57.982 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:13:57.983 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-07 11:13:57.984 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:13:57.985 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:57.986 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:57.987 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-07 11:13:57.994 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-07 11:13:57.997 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.998 +04:00 [DBG] The navigation 'AccountEntity.UserEntity' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:57.999 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:58.001 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:58.002 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-07 11:13:58.003 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:58.004 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:13:58.007 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:13:58.008 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-07 11:13:58.009 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:13:58.010 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:58.011 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:58.012 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-07 11:13:58.017 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-07 11:13:58.019 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:58.021 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-07 11:13:58.023 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:58.024 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:13:58.026 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:58.055 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:58.068 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:58.071 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-07 11:13:58.072 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-07 11:13:58.094 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-07 11:13:58.108 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-07 11:13:58.109 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:58.110 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:58.111 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-07 11:13:58.112 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-07 11:13:58.113 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:13:58.114 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-07 11:13:58.116 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:13:58.118 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-07 11:13:58.129 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-07 11:13:58.134 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:58.135 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-07 11:13:58.136 +04:00 [DBG] Committing transaction.
2023-04-07 11:13:58.137 +04:00 [DBG] Committed transaction.
2023-04-07 11:13:58.138 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:58.140 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:13:58.141 +04:00 [DBG] Disposing transaction.
2023-04-07 11:13:58.143 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:58.145 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:58.147 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:58.149 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-07 11:13:58.150 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:13:58.152 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:13:58.153 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:13:58.154 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:13:58.154 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:13:58.156 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:13:58.162 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 272.4538ms
2023-04-07 11:13:58.164 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:13:58.165 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:13:58.166 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:58.167 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:13:58.168 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28 - 200 - application/json;+charset=utf-8 297.3207ms
2023-04-07 11:13:59.587 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:13:59.587 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:13:59.588 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:13:59.590 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:13:59.591 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:13:59.592 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:13:59.593 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:13:59.594 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:13:59.595 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:13:59.596 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:13:59.597 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:13:59.598 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:13:59.599 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:13:59.599 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:13:59.600 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 13.0719ms
2023-04-07 11:13:59.601 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 13.7905ms
2023-04-07 11:13:59.602 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:13:59.603 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:13:59.604 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:13:59.606 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:13:59.606 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:13:59.607 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:13:59.608 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:13:59.609 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:13:59.609 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:13:59.610 +04:00 [DBG] Authorization was successful.
2023-04-07 11:13:59.611 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:13:59.612 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:13:59.614 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:13:59.615 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:13:59.616 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:13:59.617 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:13:59.619 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:13:59.620 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:13:59.621 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:13:59.623 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:13:59.624 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:13:59.625 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:13:59.626 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-07 11:13:59.627 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:13:59.628 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:13:59.629 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:59.630 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:59.631 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:13:59.634 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:13:59.637 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:59.638 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:59.639 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:59.640 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:59.641 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-07 11:13:59.643 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:59.644 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:13:59.645 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:13:59.647 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:13:59.648 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:13:59.649 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:13:59.649 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:13:59.650 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:13:59.651 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 31.593ms
2023-04-07 11:13:59.652 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:13:59.653 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:13:59.653 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:13:59.654 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:13:59.655 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:13:59.656 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:59.657 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:13:59.659 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-07 11:13:59.659 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:13:59.660 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 58.8882ms
2023-04-07 11:13:59.661 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:13:59.663 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:13:59.664 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:13:59.664 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:13:59.665 +04:00 [DBG] Authorization was successful.
2023-04-07 11:13:59.666 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:13:59.666 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:13:59.668 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:13:59.669 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:13:59.670 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:13:59.672 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:13:59.673 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:13:59.675 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:13:59.676 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:13:59.677 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:13:59.678 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:13:59.679 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:13:59.680 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-07 11:13:59.680 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:13:59.681 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:13:59.682 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:59.683 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:59.684 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:13:59.686 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:13:59.689 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:59.691 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:59.692 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:13:59.693 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:59.694 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-07 11:13:59.695 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:59.696 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-07 11:13:59.697 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:13:59.699 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:13:59.699 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:13:59.700 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:13:59.701 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:13:59.702 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:13:59.703 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 28.572ms
2023-04-07 11:13:59.704 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:13:59.705 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:13:59.707 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:13:59.708 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:13:59.709 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 56.5304ms
2023-04-07 11:14:05.948 +04:00 [DBG] Connection id "0HMPN6U6PKV6S" received FIN.
2023-04-07 11:14:05.950 +04:00 [DBG] Connection id "0HMPN6U6PKV6S" is closed. The last processed stream ID was 11.
2023-04-07 11:14:05.950 +04:00 [DBG] The connection queue processing loop for 0HMPN6U6PKV6S completed.
2023-04-07 11:14:05.952 +04:00 [DBG] Connection id "0HMPN6U6PKV6S" sending FIN because: "The client closed the connection."
2023-04-07 11:14:05.963 +04:00 [DBG] Connection id "0HMPN6U6PKV6S" stopped.
2023-04-07 11:36:30.817 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-07 11:36:30.906 +04:00 [DBG] Hosting starting
2023-04-07 11:36:30.941 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-07 11:36:30.949 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-07 11:36:30.957 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-07 11:36:30.963 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-07 11:36:30.969 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-07 11:36:30.977 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-07 11:36:30.981 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-07 11:36:30.985 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-07 11:36:30.988 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-07 11:36:30.994 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-07 11:36:30.999 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-07 11:36:31.004 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-07 11:36:31.007 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-07 11:36:31.153 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-07 11:36:31.155 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-07 11:36:31.156 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-07 11:36:31.157 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-07 11:36:31.158 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-07 11:36:31.160 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-07 11:36:31.160 +04:00 [INF] Hosting environment: Development
2023-04-07 11:36:31.162 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-07 11:36:31.164 +04:00 [DBG] Hosting started
2023-04-07 11:36:31.655 +04:00 [DBG] Connection id "0HMPN7B799Q92" received FIN.
2023-04-07 11:36:31.655 +04:00 [DBG] Connection id "0HMPN7B799Q91" received FIN.
2023-04-07 11:36:31.673 +04:00 [DBG] Connection id "0HMPN7B799Q92" accepted.
2023-04-07 11:36:31.673 +04:00 [DBG] Connection id "0HMPN7B799Q91" accepted.
2023-04-07 11:36:31.676 +04:00 [DBG] Connection id "0HMPN7B799Q92" started.
2023-04-07 11:36:31.676 +04:00 [DBG] Connection id "0HMPN7B799Q91" started.
2023-04-07 11:36:31.689 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-07 11:36:31.689 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-07 11:36:31.723 +04:00 [DBG] Connection id "0HMPN7B799Q92" stopped.
2023-04-07 11:36:31.723 +04:00 [DBG] Connection id "0HMPN7B799Q91" stopped.
2023-04-07 11:36:31.726 +04:00 [DBG] Connection id "0HMPN7B799Q92" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-07 11:36:31.727 +04:00 [DBG] Connection id "0HMPN7B799Q91" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-07 11:36:31.852 +04:00 [DBG] Connection id "0HMPN7B799Q93" accepted.
2023-04-07 11:36:31.854 +04:00 [DBG] Connection id "0HMPN7B799Q93" started.
2023-04-07 11:36:31.908 +04:00 [DBG] Connection 0HMPN7B799Q93 established using the following protocol: "Tls12"
2023-04-07 11:36:31.973 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-07 11:36:31.997 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-07 11:36:32.020 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-07 11:36:32.023 +04:00 [DBG] Request did not match any endpoints
2023-04-07 11:36:32.212 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-07 11:36:32.229 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-07 11:36:32.234 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 263.8485ms
2023-04-07 11:36:32.259 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-07 11:36:32.267 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 7.0283ms
2023-04-07 11:36:32.288 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-07 11:36:32.314 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 26.7632ms
2023-04-07 11:36:32.451 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-07 11:36:32.454 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-07 11:36:32.456 +04:00 [DBG] Request did not match any endpoints
2023-04-07 11:36:32.568 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 116.5303ms
2023-04-07 11:36:33.722 +04:00 [DBG] Connection id "0HMPN7B799Q94" accepted.
2023-04-07 11:36:33.723 +04:00 [DBG] Connection id "0HMPN7B799Q94" started.
2023-04-07 11:36:33.731 +04:00 [DBG] Connection 0HMPN7B799Q94 established using the following protocol: "Tls12"
2023-04-07 11:36:33.735 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-07 11:36:33.739 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-07 11:36:33.742 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:36:33.745 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:36:33.749 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:36:33.751 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:36:33.752 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:36:33.754 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 19.0518ms
2023-04-07 11:36:33.756 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 45
2023-04-07 11:36:33.758 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-07 11:36:33.772 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-07 11:36:33.775 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-07 11:36:33.776 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:36:33.778 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:36:33.779 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:36:33.808 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-07 11:36:33.815 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-07 11:36:33.841 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:36:33.845 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:36:33.848 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:36:33.850 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:36:33.852 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:36:33.854 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:36:33.857 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:36:34.015 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-07 11:36:34.037 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:36:34.047 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-07 11:36:34.051 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-07 11:36:34.054 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-07 11:36:34.060 +04:00 [DBG] Connection id "0HMPN7B799Q94", Request id "0HMPN7B799Q94:00000003": started reading request body.
2023-04-07 11:36:34.062 +04:00 [DBG] Connection id "0HMPN7B799Q94", Request id "0HMPN7B799Q94:00000003": done reading request body.
2023-04-07 11:36:34.068 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-07 11:36:34.071 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-07 11:36:34.073 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-07 11:36:34.075 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-07 11:36:34.084 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-07 11:36:34.496 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2023-04-07 11:36:34.499 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2023-04-07 11:36:34.822 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:36:34.906 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.CardNumber == __request_CardNumber_0 && c.Pin == __request_Pin_1)'
2023-04-07 11:36:34.959 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-07 11:36:35.104 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE (c.CardNumber == @__request_CardNumber_0) && (c.Pin == @__request_Pin_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-07 11:36:35.145 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:36:35.148 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:36:35.172 +04:00 [DBG] Created DbConnection. (22ms).
2023-04-07 11:36:35.181 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (34ms).
2023-04-07 11:36:35.191 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (46ms).
2023-04-07 11:36:35.195 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:36:35.347 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:36:35.356 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-07 11:36:35.397 +04:00 [INF] Executed DbCommand (43ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-07 11:36:35.421 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:36:35.454 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:36:35.463 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:36:35.477 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:36:35.483 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 79ms reading results.
2023-04-07 11:36:35.487 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:36:35.493 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (5ms).
2023-04-07 11:36:35.578 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:36:35.582 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:36:35.582 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:36:35.583 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:36:35.585 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:36:35.587 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:36:35.600 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 1741.8518ms
2023-04-07 11:36:35.602 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-07 11:36:35.606 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:36:35.610 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:36:35.612 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-07 11:36:35.614 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 45 - 200 - application/json;+charset=utf-8 1858.5628ms
2023-04-07 11:36:51.087 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:36:51.087 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:36:51.088 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:36:51.089 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:36:51.091 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:36:51.093 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:36:51.095 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:36:51.097 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:36:51.099 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:36:51.099 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:36:51.100 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:36:51.101 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:36:51.103 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:36:51.103 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:36:51.104 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 17.6335ms
2023-04-07 11:36:51.105 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 18.5840ms
2023-04-07 11:36:51.106 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:36:51.109 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:36:51.110 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:36:51.113 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:36:51.114 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:36:51.116 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:36:51.117 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:36:51.166 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:36:51.169 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:36:51.175 +04:00 [DBG] Authorization was successful.
2023-04-07 11:36:51.178 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:36:51.183 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:36:51.186 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:36:51.187 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:36:51.189 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:36:51.191 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:36:51.194 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:36:51.196 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:36:51.200 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:36:51.226 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:36:51.230 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.Id == __cardId_0)'
2023-04-07 11:36:51.234 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-07 11:36:51.243 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-07 11:36:51.250 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:36:51.252 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:36:51.253 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:36:51.254 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2023-04-07 11:36:51.256 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2023-04-07 11:36:51.258 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:36:51.260 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:36:51.262 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:36:51.271 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:36:51.276 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:36:51.278 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:36:51.280 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:36:51.283 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:36:51.285 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 9ms reading results.
2023-04-07 11:36:51.288 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:36:51.290 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:36:51.292 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:36:51.295 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:36:51.296 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:36:51.298 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:36:51.300 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:36:51.301 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:36:51.306 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 110.1576ms
2023-04-07 11:36:51.308 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:36:51.308 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:36:51.309 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:36:51.311 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:36:51.312 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:36:51.313 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:36:51.315 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:36:51.317 +04:00 [DBG] Disposed connection to database '' on server '' (3ms).
2023-04-07 11:36:51.318 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:36:51.320 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 213.6042ms
2023-04-07 11:36:51.321 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:36:51.323 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:36:51.326 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:36:51.327 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:36:51.330 +04:00 [DBG] Authorization was successful.
2023-04-07 11:36:51.332 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:36:51.334 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:36:51.336 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:36:51.337 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:36:51.339 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:36:51.341 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:36:51.342 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:36:51.343 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:36:51.346 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:36:51.397 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:36:51.404 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:36:51.405 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:36:51.407 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:36:51.408 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2023-04-07 11:36:51.410 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:36:51.411 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:36:51.412 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:36:51.414 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:36:51.419 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:36:51.422 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:36:51.424 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:36:51.425 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:36:51.427 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:36:51.429 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 7ms reading results.
2023-04-07 11:36:51.431 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:36:51.433 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:36:51.434 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:36:51.436 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:36:51.437 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:36:51.438 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:36:51.439 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:36:51.440 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:36:51.442 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 98.5405ms
2023-04-07 11:36:51.443 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:36:51.444 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:36:51.446 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:36:51.448 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:36:51.449 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 141.6101ms
2023-04-07 11:37:20.069 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-07 11:37:20.070 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-07 11:37:20.072 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:37:20.074 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:37:20.075 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:37:20.076 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:37:20.077 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:37:20.078 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 9.6368ms
2023-04-07 11:37:20.081 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-07 11:37:20.082 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-07 11:37:20.084 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-07 11:37:20.086 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-07 11:37:20.087 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:37:20.088 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:37:20.089 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:37:20.091 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:37:20.091 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:37:20.093 +04:00 [DBG] Authorization was successful.
2023-04-07 11:37:20.094 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-07 11:37:20.098 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:37:20.102 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:37:20.104 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:37:20.105 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:37:20.108 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:37:20.109 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:37:20.111 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:37:20.114 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:37:20.117 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-07 11:37:20.119 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-07 11:37:20.120 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-07 11:37:20.123 +04:00 [DBG] Connection id "0HMPN7B799Q94", Request id "0HMPN7B799Q94:0000000F": started reading request body.
2023-04-07 11:37:20.124 +04:00 [DBG] Connection id "0HMPN7B799Q94", Request id "0HMPN7B799Q94:0000000F": done reading request body.
2023-04-07 11:37:20.126 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-07 11:37:20.128 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-07 11:37:20.130 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-07 11:37:20.132 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-07 11:37:20.136 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-07 11:37:20.141 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:37:20.144 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .FirstOrDefault(c => c.Id == __cardId_0)'
2023-04-07 11:37:20.150 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin
            FROM Cards AS c
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-07 11:37:20.153 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:37:20.154 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:37:20.155 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:37:20.157 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:37:20.158 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-07 11:37:20.160 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:20.161 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:20.163 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:37:20.181 +04:00 [INF] Executed DbCommand (18ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:37:20.185 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:37:20.186 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:20.187 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-07 11:37:20.188 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:20.190 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:37:20.192 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 80.5488ms
2023-04-07 11:37:20.193 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-07 11:37:20.204 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-07 11:37:20.284 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:37:20.285 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:20.287 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:37:20.288 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 1 - application/json 207.0279ms
2023-04-07 11:37:23.492 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-07 11:37:23.494 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-07 11:37:23.495 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-07 11:37:23.498 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-07 11:37:23.500 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:37:23.501 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:37:23.502 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:37:23.503 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:37:23.504 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:37:23.505 +04:00 [DBG] Authorization was successful.
2023-04-07 11:37:23.506 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-07 11:37:23.508 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:37:23.510 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:37:23.512 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:37:23.514 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:37:23.517 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:37:23.519 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:37:23.521 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:37:23.523 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:37:23.524 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-07 11:37:23.526 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-07 11:37:23.528 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-07 11:37:23.531 +04:00 [DBG] Connection id "0HMPN7B799Q94", Request id "0HMPN7B799Q94:00000011": started reading request body.
2023-04-07 11:37:23.533 +04:00 [DBG] Connection id "0HMPN7B799Q94", Request id "0HMPN7B799Q94:00000011": done reading request body.
2023-04-07 11:37:23.534 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-07 11:37:23.536 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-07 11:37:23.537 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-07 11:37:23.539 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-07 11:37:23.541 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-07 11:37:23.543 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:37:23.547 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:37:23.549 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:37:23.550 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-07 11:37:23.551 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:37:23.553 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:37:23.554 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:23.556 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:23.557 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:37:23.562 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:37:23.566 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:37:23.568 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:23.569 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-07 11:37:23.571 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:23.573 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:37:23.583 +04:00 [DBG] An entity of type 'CardEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:37:23.590 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-07 11:37:23.594 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-07 11:37:23.603 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-07 11:37:23.685 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:23.687 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:23.691 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:37:23.692 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-07 11:37:23.695 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:37:23.696 +04:00 [DBG] Executing DbCommand [Parameters=[@p7='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Cards] SET [AccountId] = @p0, [CardNumber] = @p1, [CreatedAt] = @p2, [Cvv] = @p3, [ExpiresAt] = @p4, [FullName] = @p5, [Pin] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2023-04-07 11:37:23.705 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p7='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Cards] SET [AccountId] = @p0, [CardNumber] = @p1, [CreatedAt] = @p2, [Cvv] = @p3, [ExpiresAt] = @p4, [FullName] = @p5, [Pin] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2023-04-07 11:37:23.714 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:23.716 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 7ms reading results.
2023-04-07 11:37:23.719 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:23.721 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (2ms).
2023-04-07 11:37:23.725 +04:00 [DBG] An entity of type 'CardEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:37:23.729 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 1 entities written to the database.
2023-04-07 11:37:23.732 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:37:23.735 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:37:23.736 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:37:23.737 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:37:23.738 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:37:23.739 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:37:23.740 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 219.2985ms
2023-04-07 11:37:23.742 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-07 11:37:23.743 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:37:23.744 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:23.745 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:37:23.747 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 200 - application/json;+charset=utf-8 255.0619ms
2023-04-07 11:37:33.720 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-07 11:37:33.721 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-07 11:37:33.722 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:37:33.723 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:37:33.724 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:37:33.725 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:37:33.726 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:37:33.726 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 6.3769ms
2023-04-07 11:37:33.728 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 45
2023-04-07 11:37:33.729 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-07 11:37:33.731 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-07 11:37:33.732 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-07 11:37:33.733 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:37:33.734 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:37:33.735 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:37:33.736 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-07 11:37:33.737 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-07 11:37:33.738 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:37:33.740 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:37:33.742 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:37:33.743 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:37:33.745 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:37:33.747 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:37:33.748 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:37:33.749 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:37:33.750 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-07 11:37:33.752 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-07 11:37:33.753 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-07 11:37:33.754 +04:00 [DBG] Connection id "0HMPN7B799Q94", Request id "0HMPN7B799Q94:00000015": started reading request body.
2023-04-07 11:37:33.755 +04:00 [DBG] Connection id "0HMPN7B799Q94", Request id "0HMPN7B799Q94:00000015": done reading request body.
2023-04-07 11:37:33.756 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-07 11:37:33.758 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-07 11:37:33.759 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-07 11:37:33.760 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-07 11:37:33.761 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-07 11:37:33.764 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:37:33.767 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:37:33.768 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:37:33.769 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-07 11:37:33.770 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:37:33.771 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-07 11:37:33.772 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:33.773 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:33.775 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-07 11:37:33.780 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-07 11:37:33.783 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:37:33.785 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:37:33.786 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:37:33.788 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:33.789 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-07 11:37:33.790 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:33.791 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:37:33.793 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:37:33.796 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:37:33.796 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:37:33.798 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:37:33.798 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:37:33.800 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:37:33.801 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 52.6129ms
2023-04-07 11:37:33.802 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-07 11:37:33.803 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:37:33.804 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:33.806 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:37:33.807 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 45 - 200 - application/json;+charset=utf-8 79.2959ms
2023-04-07 11:37:44.705 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-07 11:37:44.707 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-07 11:37:44.708 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:37:44.709 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:37:44.710 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:37:44.711 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:37:44.712 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:37:44.713 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 7.4786ms
2023-04-07 11:37:44.715 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 45
2023-04-07 11:37:44.717 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-07 11:37:44.718 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-07 11:37:44.720 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-07 11:37:44.721 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:37:44.722 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:37:44.724 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:37:44.725 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-07 11:37:44.726 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-07 11:37:44.727 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:37:44.728 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:37:44.731 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:37:44.733 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:37:44.736 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:37:44.737 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:37:44.739 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:37:44.740 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:37:44.741 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-07 11:37:44.742 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-07 11:37:44.743 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-07 11:37:44.745 +04:00 [DBG] Connection id "0HMPN7B799Q94", Request id "0HMPN7B799Q94:00000019": started reading request body.
2023-04-07 11:37:44.747 +04:00 [DBG] Connection id "0HMPN7B799Q94", Request id "0HMPN7B799Q94:00000019": done reading request body.
2023-04-07 11:37:44.749 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-07 11:37:44.751 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-07 11:37:44.752 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-07 11:37:44.753 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-07 11:37:44.755 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-07 11:37:44.757 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:37:44.759 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:37:44.760 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:37:44.761 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-07 11:37:44.762 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:37:44.764 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-07 11:37:44.765 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:44.767 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:44.768 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-07 11:37:44.771 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-07 11:37:44.774 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:37:44.776 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:37:44.777 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:37:44.778 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:44.780 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 6ms reading results.
2023-04-07 11:37:44.783 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:44.785 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:37:44.787 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:37:44.790 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:37:44.790 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:37:44.792 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:37:44.793 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:37:44.794 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:37:44.796 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 57.5752ms
2023-04-07 11:37:44.799 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-07 11:37:44.800 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:37:44.801 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:37:44.803 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:37:44.804 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 45 - 200 - application/json;+charset=utf-8 88.8840ms
2023-04-07 11:38:16.268 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:38:16.268 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:38:16.270 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:38:16.271 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:38:16.272 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:38:16.274 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:38:16.275 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:38:16.276 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:38:16.277 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:38:16.278 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:38:16.281 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:38:16.282 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:38:16.283 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:38:16.284 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:38:16.286 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 17.7021ms
2023-04-07 11:38:16.287 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 18.6322ms
2023-04-07 11:38:16.288 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:38:16.290 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:38:16.291 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:38:16.292 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:38:16.293 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:38:16.294 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:38:16.296 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:38:16.298 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:38:16.299 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:38:16.300 +04:00 [DBG] Authorization was successful.
2023-04-07 11:38:16.301 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:38:16.302 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:38:16.305 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:38:16.306 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:38:16.308 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:38:16.311 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:38:16.314 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:38:16.316 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:38:16.317 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:38:16.319 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:38:16.322 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:38:16.324 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:38:16.325 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:38:16.326 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2023-04-07 11:38:16.328 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:38:16.330 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:16.332 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:16.334 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:38:16.339 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:38:16.343 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:38:16.346 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:38:16.348 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:38:16.350 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:16.352 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 9ms reading results.
2023-04-07 11:38:16.354 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:16.356 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:38:16.358 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:38:16.361 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:38:16.363 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:38:16.365 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:38:16.366 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:38:16.367 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:38:16.369 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 53.4379ms
2023-04-07 11:38:16.371 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:38:16.371 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:38:16.373 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:38:16.374 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:38:16.376 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:38:16.377 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:16.379 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:38:16.380 +04:00 [DBG] Disposed connection to database '' on server '' (3ms).
2023-04-07 11:38:16.381 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:38:16.383 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 94.8545ms
2023-04-07 11:38:16.384 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:38:16.386 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:38:16.388 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:38:16.389 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:38:16.391 +04:00 [DBG] Authorization was successful.
2023-04-07 11:38:16.391 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:38:16.393 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:38:16.395 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:38:16.397 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:38:16.399 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:38:16.402 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:38:16.403 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:38:16.406 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:38:16.407 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:38:16.409 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:38:16.411 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:38:16.413 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:38:16.414 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:38:16.415 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:38:16.417 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:38:16.418 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:16.421 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:16.422 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:38:16.426 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:38:16.430 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:38:16.432 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:38:16.433 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:38:16.435 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:16.437 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 7ms reading results.
2023-04-07 11:38:16.439 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:16.441 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:38:16.443 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:38:16.446 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:38:16.447 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:38:16.449 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:38:16.450 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:38:16.452 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:38:16.453 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 47.8597ms
2023-04-07 11:38:16.455 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:38:16.456 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:38:16.458 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:16.459 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:38:16.461 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 90.3287ms
2023-04-07 11:38:32.506 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:38:32.507 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:38:32.508 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:38:32.509 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:38:32.511 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:38:32.514 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:38:32.516 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:38:32.517 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:38:32.518 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:38:32.519 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:38:32.520 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:38:32.521 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:38:32.522 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:38:32.523 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:38:32.524 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 17.7330ms
2023-04-07 11:38:32.525 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 17.8597ms
2023-04-07 11:38:32.526 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:38:32.529 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:38:32.531 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:38:32.533 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:38:32.534 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:38:32.535 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:38:32.536 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:38:32.537 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:38:32.538 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:38:32.539 +04:00 [DBG] Authorization was successful.
2023-04-07 11:38:32.540 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:38:32.542 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:38:32.544 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:38:32.547 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:38:32.549 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:38:32.551 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:38:32.552 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:38:32.554 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:38:32.555 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:38:32.557 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:38:32.560 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:38:32.561 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:38:32.562 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:38:32.564 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:38:32.565 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:38:32.566 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:32.567 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:32.568 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:38:32.574 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:38:32.578 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:38:32.580 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:38:32.582 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:38:32.584 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:32.585 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 7ms reading results.
2023-04-07 11:38:32.587 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:32.589 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:38:32.591 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:38:32.595 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:38:32.596 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:38:32.598 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:38:32.599 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:38:32.601 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:38:32.603 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 49.0651ms
2023-04-07 11:38:32.604 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:38:32.604 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:38:32.606 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:38:32.607 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:38:32.609 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:38:32.610 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:32.613 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:38:32.615 +04:00 [DBG] Disposed connection to database '' on server '' (4ms).
2023-04-07 11:38:32.616 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:38:32.618 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 92.1182ms
2023-04-07 11:38:32.620 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:38:32.623 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:38:32.625 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:38:32.625 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:38:32.627 +04:00 [DBG] Authorization was successful.
2023-04-07 11:38:32.627 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:38:32.629 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:38:32.632 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:38:32.634 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:38:32.635 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:38:32.638 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:38:32.639 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:38:32.641 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:38:32.642 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:38:32.644 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:38:32.647 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:38:32.648 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:38:32.650 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:38:32.651 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:38:32.652 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:38:32.654 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:32.656 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:32.657 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:38:32.660 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:38:32.664 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:38:32.666 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:38:32.667 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:38:32.670 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:32.671 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 7ms reading results.
2023-04-07 11:38:32.673 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:32.674 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:38:32.675 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:38:32.678 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:38:32.680 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:38:32.682 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:38:32.682 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:38:32.684 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:38:32.685 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 44.4681ms
2023-04-07 11:38:32.688 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:38:32.689 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:38:32.691 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:38:32.692 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:38:32.695 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 90.7251ms
2023-04-07 11:38:44.094 +04:00 [DBG] Connection id "0HMPN7B799Q93" is closing.
2023-04-07 11:38:44.095 +04:00 [DBG] Connection id "0HMPN7B799Q93" is closed. The last processed stream ID was 7.
2023-04-07 11:38:44.098 +04:00 [DBG] Connection id "0HMPN7B799Q93" received FIN.
2023-04-07 11:38:44.100 +04:00 [DBG] The connection queue processing loop for 0HMPN7B799Q93 completed.
2023-04-07 11:38:44.100 +04:00 [DBG] Connection id "0HMPN7B799Q93" sending FIN because: "The client closed the connection."
2023-04-07 11:38:44.108 +04:00 [DBG] Connection id "0HMPN7B799Q93" stopped.
2023-04-07 11:40:44.993 +04:00 [DBG] Connection id "0HMPN7B799Q94" is closing.
2023-04-07 11:40:44.995 +04:00 [DBG] Connection id "0HMPN7B799Q94" is closed. The last processed stream ID was 41.
2023-04-07 11:40:44.997 +04:00 [DBG] The connection queue processing loop for 0HMPN7B799Q94 completed.
2023-04-07 11:40:44.997 +04:00 [DBG] Connection id "0HMPN7B799Q94" received FIN.
2023-04-07 11:40:44.998 +04:00 [DBG] Connection id "0HMPN7B799Q94" stopped.
2023-04-07 11:40:45.000 +04:00 [DBG] Connection id "0HMPN7B799Q94" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-07 11:41:33.871 +04:00 [DBG] Connection id "0HMPN7B799Q95" accepted.
2023-04-07 11:41:33.872 +04:00 [DBG] Connection id "0HMPN7B799Q95" started.
2023-04-07 11:41:33.874 +04:00 [DBG] Connection 0HMPN7B799Q95 established using the following protocol: "Tls12"
2023-04-07 11:41:33.877 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-07 11:41:33.878 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-07 11:41:33.879 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:41:33.880 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:41:33.881 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:41:33.882 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:41:33.883 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:41:33.883 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 6.3691ms
2023-04-07 11:41:33.885 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-07 11:41:33.886 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-07 11:41:33.887 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-07 11:41:33.888 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:41:33.889 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:41:33.890 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:41:33.891 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:41:33.893 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:41:33.894 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:41:33.895 +04:00 [DBG] Authorization was successful.
2023-04-07 11:41:33.896 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:41:33.900 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-07 11:41:33.902 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:41:33.904 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:41:33.905 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:41:33.907 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:41:33.909 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:41:33.912 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-07 11:41:33.914 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-07 11:41:33.915 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-07 11:41:33.916 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-07 11:41:33.918 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-07 11:41:33.923 +04:00 [DBG] Connection id "0HMPN7B799Q95", Request id "0HMPN7B799Q95:00000003": started reading request body.
2023-04-07 11:41:33.927 +04:00 [DBG] Connection id "0HMPN7B799Q95", Request id "0HMPN7B799Q95:00000003": done reading request body.
2023-04-07 11:41:33.944 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-07 11:41:33.945 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:41:33.946 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:41:33.948 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-07 11:41:33.960 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:41:33.967 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:41:33.971 +04:00 [DBG] Compiling query expression: 
'DbSet<CurrencyEntity>()'
2023-04-07 11:41:33.978 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CurrencyEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CurrencyEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CurrencyEntity.Code (string), 1], [Property: CurrencyEntity.Date (DateTime) Required, 2], [Property: CurrencyEntity.Diff (decimal) Required, 3], [Property: CurrencyEntity.DiffFormated (string), 4], [Property: CurrencyEntity.LastUpdatedAt (DateTime) Required, 5], [Property: CurrencyEntity.Name (string), 6], [Property: CurrencyEntity.Quantity (int) Required, 7], [Property: CurrencyEntity.Rate (decimal) Required, 8], [Property: CurrencyEntity.RateFormated (string), 9], [Property: CurrencyEntity.ValidFromDate (DateTime) Required, 10] }
        SELECT c.Id, c.Code, c.Date, c.Diff, c.DiffFormated, c.LastUpdatedAt, c.Name, c.Quantity, c.Rate, c.RateFormated, c.ValidFromDate
        FROM Currencies AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CurrencyEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-07 11:41:33.983 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:41:33.984 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:41:33.985 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-07 11:41:33.987 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:41:33.989 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:41:33.990 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:33.993 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:33.995 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-07 11:41:33.999 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-07 11:41:34.005 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.024 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.026 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.029 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.030 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.032 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.034 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.035 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.037 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.038 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.039 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.041 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.043 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.046 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.047 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.048 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.051 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.053 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.054 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.056 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.057 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.059 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.061 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.063 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.065 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.067 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.069 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.071 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.072 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.074 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.076 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.078 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.079 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.081 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.083 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.085 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.087 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.089 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.092 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.094 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.096 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.101 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.103 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.105 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:34.106 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 104ms reading results.
2023-04-07 11:41:34.108 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:34.110 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:41:34.117 +04:00 [DBG] Compiling query expression: 
'DbSet<AccountEntity>()
    .Include(a => a.UserEntity)
    .FirstOrDefault(a => a.Cards
        .Any(c => c.Id == __cardId_0))'
2023-04-07 11:41:34.123 +04:00 [DBG] Including navigation: 'AccountEntity.UserEntity'.
2023-04-07 11:41:34.155 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AccountEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<AccountEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AccountEntity.Amount (decimal) Required, 1], [Property: AccountEntity.Currency (CurrencyType) Required, 2], [Property: AccountEntity.Iban (string), 3], [Property: AccountEntity.UserId (Guid) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: UserEntity.AccessFailedCount (int) Required, 6], [Property: UserEntity.BirthDate (DateTime) Required, 7], [Property: UserEntity.ConcurrencyStamp (string) Concurrency, 8], [Property: UserEntity.Email (string) MaxLength(256), 9], [Property: UserEntity.EmailConfirmed (bool) Required, 10], [Property: UserEntity.FirstName (string), 11], [Property: UserEntity.LastName (string), 12], [Property: UserEntity.LockoutEnabled (bool) Required, 13], [Property: UserEntity.LockoutEnd (DateTimeOffset?), 14], [Property: UserEntity.NormalizedEmail (string) Index MaxLength(256), 15], [Property: UserEntity.NormalizedUserName (string) Index MaxLength(256), 16], [Property: UserEntity.PasswordHash (string), 17], [Property: UserEntity.PersonalNumber (string), 18], [Property: UserEntity.PhoneNumber (string), 19], [Property: UserEntity.PhoneNumberConfirmed (bool) Required, 20], [Property: UserEntity.RegisteredAt (DateTime) Required, 21], [Property: UserEntity.SecurityStamp (string), 22], [Property: UserEntity.TwoFactorEnabled (bool) Required, 23], [Property: UserEntity.UserName (string) MaxLength(256), 24] }
            SELECT TOP(1) a.Id, a.Amount, a.Currency, a.Iban, a.UserId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.FirstName, a0.LastName, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.PersonalNumber, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RegisteredAt, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
            FROM Accounts AS a
            INNER JOIN AspNetUsers AS a0 ON a.UserId == a0.Id
            WHERE EXISTS (
                SELECT 1
                FROM Cards AS c
                WHERE ((a.Id != NULL) && (a.Id == c.AccountId)) && (c.Id == @__cardId_0))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-07 11:41:34.163 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:41:34.165 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-07 11:41:34.167 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:41:34.168 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:34.170 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:34.171 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-07 11:41:34.180 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-07 11:41:34.186 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.201 +04:00 [DBG] The navigation 'AccountEntity.UserEntity' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.204 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.237 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:34.240 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 54ms reading results.
2023-04-07 11:41:34.243 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:34.244 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:41:34.256 +04:00 [DBG] Compiling query expression: 
'DbSet<TransactionEntity>()
    .Where(t => t.AccountFromId == __accountId_0 && t.CreatedAt.Date == DateTime.Now.Date && (int)t.TransactionType == 0)'
2023-04-07 11:41:34.271 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<TransactionEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TransactionEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TransactionEntity.AccountFromIban (string), 1], [Property: TransactionEntity.AccountFromId (Guid?), 2], [Property: TransactionEntity.AccountToIban (string), 3], [Property: TransactionEntity.AccountToId (Guid?), 4], [Property: TransactionEntity.CreatedAt (DateTime) Required, 5], [Property: TransactionEntity.CurrencyFrom (CurrencyType) Required, 6], [Property: TransactionEntity.CurrencyTo (CurrencyType) Required, 7], [Property: TransactionEntity.Fee (decimal) Required, 8], [Property: TransactionEntity.ReceivedAmount (decimal) Required, 9], [Property: TransactionEntity.TransactionType (TransactionType) Required, 10], [Property: TransactionEntity.WithDrawnAmount (decimal) Required, 11] }
        SELECT t.Id, t.AccountFromIban, t.AccountFromId, t.AccountToIban, t.AccountToId, t.CreatedAt, t.CurrencyFrom, t.CurrencyTo, t.Fee, t.ReceivedAmount, t.TransactionType, t.WithDrawnAmount
        FROM Transactions AS t
        WHERE ((t.AccountFromId == @__accountId_0) && (CONVERT(date, t.CreatedAt) == CONVERT(date, GETDATE()))) && (t.TransactionType == 0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TransactionEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-07 11:41:34.281 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:41:34.283 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:41:34.285 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:41:34.287 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:34.289 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:34.290 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-07 11:41:34.297 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-07 11:41:34.302 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:34.304 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-07 11:41:34.309 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:34.313 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (3ms).
2023-04-07 11:41:34.320 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.361 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.378 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.381 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-07 11:41:34.383 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-07 11:41:34.417 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-07 11:41:34.447 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-07 11:41:34.451 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:34.453 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:34.457 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-07 11:41:34.465 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-07 11:41:34.467 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:41:34.468 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-07 11:41:34.473 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:41:34.475 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-07 11:41:34.491 +04:00 [INF] Executed DbCommand (16ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-07 11:41:34.497 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:34.498 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-07 11:41:34.503 +04:00 [DBG] Committing transaction.
2023-04-07 11:41:34.509 +04:00 [DBG] Committed transaction.
2023-04-07 11:41:34.513 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:34.515 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:41:34.519 +04:00 [DBG] Disposing transaction.
2023-04-07 11:41:34.522 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.525 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.529 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:34.531 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-07 11:41:34.533 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:41:34.537 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:41:34.537 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:41:34.539 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:41:34.540 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:41:34.543 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:41:34.553 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 640.9219ms
2023-04-07 11:41:34.555 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:41:34.556 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:41:34.558 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:34.560 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-07 11:41:34.562 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28 - 200 - application/json;+charset=utf-8 677.0263ms
2023-04-07 11:41:36.332 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:41:36.333 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:41:36.333 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:41:36.334 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:41:36.335 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:41:36.337 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:41:36.339 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:41:36.340 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:41:36.341 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:41:36.344 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:41:36.346 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:41:36.347 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:41:36.348 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:41:36.349 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:41:36.350 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 18.5636ms
2023-04-07 11:41:36.351 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 18.3460ms
2023-04-07 11:41:36.353 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:41:36.355 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:41:36.356 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:41:36.358 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:41:36.360 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:41:36.362 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:41:36.363 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:41:36.364 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:41:36.365 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:41:36.367 +04:00 [DBG] Authorization was successful.
2023-04-07 11:41:36.368 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:41:36.369 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:41:36.372 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:41:36.374 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:41:36.376 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:41:36.379 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:41:36.381 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:41:36.383 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:41:36.385 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:41:36.387 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:41:36.390 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:41:36.393 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:41:36.394 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:41:36.396 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:41:36.398 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2023-04-07 11:41:36.399 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:36.401 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:36.403 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:41:36.409 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:41:36.414 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:36.416 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:36.417 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:36.419 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:36.421 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 7ms reading results.
2023-04-07 11:41:36.423 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:36.425 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (2ms).
2023-04-07 11:41:36.427 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:41:36.431 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:41:36.432 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:41:36.433 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:41:36.434 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:41:36.436 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:41:36.437 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 54.1894ms
2023-04-07 11:41:36.439 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:41:36.439 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:41:36.441 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:41:36.444 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:41:36.446 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:41:36.447 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:36.449 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:41:36.451 +04:00 [DBG] Disposed connection to database '' on server '' (3ms).
2023-04-07 11:41:36.452 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:41:36.454 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 101.0402ms
2023-04-07 11:41:36.455 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:41:36.458 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:41:36.460 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:41:36.461 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:41:36.462 +04:00 [DBG] Authorization was successful.
2023-04-07 11:41:36.463 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:41:36.464 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:41:36.467 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:41:36.468 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:41:36.470 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:41:36.473 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:41:36.475 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:41:36.478 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:41:36.479 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:41:36.481 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:41:36.484 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:41:36.485 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:41:36.486 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:41:36.488 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:41:36.489 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:41:36.491 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:36.494 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:36.495 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:41:36.499 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:41:36.502 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:36.505 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:36.507 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:36.510 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:36.512 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 9ms reading results.
2023-04-07 11:41:36.514 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:36.515 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:41:36.517 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:41:36.521 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:41:36.522 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:41:36.523 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:41:36.524 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:41:36.526 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:41:36.528 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 50.3096ms
2023-04-07 11:41:36.530 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:41:36.531 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:41:36.533 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:36.535 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-07 11:41:36.537 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 98.2987ms
2023-04-07 11:41:59.843 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:41:59.844 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:41:59.846 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:41:59.847 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:41:59.849 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:41:59.850 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:41:59.851 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:41:59.852 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:41:59.853 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:41:59.854 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:41:59.855 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:41:59.856 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:41:59.857 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:41:59.859 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:41:59.861 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 17.8488ms
2023-04-07 11:41:59.862 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 18.1131ms
2023-04-07 11:41:59.863 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:41:59.865 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:41:59.866 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:41:59.868 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:41:59.870 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:41:59.871 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:41:59.872 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:41:59.873 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:41:59.875 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:41:59.877 +04:00 [DBG] Authorization was successful.
2023-04-07 11:41:59.878 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:41:59.879 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:41:59.882 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:41:59.884 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:41:59.885 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:41:59.888 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:41:59.889 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:41:59.892 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:41:59.894 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:41:59.896 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:41:59.898 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:41:59.899 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:41:59.900 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-07 11:41:59.901 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:41:59.902 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:41:59.904 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:59.905 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:59.908 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:41:59.914 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:41:59.918 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:59.920 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:59.921 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:59.922 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:59.924 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-07 11:41:59.926 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:59.928 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:41:59.929 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:41:59.931 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:41:59.932 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:41:59.933 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:41:59.934 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:41:59.935 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:41:59.936 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 44.1817ms
2023-04-07 11:41:59.938 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:41:59.938 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:41:59.940 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:41:59.941 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:41:59.943 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:41:59.944 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:59.946 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:41:59.947 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-07 11:41:59.948 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:41:59.950 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 86.5505ms
2023-04-07 11:41:59.951 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:41:59.954 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:41:59.955 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:41:59.956 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:41:59.958 +04:00 [DBG] Authorization was successful.
2023-04-07 11:41:59.959 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:41:59.961 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:41:59.963 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:41:59.965 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:41:59.966 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:41:59.969 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:41:59.971 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:41:59.973 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:41:59.975 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:41:59.978 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:41:59.980 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:41:59.982 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:41:59.982 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-07 11:41:59.984 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:41:59.986 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:41:59.987 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:59.989 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:41:59.990 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:41:59.993 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:41:59.996 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:59.998 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:41:59.999 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:42:00.001 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:42:00.003 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 7ms reading results.
2023-04-07 11:42:00.006 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:42:00.008 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (2ms).
2023-04-07 11:42:00.011 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:42:00.014 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:42:00.014 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:42:00.015 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:42:00.017 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:42:00.019 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:42:00.020 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 47.2049ms
2023-04-07 11:42:00.022 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:42:00.023 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:42:00.025 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:42:00.027 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:42:00.028 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 90.2295ms
2023-04-07 11:42:29.266 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:42:29.267 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:42:29.268 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:42:29.269 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:42:29.271 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:42:29.272 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:42:29.274 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:42:29.278 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:42:29.279 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:42:29.280 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:42:29.281 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:42:29.282 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:42:29.283 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:42:29.284 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:42:29.285 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 18.2541ms
2023-04-07 11:42:29.286 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 18.8042ms
2023-04-07 11:42:29.287 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:42:29.289 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:42:29.290 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:42:29.293 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:42:29.295 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:42:29.296 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:42:29.297 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:42:29.298 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:42:29.299 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:42:29.301 +04:00 [DBG] Authorization was successful.
2023-04-07 11:42:29.302 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:42:29.303 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:42:29.305 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:42:29.306 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:42:29.309 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:42:29.312 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:42:29.313 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:42:29.315 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:42:29.317 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:42:29.319 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:42:29.321 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:42:29.323 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:42:29.325 +04:00 [DBG] Created DbConnection. (2ms).
2023-04-07 11:42:29.328 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2023-04-07 11:42:29.329 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2023-04-07 11:42:29.330 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:42:29.331 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:42:29.333 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:42:29.335 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:42:29.339 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:42:29.341 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:42:29.343 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:42:29.345 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:42:29.347 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 8ms reading results.
2023-04-07 11:42:29.349 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:42:29.350 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:42:29.352 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:42:29.355 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:42:29.356 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:42:29.359 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:42:29.360 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:42:29.361 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:42:29.363 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 47.17ms
2023-04-07 11:42:29.364 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:42:29.364 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:42:29.366 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:42:29.367 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:42:29.369 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:42:29.370 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:42:29.373 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:42:29.376 +04:00 [DBG] Disposed connection to database '' on server '' (5ms).
2023-04-07 11:42:29.377 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:42:29.379 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 91.0675ms
2023-04-07 11:42:29.379 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:42:29.382 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:42:29.383 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:42:29.384 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:42:29.385 +04:00 [DBG] Authorization was successful.
2023-04-07 11:42:29.386 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:42:29.387 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:42:29.390 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:42:29.391 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:42:29.393 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:42:29.395 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:42:29.397 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:42:29.399 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:42:29.400 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:42:29.402 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:42:29.404 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:42:29.407 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:42:29.408 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:42:29.409 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:42:29.411 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2023-04-07 11:42:29.412 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:42:29.413 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:42:29.414 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:42:29.417 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:42:29.421 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:42:29.423 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:42:29.424 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:42:29.427 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:42:29.428 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 7ms reading results.
2023-04-07 11:42:29.430 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:42:29.431 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:42:29.433 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:42:29.436 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:42:29.437 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:42:29.438 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:42:29.439 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:42:29.440 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:42:29.443 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 43.7884ms
2023-04-07 11:42:29.444 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:42:29.446 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:42:29.447 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:42:29.449 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:42:29.450 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 86.2835ms
2023-04-07 11:43:39.061 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-07 11:43:39.166 +04:00 [DBG] Hosting starting
2023-04-07 11:43:39.225 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-07 11:43:39.232 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-07 11:43:39.243 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-07 11:43:39.250 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-07 11:43:39.257 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-07 11:43:39.264 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-07 11:43:39.268 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-07 11:43:39.271 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-07 11:43:39.274 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-07 11:43:39.279 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-07 11:43:39.284 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-07 11:43:39.289 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-07 11:43:39.291 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-07 11:43:39.529 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-07 11:43:39.530 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-07 11:43:39.531 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-07 11:43:39.532 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-07 11:43:39.533 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-07 11:43:39.534 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-07 11:43:39.535 +04:00 [INF] Hosting environment: Development
2023-04-07 11:43:39.536 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-07 11:43:39.537 +04:00 [DBG] Hosting started
2023-04-07 11:44:15.593 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-07 11:44:15.676 +04:00 [DBG] Hosting starting
2023-04-07 11:44:15.703 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-07 11:44:15.711 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-07 11:44:15.717 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-07 11:44:15.722 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-07 11:44:15.727 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-07 11:44:15.734 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-07 11:44:15.738 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-07 11:44:15.741 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-07 11:44:15.744 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-07 11:44:15.749 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-07 11:44:15.753 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-07 11:44:15.758 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-07 11:44:15.760 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-07 11:44:15.886 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-07 11:44:15.888 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-07 11:44:15.890 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-07 11:44:15.891 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-07 11:44:15.893 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-07 11:44:15.895 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-07 11:44:15.896 +04:00 [INF] Hosting environment: Development
2023-04-07 11:44:15.897 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-07 11:44:15.898 +04:00 [DBG] Hosting started
2023-04-07 11:44:16.118 +04:00 [DBG] Connection id "0HMPN7FHMOGLL" accepted.
2023-04-07 11:44:16.121 +04:00 [DBG] Connection id "0HMPN7FHMOGLL" started.
2023-04-07 11:44:16.129 +04:00 [DBG] Connection id "0HMPN7FHMOGLL" received FIN.
2023-04-07 11:44:16.134 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-07 11:44:16.154 +04:00 [DBG] Connection id "0HMPN7FHMOGLM" accepted.
2023-04-07 11:44:16.160 +04:00 [DBG] Connection id "0HMPN7FHMOGLM" started.
2023-04-07 11:44:16.162 +04:00 [DBG] Connection id "0HMPN7FHMOGLL" stopped.
2023-04-07 11:44:16.166 +04:00 [DBG] Connection id "0HMPN7FHMOGLL" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-07 11:44:16.204 +04:00 [DBG] Connection 0HMPN7FHMOGLM established using the following protocol: "Tls12"
2023-04-07 11:44:16.250 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-07 11:44:16.267 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-07 11:44:16.288 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-07 11:44:16.290 +04:00 [DBG] Request did not match any endpoints
2023-04-07 11:44:16.441 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-07 11:44:16.453 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-07 11:44:16.457 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 208.0020ms
2023-04-07 11:44:16.475 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-07 11:44:16.475 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-07 11:44:16.483 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 7.2747ms
2023-04-07 11:44:16.498 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.7670ms
2023-04-07 11:44:16.760 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-07 11:44:16.761 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-07 11:44:16.763 +04:00 [DBG] Request did not match any endpoints
2023-04-07 11:44:16.849 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 89.2162ms
2023-04-07 11:44:23.327 +04:00 [DBG] Connection id "0HMPN7FHMOGLM" received FIN.
2023-04-07 11:44:23.331 +04:00 [DBG] The connection queue processing loop for 0HMPN7FHMOGLM completed.
2023-04-07 11:44:23.334 +04:00 [DBG] Connection id "0HMPN7FHMOGLM" is closed. The last processed stream ID was 7.
2023-04-07 11:44:23.336 +04:00 [DBG] Connection id "0HMPN7FHMOGLM" sending FIN because: "The client closed the connection."
2023-04-07 11:44:23.351 +04:00 [DBG] Connection id "0HMPN7FHMOGLM" stopped.
2023-04-07 11:44:43.876 +04:00 [DBG] Connection id "0HMPN7FHMOGLN" accepted.
2023-04-07 11:44:43.878 +04:00 [DBG] Connection id "0HMPN7FHMOGLN" started.
2023-04-07 11:44:43.896 +04:00 [DBG] Connection 0HMPN7FHMOGLN established using the following protocol: "Tls12"
2023-04-07 11:44:43.899 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-07 11:44:43.905 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-07 11:44:43.907 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:44:43.911 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:44:43.914 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:44:43.916 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:44:43.918 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:44:43.920 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 20.5952ms
2023-04-07 11:44:43.922 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 45
2023-04-07 11:44:43.925 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-07 11:44:43.929 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-07 11:44:43.932 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-07 11:44:43.933 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:44:43.935 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:44:43.936 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:44:43.961 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-07 11:44:43.968 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-07 11:44:43.989 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:44:43.994 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:44:43.996 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:44:43.998 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:44:44.001 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:44:44.003 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:44:44.007 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:44:44.105 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-07 11:44:44.129 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:44:44.139 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-07 11:44:44.143 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-07 11:44:44.147 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-07 11:44:44.154 +04:00 [DBG] Connection id "0HMPN7FHMOGLN", Request id "0HMPN7FHMOGLN:00000003": started reading request body.
2023-04-07 11:44:44.158 +04:00 [DBG] Connection id "0HMPN7FHMOGLN", Request id "0HMPN7FHMOGLN:00000003": done reading request body.
2023-04-07 11:44:44.164 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-07 11:44:44.166 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-07 11:44:44.168 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-07 11:44:44.170 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-07 11:44:44.182 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-07 11:44:44.585 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2023-04-07 11:44:44.588 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2023-04-07 11:44:44.897 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:44:44.965 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.CardNumber == __request_CardNumber_0 && c.Pin == __request_Pin_1)'
2023-04-07 11:44:45.021 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-07 11:44:45.139 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE (c.CardNumber == @__request_CardNumber_0) && (c.Pin == @__request_Pin_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-07 11:44:45.173 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:44:45.175 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:44:45.191 +04:00 [DBG] Created DbConnection. (14ms).
2023-04-07 11:44:45.196 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (23ms).
2023-04-07 11:44:45.205 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (32ms).
2023-04-07 11:44:45.210 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:44:45.341 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:44:45.350 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-07 11:44:45.388 +04:00 [INF] Executed DbCommand (41ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-07 11:44:45.413 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:44:45.444 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:44:45.454 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:44:45.469 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:44:45.477 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 80ms reading results.
2023-04-07 11:44:45.481 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:44:45.488 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (6ms).
2023-04-07 11:44:45.580 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:44:45.584 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:44:45.586 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:44:45.587 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:44:45.589 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:44:45.591 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:44:45.607 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 1598.5941ms
2023-04-07 11:44:45.609 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-07 11:44:45.613 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:44:45.619 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:44:45.622 +04:00 [DBG] Disposed connection to database '' on server '' (3ms).
2023-04-07 11:44:45.625 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 45 - 200 - application/json;+charset=utf-8 1703.2073ms
2023-04-07 11:44:53.355 +04:00 [DBG] Connection id "0HMPN7FHMOGLN" received FIN.
2023-04-07 11:44:53.358 +04:00 [DBG] Connection id "0HMPN7FHMOGLN" is closed. The last processed stream ID was 3.
2023-04-07 11:44:53.358 +04:00 [DBG] Connection id "0HMPN7FHMOGLN" sending FIN because: "The client closed the connection."
2023-04-07 11:44:53.362 +04:00 [DBG] The connection queue processing loop for 0HMPN7FHMOGLN completed.
2023-04-07 11:44:53.363 +04:00 [DBG] Connection id "0HMPN7FHMOGLN" stopped.
2023-04-07 11:45:02.929 +04:00 [DBG] Connection id "0HMPN7FHMOGLO" accepted.
2023-04-07 11:45:02.930 +04:00 [DBG] Connection id "0HMPN7FHMOGLO" started.
2023-04-07 11:45:02.933 +04:00 [DBG] Connection 0HMPN7FHMOGLO established using the following protocol: "Tls12"
2023-04-07 11:45:02.935 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-07 11:45:02.936 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-07 11:45:02.937 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:45:02.938 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:45:02.941 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:45:02.942 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:45:02.943 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:45:02.944 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 9.4145ms
2023-04-07 11:45:02.946 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 27
2023-04-07 11:45:02.947 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-07 11:45:02.948 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-07 11:45:02.949 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:45:02.951 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:45:02.951 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:45:02.952 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:45:02.988 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:45:02.991 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:45:02.996 +04:00 [DBG] Authorization was successful.
2023-04-07 11:45:02.999 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:45:03.005 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-07 11:45:03.009 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:45:03.010 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:45:03.012 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:45:03.015 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:45:03.017 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:45:03.019 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-07 11:45:03.022 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-07 11:45:03.025 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-07 11:45:03.027 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-07 11:45:03.029 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-07 11:45:03.038 +04:00 [DBG] Connection id "0HMPN7FHMOGLO", Request id "0HMPN7FHMOGLO:00000003": started reading request body.
2023-04-07 11:45:03.040 +04:00 [DBG] Connection id "0HMPN7FHMOGLO", Request id "0HMPN7FHMOGLO:00000003": done reading request body.
2023-04-07 11:45:03.044 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-07 11:45:03.046 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:45:03.048 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:45:03.049 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-07 11:45:03.057 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:45:03.078 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:45:03.082 +04:00 [DBG] Compiling query expression: 
'DbSet<CurrencyEntity>()'
2023-04-07 11:45:03.092 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CurrencyEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CurrencyEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CurrencyEntity.Code (string), 1], [Property: CurrencyEntity.Date (DateTime) Required, 2], [Property: CurrencyEntity.Diff (decimal) Required, 3], [Property: CurrencyEntity.DiffFormated (string), 4], [Property: CurrencyEntity.LastUpdatedAt (DateTime) Required, 5], [Property: CurrencyEntity.Name (string), 6], [Property: CurrencyEntity.Quantity (int) Required, 7], [Property: CurrencyEntity.Rate (decimal) Required, 8], [Property: CurrencyEntity.RateFormated (string), 9], [Property: CurrencyEntity.ValidFromDate (DateTime) Required, 10] }
        SELECT c.Id, c.Code, c.Date, c.Diff, c.DiffFormated, c.LastUpdatedAt, c.Name, c.Quantity, c.Rate, c.RateFormated, c.ValidFromDate
        FROM Currencies AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CurrencyEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-07 11:45:03.097 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:45:03.099 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:45:03.100 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:45:03.102 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2023-04-07 11:45:03.103 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2023-04-07 11:45:03.105 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.108 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.111 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-07 11:45:03.119 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-07 11:45:03.127 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.145 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.147 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.149 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.151 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.152 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.154 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.156 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.158 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.160 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.161 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.163 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.164 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.166 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.167 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.168 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.169 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.171 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.174 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.176 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.177 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.179 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.180 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.182 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.183 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.185 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.187 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.192 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.194 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.197 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.199 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.201 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.203 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.206 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.209 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.211 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.213 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.215 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.217 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.219 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.221 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.227 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.229 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.231 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.233 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 111ms reading results.
2023-04-07 11:45:03.235 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.237 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:45:03.246 +04:00 [DBG] Compiling query expression: 
'DbSet<AccountEntity>()
    .Include(a => a.UserEntity)
    .FirstOrDefault(a => a.Cards
        .Any(c => c.Id == __cardId_0))'
2023-04-07 11:45:03.258 +04:00 [DBG] Including navigation: 'AccountEntity.UserEntity'.
2023-04-07 11:45:03.285 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AccountEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<AccountEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AccountEntity.Amount (decimal) Required, 1], [Property: AccountEntity.Currency (CurrencyType) Required, 2], [Property: AccountEntity.Iban (string), 3], [Property: AccountEntity.UserId (Guid) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: UserEntity.AccessFailedCount (int) Required, 6], [Property: UserEntity.BirthDate (DateTime) Required, 7], [Property: UserEntity.ConcurrencyStamp (string) Concurrency, 8], [Property: UserEntity.Email (string) MaxLength(256), 9], [Property: UserEntity.EmailConfirmed (bool) Required, 10], [Property: UserEntity.FirstName (string), 11], [Property: UserEntity.LastName (string), 12], [Property: UserEntity.LockoutEnabled (bool) Required, 13], [Property: UserEntity.LockoutEnd (DateTimeOffset?), 14], [Property: UserEntity.NormalizedEmail (string) Index MaxLength(256), 15], [Property: UserEntity.NormalizedUserName (string) Index MaxLength(256), 16], [Property: UserEntity.PasswordHash (string), 17], [Property: UserEntity.PersonalNumber (string), 18], [Property: UserEntity.PhoneNumber (string), 19], [Property: UserEntity.PhoneNumberConfirmed (bool) Required, 20], [Property: UserEntity.RegisteredAt (DateTime) Required, 21], [Property: UserEntity.SecurityStamp (string), 22], [Property: UserEntity.TwoFactorEnabled (bool) Required, 23], [Property: UserEntity.UserName (string) MaxLength(256), 24] }
            SELECT TOP(1) a.Id, a.Amount, a.Currency, a.Iban, a.UserId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.FirstName, a0.LastName, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.PersonalNumber, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RegisteredAt, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
            FROM Accounts AS a
            INNER JOIN AspNetUsers AS a0 ON a.UserId == a0.Id
            WHERE EXISTS (
                SELECT 1
                FROM Cards AS c
                WHERE ((a.Id != NULL) && (a.Id == c.AccountId)) && (c.Id == @__cardId_0))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-07 11:45:03.293 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:45:03.295 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-07 11:45:03.296 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:45:03.298 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.299 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.304 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-07 11:45:03.316 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-07 11:45:03.323 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.345 +04:00 [DBG] The navigation 'AccountEntity.UserEntity' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.353 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.399 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.401 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 80ms reading results.
2023-04-07 11:45:03.403 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.406 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (2ms).
2023-04-07 11:45:03.415 +04:00 [DBG] Compiling query expression: 
'DbSet<TransactionEntity>()
    .Where(t => t.AccountFromId == __accountId_0 && t.CreatedAt.Date == DateTime.Now.Date && (int)t.TransactionType == 0)'
2023-04-07 11:45:03.438 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<TransactionEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TransactionEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TransactionEntity.AccountFromIban (string), 1], [Property: TransactionEntity.AccountFromId (Guid?), 2], [Property: TransactionEntity.AccountToIban (string), 3], [Property: TransactionEntity.AccountToId (Guid?), 4], [Property: TransactionEntity.CreatedAt (DateTime) Required, 5], [Property: TransactionEntity.CurrencyFrom (CurrencyType) Required, 6], [Property: TransactionEntity.CurrencyTo (CurrencyType) Required, 7], [Property: TransactionEntity.Fee (decimal) Required, 8], [Property: TransactionEntity.ReceivedAmount (decimal) Required, 9], [Property: TransactionEntity.TransactionType (TransactionType) Required, 10], [Property: TransactionEntity.WithDrawnAmount (decimal) Required, 11] }
        SELECT t.Id, t.AccountFromIban, t.AccountFromId, t.AccountToIban, t.AccountToId, t.CreatedAt, t.CurrencyFrom, t.CurrencyTo, t.Fee, t.ReceivedAmount, t.TransactionType, t.WithDrawnAmount
        FROM Transactions AS t
        WHERE ((t.AccountFromId == @__accountId_0) && (CONVERT(date, t.CreatedAt) == CONVERT(date, GETDATE()))) && (t.TransactionType == 0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TransactionEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-07 11:45:03.448 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:45:03.450 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-07 11:45:03.451 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:45:03.453 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.455 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.471 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-07 11:45:03.478 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-07 11:45:03.485 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.508 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.510 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 28ms reading results.
2023-04-07 11:45:03.512 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.514 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:45:03.530 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.551 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.569 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.578 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-07 11:45:03.582 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-07 11:45:03.625 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-07 11:45:03.688 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-07 11:45:03.693 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.695 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.698 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-07 11:45:03.705 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-07 11:45:03.709 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:45:03.711 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-07 11:45:03.717 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2023-04-07 11:45:03.718 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-07 11:45:03.744 +04:00 [INF] Executed DbCommand (25ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-07 11:45:03.752 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.754 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 6ms reading results.
2023-04-07 11:45:03.759 +04:00 [DBG] Committing transaction.
2023-04-07 11:45:03.765 +04:00 [DBG] Committed transaction.
2023-04-07 11:45:03.767 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.769 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:45:03.772 +04:00 [DBG] Disposing transaction.
2023-04-07 11:45:03.778 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.781 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.783 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:45:03.787 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-07 11:45:03.790 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:45:03.793 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:45:03.794 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:45:03.795 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:45:03.796 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:45:03.798 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:45:03.808 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 789.4006ms
2023-04-07 11:45:03.810 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:45:03.812 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:45:03.813 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:45:03.815 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:45:03.817 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 27 - 200 - application/json;+charset=utf-8 870.9267ms
2023-04-07 11:45:13.371 +04:00 [DBG] Connection id "0HMPN7FHMOGLO" received FIN.
2023-04-07 11:45:13.373 +04:00 [DBG] Connection id "0HMPN7FHMOGLO" is closed. The last processed stream ID was 3.
2023-04-07 11:45:13.374 +04:00 [DBG] The connection queue processing loop for 0HMPN7FHMOGLO completed.
2023-04-07 11:45:13.375 +04:00 [DBG] Connection id "0HMPN7FHMOGLO" sending FIN because: "The client closed the connection."
2023-04-07 11:45:13.385 +04:00 [DBG] Connection id "0HMPN7FHMOGLO" stopped.
2023-04-07 11:48:28.573 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-07 11:48:28.647 +04:00 [DBG] Hosting starting
2023-04-07 11:48:28.669 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-07 11:48:28.675 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-07 11:48:28.681 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-07 11:48:28.686 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-07 11:48:28.690 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-07 11:48:28.695 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-07 11:48:28.698 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-07 11:48:28.702 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-07 11:48:28.704 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-07 11:48:28.708 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-07 11:48:28.712 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-07 11:48:28.716 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-07 11:48:28.718 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-07 11:48:28.841 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-07 11:48:28.843 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-07 11:48:28.844 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-07 11:48:28.846 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-07 11:48:28.846 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-07 11:48:28.847 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-07 11:48:28.848 +04:00 [INF] Hosting environment: Development
2023-04-07 11:48:28.849 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-07 11:48:28.850 +04:00 [DBG] Hosting started
2023-04-07 11:48:29.085 +04:00 [DBG] Connection id "0HMPN7HT382OO" received FIN.
2023-04-07 11:48:29.085 +04:00 [DBG] Connection id "0HMPN7HT382ON" received FIN.
2023-04-07 11:48:29.091 +04:00 [DBG] Connection id "0HMPN7HT382ON" accepted.
2023-04-07 11:48:29.091 +04:00 [DBG] Connection id "0HMPN7HT382OO" accepted.
2023-04-07 11:48:29.093 +04:00 [DBG] Connection id "0HMPN7HT382ON" started.
2023-04-07 11:48:29.093 +04:00 [DBG] Connection id "0HMPN7HT382OO" started.
2023-04-07 11:48:29.096 +04:00 [DBG] Connection id "0HMPN7HT382OP" accepted.
2023-04-07 11:48:29.097 +04:00 [DBG] Connection id "0HMPN7HT382OP" started.
2023-04-07 11:48:29.105 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-07 11:48:29.105 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-07 11:48:29.128 +04:00 [DBG] Connection id "0HMPN7HT382OO" stopped.
2023-04-07 11:48:29.129 +04:00 [DBG] Connection id "0HMPN7HT382ON" stopped.
2023-04-07 11:48:29.130 +04:00 [DBG] Connection id "0HMPN7HT382OO" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-07 11:48:29.131 +04:00 [DBG] Connection id "0HMPN7HT382ON" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-07 11:48:29.141 +04:00 [DBG] Connection 0HMPN7HT382OP established using the following protocol: "Tls12"
2023-04-07 11:48:29.186 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-07 11:48:29.201 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-07 11:48:29.219 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-07 11:48:29.221 +04:00 [DBG] Request did not match any endpoints
2023-04-07 11:48:29.380 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-07 11:48:29.394 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-07 11:48:29.398 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 213.7097ms
2023-04-07 11:48:29.413 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-07 11:48:29.413 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-07 11:48:29.421 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 6.4893ms
2023-04-07 11:48:29.431 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 18.0136ms
2023-04-07 11:48:29.575 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-07 11:48:29.576 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-07 11:48:29.577 +04:00 [DBG] Request did not match any endpoints
2023-04-07 11:48:29.676 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 100.9323ms
2023-04-07 11:48:33.609 +04:00 [DBG] Connection id "0HMPN7HT382OP" received FIN.
2023-04-07 11:48:33.613 +04:00 [DBG] The connection queue processing loop for 0HMPN7HT382OP completed.
2023-04-07 11:48:33.617 +04:00 [DBG] Connection id "0HMPN7HT382OP" is closed. The last processed stream ID was 7.
2023-04-07 11:48:33.621 +04:00 [DBG] Connection id "0HMPN7HT382OP" sending FIN because: "The client closed the connection."
2023-04-07 11:48:33.640 +04:00 [DBG] Connection id "0HMPN7HT382OP" stopped.
2023-04-07 11:48:36.082 +04:00 [DBG] Connection id "0HMPN7HT382OQ" accepted.
2023-04-07 11:48:36.084 +04:00 [DBG] Connection id "0HMPN7HT382OQ" started.
2023-04-07 11:48:36.095 +04:00 [DBG] Connection 0HMPN7HT382OQ established using the following protocol: "Tls12"
2023-04-07 11:48:36.098 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-07 11:48:36.107 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-07 11:48:36.110 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:48:36.114 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:48:36.118 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:48:36.121 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:48:36.124 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:48:36.126 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 27.7445ms
2023-04-07 11:48:36.129 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-07 11:48:36.132 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-07 11:48:36.139 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-07 11:48:36.142 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:48:36.143 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:48:36.145 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:48:36.147 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:48:36.282 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:48:36.286 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:48:36.292 +04:00 [DBG] Authorization was successful.
2023-04-07 11:48:36.296 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:48:36.318 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-07 11:48:36.322 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:48:36.324 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:48:36.329 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:48:36.332 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:48:36.334 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:48:36.338 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-07 11:48:36.440 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-07 11:48:36.464 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-07 11:48:36.473 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-07 11:48:36.477 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-07 11:48:36.481 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-07 11:48:36.494 +04:00 [DBG] Connection id "0HMPN7HT382OQ", Request id "0HMPN7HT382OQ:00000003": started reading request body.
2023-04-07 11:48:36.496 +04:00 [DBG] Connection id "0HMPN7HT382OQ", Request id "0HMPN7HT382OQ:00000003": done reading request body.
2023-04-07 11:48:36.504 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-07 11:48:36.506 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:48:36.508 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:48:36.510 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-07 11:48:36.522 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:48:36.942 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2023-04-07 11:48:36.945 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2023-04-07 11:48:37.256 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:48:37.289 +04:00 [DBG] Compiling query expression: 
'DbSet<CurrencyEntity>()'
2023-04-07 11:48:37.415 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CurrencyEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CurrencyEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CurrencyEntity.Code (string), 1], [Property: CurrencyEntity.Date (DateTime) Required, 2], [Property: CurrencyEntity.Diff (decimal) Required, 3], [Property: CurrencyEntity.DiffFormated (string), 4], [Property: CurrencyEntity.LastUpdatedAt (DateTime) Required, 5], [Property: CurrencyEntity.Name (string), 6], [Property: CurrencyEntity.Quantity (int) Required, 7], [Property: CurrencyEntity.Rate (decimal) Required, 8], [Property: CurrencyEntity.RateFormated (string), 9], [Property: CurrencyEntity.ValidFromDate (DateTime) Required, 10] }
        SELECT c.Id, c.Code, c.Date, c.Diff, c.DiffFormated, c.LastUpdatedAt, c.Name, c.Quantity, c.Rate, c.RateFormated, c.ValidFromDate
        FROM Currencies AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CurrencyEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-07 11:48:37.440 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:48:37.443 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:48:37.459 +04:00 [DBG] Created DbConnection. (14ms).
2023-04-07 11:48:37.464 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (24ms).
2023-04-07 11:48:37.467 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (27ms).
2023-04-07 11:48:37.472 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:37.591 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:37.598 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-07 11:48:37.629 +04:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-07 11:48:37.657 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.686 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.688 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.689 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.691 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.693 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.694 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.696 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.697 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.698 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.700 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.702 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.704 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.705 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.707 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.708 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.710 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.711 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.713 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.714 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.716 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.718 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.720 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.721 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.723 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.724 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.726 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.727 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.728 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.730 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.731 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.733 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.734 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.736 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.738 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.739 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.741 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.742 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.744 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.745 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.746 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.751 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.753 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:37.758 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:37.763 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 127ms reading results.
2023-04-07 11:48:37.768 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:37.773 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (4ms).
2023-04-07 11:48:37.791 +04:00 [DBG] Compiling query expression: 
'DbSet<AccountEntity>()
    .Include(a => a.UserEntity)
    .FirstOrDefault(a => a.Cards
        .Any(c => c.Id == __cardId_0))'
2023-04-07 11:48:37.829 +04:00 [DBG] Including navigation: 'AccountEntity.UserEntity'.
2023-04-07 11:48:37.908 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AccountEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<AccountEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AccountEntity.Amount (decimal) Required, 1], [Property: AccountEntity.Currency (CurrencyType) Required, 2], [Property: AccountEntity.Iban (string), 3], [Property: AccountEntity.UserId (Guid) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: UserEntity.AccessFailedCount (int) Required, 6], [Property: UserEntity.BirthDate (DateTime) Required, 7], [Property: UserEntity.ConcurrencyStamp (string) Concurrency, 8], [Property: UserEntity.Email (string) MaxLength(256), 9], [Property: UserEntity.EmailConfirmed (bool) Required, 10], [Property: UserEntity.FirstName (string), 11], [Property: UserEntity.LastName (string), 12], [Property: UserEntity.LockoutEnabled (bool) Required, 13], [Property: UserEntity.LockoutEnd (DateTimeOffset?), 14], [Property: UserEntity.NormalizedEmail (string) Index MaxLength(256), 15], [Property: UserEntity.NormalizedUserName (string) Index MaxLength(256), 16], [Property: UserEntity.PasswordHash (string), 17], [Property: UserEntity.PersonalNumber (string), 18], [Property: UserEntity.PhoneNumber (string), 19], [Property: UserEntity.PhoneNumberConfirmed (bool) Required, 20], [Property: UserEntity.RegisteredAt (DateTime) Required, 21], [Property: UserEntity.SecurityStamp (string), 22], [Property: UserEntity.TwoFactorEnabled (bool) Required, 23], [Property: UserEntity.UserName (string) MaxLength(256), 24] }
            SELECT TOP(1) a.Id, a.Amount, a.Currency, a.Iban, a.UserId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.FirstName, a0.LastName, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.PersonalNumber, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RegisteredAt, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
            FROM Accounts AS a
            INNER JOIN AspNetUsers AS a0 ON a.UserId == a0.Id
            WHERE EXISTS (
                SELECT 1
                FROM Cards AS c
                WHERE ((a.Id != NULL) && (a.Id == c.AccountId)) && (c.Id == @__cardId_0))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-07 11:48:37.923 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:48:37.924 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-07 11:48:37.928 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-07 11:48:37.929 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:37.931 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:37.935 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-07 11:48:37.965 +04:00 [INF] Executed DbCommand (32ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-07 11:48:37.976 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:38.009 +04:00 [DBG] The navigation 'AccountEntity.UserEntity' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:38.015 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:38.049 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:38.052 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 83ms reading results.
2023-04-07 11:48:38.054 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:38.055 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:48:38.061 +04:00 [DBG] Compiling query expression: 
'DbSet<TransactionEntity>()
    .Where(t => t.AccountFromId == __accountId_0 && t.CreatedAt.Date == DateTime.Now.Date && (int)t.TransactionType == 0)'
2023-04-07 11:48:38.072 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<TransactionEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TransactionEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TransactionEntity.AccountFromIban (string), 1], [Property: TransactionEntity.AccountFromId (Guid?), 2], [Property: TransactionEntity.AccountToIban (string), 3], [Property: TransactionEntity.AccountToId (Guid?), 4], [Property: TransactionEntity.CreatedAt (DateTime) Required, 5], [Property: TransactionEntity.CurrencyFrom (CurrencyType) Required, 6], [Property: TransactionEntity.CurrencyTo (CurrencyType) Required, 7], [Property: TransactionEntity.Fee (decimal) Required, 8], [Property: TransactionEntity.ReceivedAmount (decimal) Required, 9], [Property: TransactionEntity.TransactionType (TransactionType) Required, 10], [Property: TransactionEntity.WithDrawnAmount (decimal) Required, 11] }
        SELECT t.Id, t.AccountFromIban, t.AccountFromId, t.AccountToIban, t.AccountToId, t.CreatedAt, t.CurrencyFrom, t.CurrencyTo, t.Fee, t.ReceivedAmount, t.TransactionType, t.WithDrawnAmount
        FROM Transactions AS t
        WHERE ((t.AccountFromId == @__accountId_0) && (CONVERT(date, t.CreatedAt) == CONVERT(date, GETDATE()))) && (t.TransactionType == 0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TransactionEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-07 11:48:38.081 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:48:38.082 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-07 11:48:38.084 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:48:38.086 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:38.087 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:38.088 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-07 11:48:38.093 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-07 11:48:38.099 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:38.123 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:38.124 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:38.126 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 29ms reading results.
2023-04-07 11:48:38.128 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:38.129 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:48:38.143 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:38.161 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:38.181 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:38.186 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-07 11:48:38.189 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-07 11:48:38.230 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-07 11:48:38.290 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-07 11:48:38.293 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:38.294 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:38.296 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-07 11:48:38.302 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-07 11:48:38.306 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:48:38.307 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-07 11:48:38.311 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:48:38.313 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-07 11:48:38.322 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-07 11:48:38.330 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:38.331 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-07 11:48:38.336 +04:00 [DBG] Committing transaction.
2023-04-07 11:48:38.350 +04:00 [DBG] Committed transaction.
2023-04-07 11:48:38.353 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:38.354 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:48:38.356 +04:00 [DBG] Disposing transaction.
2023-04-07 11:48:38.360 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:38.364 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:38.365 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:38.369 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-07 11:48:38.373 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:48:38.377 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:48:38.378 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:48:38.378 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:48:38.380 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:48:38.381 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:48:38.400 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 2061.433ms
2023-04-07 11:48:38.403 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:48:38.406 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:48:38.410 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:38.412 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-07 11:48:38.414 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28 - 200 - application/json;+charset=utf-8 2285.4907ms
2023-04-07 11:48:39.225 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:48:39.226 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:48:39.226 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:48:39.228 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:48:39.229 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:48:39.230 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:48:39.231 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:48:39.232 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:48:39.234 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:48:39.234 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:48:39.237 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:48:39.238 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:48:39.239 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:48:39.240 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:48:39.241 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 15.8210ms
2023-04-07 11:48:39.242 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 15.9300ms
2023-04-07 11:48:39.242 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:48:39.246 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:48:39.247 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:48:39.249 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:48:39.250 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:48:39.251 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:48:39.252 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:48:39.255 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:48:39.256 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:48:39.258 +04:00 [DBG] Authorization was successful.
2023-04-07 11:48:39.260 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:48:39.265 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:48:39.268 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:48:39.270 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:48:39.271 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:48:39.273 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:48:39.274 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:48:39.276 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:48:39.279 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:48:39.292 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:48:39.296 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.Id == __cardId_0)'
2023-04-07 11:48:39.300 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-07 11:48:39.332 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-07 11:48:39.337 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:48:39.338 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:48:39.339 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-07 11:48:39.340 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:48:39.342 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:48:39.343 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:39.345 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:39.346 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:48:39.350 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:48:39.356 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:39.368 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:39.370 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:39.372 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:39.373 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 20ms reading results.
2023-04-07 11:48:39.375 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:39.376 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-07 11:48:39.378 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:48:39.380 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:48:39.380 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:48:39.381 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:48:39.382 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:48:39.383 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:48:39.385 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 109.3726ms
2023-04-07 11:48:39.386 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:48:39.387 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:48:39.387 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:48:39.389 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:48:39.390 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:48:39.391 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:39.392 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:48:39.393 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-07 11:48:39.394 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:48:39.395 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 152.5915ms
2023-04-07 11:48:39.395 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:48:39.397 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:48:39.400 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:48:39.400 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:48:39.403 +04:00 [DBG] Authorization was successful.
2023-04-07 11:48:39.405 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:48:39.406 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:48:39.408 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:48:39.410 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:48:39.411 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:48:39.413 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:48:39.414 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:48:39.415 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:48:39.417 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:48:39.464 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:48:39.471 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:48:39.472 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:48:39.473 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:48:39.474 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:48:39.475 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-07 11:48:39.476 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:39.478 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:39.479 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:48:39.481 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:48:39.485 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:39.486 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:39.488 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:39.489 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:39.490 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-07 11:48:39.492 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:39.494 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:48:39.495 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:48:39.497 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:48:39.498 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:48:39.499 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:48:39.500 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:48:39.502 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:48:39.503 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 87.6335ms
2023-04-07 11:48:39.504 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:48:39.505 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:48:39.506 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:39.508 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:48:39.509 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 123.1455ms
2023-04-07 11:48:43.619 +04:00 [DBG] Connection id "0HMPN7HT382OQ" received FIN.
2023-04-07 11:48:43.621 +04:00 [DBG] Connection id "0HMPN7HT382OQ" is closed. The last processed stream ID was 11.
2023-04-07 11:48:43.621 +04:00 [DBG] Connection id "0HMPN7HT382OQ" sending FIN because: "The client closed the connection."
2023-04-07 11:48:43.625 +04:00 [DBG] The connection queue processing loop for 0HMPN7HT382OQ completed.
2023-04-07 11:48:43.626 +04:00 [DBG] Connection id "0HMPN7HT382OQ" stopped.
2023-04-07 11:48:45.105 +04:00 [DBG] Connection id "0HMPN7HT382OR" accepted.
2023-04-07 11:48:45.107 +04:00 [DBG] Connection id "0HMPN7HT382OR" started.
2023-04-07 11:48:45.110 +04:00 [DBG] Connection 0HMPN7HT382OR established using the following protocol: "Tls12"
2023-04-07 11:48:45.112 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-07 11:48:45.113 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-07 11:48:45.115 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:48:45.116 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:48:45.117 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:48:45.119 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:48:45.121 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:48:45.122 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 9.6576ms
2023-04-07 11:48:45.123 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-07 11:48:45.124 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-07 11:48:45.127 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-07 11:48:45.129 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:48:45.130 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:48:45.132 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:48:45.133 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:48:45.135 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:48:45.136 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:48:45.138 +04:00 [DBG] Authorization was successful.
2023-04-07 11:48:45.139 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:48:45.140 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-07 11:48:45.145 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:48:45.146 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:48:45.148 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:48:45.152 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:48:45.154 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:48:45.156 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-07 11:48:45.159 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-07 11:48:45.161 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-07 11:48:45.163 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-07 11:48:45.165 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-07 11:48:45.168 +04:00 [DBG] Connection id "0HMPN7HT382OR", Request id "0HMPN7HT382OR:00000003": started reading request body.
2023-04-07 11:48:45.170 +04:00 [DBG] Connection id "0HMPN7HT382OR", Request id "0HMPN7HT382OR:00000003": done reading request body.
2023-04-07 11:48:45.172 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-07 11:48:45.174 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:48:45.176 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:48:45.178 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-07 11:48:45.180 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:48:45.183 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:48:45.186 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:48:45.187 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:48:45.188 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:48:45.190 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2023-04-07 11:48:45.192 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:48:45.193 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.195 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.197 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-07 11:48:45.201 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-07 11:48:45.206 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.208 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.209 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.211 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.213 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.215 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.216 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.219 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.222 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.223 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.225 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.227 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.229 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.231 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.232 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.235 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.238 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.240 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.242 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.243 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.245 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.247 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.249 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.251 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.254 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.256 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.258 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.260 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.262 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.263 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.265 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.267 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.271 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.273 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.275 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.277 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.279 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.280 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.282 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.284 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.288 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.290 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.291 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.294 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.295 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 89ms reading results.
2023-04-07 11:48:45.296 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.298 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:48:45.300 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:48:45.302 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:48:45.304 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-07 11:48:45.305 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.306 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.307 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-07 11:48:45.316 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-07 11:48:45.321 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.323 +04:00 [DBG] The navigation 'AccountEntity.UserEntity' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.326 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.327 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.328 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 7ms reading results.
2023-04-07 11:48:45.330 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.331 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:48:45.336 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:48:45.337 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-07 11:48:45.338 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-07 11:48:45.340 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.341 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.343 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-07 11:48:45.348 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-07 11:48:45.354 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.356 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.359 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.361 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.363 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 8ms reading results.
2023-04-07 11:48:45.366 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.369 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (2ms).
2023-04-07 11:48:45.371 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.374 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.376 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.378 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-07 11:48:45.380 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-07 11:48:45.383 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-07 11:48:45.386 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-07 11:48:45.389 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.391 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.392 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-07 11:48:45.394 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-07 11:48:45.395 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:48:45.397 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-07 11:48:45.400 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:48:45.403 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-07 11:48:45.413 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-07 11:48:45.417 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.420 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-07 11:48:45.423 +04:00 [DBG] Committing transaction.
2023-04-07 11:48:45.434 +04:00 [DBG] Committed transaction.
2023-04-07 11:48:45.436 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.438 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-07 11:48:45.440 +04:00 [DBG] Disposing transaction.
2023-04-07 11:48:45.441 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.444 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.447 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:45.449 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-07 11:48:45.452 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:48:45.458 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:48:45.460 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:48:45.461 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:48:45.463 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:48:45.465 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:48:45.467 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 311.314ms
2023-04-07 11:48:45.469 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:48:45.471 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:48:45.472 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:45.474 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:48:45.477 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28 - 200 - application/json;+charset=utf-8 353.2842ms
2023-04-07 11:48:46.762 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:48:46.762 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:48:46.763 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:48:46.764 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:48:46.766 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:48:46.768 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:48:46.770 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:48:46.772 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:48:46.773 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:48:46.774 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:48:46.775 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:48:46.777 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:48:46.778 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:48:46.779 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:48:46.781 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 19.2188ms
2023-04-07 11:48:46.783 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 20.7542ms
2023-04-07 11:48:46.783 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:48:46.787 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:48:46.789 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:48:46.791 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:48:46.792 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:48:46.793 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:48:46.794 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:48:46.796 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:48:46.798 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:48:46.799 +04:00 [DBG] Authorization was successful.
2023-04-07 11:48:46.800 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:48:46.802 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:48:46.806 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:48:46.808 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:48:46.810 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:48:46.814 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:48:46.815 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:48:46.817 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:48:46.821 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:48:46.823 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:48:46.826 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:48:46.827 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:48:46.828 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:48:46.830 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2023-04-07 11:48:46.831 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-07 11:48:46.833 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:46.835 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:46.837 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:48:46.842 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:48:46.847 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:46.849 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:46.852 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:46.854 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:46.856 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 9ms reading results.
2023-04-07 11:48:46.858 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:46.860 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (2ms).
2023-04-07 11:48:46.863 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:48:46.866 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:48:46.868 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:48:46.870 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:48:46.871 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:48:46.873 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:48:46.875 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 57.4296ms
2023-04-07 11:48:46.876 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-07 11:48:46.877 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:48:46.879 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-07 11:48:46.880 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:48:46.882 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-07 11:48:46.884 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:46.888 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:48:46.890 +04:00 [DBG] Disposed connection to database '' on server '' (5ms).
2023-04-07 11:48:46.892 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:48:46.894 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 111.5005ms
2023-04-07 11:48:46.895 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:48:46.898 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:48:46.900 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:48:46.902 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:48:46.903 +04:00 [DBG] Authorization was successful.
2023-04-07 11:48:46.904 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:48:46.906 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-07 11:48:46.911 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:48:46.913 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:48:46.915 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:48:46.919 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:48:46.921 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:48:46.923 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:48:46.926 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-07 11:48:46.928 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-07 11:48:46.931 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-07 11:48:46.933 +04:00 [DBG] Creating DbConnection.
2023-04-07 11:48:46.934 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-07 11:48:46.936 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2023-04-07 11:48:46.938 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2023-04-07 11:48:46.939 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:46.942 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:46.944 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:48:46.948 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-07 11:48:46.952 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:46.954 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:46.956 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-07 11:48:46.959 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:46.961 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 9ms reading results.
2023-04-07 11:48:46.963 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:46.965 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (2ms).
2023-04-07 11:48:46.968 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-07 11:48:46.971 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-07 11:48:46.973 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-07 11:48:46.974 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-07 11:48:46.976 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-07 11:48:46.978 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-07 11:48:46.980 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 56.3466ms
2023-04-07 11:48:46.981 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-07 11:48:46.983 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-07 11:48:46.984 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-07 11:48:46.986 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-07 11:48:46.988 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 112.2657ms
2023-04-07 11:48:53.633 +04:00 [DBG] Connection id "0HMPN7HT382OR" received FIN.
2023-04-07 11:48:53.635 +04:00 [DBG] Connection id "0HMPN7HT382OR" is closed. The last processed stream ID was 11.
2023-04-07 11:48:53.636 +04:00 [DBG] The connection queue processing loop for 0HMPN7HT382OR completed.
2023-04-07 11:48:53.637 +04:00 [DBG] Connection id "0HMPN7HT382OR" sending FIN because: "The client closed the connection."
2023-04-07 11:48:53.649 +04:00 [DBG] Connection id "0HMPN7HT382OR" stopped.
2023-04-07 11:49:19.136 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-07 11:49:19.240 +04:00 [DBG] Hosting starting
2023-04-07 11:49:19.263 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-07 11:49:19.271 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-07 11:49:19.277 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-07 11:49:19.281 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-07 11:49:19.286 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-07 11:49:19.293 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-07 11:49:19.297 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-07 11:49:19.301 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-07 11:49:19.303 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-07 11:49:19.307 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-07 11:49:19.312 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-07 11:49:19.317 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-07 11:49:19.319 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-07 11:49:19.430 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-07 11:49:19.431 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-07 11:49:19.432 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-07 11:49:19.433 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-07 11:49:19.434 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-07 11:49:19.435 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-07 11:49:19.436 +04:00 [INF] Hosting environment: Development
2023-04-07 11:49:19.437 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-07 11:49:19.438 +04:00 [DBG] Hosting started
2023-04-07 11:49:19.699 +04:00 [DBG] Connection id "0HMPN7IC5U7SA" received FIN.
2023-04-07 11:49:19.699 +04:00 [DBG] Connection id "0HMPN7IC5U7S9" received FIN.
2023-04-07 11:49:19.706 +04:00 [DBG] Connection id "0HMPN7IC5U7SA" accepted.
2023-04-07 11:49:19.706 +04:00 [DBG] Connection id "0HMPN7IC5U7S9" accepted.
2023-04-07 11:49:19.708 +04:00 [DBG] Connection id "0HMPN7IC5U7SA" started.
2023-04-07 11:49:19.708 +04:00 [DBG] Connection id "0HMPN7IC5U7S9" started.
2023-04-07 11:49:19.710 +04:00 [DBG] Connection id "0HMPN7IC5U7SB" accepted.
2023-04-07 11:49:19.712 +04:00 [DBG] Connection id "0HMPN7IC5U7SB" started.
2023-04-07 11:49:19.721 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-07 11:49:19.721 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-07 11:49:19.747 +04:00 [DBG] Connection id "0HMPN7IC5U7S9" stopped.
2023-04-07 11:49:19.747 +04:00 [DBG] Connection id "0HMPN7IC5U7SA" stopped.
2023-04-07 11:49:19.749 +04:00 [DBG] Connection id "0HMPN7IC5U7S9" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-07 11:49:19.750 +04:00 [DBG] Connection id "0HMPN7IC5U7SA" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-07 11:49:19.758 +04:00 [DBG] Connection 0HMPN7IC5U7SB established using the following protocol: "Tls12"
2023-04-07 11:49:19.801 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-07 11:49:19.819 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-07 11:49:19.846 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-07 11:49:19.848 +04:00 [DBG] Request did not match any endpoints
2023-04-07 11:49:20.027 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-07 11:49:20.042 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-07 11:49:20.045 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 245.9205ms
2023-04-07 11:49:20.064 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-07 11:49:20.064 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-07 11:49:20.071 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 6.3499ms
2023-04-07 11:49:20.087 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.5509ms
2023-04-07 11:49:20.177 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-07 11:49:20.179 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-07 11:49:20.180 +04:00 [DBG] Request did not match any endpoints
2023-04-07 11:49:20.277 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 99.9511ms
2023-04-07 11:49:31.256 +04:00 [DBG] Connection id "0HMPN7IC5U7SC" accepted.
2023-04-07 11:49:31.258 +04:00 [DBG] Connection id "0HMPN7IC5U7SC" started.
2023-04-07 11:49:31.264 +04:00 [DBG] Connection 0HMPN7IC5U7SC established using the following protocol: "Tls12"
2023-04-07 11:49:31.268 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-07 11:49:31.273 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-07 11:49:31.276 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-07 11:49:31.279 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:49:31.281 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:49:31.284 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:49:31.286 +04:00 [DBG] The request is a preflight request.
2023-04-07 11:49:31.287 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 19.4477ms
2023-04-07 11:49:31.289 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-07 11:49:31.291 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-07 11:49:31.295 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-07 11:49:31.298 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:49:31.299 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-07 11:49:31.302 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-07 11:49:31.303 +04:00 [INF] CORS policy execution successful.
2023-04-07 11:49:31.429 +04:00 [DBG] Successfully validated the token.
2023-04-07 11:49:31.431 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-07 11:49:31.439 +04:00 [DBG] Authorization was successful.
2023-04-07 11:49:31.442 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:49:31.463 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-07 11:49:31.469 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-07 11:49:31.471 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-07 11:49:31.473 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-07 11:49:31.475 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-07 11:49:31.477 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-07 11:49:31.481 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-07 11:49:31.573 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-07 11:49:31.595 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-07 11:49:31.605 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-07 11:49:31.609 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-07 11:49:31.612 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-07 11:49:31.623 +04:00 [DBG] Connection id "0HMPN7IC5U7SC", Request id "0HMPN7IC5U7SC:00000003": started reading request body.
2023-04-07 11:49:31.625 +04:00 [DBG] Connection id "0HMPN7IC5U7SC", Request id "0HMPN7IC5U7SC:00000003": done reading request body.
2023-04-07 11:49:31.630 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-07 11:49:31.632 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:49:31.635 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:49:31.637 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-07 11:49:31.647 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-07 11:49:31.657 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 175.3492ms
2023-04-07 11:49:31.660 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-07 11:49:31.677 +04:00 [ERR] Invalid cash out amount. Please enter amount that is a multiple of 5, except zero such as 5, 10, 15, etc. 
System.ArgumentException: Invalid cash out amount. Please enter amount that is a multiple of 5, except zero such as 5, 10, 15, etc. 
   at BankSystem.Atm.Services.Models.Requests.CashOutRequest.Validate() in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Models\Requests\CashOutRequest.cs:line 15
   at ATM.Api.Controllers.TransactionController.CashOut(CashOutRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\TransactionController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-07 11:49:31.755 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28 - 1 - application/json 465.6724ms
2023-04-07 11:49:33.715 +04:00 [DBG] Connection id "0HMPN7IC5U7SC" received FIN.
2023-04-07 11:49:33.715 +04:00 [DBG] Connection id "0HMPN7IC5U7SB" received FIN.
2023-04-07 11:49:33.718 +04:00 [DBG] The connection queue processing loop for 0HMPN7IC5U7SC completed.
2023-04-07 11:49:33.719 +04:00 [DBG] Connection id "0HMPN7IC5U7SB" sending FIN because: "The client closed the connection."
2023-04-07 11:49:33.721 +04:00 [DBG] Connection id "0HMPN7IC5U7SB" is closed. The last processed stream ID was 7.
2023-04-07 11:49:33.721 +04:00 [DBG] Connection id "0HMPN7IC5U7SC" is closed. The last processed stream ID was 3.
2023-04-07 11:49:33.724 +04:00 [DBG] The connection queue processing loop for 0HMPN7IC5U7SB completed.
2023-04-07 11:49:33.725 +04:00 [DBG] Connection id "0HMPN7IC5U7SC" sending FIN because: "The client closed the connection."
2023-04-07 11:49:33.727 +04:00 [DBG] Connection id "0HMPN7IC5U7SB" stopped.
2023-04-07 11:49:33.730 +04:00 [DBG] Connection id "0HMPN7IC5U7SC" stopped.
