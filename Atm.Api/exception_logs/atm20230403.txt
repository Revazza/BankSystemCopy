2023-04-03 13:46:48.862 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-03 13:46:48.952 +04:00 [DBG] Hosting starting
2023-04-03 13:46:48.975 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-03 13:46:48.981 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-03 13:46:48.992 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-03 13:46:49.003 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-03 13:46:49.010 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-03 13:46:49.030 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-03 13:46:49.034 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 13:46:49.036 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-03 13:46:49.039 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 13:46:49.043 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-03 13:46:49.047 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-03 13:46:49.051 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-03 13:46:49.052 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-03 13:46:49.415 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-03 13:46:49.416 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-03 13:46:49.418 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-03 13:46:49.419 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-03 13:46:49.420 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-03 13:46:49.421 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-03 13:46:49.422 +04:00 [INF] Hosting environment: Development
2023-04-03 13:46:49.423 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-03 13:46:49.424 +04:00 [DBG] Hosting started
2023-04-03 13:46:49.734 +04:00 [DBG] Connection id "0HMPK51CDS4TU" accepted.
2023-04-03 13:46:49.737 +04:00 [DBG] Connection id "0HMPK51CDS4TU" started.
2023-04-03 13:46:49.740 +04:00 [DBG] Connection id "0HMPK51CDS4TU" received FIN.
2023-04-03 13:46:49.740 +04:00 [DBG] Connection id "0HMPK51CDS4TV" received FIN.
2023-04-03 13:46:49.743 +04:00 [DBG] Connection id "0HMPK51CDS4TV" accepted.
2023-04-03 13:46:49.744 +04:00 [DBG] Connection id "0HMPK51CDS4TV" started.
2023-04-03 13:46:49.756 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-03 13:46:49.756 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-03 13:46:49.793 +04:00 [DBG] Connection id "0HMPK51CDS4TV" stopped.
2023-04-03 13:46:49.793 +04:00 [DBG] Connection id "0HMPK51CDS4TU" stopped.
2023-04-03 13:46:49.796 +04:00 [DBG] Connection id "0HMPK51CDS4TV" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-03 13:46:49.796 +04:00 [DBG] Connection id "0HMPK51CDS4TU" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-03 13:46:50.334 +04:00 [DBG] Connection id "0HMPK51CDS4U0" accepted.
2023-04-03 13:46:50.336 +04:00 [DBG] Connection id "0HMPK51CDS4U0" started.
2023-04-03 13:46:50.477 +04:00 [DBG] Connection 0HMPK51CDS4U0 established using the following protocol: "Tls12"
2023-04-03 13:46:50.663 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-03 13:46:50.714 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-03 13:46:50.741 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-03 13:46:50.742 +04:00 [DBG] Request did not match any endpoints
2023-04-03 13:46:51.112 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-03 13:46:51.130 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-03 13:46:51.133 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 471.9303ms
2023-04-03 13:46:51.155 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-03 13:46:51.161 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 5.6254ms
2023-04-03 13:46:51.184 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-03 13:46:51.334 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 150.8683ms
2023-04-03 13:46:51.459 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-03 13:46:51.460 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-03 13:46:51.462 +04:00 [DBG] Request did not match any endpoints
2023-04-03 13:46:51.565 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 105.8090ms
2023-04-03 13:46:53.662 +04:00 [DBG] Connection id "0HMPK51CDS4U0" received FIN.
2023-04-03 13:46:53.666 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4U0 completed.
2023-04-03 13:46:53.669 +04:00 [DBG] Connection id "0HMPK51CDS4U0" is closed. The last processed stream ID was 7.
2023-04-03 13:46:53.671 +04:00 [DBG] Connection id "0HMPK51CDS4U0" sending FIN because: "The client closed the connection."
2023-04-03 13:46:53.677 +04:00 [DBG] Connection id "0HMPK51CDS4U0" stopped.
2023-04-03 13:47:10.806 +04:00 [DBG] Connection id "0HMPK51CDS4U1" accepted.
2023-04-03 13:47:10.807 +04:00 [DBG] Connection id "0HMPK51CDS4U1" started.
2023-04-03 13:47:10.809 +04:00 [DBG] Connection 0HMPK51CDS4U1 established using the following protocol: "Tls12"
2023-04-03 13:47:10.811 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Test/get-all-cards - -
2023-04-03 13:47:10.815 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Test/get-all-cards'
2023-04-03 13:47:10.827 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TestController.GetAllCards (BankSystem.Atm.Api)' with route pattern 'api/Test/get-all-cards' is valid for the request path '/api/Test/get-all-cards'
2023-04-03 13:47:10.830 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TestController.GetAllCards (BankSystem.Atm.Api)'
2023-04-03 13:47:10.832 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 13:47:10.855 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 13:47:10.859 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TestController.GetAllCards (BankSystem.Atm.Api)'
2023-04-03 13:47:10.872 +04:00 [INF] Route matched with {action = "GetAllCards", controller = "Test"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCards() on controller ATM.Api.Controllers.TestController (BankSystem.Atm.Api).
2023-04-03 13:47:10.874 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 13:47:10.875 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 13:47:10.876 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 13:47:10.878 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 13:47:10.878 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 13:47:10.881 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TestController (BankSystem.Atm.Api)
2023-04-03 13:47:11.199 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-03 13:47:11.220 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TestController (BankSystem.Atm.Api)
2023-04-03 13:47:11.609 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2023-04-03 13:47:11.610 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2023-04-03 13:47:11.866 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 13:47:11.904 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()'
2023-04-03 13:47:12.198 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CardEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
        SELECT c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin
        FROM Cards AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-03 13:47:12.222 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 13:47:12.225 +04:00 [DBG] Creating DbConnection.
2023-04-03 13:47:12.258 +04:00 [DBG] Created DbConnection. (31ms).
2023-04-03 13:47:12.263 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (42ms).
2023-04-03 13:47:12.265 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (45ms).
2023-04-03 13:47:12.268 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:47:12.528 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:47:12.534 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
2023-04-03 13:47:12.563 +04:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
2023-04-03 13:47:12.595 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:47:12.616 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:47:12.620 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:47:12.625 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 56ms reading results.
2023-04-03 13:47:12.628 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:47:12.632 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (3ms).
2023-04-03 13:47:12.635 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 13:47:12.639 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 13:47:12.640 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 13:47:12.641 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 13:47:12.642 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 13:47:12.644 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BankSystem.Common.Db.Entities.CardEntity, BankSystem.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-04-03 13:47:12.659 +04:00 [INF] Executed action ATM.Api.Controllers.TestController.GetAllCards (BankSystem.Atm.Api) in 1777.7173ms
2023-04-03 13:47:12.661 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TestController.GetAllCards (BankSystem.Atm.Api)'
2023-04-03 13:47:12.663 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 13:47:12.667 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:47:12.670 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 13:47:12.671 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Test/get-all-cards - - - 200 - application/json;+charset=utf-8 1860.1034ms
2023-04-03 13:47:13.670 +04:00 [DBG] Connection id "0HMPK51CDS4U1" received FIN.
2023-04-03 13:47:13.671 +04:00 [DBG] Connection id "0HMPK51CDS4U1" is closed. The last processed stream ID was 1.
2023-04-03 13:47:13.672 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4U1 completed.
2023-04-03 13:47:13.673 +04:00 [DBG] Connection id "0HMPK51CDS4U1" sending FIN because: "The client closed the connection."
2023-04-03 13:47:13.686 +04:00 [DBG] Connection id "0HMPK51CDS4U1" stopped.
2023-04-03 13:47:22.556 +04:00 [DBG] Connection id "0HMPK51CDS4U2" accepted.
2023-04-03 13:47:22.558 +04:00 [DBG] Connection id "0HMPK51CDS4U2" started.
2023-04-03 13:47:22.563 +04:00 [DBG] Connection 0HMPK51CDS4U2 established using the following protocol: "Tls12"
2023-04-03 13:47:22.564 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/ATM/login - -
2023-04-03 13:47:22.565 +04:00 [DBG] No candidates found for the request path '/api/ATM/login'
2023-04-03 13:47:22.567 +04:00 [DBG] Request did not match any endpoints
2023-04-03 13:47:22.568 +04:00 [DBG] OPTIONS requests are not supported
2023-04-03 13:47:22.571 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 13:47:22.572 +04:00 [INF] CORS policy execution successful.
2023-04-03 13:47:22.573 +04:00 [DBG] The request is a preflight request.
2023-04-03 13:47:22.575 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/ATM/login - - - 204 - - 10.4176ms
2023-04-03 13:47:22.576 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/ATM/login application/json 48
2023-04-03 13:47:22.577 +04:00 [DBG] No candidates found for the request path '/api/ATM/login'
2023-04-03 13:47:22.578 +04:00 [DBG] Request did not match any endpoints
2023-04-03 13:47:22.578 +04:00 [DBG] POST requests are not supported
2023-04-03 13:47:22.580 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 13:47:22.581 +04:00 [INF] CORS policy execution successful.
2023-04-03 13:47:22.583 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 13:47:22.585 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/ATM/login application/json 48 - 404 0 - 8.5622ms
2023-04-03 13:47:22.587 +04:00 [DBG] Connection id "0HMPK51CDS4U2", Request id "0HMPK51CDS4U2:00000003": started reading request body.
2023-04-03 13:47:22.588 +04:00 [DBG] Connection id "0HMPK51CDS4U2", Request id "0HMPK51CDS4U2:00000003": done reading request body.
2023-04-03 13:47:23.683 +04:00 [DBG] Connection id "0HMPK51CDS4U2" received FIN.
2023-04-03 13:47:23.684 +04:00 [DBG] Connection id "0HMPK51CDS4U2" is closed. The last processed stream ID was 3.
2023-04-03 13:47:23.685 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4U2 completed.
2023-04-03 13:47:23.686 +04:00 [DBG] Connection id "0HMPK51CDS4U2" sending FIN because: "The client closed the connection."
2023-04-03 13:47:23.697 +04:00 [DBG] Connection id "0HMPK51CDS4U2" stopped.
2023-04-03 13:47:47.966 +04:00 [DBG] Connection id "0HMPK51CDS4U3" accepted.
2023-04-03 13:47:47.968 +04:00 [DBG] Connection id "0HMPK51CDS4U3" started.
2023-04-03 13:47:47.970 +04:00 [DBG] Connection 0HMPK51CDS4U3 established using the following protocol: "Tls12"
2023-04-03 13:47:47.973 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 47
2023-04-03 13:47:47.974 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 13:47:47.975 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-03 13:47:47.977 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:47:47.978 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 13:47:47.979 +04:00 [DBG] The request has an origin header: 'https://localhost:7261'.
2023-04-03 13:47:47.980 +04:00 [INF] CORS policy execution successful.
2023-04-03 13:47:47.983 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 13:47:47.989 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:47:47.999 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 13:47:48.000 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 13:47:48.002 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 13:47:48.003 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 13:47:48.005 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 13:47:48.006 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 13:47:48.007 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 13:47:48.010 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 13:47:48.042 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 13:47:48.045 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-03 13:47:48.047 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 13:47:48.053 +04:00 [DBG] Connection id "0HMPK51CDS4U3", Request id "0HMPK51CDS4U3:00000001": started reading request body.
2023-04-03 13:47:48.054 +04:00 [DBG] Connection id "0HMPK51CDS4U3", Request id "0HMPK51CDS4U3:00000001": done reading request body.
2023-04-03 13:47:48.057 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-03 13:47:48.058 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:47:48.059 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:47:48.060 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 13:47:48.069 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:47:48.081 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 13:47:48.095 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.CardNumber == __request_CardNumber_0 && c.Pin == __request_Pin_1)'
2023-04-03 13:47:48.128 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-03 13:47:48.197 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE (c.CardNumber == @__request_CardNumber_0) && (c.Pin == @__request_Pin_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-03 13:47:48.216 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 13:47:48.218 +04:00 [DBG] Creating DbConnection.
2023-04-03 13:47:48.219 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-03 13:47:48.221 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2023-04-03 13:47:48.224 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2023-04-03 13:47:48.227 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:47:48.231 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:47:48.235 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 13:47:48.276 +04:00 [INF] Executed DbCommand (44ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 13:47:48.286 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:47:48.287 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 8ms reading results.
2023-04-03 13:47:48.290 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:47:48.292 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 13:47:48.297 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 289.2635ms
2023-04-03 13:47:48.299 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:47:48.307 +04:00 [ERR] Can't identify card
System.ArgumentException: Can't identify card
   at BankSystem.Atm.Services.LoginService.LoginAsync(LoginRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\LoginService.cs:line 28
   at ATM.Api.Controllers.CardController.Login(LoginRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 13:47:48.418 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 13:47:48.420 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:47:48.421 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 13:47:48.423 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 47 - 1 - application/json 449.9151ms
2023-04-03 13:47:53.743 +04:00 [DBG] Connection id "0HMPK51CDS4U3" received FIN.
2023-04-03 13:47:53.745 +04:00 [DBG] Connection id "0HMPK51CDS4U3" is closed. The last processed stream ID was 1.
2023-04-03 13:47:53.745 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4U3 completed.
2023-04-03 13:47:53.746 +04:00 [DBG] Connection id "0HMPK51CDS4U3" sending FIN because: "The client closed the connection."
2023-04-03 13:47:53.759 +04:00 [DBG] Connection id "0HMPK51CDS4U3" stopped.
2023-04-03 13:48:18.551 +04:00 [DBG] Connection id "0HMPK51CDS4U4" accepted.
2023-04-03 13:48:18.552 +04:00 [DBG] Connection id "0HMPK51CDS4U4" started.
2023-04-03 13:48:18.554 +04:00 [DBG] Connection 0HMPK51CDS4U4 established using the following protocol: "Tls12"
2023-04-03 13:48:18.555 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-03 13:48:18.557 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 13:48:18.558 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 13:48:18.559 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 13:48:18.559 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 13:48:18.560 +04:00 [INF] CORS policy execution successful.
2023-04-03 13:48:18.561 +04:00 [DBG] The request is a preflight request.
2023-04-03 13:48:18.562 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 6.5054ms
2023-04-03 13:48:18.563 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 48
2023-04-03 13:48:18.564 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 13:48:18.565 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-03 13:48:18.566 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:48:18.567 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 13:48:18.568 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 13:48:18.569 +04:00 [INF] CORS policy execution successful.
2023-04-03 13:48:18.569 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 13:48:18.571 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:48:18.572 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 13:48:18.573 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 13:48:18.575 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 13:48:18.576 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 13:48:18.577 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 13:48:18.578 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 13:48:18.580 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 13:48:18.581 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 13:48:18.582 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 13:48:18.584 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-03 13:48:18.585 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 13:48:18.586 +04:00 [DBG] Connection id "0HMPK51CDS4U4", Request id "0HMPK51CDS4U4:00000003": started reading request body.
2023-04-03 13:48:18.587 +04:00 [DBG] Connection id "0HMPK51CDS4U4", Request id "0HMPK51CDS4U4:00000003": done reading request body.
2023-04-03 13:48:18.588 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-03 13:48:18.589 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:48:18.590 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:48:18.591 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 13:48:18.593 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:48:18.631 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 13:48:18.637 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 13:48:18.638 +04:00 [DBG] Creating DbConnection.
2023-04-03 13:48:18.639 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-03 13:48:18.640 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-03 13:48:18.641 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-03 13:48:18.642 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:48:18.644 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:48:18.645 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 13:48:18.652 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 13:48:18.656 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:48:18.667 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:48:18.675 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:48:18.687 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:48:18.689 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 33ms reading results.
2023-04-03 13:48:18.691 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:48:18.692 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 13:48:18.784 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 13:48:18.787 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 13:48:18.787 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 13:48:18.788 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 13:48:18.789 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 13:48:18.790 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 13:48:18.797 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 217.348ms
2023-04-03 13:48:18.798 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:48:18.799 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 13:48:18.800 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:48:18.802 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 13:48:18.803 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 48 - 200 - application/json;+charset=utf-8 240.3196ms
2023-04-03 13:48:23.791 +04:00 [DBG] Connection id "0HMPK51CDS4U4" received FIN.
2023-04-03 13:48:23.792 +04:00 [DBG] Connection id "0HMPK51CDS4U4" is closed. The last processed stream ID was 3.
2023-04-03 13:48:23.793 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4U4 completed.
2023-04-03 13:48:23.794 +04:00 [DBG] Connection id "0HMPK51CDS4U4" sending FIN because: "The client closed the connection."
2023-04-03 13:48:23.806 +04:00 [DBG] Connection id "0HMPK51CDS4U4" stopped.
2023-04-03 13:48:40.921 +04:00 [DBG] Connection id "0HMPK51CDS4U5" accepted.
2023-04-03 13:48:40.922 +04:00 [DBG] Connection id "0HMPK51CDS4U5" started.
2023-04-03 13:48:40.924 +04:00 [DBG] Connection 0HMPK51CDS4U5 established using the following protocol: "Tls12"
2023-04-03 13:48:40.926 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-03 13:48:40.927 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 13:48:40.928 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 13:48:40.928 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 13:48:40.929 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 13:48:40.930 +04:00 [INF] CORS policy execution successful.
2023-04-03 13:48:40.931 +04:00 [DBG] The request is a preflight request.
2023-04-03 13:48:40.932 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 5.8303ms
2023-04-03 13:48:40.933 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 48
2023-04-03 13:48:40.934 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 13:48:40.934 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-03 13:48:40.936 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:48:40.937 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 13:48:40.937 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 13:48:40.938 +04:00 [INF] CORS policy execution successful.
2023-04-03 13:48:40.938 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 13:48:40.940 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:48:40.941 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 13:48:40.943 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 13:48:40.944 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 13:48:40.945 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 13:48:40.946 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 13:48:40.947 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 13:48:40.948 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 13:48:40.950 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 13:48:40.952 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 13:48:40.953 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-03 13:48:40.954 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 13:48:40.955 +04:00 [DBG] Connection id "0HMPK51CDS4U5", Request id "0HMPK51CDS4U5:00000003": started reading request body.
2023-04-03 13:48:40.956 +04:00 [DBG] Connection id "0HMPK51CDS4U5", Request id "0HMPK51CDS4U5:00000003": done reading request body.
2023-04-03 13:48:40.957 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-03 13:48:40.958 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:48:40.959 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:48:40.960 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 13:48:40.961 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:48:40.962 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 13:48:40.964 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 13:48:40.964 +04:00 [DBG] Creating DbConnection.
2023-04-03 13:48:40.965 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 13:48:40.965 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 13:48:40.966 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 13:48:40.968 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:48:40.969 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:48:40.969 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 13:48:40.974 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 13:48:40.977 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:48:40.978 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:48:40.979 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:48:40.980 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:48:40.981 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 13:48:40.983 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:48:40.984 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 13:48:40.986 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 13:48:40.988 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 13:48:40.988 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 13:48:40.989 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 13:48:40.990 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 13:48:40.991 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 13:48:40.992 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 43.9938ms
2023-04-03 13:48:40.993 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:48:40.994 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 13:48:40.995 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:48:40.997 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 13:48:40.998 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 48 - 200 - application/json;+charset=utf-8 65.1731ms
2023-04-03 13:48:43.813 +04:00 [DBG] Connection id "0HMPK51CDS4U5" received FIN.
2023-04-03 13:48:43.814 +04:00 [DBG] Connection id "0HMPK51CDS4U5" is closed. The last processed stream ID was 3.
2023-04-03 13:48:43.814 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4U5 completed.
2023-04-03 13:48:43.815 +04:00 [DBG] Connection id "0HMPK51CDS4U5" sending FIN because: "The client closed the connection."
2023-04-03 13:48:43.828 +04:00 [DBG] Connection id "0HMPK51CDS4U5" stopped.
2023-04-03 13:49:25.737 +04:00 [DBG] Connection id "0HMPK51CDS4U6" accepted.
2023-04-03 13:49:25.738 +04:00 [DBG] Connection id "0HMPK51CDS4U6" started.
2023-04-03 13:49:25.740 +04:00 [DBG] Connection 0HMPK51CDS4U6 established using the following protocol: "Tls12"
2023-04-03 13:49:25.742 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-03 13:49:25.743 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 13:49:25.744 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 13:49:25.745 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 13:49:25.745 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 13:49:25.746 +04:00 [INF] CORS policy execution successful.
2023-04-03 13:49:25.747 +04:00 [DBG] The request is a preflight request.
2023-04-03 13:49:25.748 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 5.8118ms
2023-04-03 13:49:25.749 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 48
2023-04-03 13:49:25.752 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 13:49:25.753 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-03 13:49:25.755 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:49:25.756 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 13:49:25.757 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 13:49:25.758 +04:00 [INF] CORS policy execution successful.
2023-04-03 13:49:25.759 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 13:49:25.760 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:49:25.761 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 13:49:25.762 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 13:49:25.764 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 13:49:25.765 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 13:49:25.766 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 13:49:25.768 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 13:49:25.769 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 13:49:25.770 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 13:49:25.771 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 13:49:25.772 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-03 13:49:25.774 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 13:49:25.775 +04:00 [DBG] Connection id "0HMPK51CDS4U6", Request id "0HMPK51CDS4U6:00000003": started reading request body.
2023-04-03 13:49:25.776 +04:00 [DBG] Connection id "0HMPK51CDS4U6", Request id "0HMPK51CDS4U6:00000003": done reading request body.
2023-04-03 13:49:25.777 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-03 13:49:25.778 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:49:25.779 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:49:25.780 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 13:49:25.782 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:49:25.784 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 13:49:25.786 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 13:49:25.787 +04:00 [DBG] Creating DbConnection.
2023-04-03 13:49:25.788 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 13:49:25.788 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 13:49:25.789 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 13:49:25.790 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:49:25.791 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:49:25.792 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 13:49:25.797 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 13:49:25.800 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:49:25.801 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:49:25.802 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:49:25.804 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:49:25.805 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 13:49:25.806 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:49:25.807 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 13:49:25.808 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 13:49:25.810 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 13:49:25.811 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 13:49:25.812 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 13:49:25.812 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 13:49:25.813 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 13:49:25.814 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 45.1811ms
2023-04-03 13:49:25.817 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:49:25.818 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 13:49:25.819 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:49:25.820 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 13:49:25.822 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 48 - 200 - application/json;+charset=utf-8 72.2377ms
2023-04-03 13:49:28.861 +04:00 [DBG] Connection id "0HMPK51CDS4U6" received FIN.
2023-04-03 13:49:28.863 +04:00 [DBG] Connection id "0HMPK51CDS4U6" is closed. The last processed stream ID was 3.
2023-04-03 13:49:28.863 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4U6 completed.
2023-04-03 13:49:28.864 +04:00 [DBG] Connection id "0HMPK51CDS4U6" sending FIN because: "The client closed the connection."
2023-04-03 13:49:28.877 +04:00 [DBG] Connection id "0HMPK51CDS4U6" stopped.
2023-04-03 13:50:16.561 +04:00 [DBG] Connection id "0HMPK51CDS4U7" accepted.
2023-04-03 13:50:16.563 +04:00 [DBG] Connection id "0HMPK51CDS4U7" started.
2023-04-03 13:50:16.564 +04:00 [DBG] Connection 0HMPK51CDS4U7 established using the following protocol: "Tls12"
2023-04-03 13:50:16.566 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-03 13:50:16.567 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 13:50:16.568 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 13:50:16.569 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 13:50:16.569 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 13:50:16.570 +04:00 [INF] CORS policy execution successful.
2023-04-03 13:50:16.571 +04:00 [DBG] The request is a preflight request.
2023-04-03 13:50:16.572 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 6.2775ms
2023-04-03 13:50:16.573 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 48
2023-04-03 13:50:16.574 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 13:50:16.575 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-03 13:50:16.577 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:50:16.578 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 13:50:16.578 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 13:50:16.579 +04:00 [INF] CORS policy execution successful.
2023-04-03 13:50:16.580 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 13:50:16.581 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:50:16.582 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 13:50:16.583 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 13:50:16.585 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 13:50:16.586 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 13:50:16.588 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 13:50:16.589 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 13:50:16.591 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 13:50:16.592 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 13:50:16.593 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 13:50:16.594 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-03 13:50:16.595 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 13:50:16.596 +04:00 [DBG] Connection id "0HMPK51CDS4U7", Request id "0HMPK51CDS4U7:00000003": started reading request body.
2023-04-03 13:50:16.597 +04:00 [DBG] Connection id "0HMPK51CDS4U7", Request id "0HMPK51CDS4U7:00000003": done reading request body.
2023-04-03 13:50:16.598 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-03 13:50:16.599 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:50:16.600 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:50:16.602 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 13:50:16.603 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:50:16.604 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 13:50:16.606 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 13:50:16.607 +04:00 [DBG] Creating DbConnection.
2023-04-03 13:50:16.608 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 13:50:16.609 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 13:50:16.610 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 13:50:16.611 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:50:16.612 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:50:16.613 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 13:50:16.617 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 13:50:16.620 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:50:16.622 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:50:16.623 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:50:16.624 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:50:16.625 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 13:50:16.626 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:50:16.627 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 13:50:16.628 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 13:50:16.630 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 13:50:16.631 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 13:50:16.632 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 13:50:16.633 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 13:50:16.634 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 13:50:16.635 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 44.5293ms
2023-04-03 13:50:16.636 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:50:16.637 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 13:50:16.639 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:50:16.640 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 13:50:16.641 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 48 - 200 - application/json;+charset=utf-8 68.0511ms
2023-04-03 13:50:18.905 +04:00 [DBG] Connection id "0HMPK51CDS4U7" received FIN.
2023-04-03 13:50:18.907 +04:00 [DBG] Connection id "0HMPK51CDS4U7" is closed. The last processed stream ID was 3.
2023-04-03 13:50:18.907 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4U7 completed.
2023-04-03 13:50:18.909 +04:00 [DBG] Connection id "0HMPK51CDS4U7" sending FIN because: "The client closed the connection."
2023-04-03 13:50:18.911 +04:00 [DBG] Connection id "0HMPK51CDS4U7" stopped.
2023-04-03 13:50:31.714 +04:00 [DBG] Connection id "0HMPK51CDS4U8" accepted.
2023-04-03 13:50:31.716 +04:00 [DBG] Connection id "0HMPK51CDS4U8" started.
2023-04-03 13:50:31.718 +04:00 [DBG] Connection 0HMPK51CDS4U8 established using the following protocol: "Tls12"
2023-04-03 13:50:31.719 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-03 13:50:31.720 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 13:50:31.721 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 13:50:31.722 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 13:50:31.722 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 13:50:31.723 +04:00 [INF] CORS policy execution successful.
2023-04-03 13:50:31.724 +04:00 [DBG] The request is a preflight request.
2023-04-03 13:50:31.724 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 5.1055ms
2023-04-03 13:50:31.726 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 48
2023-04-03 13:50:31.726 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 13:50:31.728 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-03 13:50:31.729 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:50:31.730 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 13:50:31.731 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 13:50:31.731 +04:00 [INF] CORS policy execution successful.
2023-04-03 13:50:31.732 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 13:50:31.733 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:50:31.734 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 13:50:31.735 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 13:50:31.736 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 13:50:31.737 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 13:50:31.739 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 13:50:31.740 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 13:50:31.741 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 13:50:31.742 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 13:50:31.742 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 13:50:31.744 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-03 13:50:31.745 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 13:50:31.746 +04:00 [DBG] Connection id "0HMPK51CDS4U8", Request id "0HMPK51CDS4U8:00000003": started reading request body.
2023-04-03 13:50:31.747 +04:00 [DBG] Connection id "0HMPK51CDS4U8", Request id "0HMPK51CDS4U8:00000003": done reading request body.
2023-04-03 13:50:31.748 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-03 13:50:31.749 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:50:31.750 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:50:31.751 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 13:50:31.752 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:50:31.753 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 13:50:31.755 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 13:50:31.756 +04:00 [DBG] Creating DbConnection.
2023-04-03 13:50:31.756 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 13:50:31.757 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 13:50:31.758 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 13:50:31.759 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:50:31.760 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:50:31.761 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 13:50:31.765 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 13:50:31.767 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:50:31.768 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:50:31.769 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:50:31.770 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:50:31.771 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 13:50:31.772 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:50:31.773 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 13:50:31.777 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 13:50:31.784 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 13:50:31.785 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 13:50:31.786 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 13:50:31.787 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 13:50:31.788 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 13:50:31.789 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 48.3482ms
2023-04-03 13:50:31.790 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:50:31.791 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 13:50:31.792 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:50:31.793 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 13:50:31.795 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 48 - 200 - application/json;+charset=utf-8 69.1619ms
2023-04-03 13:50:38.947 +04:00 [DBG] Connection id "0HMPK51CDS4U8" received FIN.
2023-04-03 13:50:38.949 +04:00 [DBG] Connection id "0HMPK51CDS4U8" is closed. The last processed stream ID was 3.
2023-04-03 13:50:38.949 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4U8 completed.
2023-04-03 13:50:38.950 +04:00 [DBG] Connection id "0HMPK51CDS4U8" sending FIN because: "The client closed the connection."
2023-04-03 13:50:38.963 +04:00 [DBG] Connection id "0HMPK51CDS4U8" stopped.
2023-04-03 13:51:58.897 +04:00 [DBG] Connection id "0HMPK51CDS4U9" accepted.
2023-04-03 13:51:58.898 +04:00 [DBG] Connection id "0HMPK51CDS4U9" started.
2023-04-03 13:51:58.900 +04:00 [DBG] Connection 0HMPK51CDS4U9 established using the following protocol: "Tls12"
2023-04-03 13:51:58.902 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-03 13:51:58.902 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 13:51:58.903 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 13:51:58.904 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 13:51:58.905 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 13:51:58.906 +04:00 [INF] CORS policy execution successful.
2023-04-03 13:51:58.907 +04:00 [DBG] The request is a preflight request.
2023-04-03 13:51:58.908 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 5.8209ms
2023-04-03 13:51:58.909 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 48
2023-04-03 13:51:58.909 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 13:51:58.911 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-03 13:51:58.912 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:51:58.913 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 13:51:58.914 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 13:51:58.915 +04:00 [INF] CORS policy execution successful.
2023-04-03 13:51:58.916 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 13:51:58.916 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:51:58.917 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 13:51:58.919 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 13:51:58.919 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 13:51:58.920 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 13:51:58.922 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 13:51:58.923 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 13:51:58.924 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 13:51:58.925 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 13:51:58.926 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 13:51:58.927 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-03 13:51:58.929 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 13:51:58.930 +04:00 [DBG] Connection id "0HMPK51CDS4U9", Request id "0HMPK51CDS4U9:00000003": started reading request body.
2023-04-03 13:51:58.931 +04:00 [DBG] Connection id "0HMPK51CDS4U9", Request id "0HMPK51CDS4U9:00000003": done reading request body.
2023-04-03 13:51:58.932 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-03 13:51:58.933 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:51:58.934 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:51:58.935 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 13:51:58.937 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 13:51:58.938 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 13:51:58.940 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 13:51:58.941 +04:00 [DBG] Creating DbConnection.
2023-04-03 13:51:58.942 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 13:51:58.943 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-03 13:51:58.944 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-03 13:51:58.945 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:51:58.946 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:51:58.947 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 13:51:58.951 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 13:51:58.954 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:51:58.955 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:51:58.956 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 13:51:58.957 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:51:58.959 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 13:51:58.960 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:51:58.961 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 13:51:58.962 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 13:51:58.966 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 13:51:58.970 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 13:51:58.974 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 13:51:58.975 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 13:51:58.976 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 13:51:58.977 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 53.5782ms
2023-04-03 13:51:58.979 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 13:51:58.980 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 13:51:58.981 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 13:51:58.982 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 13:51:58.983 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 48 - 200 - application/json;+charset=utf-8 74.7025ms
2023-04-03 13:51:59.054 +04:00 [DBG] Connection id "0HMPK51CDS4U9" received FIN.
2023-04-03 13:51:59.055 +04:00 [DBG] Connection id "0HMPK51CDS4U9" is closed. The last processed stream ID was 3.
2023-04-03 13:51:59.055 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4U9 completed.
2023-04-03 13:51:59.056 +04:00 [DBG] Connection id "0HMPK51CDS4U9" sending FIN because: "The client closed the connection."
2023-04-03 13:51:59.069 +04:00 [DBG] Connection id "0HMPK51CDS4U9" stopped.
2023-04-03 14:49:39.273 +04:00 [DBG] Connection id "0HMPK51CDS4UA" accepted.
2023-04-03 14:49:39.279 +04:00 [DBG] Connection id "0HMPK51CDS4UA" started.
2023-04-03 14:49:39.298 +04:00 [DBG] Connection 0HMPK51CDS4UA established using the following protocol: "Tls12"
2023-04-03 14:49:39.308 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-03 14:49:39.311 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 14:49:39.313 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 14:49:39.315 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 14:49:39.317 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 14:49:39.317 +04:00 [INF] CORS policy execution successful.
2023-04-03 14:49:39.318 +04:00 [DBG] The request is a preflight request.
2023-04-03 14:49:39.321 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 13.2369ms
2023-04-03 14:49:39.323 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 48
2023-04-03 14:49:39.325 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 14:49:39.327 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-03 14:49:39.328 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 14:49:39.329 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 14:49:39.329 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 14:49:39.330 +04:00 [INF] CORS policy execution successful.
2023-04-03 14:49:39.332 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 14:49:39.334 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 14:49:39.337 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 14:49:39.338 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 14:49:39.340 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 14:49:39.341 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 14:49:39.343 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 14:49:39.344 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 14:49:39.345 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 14:49:39.352 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 14:49:39.356 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 14:49:39.358 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-03 14:49:39.359 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 14:49:39.361 +04:00 [DBG] Connection id "0HMPK51CDS4UA", Request id "0HMPK51CDS4UA:00000003": started reading request body.
2023-04-03 14:49:39.362 +04:00 [DBG] Connection id "0HMPK51CDS4UA", Request id "0HMPK51CDS4UA:00000003": done reading request body.
2023-04-03 14:49:39.363 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-03 14:49:39.365 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 14:49:39.366 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 14:49:39.367 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 14:49:39.369 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 14:49:39.380 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 14:49:39.393 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 14:49:39.394 +04:00 [DBG] Creating DbConnection.
2023-04-03 14:49:39.397 +04:00 [DBG] Created DbConnection. (3ms).
2023-04-03 14:49:39.399 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2023-04-03 14:49:39.401 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2023-04-03 14:49:39.402 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 14:49:41.092 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 14:49:41.094 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 14:49:41.105 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 14:49:41.110 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 14:49:41.112 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 14:49:41.113 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 14:49:41.115 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 14:49:41.116 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 8ms reading results.
2023-04-03 14:49:41.117 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 14:49:41.118 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 14:49:41.123 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 14:49:41.125 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 14:49:41.126 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 14:49:41.127 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 14:49:41.127 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 14:49:41.128 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 14:49:41.130 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 1785.1218ms
2023-04-03 14:49:41.131 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 14:49:41.133 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 14:49:41.134 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 14:49:41.135 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 14:49:41.137 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 48 - 200 - application/json;+charset=utf-8 1814.6055ms
2023-04-03 14:50:04.358 +04:00 [DBG] Connection id "0HMPK51CDS4UA" received FIN.
2023-04-03 14:50:04.359 +04:00 [DBG] Connection id "0HMPK51CDS4UA" is closed. The last processed stream ID was 3.
2023-04-03 14:50:04.359 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UA completed.
2023-04-03 14:50:04.360 +04:00 [DBG] Connection id "0HMPK51CDS4UA" sending FIN because: "The client closed the connection."
2023-04-03 14:50:04.373 +04:00 [DBG] Connection id "0HMPK51CDS4UA" stopped.
2023-04-03 16:40:21.827 +04:00 [DBG] Connection id "0HMPK51CDS4UB" accepted.
2023-04-03 16:40:21.833 +04:00 [DBG] Connection id "0HMPK51CDS4UB" started.
2023-04-03 16:40:21.849 +04:00 [DBG] Connection 0HMPK51CDS4UB established using the following protocol: "Tls12"
2023-04-03 16:40:21.860 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0
2023-04-03 16:40:21.860 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0
2023-04-03 16:40:21.860 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0
2023-04-03 16:40:21.861 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0
2023-04-03 16:40:21.865 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:40:21.865 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:40:21.865 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:40:21.865 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:40:21.866 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:21.867 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:21.868 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:21.869 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:21.872 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:40:21.872 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:40:21.872 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:40:21.874 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:40:21.877 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:40:21.877 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:40:21.877 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:40:21.877 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:40:21.878 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:40:21.879 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:40:21.880 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:40:21.881 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:40:21.883 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:40:21.883 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:40:21.883 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:40:21.884 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:40:21.885 +04:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:21.886 +04:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:21.887 +04:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:21.888 +04:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:21.897 +04:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:21.897 +04:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:21.897 +04:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:21.897 +04:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:21.899 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0 - 405 0 - 40.4233ms
2023-04-03 16:40:21.900 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0 - 405 0 - 38.2123ms
2023-04-03 16:40:21.901 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0 - 405 0 - 42.3466ms
2023-04-03 16:40:21.902 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0 - 405 0 - 42.1894ms
2023-04-03 16:40:23.431 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0
2023-04-03 16:40:23.431 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0
2023-04-03 16:40:23.433 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:40:23.433 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:40:23.434 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:23.435 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:23.436 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:40:23.437 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:40:23.438 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:40:23.438 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:40:23.439 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:40:23.440 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:40:23.441 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:40:23.442 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:40:23.443 +04:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:23.444 +04:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:23.446 +04:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:23.446 +04:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:23.447 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0 - 405 0 - 16.1208ms
2023-04-03 16:40:23.448 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0 - 405 0 - 17.0437ms
2023-04-03 16:40:24.705 +04:00 [DBG] Connection id "0HMPK51CDS4UB" received FIN.
2023-04-03 16:40:24.706 +04:00 [DBG] Connection id "0HMPK51CDS4UB" is closed. The last processed stream ID was 11.
2023-04-03 16:40:24.707 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UB completed.
2023-04-03 16:40:24.709 +04:00 [DBG] Connection id "0HMPK51CDS4UB" sending FIN because: "The client closed the connection."
2023-04-03 16:40:24.720 +04:00 [DBG] Connection id "0HMPK51CDS4UB" stopped.
2023-04-03 16:40:29.739 +04:00 [DBG] Connection id "0HMPK51CDS4UC" accepted.
2023-04-03 16:40:29.741 +04:00 [DBG] Connection id "0HMPK51CDS4UC" started.
2023-04-03 16:40:29.745 +04:00 [DBG] Connection 0HMPK51CDS4UC established using the following protocol: "Tls12"
2023-04-03 16:40:29.748 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0
2023-04-03 16:40:29.749 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0
2023-04-03 16:40:29.750 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:40:29.751 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:40:29.752 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:29.753 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:29.754 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:40:29.756 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:40:29.756 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:40:29.757 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:40:29.758 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:40:29.760 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:40:29.762 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:40:29.763 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:40:29.764 +04:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:29.765 +04:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:29.766 +04:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:29.767 +04:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2023-04-03 16:40:29.768 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0 - 405 0 - 19.7873ms
2023-04-03 16:40:29.769 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/see-balance - 0 - 405 0 - 20.9316ms
2023-04-03 16:40:34.710 +04:00 [DBG] Connection id "0HMPK51CDS4UC" received FIN.
2023-04-03 16:40:34.711 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UC completed.
2023-04-03 16:40:34.711 +04:00 [DBG] Connection id "0HMPK51CDS4UC" is closed. The last processed stream ID was 3.
2023-04-03 16:40:34.713 +04:00 [DBG] Connection id "0HMPK51CDS4UC" sending FIN because: "The client closed the connection."
2023-04-03 16:40:34.716 +04:00 [DBG] Connection id "0HMPK51CDS4UC" stopped.
2023-04-03 16:40:52.123 +04:00 [DBG] Connection id "0HMPK51CDS4UD" accepted.
2023-04-03 16:40:52.125 +04:00 [DBG] Connection id "0HMPK51CDS4UD" started.
2023-04-03 16:40:52.128 +04:00 [DBG] Connection 0HMPK51CDS4UD established using the following protocol: "Tls12"
2023-04-03 16:40:52.129 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:40:52.131 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:40:52.133 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:40:52.136 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:40:52.142 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:40:52.143 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:40:52.144 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:40:52.145 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:40:52.178 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:40:52.195 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:40:52.196 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 66.0755ms
2023-04-03 16:40:54.649 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:40:54.650 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:40:54.651 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:40:54.654 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:40:54.656 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:40:54.657 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:40:54.659 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:40:54.660 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:40:54.662 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:40:54.668 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:40:54.670 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 20.5579ms
2023-04-03 16:40:54.672 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:40:54.673 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:40:54.674 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:40:54.676 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:40:54.677 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:40:54.679 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:40:54.680 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:40:54.681 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:40:54.683 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:40:54.686 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:40:54.687 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 15.5918ms
2023-04-03 16:40:54.734 +04:00 [DBG] Connection id "0HMPK51CDS4UD" received FIN.
2023-04-03 16:40:54.735 +04:00 [DBG] Connection id "0HMPK51CDS4UD" is closed. The last processed stream ID was 5.
2023-04-03 16:40:54.735 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UD completed.
2023-04-03 16:40:54.736 +04:00 [DBG] Connection id "0HMPK51CDS4UD" sending FIN because: "The client closed the connection."
2023-04-03 16:40:54.748 +04:00 [DBG] Connection id "0HMPK51CDS4UD" stopped.
2023-04-03 16:41:29.141 +04:00 [DBG] Connection id "0HMPK51CDS4UE" accepted.
2023-04-03 16:41:29.142 +04:00 [DBG] Connection id "0HMPK51CDS4UE" started.
2023-04-03 16:41:29.144 +04:00 [DBG] Connection 0HMPK51CDS4UE established using the following protocol: "Tls12"
2023-04-03 16:41:29.147 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:41:29.148 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:41:29.149 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:41:29.151 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:41:29.152 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:41:29.153 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:41:29.154 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:41:29.155 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:41:29.157 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:41:29.158 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:41:29.159 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 12.3662ms
2023-04-03 16:41:32.125 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:41:32.129 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:41:32.130 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:41:32.131 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:41:32.132 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:41:32.132 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:41:32.133 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:41:32.134 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:41:32.135 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:41:32.135 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:41:32.136 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 10.9899ms
2023-04-03 16:41:35.124 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:41:35.124 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:41:35.125 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:41:35.127 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:41:35.127 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:41:35.128 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:41:35.129 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:41:35.130 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:41:35.131 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:41:35.131 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:41:35.132 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 8.8130ms
2023-04-03 16:41:40.127 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:41:40.128 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:41:40.129 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:41:40.131 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:41:40.132 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:41:40.133 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:41:40.133 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:41:40.134 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:41:40.135 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:41:40.136 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:41:40.137 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 10.2601ms
2023-04-03 16:41:46.134 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:41:46.135 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:41:46.136 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:41:46.138 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:41:46.139 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:41:46.140 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:41:46.141 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:41:46.142 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:41:46.143 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:41:46.144 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:41:46.145 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 11.6000ms
2023-04-03 16:41:55.142 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:41:55.143 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:41:55.145 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:41:55.147 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:41:55.148 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:41:55.148 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:41:55.149 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:41:55.150 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:41:55.151 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:41:55.152 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:41:55.153 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 10.7249ms
2023-04-03 16:42:07.129 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:42:07.130 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:42:07.132 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:42:07.134 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:42:07.135 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:42:07.136 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:42:07.137 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:42:07.138 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:42:07.139 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:42:07.140 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:42:07.141 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 11.5025ms
2023-04-03 16:42:12.124 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:42:12.126 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:42:12.127 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:42:12.129 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:42:12.130 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:42:12.131 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:42:12.132 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:42:12.133 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:42:12.133 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:42:12.134 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:42:12.136 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 11.2487ms
2023-04-03 16:44:19.127 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:44:19.129 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:44:19.130 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:44:19.132 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:44:19.133 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:44:19.134 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:44:19.134 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:44:19.135 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:44:19.137 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:44:19.139 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:44:19.140 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 12.9574ms
2023-04-03 16:44:22.138 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:44:22.139 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:44:22.141 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:44:22.142 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:44:22.143 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:44:22.144 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:44:22.146 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:44:22.147 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:44:22.148 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:44:22.149 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:44:22.150 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 11.9320ms
2023-04-03 16:44:25.127 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:44:25.129 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:44:25.130 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:44:25.132 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:44:25.134 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:44:25.134 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:44:25.135 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:44:25.136 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:44:25.137 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:44:25.137 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:44:25.139 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 11.2401ms
2023-04-03 16:44:28.647 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:44:28.648 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:44:28.650 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:44:28.652 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:44:28.659 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:44:28.660 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:44:28.661 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:44:28.662 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:44:28.663 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:44:28.664 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:44:28.665 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 18.2995ms
2023-04-03 16:44:28.666 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:44:28.667 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:44:28.669 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:44:28.670 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:44:28.672 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:44:28.673 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:44:28.675 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:44:28.676 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:44:28.677 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:44:28.678 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:44:28.680 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 13.2441ms
2023-04-03 16:44:30.054 +04:00 [DBG] Connection id "0HMPK51CDS4UE" received FIN.
2023-04-03 16:44:30.056 +04:00 [DBG] Connection id "0HMPK51CDS4UE" is closed. The last processed stream ID was 25.
2023-04-03 16:44:30.056 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UE completed.
2023-04-03 16:44:30.057 +04:00 [DBG] Connection id "0HMPK51CDS4UE" sending FIN because: "The client closed the connection."
2023-04-03 16:44:30.071 +04:00 [DBG] Connection id "0HMPK51CDS4UE" stopped.
2023-04-03 16:44:38.244 +04:00 [DBG] Connection id "0HMPK51CDS4UF" accepted.
2023-04-03 16:44:38.245 +04:00 [DBG] Connection id "0HMPK51CDS4UF" started.
2023-04-03 16:44:38.248 +04:00 [DBG] Connection 0HMPK51CDS4UF established using the following protocol: "Tls12"
2023-04-03 16:44:38.249 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-03 16:44:38.249 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 16:44:38.250 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:44:38.251 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:44:38.252 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:44:38.252 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:44:38.253 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:44:38.256 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 6.9003ms
2023-04-03 16:44:38.257 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 48
2023-04-03 16:44:38.258 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 16:44:38.259 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-03 16:44:38.260 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 16:44:38.261 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:44:38.262 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:44:38.262 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:44:38.263 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:44:38.264 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 16:44:38.268 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:44:38.271 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:44:38.273 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:44:38.275 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:44:38.276 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:44:38.278 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:44:38.279 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:44:38.290 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:44:38.292 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 16:44:38.294 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-03 16:44:38.296 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 16:44:38.298 +04:00 [DBG] Connection id "0HMPK51CDS4UF", Request id "0HMPK51CDS4UF:00000003": started reading request body.
2023-04-03 16:44:38.299 +04:00 [DBG] Connection id "0HMPK51CDS4UF", Request id "0HMPK51CDS4UF:00000003": done reading request body.
2023-04-03 16:44:38.301 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-03 16:44:38.301 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 16:44:38.302 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 16:44:38.303 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 16:44:38.307 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 16:44:38.321 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:44:38.331 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:44:38.332 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:44:38.335 +04:00 [DBG] Created DbConnection. (2ms).
2023-04-03 16:44:38.337 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2023-04-03 16:44:38.339 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2023-04-03 16:44:38.340 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:44:39.687 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:44:39.692 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 16:44:39.702 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 16:44:39.710 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:44:39.714 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:44:39.716 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:44:39.718 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:44:39.719 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 14ms reading results.
2023-04-03 16:44:39.721 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:44:39.722 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (2ms).
2023-04-03 16:44:39.731 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:44:39.733 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:44:39.734 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:44:39.735 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:44:39.735 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:44:39.737 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:44:39.741 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 1461.8876ms
2023-04-03 16:44:39.742 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 16:44:39.745 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:44:39.746 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:44:39.747 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:44:39.749 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 48 - 200 - application/json;+charset=utf-8 1492.1473ms
2023-04-03 16:44:39.764 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:44:39.765 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:44:39.766 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:44:39.768 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:44:39.769 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:44:39.770 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:44:39.772 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:44:39.773 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:44:39.774 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:44:39.775 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:44:39.776 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 12.3361ms
2023-04-03 16:44:39.778 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:44:39.779 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:44:39.780 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:44:39.782 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:44:39.783 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:44:39.783 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:44:39.784 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:44:39.786 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:44:39.787 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:44:39.789 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:44:39.790 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 12.1607ms
2023-04-03 16:44:40.072 +04:00 [DBG] Connection id "0HMPK51CDS4UF" received FIN.
2023-04-03 16:44:40.074 +04:00 [DBG] Connection id "0HMPK51CDS4UF" is closed. The last processed stream ID was 7.
2023-04-03 16:44:40.074 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UF completed.
2023-04-03 16:44:40.076 +04:00 [DBG] Connection id "0HMPK51CDS4UF" sending FIN because: "The client closed the connection."
2023-04-03 16:44:40.088 +04:00 [DBG] Connection id "0HMPK51CDS4UF" stopped.
2023-04-03 16:44:44.127 +04:00 [DBG] Connection id "0HMPK51CDS4UG" accepted.
2023-04-03 16:44:44.128 +04:00 [DBG] Connection id "0HMPK51CDS4UG" started.
2023-04-03 16:44:44.131 +04:00 [DBG] Connection 0HMPK51CDS4UG established using the following protocol: "Tls12"
2023-04-03 16:44:44.132 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:44:44.134 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:44:44.139 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:44:44.146 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:44:44.147 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:44:44.148 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:44:44.149 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:44:44.150 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:44:44.151 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:44:44.153 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:44:44.155 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 22.3294ms
2023-04-03 16:44:44.157 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:44:44.158 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:44:44.159 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:44:44.161 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:44:44.162 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:44:44.163 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:44:44.164 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:44:44.165 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 16:44:44.166 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 16:44:44.167 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 16:44:44.168 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 11.2599ms
2023-04-03 16:44:50.089 +04:00 [DBG] Connection id "0HMPK51CDS4UG" received FIN.
2023-04-03 16:44:50.090 +04:00 [DBG] Connection id "0HMPK51CDS4UG" is closed. The last processed stream ID was 3.
2023-04-03 16:44:50.090 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UG completed.
2023-04-03 16:44:50.091 +04:00 [DBG] Connection id "0HMPK51CDS4UG" sending FIN because: "The client closed the connection."
2023-04-03 16:44:50.113 +04:00 [DBG] Connection id "0HMPK51CDS4UG" stopped.
2023-04-03 16:45:03.129 +04:00 [DBG] Connection id "0HMPK51CDS4UH" accepted.
2023-04-03 16:45:03.130 +04:00 [DBG] Connection id "0HMPK51CDS4UH" started.
2023-04-03 16:45:03.132 +04:00 [DBG] Connection 0HMPK51CDS4UH established using the following protocol: "Tls12"
2023-04-03 16:45:03.134 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:45:03.135 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:45:03.136 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:45:03.136 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:45:03.137 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:45:03.138 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:45:03.139 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:45:03.141 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 6.1124ms
2023-04-03 16:45:03.142 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:45:03.143 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:45:03.144 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:45:03.145 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:03.146 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:45:03.147 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:45:03.147 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:45:03.225 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:45:03.227 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:45:03.229 +04:00 [DBG] Authorization was successful.
2023-04-03 16:45:03.230 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:03.248 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:45:03.249 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:45:03.251 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:45:03.252 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:45:03.254 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:45:03.255 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:45:03.256 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:45:03.258 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:45:03.268 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:45:03.274 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.Id == __cardId_0)'
2023-04-03 16:45:03.284 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-03 16:45:03.310 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-03 16:45:03.315 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:45:03.315 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:45:03.316 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:45:03.317 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:45:03.318 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:45:03.319 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:03.320 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:03.321 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:45:03.327 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:45:03.330 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:03.331 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:03.332 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:03.333 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:03.334 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:45:03.335 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:03.336 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:45:03.339 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:45:03.340 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:45:03.341 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:45:03.341 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:45:03.342 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:45:03.343 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:45:03.356 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 100.3879ms
2023-04-03 16:45:03.358 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:03.359 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:45:03.361 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:03.361 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 16:45:03.363 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 220.6592ms
2023-04-03 16:45:04.129 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:45:04.130 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:45:04.131 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:45:04.132 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:04.134 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:45:04.134 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:45:04.135 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:45:04.136 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:45:04.138 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:45:04.140 +04:00 [DBG] Authorization was successful.
2023-04-03 16:45:04.141 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:04.142 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:45:04.144 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:45:04.145 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:45:04.146 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:45:04.148 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:45:04.149 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:45:04.150 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:45:04.151 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:45:04.153 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:45:04.155 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:45:04.156 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:45:04.156 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:45:04.157 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:45:04.158 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:45:04.159 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:04.160 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:04.161 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:45:04.165 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:45:04.167 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:04.168 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:04.169 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:04.171 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:04.172 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:45:04.173 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:04.174 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:45:04.175 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:45:04.177 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:45:04.178 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:45:04.179 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:45:04.179 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:45:04.180 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:45:04.182 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 32.2398ms
2023-04-03 16:45:04.183 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:04.184 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:45:04.185 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:04.187 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:45:04.189 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 59.7967ms
2023-04-03 16:45:09.214 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:45:09.215 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:45:09.216 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:45:09.216 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:45:09.217 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:45:09.218 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:45:09.221 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:45:09.223 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:45:09.224 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:45:09.226 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:45:09.227 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:45:09.229 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:45:09.230 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:45:09.232 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 17.7839ms
2023-04-03 16:45:09.234 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:45:09.236 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:45:09.237 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 21.0620ms
2023-04-03 16:45:09.239 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:45:09.242 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:45:09.245 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:09.246 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:45:09.247 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:45:09.249 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:45:09.252 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:45:09.253 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:45:09.256 +04:00 [DBG] Authorization was successful.
2023-04-03 16:45:09.257 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:09.259 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:45:09.261 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:45:09.263 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:45:09.264 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:45:09.270 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:45:09.271 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:45:09.273 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:45:09.274 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:45:09.277 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:45:09.279 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:45:09.280 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:45:09.285 +04:00 [DBG] Created DbConnection. (4ms).
2023-04-03 16:45:09.288 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2023-04-03 16:45:09.289 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2023-04-03 16:45:09.291 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:09.292 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:09.293 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:45:09.301 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:45:09.304 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:09.306 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:09.308 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:09.310 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:09.311 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 6ms reading results.
2023-04-03 16:45:09.313 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:09.314 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:45:09.316 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:45:09.320 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:45:09.321 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:45:09.322 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:45:09.323 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:45:09.325 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:45:09.327 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 53.8173ms
2023-04-03 16:45:09.328 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:09.328 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:45:09.330 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:45:09.329 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:45:09.331 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:45:09.334 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:09.336 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:09.340 +04:00 [DBG] Disposed connection to database '' on server '' (5ms).
2023-04-03 16:45:09.340 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:45:09.342 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 105.7907ms
2023-04-03 16:45:09.342 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:45:09.344 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:45:09.345 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:45:09.346 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:45:09.347 +04:00 [DBG] Authorization was successful.
2023-04-03 16:45:09.348 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:09.349 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:45:09.351 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:45:09.352 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:45:09.353 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:45:09.355 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:45:09.356 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:45:09.358 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:45:09.360 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:45:09.362 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:45:09.364 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:45:09.365 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:45:09.366 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:45:09.367 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:45:09.368 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:45:09.369 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:09.370 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:09.372 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:45:09.375 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:45:09.377 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:09.379 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:09.380 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:09.381 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:09.383 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 16:45:09.384 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:09.385 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:45:09.387 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:45:09.389 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:45:09.390 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:45:09.391 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:45:09.392 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:45:09.393 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:45:09.395 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 37.3766ms
2023-04-03 16:45:09.397 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:09.398 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:45:09.399 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:09.401 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:45:09.402 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 74.4723ms
2023-04-03 16:45:10.115 +04:00 [DBG] Connection id "0HMPK51CDS4UH" received FIN.
2023-04-03 16:45:10.117 +04:00 [DBG] Connection id "0HMPK51CDS4UH" is closed. The last processed stream ID was 13.
2023-04-03 16:45:10.117 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UH completed.
2023-04-03 16:45:10.118 +04:00 [DBG] Connection id "0HMPK51CDS4UH" sending FIN because: "The client closed the connection."
2023-04-03 16:45:10.134 +04:00 [DBG] Connection id "0HMPK51CDS4UH" stopped.
2023-04-03 16:45:14.576 +04:00 [DBG] Connection id "0HMPK51CDS4UI" accepted.
2023-04-03 16:45:14.577 +04:00 [DBG] Connection id "0HMPK51CDS4UI" started.
2023-04-03 16:45:14.579 +04:00 [DBG] Connection 0HMPK51CDS4UI established using the following protocol: "Tls12"
2023-04-03 16:45:14.581 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:45:14.581 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:45:14.582 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:45:14.583 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:45:14.583 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:45:14.584 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:45:14.585 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:45:14.585 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 4.3946ms
2023-04-03 16:45:14.587 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:45:14.588 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:45:14.589 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:45:14.591 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:14.591 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:45:14.592 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:45:14.593 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:45:14.594 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:45:14.595 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:45:14.596 +04:00 [DBG] Authorization was successful.
2023-04-03 16:45:14.596 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:14.597 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:45:14.599 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:45:14.600 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:45:14.601 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:45:14.603 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:45:14.605 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:45:14.606 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:45:14.607 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:45:14.609 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:45:14.611 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:45:14.612 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:45:14.612 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:45:14.613 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:45:14.614 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:45:14.615 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:14.616 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:14.617 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:45:14.622 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:45:14.624 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:14.626 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:14.627 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:14.628 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:14.629 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:45:14.630 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:14.631 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:45:14.633 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:45:14.635 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:45:14.635 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:45:14.636 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:45:14.637 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:45:14.639 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:45:14.640 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 33.8593ms
2023-04-03 16:45:14.641 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:14.642 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:45:14.644 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:14.645 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:45:14.646 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 58.7431ms
2023-04-03 16:45:20.137 +04:00 [DBG] Connection id "0HMPK51CDS4UI" received FIN.
2023-04-03 16:45:20.139 +04:00 [DBG] Connection id "0HMPK51CDS4UI" is closed. The last processed stream ID was 3.
2023-04-03 16:45:20.139 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UI completed.
2023-04-03 16:45:20.140 +04:00 [DBG] Connection id "0HMPK51CDS4UI" sending FIN because: "The client closed the connection."
2023-04-03 16:45:20.153 +04:00 [DBG] Connection id "0HMPK51CDS4UI" stopped.
2023-04-03 16:45:51.079 +04:00 [DBG] Connection id "0HMPK51CDS4UJ" accepted.
2023-04-03 16:45:51.080 +04:00 [DBG] Connection id "0HMPK51CDS4UJ" started.
2023-04-03 16:45:51.082 +04:00 [DBG] Connection 0HMPK51CDS4UJ established using the following protocol: "Tls12"
2023-04-03 16:45:51.084 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:45:51.085 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:45:51.086 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:45:51.087 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:45:51.088 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:45:51.089 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:45:51.090 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:45:51.091 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 7.0093ms
2023-04-03 16:45:51.092 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:45:51.093 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:45:51.094 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:45:51.095 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:51.096 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:45:51.097 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:45:51.098 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:45:51.101 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:45:51.102 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:45:51.104 +04:00 [DBG] Authorization was successful.
2023-04-03 16:45:51.104 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:51.106 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:45:51.109 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:45:51.110 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:45:51.112 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:45:51.116 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:45:51.118 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:45:51.120 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:45:51.123 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:45:51.126 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:45:51.128 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:45:51.129 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:45:51.131 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-03 16:45:51.132 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:45:51.133 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-03 16:45:51.135 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:51.136 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:51.138 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:45:51.144 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:45:51.148 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:51.149 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:51.150 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:51.152 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:51.154 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 6ms reading results.
2023-04-03 16:45:51.155 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:51.157 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:45:51.158 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:45:51.161 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:45:51.162 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:45:51.164 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:45:51.164 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:45:51.166 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:45:51.167 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 47.5243ms
2023-04-03 16:45:51.169 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:51.169 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:45:51.170 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:45:51.172 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:45:51.173 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:51.174 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:45:51.175 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 16:45:51.177 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:51.179 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 86.9620ms
2023-04-03 16:45:51.180 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:45:51.182 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:45:51.183 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:45:51.184 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:45:51.185 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:45:51.186 +04:00 [DBG] Authorization was successful.
2023-04-03 16:45:51.186 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:51.188 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:45:51.190 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:45:51.192 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:45:51.193 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:45:51.196 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:45:51.197 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:45:51.199 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:45:51.201 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:45:51.202 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:45:51.205 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:45:51.206 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:45:51.207 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:45:51.208 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:45:51.210 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-03 16:45:51.212 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:51.213 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:51.214 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:45:51.217 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:45:51.220 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:51.222 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:51.224 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:45:51.226 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:51.227 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 7ms reading results.
2023-04-03 16:45:51.229 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:51.230 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:45:51.232 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:45:51.234 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:45:51.235 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:45:51.237 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:45:51.238 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:45:51.240 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:45:51.241 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 42.428ms
2023-04-03 16:45:51.243 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:45:51.244 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:45:51.246 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:45:51.247 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:45:51.249 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 80.0364ms
2023-04-03 16:46:00.192 +04:00 [DBG] Connection id "0HMPK51CDS4UJ" received FIN.
2023-04-03 16:46:00.194 +04:00 [DBG] Connection id "0HMPK51CDS4UJ" is closed. The last processed stream ID was 5.
2023-04-03 16:46:00.194 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UJ completed.
2023-04-03 16:46:00.196 +04:00 [DBG] Connection id "0HMPK51CDS4UJ" sending FIN because: "The client closed the connection."
2023-04-03 16:46:00.207 +04:00 [DBG] Connection id "0HMPK51CDS4UJ" stopped.
2023-04-03 16:46:22.779 +04:00 [DBG] Connection id "0HMPK51CDS4UK" accepted.
2023-04-03 16:46:22.781 +04:00 [DBG] Connection id "0HMPK51CDS4UK" started.
2023-04-03 16:46:22.783 +04:00 [DBG] Connection 0HMPK51CDS4UK established using the following protocol: "Tls12"
2023-04-03 16:46:22.785 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:46:22.786 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:46:22.787 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:46:22.788 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:46:22.789 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:46:22.790 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:46:22.791 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:46:22.792 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 7.0863ms
2023-04-03 16:46:22.794 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:46:22.795 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:46:22.796 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:46:22.797 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:22.798 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:46:22.798 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:46:22.799 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:46:22.800 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:46:22.801 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:46:22.802 +04:00 [DBG] Authorization was successful.
2023-04-03 16:46:22.803 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:22.804 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:46:22.805 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:46:22.806 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:46:22.808 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:46:22.809 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:46:22.810 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:46:22.812 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:46:22.813 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:46:22.814 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:46:22.816 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:46:22.817 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:46:22.817 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:46:22.818 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:46:22.820 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:46:22.821 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:22.822 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:22.823 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:46:22.828 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:46:22.830 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:22.831 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:22.832 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:22.833 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:22.834 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:46:22.836 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:22.838 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:46:22.839 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:46:22.841 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:46:22.841 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:46:22.842 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:46:22.842 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:46:22.843 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:46:22.845 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 33.1057ms
2023-04-03 16:46:22.846 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:22.847 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:46:22.848 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:22.849 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 16:46:22.850 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 55.8666ms
2023-04-03 16:46:24.948 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:46:24.949 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:46:24.950 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:46:24.951 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:24.952 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:46:24.953 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:46:24.954 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:46:24.955 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:46:24.956 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:46:24.957 +04:00 [DBG] Authorization was successful.
2023-04-03 16:46:24.958 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:24.959 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:46:24.961 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:46:24.962 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:46:24.963 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:46:24.965 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:46:24.967 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:46:24.968 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:46:24.970 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:46:24.971 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:46:24.974 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:46:24.975 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:46:24.976 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:46:24.977 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:46:24.978 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:46:24.978 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:24.980 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:24.981 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:46:24.985 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:46:24.988 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:24.989 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:24.990 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:24.992 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:24.992 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:46:24.994 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:24.995 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:46:24.996 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:46:24.998 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:46:24.998 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:46:24.999 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:46:24.999 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:46:25.001 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:46:25.002 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 33.5589ms
2023-04-03 16:46:25.003 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:25.004 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:46:25.005 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:25.006 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:46:25.007 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 59.0886ms
2023-04-03 16:46:30.244 +04:00 [DBG] Connection id "0HMPK51CDS4UK" received FIN.
2023-04-03 16:46:30.245 +04:00 [DBG] Connection id "0HMPK51CDS4UK" is closed. The last processed stream ID was 5.
2023-04-03 16:46:30.245 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UK completed.
2023-04-03 16:46:30.247 +04:00 [DBG] Connection id "0HMPK51CDS4UK" sending FIN because: "The client closed the connection."
2023-04-03 16:46:30.259 +04:00 [DBG] Connection id "0HMPK51CDS4UK" stopped.
2023-04-03 16:46:35.578 +04:00 [DBG] Connection id "0HMPK51CDS4UL" accepted.
2023-04-03 16:46:35.579 +04:00 [DBG] Connection id "0HMPK51CDS4UL" started.
2023-04-03 16:46:35.581 +04:00 [DBG] Connection 0HMPK51CDS4UL established using the following protocol: "Tls12"
2023-04-03 16:46:35.582 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:46:35.583 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:46:35.584 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:46:35.584 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:46:35.586 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:46:35.588 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:46:35.588 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:46:35.589 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 7.1432ms
2023-04-03 16:46:35.590 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:46:35.591 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:46:35.592 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:46:35.593 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:35.594 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:46:35.595 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:46:35.596 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:46:35.596 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:46:35.597 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:46:35.598 +04:00 [DBG] Authorization was successful.
2023-04-03 16:46:35.598 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:35.599 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:46:35.601 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:46:35.603 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:46:35.604 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:46:35.606 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:46:35.607 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:46:35.608 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:46:35.609 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:46:35.611 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:46:35.613 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:46:35.613 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:46:35.614 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:46:35.615 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:46:35.616 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:46:35.617 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:35.619 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:35.620 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:46:35.624 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:46:35.628 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:35.629 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:35.630 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:35.631 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:35.632 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:46:35.633 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:35.634 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:46:35.636 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:46:35.638 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:46:35.639 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:46:35.640 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:46:35.640 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:46:35.641 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:46:35.643 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 35.0242ms
2023-04-03 16:46:35.645 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:35.646 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:46:35.647 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:35.648 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:46:35.649 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 58.5026ms
2023-04-03 16:46:38.906 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:46:38.906 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:46:38.907 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:46:38.909 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:38.909 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:46:38.910 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:46:38.911 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:46:38.912 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:46:38.912 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:46:38.913 +04:00 [DBG] Authorization was successful.
2023-04-03 16:46:38.914 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:38.915 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:46:38.917 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:46:38.918 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:46:38.919 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:46:38.922 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:46:38.923 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:46:38.924 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:46:38.925 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:46:38.927 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:46:38.929 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:46:38.931 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:46:38.931 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:46:38.932 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:46:38.933 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-03 16:46:38.934 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:38.935 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:38.937 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:46:38.941 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:46:38.944 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:38.946 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:38.949 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:38.951 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:38.952 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 8ms reading results.
2023-04-03 16:46:38.954 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:38.955 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:46:38.956 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:46:38.958 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:46:38.958 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:46:38.959 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:46:38.960 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:46:38.961 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:46:38.963 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 38.7697ms
2023-04-03 16:46:38.964 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:38.965 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:46:38.966 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:38.967 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:46:38.969 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 62.8430ms
2023-04-03 16:46:40.253 +04:00 [DBG] Connection id "0HMPK51CDS4UL" received FIN.
2023-04-03 16:46:40.255 +04:00 [DBG] Connection id "0HMPK51CDS4UL" is closed. The last processed stream ID was 5.
2023-04-03 16:46:40.255 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UL completed.
2023-04-03 16:46:40.256 +04:00 [DBG] Connection id "0HMPK51CDS4UL" sending FIN because: "The client closed the connection."
2023-04-03 16:46:40.269 +04:00 [DBG] Connection id "0HMPK51CDS4UL" stopped.
2023-04-03 16:46:44.375 +04:00 [DBG] Connection id "0HMPK51CDS4UM" accepted.
2023-04-03 16:46:44.377 +04:00 [DBG] Connection id "0HMPK51CDS4UM" started.
2023-04-03 16:46:44.380 +04:00 [DBG] Connection 0HMPK51CDS4UM established using the following protocol: "Tls12"
2023-04-03 16:46:44.382 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:46:44.383 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:46:44.385 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:46:44.386 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:46:44.387 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:46:44.388 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:46:44.389 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:46:44.390 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 7.7983ms
2023-04-03 16:46:44.392 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:46:44.393 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:46:44.394 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:46:44.396 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:44.397 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:46:44.397 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:46:44.398 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:46:44.399 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:46:44.400 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:46:44.401 +04:00 [DBG] Authorization was successful.
2023-04-03 16:46:44.404 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:44.405 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:46:44.407 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:46:44.408 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:46:44.409 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:46:44.411 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:46:44.412 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:46:44.414 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:46:44.415 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:46:44.417 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:46:44.419 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:46:44.419 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:46:44.420 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:46:44.421 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:46:44.422 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:46:44.423 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:44.424 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:44.425 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:46:44.428 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:46:44.430 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:44.431 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:44.432 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:44.433 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:44.434 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 16:46:44.435 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:44.436 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:46:44.438 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:46:44.439 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:46:44.440 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:46:44.440 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:46:44.441 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:46:44.442 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:46:44.443 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 28.9617ms
2023-04-03 16:46:44.444 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:44.445 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:46:44.446 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:44.447 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:46:44.448 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 56.1783ms
2023-04-03 16:46:50.269 +04:00 [DBG] Connection id "0HMPK51CDS4UM" received FIN.
2023-04-03 16:46:50.272 +04:00 [DBG] Connection id "0HMPK51CDS4UM" is closed. The last processed stream ID was 3.
2023-04-03 16:46:50.272 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UM completed.
2023-04-03 16:46:50.274 +04:00 [DBG] Connection id "0HMPK51CDS4UM" sending FIN because: "The client closed the connection."
2023-04-03 16:46:50.284 +04:00 [DBG] Connection id "0HMPK51CDS4UM" stopped.
2023-04-03 16:46:56.708 +04:00 [DBG] Connection id "0HMPK51CDS4UN" accepted.
2023-04-03 16:46:56.709 +04:00 [DBG] Connection id "0HMPK51CDS4UN" started.
2023-04-03 16:46:56.711 +04:00 [DBG] Connection 0HMPK51CDS4UN established using the following protocol: "Tls12"
2023-04-03 16:46:56.713 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:46:56.713 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:46:56.714 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:46:56.714 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:46:56.715 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:46:56.717 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:46:56.718 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:46:56.719 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:46:56.720 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:46:56.721 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:46:56.722 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:46:56.723 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:46:56.724 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:46:56.725 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:46:56.728 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 15.2497ms
2023-04-03 16:46:56.726 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 13.6387ms
2023-04-03 16:46:56.728 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:46:56.732 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:46:56.733 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:46:56.736 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:56.737 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:46:56.738 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:46:56.740 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:46:56.741 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:46:56.742 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:46:56.743 +04:00 [DBG] Authorization was successful.
2023-04-03 16:46:56.744 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:56.745 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:46:56.747 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:46:56.749 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:46:56.751 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:46:56.753 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:46:56.755 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:46:56.757 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:46:56.759 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:46:56.761 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:46:56.764 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:46:56.765 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:46:56.766 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:46:56.766 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:46:56.768 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-03 16:46:56.769 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:56.770 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:56.771 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:46:56.781 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:46:56.784 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:56.786 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:56.788 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:56.790 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:56.792 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 7ms reading results.
2023-04-03 16:46:56.794 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:56.795 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:46:56.797 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:46:56.800 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:46:56.801 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:46:56.802 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:46:56.803 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:46:56.804 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:46:56.807 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 49.7582ms
2023-04-03 16:46:56.808 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:56.808 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:46:56.809 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:46:56.810 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:46:56.811 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:56.812 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:46:56.814 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 16:46:56.815 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:56.817 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 88.5331ms
2023-04-03 16:46:56.819 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:46:56.821 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:46:56.823 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:46:56.824 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:46:56.825 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:46:56.826 +04:00 [DBG] Authorization was successful.
2023-04-03 16:46:56.827 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:56.828 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:46:56.830 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:46:56.831 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:46:56.834 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:46:56.839 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:46:56.841 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:46:56.843 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:46:56.844 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:46:56.847 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:46:56.849 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:46:56.851 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:46:56.852 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-03 16:46:56.854 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2023-04-03 16:46:56.856 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2023-04-03 16:46:56.857 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:56.859 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:56.860 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:46:56.864 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:46:56.867 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:56.872 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:56.874 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:46:56.875 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:56.876 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 9ms reading results.
2023-04-03 16:46:56.878 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:56.880 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:46:56.882 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:46:56.885 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:46:56.887 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:46:56.888 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:46:56.889 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:46:56.891 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:46:56.893 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 49.9306ms
2023-04-03 16:46:56.896 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:46:56.900 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:46:56.901 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:46:56.906 +04:00 [DBG] Disposed connection to database '' on server '' (5ms).
2023-04-03 16:46:56.909 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 100.6987ms
2023-04-03 16:47:00.282 +04:00 [DBG] Connection id "0HMPK51CDS4UN" received FIN.
2023-04-03 16:47:00.283 +04:00 [DBG] Connection id "0HMPK51CDS4UN" is closed. The last processed stream ID was 7.
2023-04-03 16:47:00.283 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UN completed.
2023-04-03 16:47:00.285 +04:00 [DBG] Connection id "0HMPK51CDS4UN" sending FIN because: "The client closed the connection."
2023-04-03 16:47:00.297 +04:00 [DBG] Connection id "0HMPK51CDS4UN" stopped.
2023-04-03 16:47:06.259 +04:00 [DBG] Connection id "0HMPK51CDS4UO" accepted.
2023-04-03 16:47:06.260 +04:00 [DBG] Connection id "0HMPK51CDS4UO" started.
2023-04-03 16:47:06.262 +04:00 [DBG] Connection 0HMPK51CDS4UO established using the following protocol: "Tls12"
2023-04-03 16:47:06.263 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:47:06.264 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:47:06.265 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:47:06.266 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:47:06.267 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:47:06.267 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:47:06.268 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:47:06.269 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 5.9086ms
2023-04-03 16:47:06.271 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:47:06.271 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:47:06.272 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:47:06.274 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:47:06.275 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:47:06.276 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:47:06.277 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:47:06.278 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:47:06.278 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:47:06.279 +04:00 [DBG] Authorization was successful.
2023-04-03 16:47:06.280 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:47:06.281 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:47:06.282 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:47:06.283 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:47:06.284 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:47:06.287 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:47:06.288 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:47:06.289 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:47:06.291 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:47:06.293 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:47:06.295 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:47:06.295 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:47:06.296 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:47:06.297 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:47:06.298 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:47:06.299 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:06.300 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:06.301 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:47:06.305 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:47:06.309 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:47:06.311 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:47:06.312 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:47:06.313 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:06.314 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:47:06.315 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:06.316 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:47:06.317 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:47:06.320 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:47:06.321 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:47:06.321 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:47:06.322 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:47:06.323 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:47:06.324 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 34.6778ms
2023-04-03 16:47:06.326 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:47:06.327 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:47:06.327 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:06.329 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:47:06.330 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 58.9825ms
2023-04-03 16:47:10.305 +04:00 [DBG] Connection id "0HMPK51CDS4UO" received FIN.
2023-04-03 16:47:10.306 +04:00 [DBG] Connection id "0HMPK51CDS4UO" is closed. The last processed stream ID was 3.
2023-04-03 16:47:10.306 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UO completed.
2023-04-03 16:47:10.308 +04:00 [DBG] Connection id "0HMPK51CDS4UO" sending FIN because: "The client closed the connection."
2023-04-03 16:47:10.320 +04:00 [DBG] Connection id "0HMPK51CDS4UO" stopped.
2023-04-03 16:47:13.042 +04:00 [DBG] Connection id "0HMPK51CDS4UP" accepted.
2023-04-03 16:47:13.043 +04:00 [DBG] Connection id "0HMPK51CDS4UP" started.
2023-04-03 16:47:13.045 +04:00 [DBG] Connection 0HMPK51CDS4UP established using the following protocol: "Tls12"
2023-04-03 16:47:13.047 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:47:13.047 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:47:13.047 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:47:13.048 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:47:13.049 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:47:13.050 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:47:13.052 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:47:13.053 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:47:13.054 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:47:13.054 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:47:13.056 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:47:13.056 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:47:13.057 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:47:13.058 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:47:13.059 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 12.0619ms
2023-04-03 16:47:13.059 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 12.6716ms
2023-04-03 16:47:13.060 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:47:13.061 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:47:13.062 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:47:13.063 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:47:13.064 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:47:13.065 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:47:13.065 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:47:13.066 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:47:13.067 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:47:13.069 +04:00 [DBG] Authorization was successful.
2023-04-03 16:47:13.070 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:47:13.071 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:47:13.072 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:47:13.073 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:47:13.074 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:47:13.076 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:47:13.077 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:47:13.079 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:47:13.080 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:47:13.081 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:47:13.083 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:47:13.084 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:47:13.085 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:47:13.086 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:47:13.087 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:47:13.087 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:13.088 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:13.089 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:47:13.093 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:47:13.095 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:47:13.097 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:47:13.098 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:47:13.099 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:13.100 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:47:13.101 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:13.102 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:47:13.103 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:47:13.105 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:47:13.105 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:47:13.106 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:47:13.107 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:47:13.108 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:47:13.109 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 30.2346ms
2023-04-03 16:47:13.110 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:47:13.110 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:47:13.111 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:47:13.112 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:47:13.113 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:47:13.114 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:13.115 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:47:13.116 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 16:47:13.117 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:47:13.118 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 57.5614ms
2023-04-03 16:47:13.119 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:47:13.120 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:47:13.121 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:47:13.122 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:47:13.123 +04:00 [DBG] Authorization was successful.
2023-04-03 16:47:13.123 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:47:13.124 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:47:13.125 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:47:13.127 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:47:13.128 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:47:13.129 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:47:13.131 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:47:13.133 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:47:13.134 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:47:13.136 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:47:13.138 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:47:13.139 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:47:13.140 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:47:13.140 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:47:13.141 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:47:13.142 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:13.143 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:13.144 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:47:13.148 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:47:13.150 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:47:13.151 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:47:13.153 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:47:13.154 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:13.155 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 16:47:13.156 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:13.157 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:47:13.158 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:47:13.160 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:47:13.161 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:47:13.162 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:47:13.163 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:47:13.164 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:47:13.165 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 32.9329ms
2023-04-03 16:47:13.167 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:47:13.168 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:47:13.169 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:13.170 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:47:13.171 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 61.2492ms
2023-04-03 16:47:20.333 +04:00 [DBG] Connection id "0HMPK51CDS4UP" received FIN.
2023-04-03 16:47:20.334 +04:00 [DBG] Connection id "0HMPK51CDS4UP" is closed. The last processed stream ID was 7.
2023-04-03 16:47:20.334 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UP completed.
2023-04-03 16:47:20.335 +04:00 [DBG] Connection id "0HMPK51CDS4UP" sending FIN because: "The client closed the connection."
2023-04-03 16:47:20.348 +04:00 [DBG] Connection id "0HMPK51CDS4UP" stopped.
2023-04-03 16:47:20.906 +04:00 [DBG] Connection id "0HMPK51CDS4UQ" accepted.
2023-04-03 16:47:20.908 +04:00 [DBG] Connection id "0HMPK51CDS4UQ" started.
2023-04-03 16:47:20.911 +04:00 [DBG] Connection 0HMPK51CDS4UQ established using the following protocol: "Tls12"
2023-04-03 16:47:20.913 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:47:20.913 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:47:20.914 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:47:20.915 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:47:20.916 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:47:20.918 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:47:20.920 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:47:20.921 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:47:20.922 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:47:20.923 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:47:20.924 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:47:20.925 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:47:20.926 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:47:20.927 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:47:20.927 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 14.9068ms
2023-04-03 16:47:20.928 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 15.2397ms
2023-04-03 16:47:20.929 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:47:20.930 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:47:20.931 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:47:20.932 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:47:20.933 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:47:20.934 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:47:20.935 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:47:20.937 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:47:20.937 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:47:20.938 +04:00 [DBG] Authorization was successful.
2023-04-03 16:47:20.940 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:47:20.940 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:47:20.942 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:47:20.943 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:47:20.944 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:47:20.945 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:47:20.946 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:47:20.947 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:47:20.948 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:47:20.950 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:47:20.952 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:47:20.953 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:47:20.954 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:47:20.955 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:47:20.956 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:47:20.957 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:20.958 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:20.959 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:47:20.963 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:47:20.967 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:47:20.970 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:47:20.971 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:47:20.972 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:20.973 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 6ms reading results.
2023-04-03 16:47:20.974 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:20.975 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:47:20.976 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:47:20.978 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:47:20.979 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:47:20.979 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:47:20.980 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:47:20.981 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:47:20.982 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 34.2377ms
2023-04-03 16:47:20.983 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:47:20.983 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:47:20.984 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:47:20.985 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:47:20.986 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:47:20.987 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:20.988 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:47:20.989 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:47:20.989 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:47:20.990 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 60.8249ms
2023-04-03 16:47:20.991 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:47:20.992 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:47:20.993 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:47:20.993 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:47:20.994 +04:00 [DBG] Authorization was successful.
2023-04-03 16:47:20.995 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:47:20.995 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:47:20.997 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:47:20.997 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:47:20.999 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:47:21.000 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:47:21.001 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:47:21.003 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:47:21.004 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:47:21.005 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:47:21.007 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:47:21.007 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:47:21.008 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:47:21.009 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:47:21.010 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:47:21.011 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:21.012 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:21.013 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:47:21.015 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:47:21.017 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:47:21.019 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:47:21.020 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:47:21.021 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:21.022 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:47:21.023 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:21.024 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:47:21.025 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:47:21.027 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:47:21.027 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:47:21.028 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:47:21.028 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:47:21.029 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:47:21.031 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 27.9633ms
2023-04-03 16:47:21.032 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:47:21.033 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:47:21.034 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:47:21.035 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:47:21.036 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 52.9651ms
2023-04-03 16:47:35.374 +04:00 [DBG] Connection id "0HMPK51CDS4UQ" received FIN.
2023-04-03 16:47:35.375 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UQ completed.
2023-04-03 16:47:35.375 +04:00 [DBG] Connection id "0HMPK51CDS4UQ" is closed. The last processed stream ID was 7.
2023-04-03 16:47:35.378 +04:00 [DBG] Connection id "0HMPK51CDS4UQ" sending FIN because: "The client closed the connection."
2023-04-03 16:47:35.388 +04:00 [DBG] Connection id "0HMPK51CDS4UQ" stopped.
2023-04-03 16:48:18.488 +04:00 [DBG] Connection id "0HMPK51CDS4UR" accepted.
2023-04-03 16:48:18.489 +04:00 [DBG] Connection id "0HMPK51CDS4UR" started.
2023-04-03 16:48:18.491 +04:00 [DBG] Connection 0HMPK51CDS4UR established using the following protocol: "Tls12"
2023-04-03 16:48:18.493 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:48:18.494 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:48:18.495 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:48:18.496 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:48:18.496 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:48:18.497 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:48:18.498 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:48:18.499 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 6.2311ms
2023-04-03 16:48:18.500 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:48:18.501 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:48:18.502 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:48:18.503 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:18.504 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:48:18.505 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:48:18.506 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:48:18.507 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:48:18.508 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:48:18.509 +04:00 [DBG] Authorization was successful.
2023-04-03 16:48:18.510 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:18.511 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:48:18.513 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:48:18.514 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:48:18.515 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:48:18.517 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:48:18.518 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:48:18.519 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:18.521 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:18.522 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:48:18.525 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:48:18.526 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:48:18.526 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:48:18.527 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:48:18.528 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:48:18.529 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:18.531 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:18.532 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:18.536 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:18.539 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:18.540 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:18.542 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:18.543 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:18.544 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 16:48:18.545 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:18.546 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:48:18.548 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:48:18.549 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:48:18.550 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:48:18.551 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:48:18.552 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:48:18.553 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:48:18.554 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 35.1244ms
2023-04-03 16:48:18.556 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:18.557 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:48:18.560 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:18.564 +04:00 [DBG] Disposed connection to database '' on server '' (4ms).
2023-04-03 16:48:18.590 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 89.4794ms
2023-04-03 16:48:22.784 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:48:22.785 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:48:22.787 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:48:22.789 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:22.791 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:48:22.792 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:48:22.793 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:48:22.795 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:48:22.796 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:48:22.797 +04:00 [DBG] Authorization was successful.
2023-04-03 16:48:22.798 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:22.799 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:48:22.801 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:48:22.803 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:48:22.805 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:48:22.807 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:48:22.808 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:48:22.809 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:22.810 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:22.812 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:48:22.814 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:48:22.815 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:48:22.816 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:48:22.817 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:48:22.818 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-03 16:48:22.819 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:22.820 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:22.821 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:22.825 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:22.828 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:22.829 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:22.830 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:22.831 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:22.832 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:48:22.834 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:22.835 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:48:22.837 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:48:22.839 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:48:22.839 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:48:22.840 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:48:22.841 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:48:22.842 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:48:22.843 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 34.2717ms
2023-04-03 16:48:22.844 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:22.845 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:48:22.846 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:22.847 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:48:22.849 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 64.7197ms
2023-04-03 16:48:24.191 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:48:24.191 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:48:24.192 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:48:24.193 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:48:24.194 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:48:24.195 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:48:24.195 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:48:24.196 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 5.5735ms
2023-04-03 16:48:24.197 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:48:24.198 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:48:24.198 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:48:24.200 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:24.201 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:48:24.202 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:48:24.203 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:48:24.203 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:48:24.204 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:48:24.205 +04:00 [DBG] Authorization was successful.
2023-04-03 16:48:24.206 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:24.207 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:48:24.209 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:48:24.210 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:48:24.211 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:48:24.212 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:48:24.213 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:48:24.215 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:24.216 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:24.218 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:48:24.220 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:48:24.221 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:48:24.222 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-03 16:48:24.223 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:48:24.224 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:48:24.225 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:24.226 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:24.227 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:24.231 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:24.234 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:24.235 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:24.236 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:24.238 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:24.239 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 16:48:24.240 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:24.241 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:48:24.242 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:48:24.244 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:48:24.245 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:48:24.245 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:48:24.246 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:48:24.247 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:48:24.248 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 33.4399ms
2023-04-03 16:48:24.249 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:24.251 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:48:24.252 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:24.253 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:48:24.254 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 57.1545ms
2023-04-03 16:48:25.456 +04:00 [DBG] Connection id "0HMPK51CDS4UR" received FIN.
2023-04-03 16:48:25.457 +04:00 [DBG] Connection id "0HMPK51CDS4UR" is closed. The last processed stream ID was 9.
2023-04-03 16:48:25.457 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UR completed.
2023-04-03 16:48:25.459 +04:00 [DBG] Connection id "0HMPK51CDS4UR" sending FIN because: "The client closed the connection."
2023-04-03 16:48:25.471 +04:00 [DBG] Connection id "0HMPK51CDS4UR" stopped.
2023-04-03 16:48:27.098 +04:00 [DBG] Connection id "0HMPK51CDS4US" accepted.
2023-04-03 16:48:27.100 +04:00 [DBG] Connection id "0HMPK51CDS4US" started.
2023-04-03 16:48:27.110 +04:00 [DBG] Connection 0HMPK51CDS4US established using the following protocol: "Tls12"
2023-04-03 16:48:27.112 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:48:27.113 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:48:27.114 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:48:27.115 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:27.116 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:48:27.117 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:48:27.118 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:48:27.119 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:48:27.120 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:48:27.121 +04:00 [DBG] Authorization was successful.
2023-04-03 16:48:27.121 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:27.122 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:48:27.124 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:48:27.125 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:48:27.126 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:48:27.128 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:48:27.129 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:48:27.130 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:27.131 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:27.132 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:48:27.134 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:48:27.135 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:48:27.135 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:48:27.136 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:48:27.137 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:48:27.138 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:27.139 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:27.140 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:27.144 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:27.146 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:27.147 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:27.149 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:27.151 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:27.152 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 16:48:27.153 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:27.154 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:48:27.155 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:48:27.158 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:48:27.158 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:48:27.159 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:48:27.160 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:48:27.161 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:48:27.162 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 32.2678ms
2023-04-03 16:48:27.163 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:27.164 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:48:27.165 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:27.166 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 16:48:27.167 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 55.1598ms
2023-04-03 16:48:28.422 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:48:28.423 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:48:28.424 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:48:28.425 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:28.426 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:48:28.427 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:48:28.428 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:48:28.429 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:48:28.429 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:48:28.430 +04:00 [DBG] Authorization was successful.
2023-04-03 16:48:28.431 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:28.432 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:48:28.434 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:48:28.435 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:48:28.436 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:48:28.438 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:48:28.439 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:48:28.441 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:28.442 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:28.443 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:48:28.445 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:48:28.446 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:48:28.446 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:48:28.448 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:48:28.449 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:48:28.450 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:28.451 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:28.452 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:28.456 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:28.459 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:28.461 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:28.462 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:28.463 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:28.464 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 16:48:28.466 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:28.467 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:48:28.469 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:48:28.470 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:48:28.471 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:48:28.472 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:48:28.472 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:48:28.473 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:48:28.474 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 33.9019ms
2023-04-03 16:48:28.475 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:28.476 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:48:28.477 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:28.478 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:48:28.480 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 57.8420ms
2023-04-03 16:48:35.259 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:48:35.260 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:48:35.260 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:48:35.261 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:48:35.262 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:48:35.263 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:48:35.263 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:48:35.264 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 4.9377ms
2023-04-03 16:48:35.265 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:48:35.266 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:48:35.267 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:48:35.269 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:35.270 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:48:35.271 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:48:35.272 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:48:35.273 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:48:35.274 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:48:35.276 +04:00 [DBG] Authorization was successful.
2023-04-03 16:48:35.277 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:35.278 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:48:35.280 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:48:35.281 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:48:35.282 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:48:35.284 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:48:35.285 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:48:35.287 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:35.289 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:35.290 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:48:35.292 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:48:35.293 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:48:35.293 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:48:35.294 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:48:35.295 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:48:35.296 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:35.297 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:35.298 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:35.304 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:35.306 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:35.307 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:35.309 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:35.311 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:35.312 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 16:48:35.313 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:35.314 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:48:35.315 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:48:35.318 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:48:35.319 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:48:35.319 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:48:35.320 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:48:35.321 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:48:35.322 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 34.9443ms
2023-04-03 16:48:35.323 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:35.324 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:48:35.325 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:35.326 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:48:35.327 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 62.0250ms
2023-04-03 16:48:35.475 +04:00 [DBG] Connection id "0HMPK51CDS4US" received FIN.
2023-04-03 16:48:35.477 +04:00 [DBG] Connection id "0HMPK51CDS4US" is closed. The last processed stream ID was 7.
2023-04-03 16:48:35.477 +04:00 [DBG] Connection id "0HMPK51CDS4US" sending FIN because: "The client closed the connection."
2023-04-03 16:48:35.480 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4US completed.
2023-04-03 16:48:35.482 +04:00 [DBG] Connection id "0HMPK51CDS4US" stopped.
2023-04-03 16:48:38.948 +04:00 [DBG] Connection id "0HMPK51CDS4UT" accepted.
2023-04-03 16:48:38.950 +04:00 [DBG] Connection id "0HMPK51CDS4UT" started.
2023-04-03 16:48:38.952 +04:00 [DBG] Connection 0HMPK51CDS4UT established using the following protocol: "Tls12"
2023-04-03 16:48:38.953 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:48:38.954 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:48:38.956 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:48:38.958 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:38.959 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:48:38.960 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:48:38.960 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:48:38.961 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:48:38.962 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:48:38.963 +04:00 [DBG] Authorization was successful.
2023-04-03 16:48:38.963 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:38.964 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:48:38.966 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:48:38.967 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:48:38.968 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:48:38.970 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:48:38.971 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:48:38.973 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:38.975 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:38.976 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:48:38.977 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:48:38.978 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:48:38.979 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:48:38.980 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:48:38.980 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:48:38.982 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:38.983 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:38.984 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:38.986 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:38.988 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:38.990 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:38.991 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:38.992 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:38.993 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:48:38.994 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:38.995 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:48:38.996 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:48:38.998 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:48:38.999 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:48:39.000 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:48:39.001 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:48:39.002 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:48:39.003 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 30.108ms
2023-04-03 16:48:39.004 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:39.005 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:48:39.006 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:39.007 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:48:39.008 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 54.6875ms
2023-04-03 16:48:41.157 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:48:41.158 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:48:41.159 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:48:41.160 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:48:41.161 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:48:41.162 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:48:41.162 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:48:41.163 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 6.0871ms
2023-04-03 16:48:41.165 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:48:41.166 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:48:41.167 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:48:41.169 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:41.171 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:48:41.172 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:48:41.173 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:48:41.174 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:48:41.175 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:48:41.176 +04:00 [DBG] Authorization was successful.
2023-04-03 16:48:41.177 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:41.178 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:48:41.181 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:48:41.182 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:48:41.184 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:48:41.187 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:48:41.188 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:48:41.189 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:41.190 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:48:41.192 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:48:41.194 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:48:41.195 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:48:41.196 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:48:41.197 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:48:41.198 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-03 16:48:41.200 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:41.201 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:41.203 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:41.208 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:48:41.211 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:41.212 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:41.213 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:48:41.214 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:41.215 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:48:41.217 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:41.218 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:48:41.220 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:48:41.222 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:48:41.223 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:48:41.224 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:48:41.225 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:48:41.226 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:48:41.227 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 37.8316ms
2023-04-03 16:48:41.228 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:48:41.229 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:48:41.230 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:48:41.232 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:48:41.233 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 68.4375ms
2023-04-03 16:48:45.486 +04:00 [DBG] Connection id "0HMPK51CDS4UT" received FIN.
2023-04-03 16:48:45.487 +04:00 [DBG] Connection id "0HMPK51CDS4UT" is closed. The last processed stream ID was 5.
2023-04-03 16:48:45.487 +04:00 [DBG] Connection id "0HMPK51CDS4UT" sending FIN because: "The client closed the connection."
2023-04-03 16:48:45.489 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UT completed.
2023-04-03 16:48:45.490 +04:00 [DBG] Connection id "0HMPK51CDS4UT" stopped.
2023-04-03 16:49:09.581 +04:00 [DBG] Connection id "0HMPK51CDS4UU" accepted.
2023-04-03 16:49:09.583 +04:00 [DBG] Connection id "0HMPK51CDS4UU" started.
2023-04-03 16:49:09.586 +04:00 [DBG] Connection 0HMPK51CDS4UU established using the following protocol: "Tls12"
2023-04-03 16:49:09.587 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:49:09.588 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:49:09.590 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:49:09.591 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:49:09.592 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:49:09.593 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:49:09.594 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:49:09.594 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 7.0516ms
2023-04-03 16:49:09.596 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:49:09.597 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:49:09.598 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:49:09.600 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:09.601 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:49:09.602 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:49:09.603 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:49:09.604 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:49:09.605 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:49:09.605 +04:00 [DBG] Authorization was successful.
2023-04-03 16:49:09.606 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:09.607 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:49:09.608 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:49:09.609 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:49:09.611 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:49:09.612 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:49:09.613 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:49:09.614 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:09.616 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:09.617 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:49:09.619 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:49:09.620 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:49:09.621 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:49:09.621 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:49:09.622 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:49:09.623 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:09.624 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:09.625 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:09.630 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:09.632 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:09.634 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:09.635 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:09.637 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:09.638 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 16:49:09.639 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:09.640 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:49:09.641 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:49:09.643 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:49:09.644 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:49:09.644 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:49:09.645 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:49:09.646 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:49:09.647 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 32.79ms
2023-04-03 16:49:09.648 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:09.650 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:49:09.651 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:09.652 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:49:09.653 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 56.9894ms
2023-04-03 16:49:15.531 +04:00 [DBG] Connection id "0HMPK51CDS4UU" received FIN.
2023-04-03 16:49:15.533 +04:00 [DBG] Connection id "0HMPK51CDS4UU" is closed. The last processed stream ID was 3.
2023-04-03 16:49:15.533 +04:00 [DBG] Connection id "0HMPK51CDS4UU" sending FIN because: "The client closed the connection."
2023-04-03 16:49:15.536 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UU completed.
2023-04-03 16:49:15.537 +04:00 [DBG] Connection id "0HMPK51CDS4UU" stopped.
2023-04-03 16:49:21.927 +04:00 [DBG] Connection id "0HMPK51CDS4UV" accepted.
2023-04-03 16:49:21.928 +04:00 [DBG] Connection id "0HMPK51CDS4UV" started.
2023-04-03 16:49:21.930 +04:00 [DBG] Connection 0HMPK51CDS4UV established using the following protocol: "Tls12"
2023-04-03 16:49:21.932 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:49:21.932 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:49:21.933 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:49:21.935 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:49:21.937 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:49:21.938 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:49:21.939 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:49:21.940 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:49:21.941 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:49:21.942 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:49:21.943 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:49:21.944 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:49:21.945 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:49:21.945 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:49:21.946 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 13.9325ms
2023-04-03 16:49:21.947 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 14.9001ms
2023-04-03 16:49:21.948 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:49:21.950 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:49:21.951 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:49:21.953 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:21.954 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:49:21.955 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:49:21.955 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:49:21.956 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:49:21.957 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:49:21.958 +04:00 [DBG] Authorization was successful.
2023-04-03 16:49:21.958 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:21.960 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:49:21.962 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:49:21.963 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:49:21.965 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:49:21.968 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:49:21.969 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:49:21.971 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:21.972 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:21.974 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:49:21.976 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:49:21.977 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:49:21.978 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:49:21.979 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:49:21.980 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-03 16:49:21.982 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:21.983 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:21.985 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:21.989 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:21.992 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:21.993 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:21.995 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:21.996 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:21.997 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 16:49:22.000 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:22.001 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:49:22.002 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:49:22.005 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:49:22.006 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:49:22.006 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:49:22.007 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:49:22.008 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:49:22.009 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 38.5119ms
2023-04-03 16:49:22.011 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:49:22.011 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:22.012 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:49:22.012 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:49:22.014 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:49:22.015 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:22.017 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:22.018 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 16:49:22.019 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:49:22.020 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 72.1651ms
2023-04-03 16:49:22.021 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:49:22.022 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:49:22.023 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:49:22.024 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:49:22.025 +04:00 [DBG] Authorization was successful.
2023-04-03 16:49:22.025 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:22.026 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:49:22.028 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:49:22.029 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:49:22.030 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:49:22.032 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:49:22.033 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:49:22.035 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:22.036 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:22.037 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:49:22.039 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:49:22.039 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:49:22.040 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:49:22.041 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:49:22.042 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:49:22.043 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:22.044 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:22.045 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:22.051 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:22.053 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:22.054 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:22.056 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:22.057 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:22.058 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:49:22.059 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:22.060 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:49:22.061 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:49:22.063 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:49:22.064 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:49:22.065 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:49:22.065 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:49:22.067 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:49:22.068 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 33.3988ms
2023-04-03 16:49:22.069 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:22.070 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:49:22.071 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:22.072 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:49:22.073 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 62.6455ms
2023-04-03 16:49:25.539 +04:00 [DBG] Connection id "0HMPK51CDS4UV" received FIN.
2023-04-03 16:49:25.541 +04:00 [DBG] Connection id "0HMPK51CDS4UV" is closed. The last processed stream ID was 7.
2023-04-03 16:49:25.541 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4UV completed.
2023-04-03 16:49:25.542 +04:00 [DBG] Connection id "0HMPK51CDS4UV" sending FIN because: "The client closed the connection."
2023-04-03 16:49:25.554 +04:00 [DBG] Connection id "0HMPK51CDS4UV" stopped.
2023-04-03 16:49:44.239 +04:00 [DBG] Connection id "0HMPK51CDS4V0" accepted.
2023-04-03 16:49:44.240 +04:00 [DBG] Connection id "0HMPK51CDS4V0" started.
2023-04-03 16:49:44.252 +04:00 [DBG] Connection 0HMPK51CDS4V0 established using the following protocol: "Tls12"
2023-04-03 16:49:44.254 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:49:44.254 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:49:44.254 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:49:44.255 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:49:44.256 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:49:44.257 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:49:44.258 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:49:44.259 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:49:44.259 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:49:44.260 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:49:44.261 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:49:44.262 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:49:44.263 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:49:44.264 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:49:44.264 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 10.6572ms
2023-04-03 16:49:44.265 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 11.2768ms
2023-04-03 16:49:44.267 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:49:44.268 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:49:44.269 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:49:44.270 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:44.271 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:49:44.272 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:49:44.272 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:49:44.273 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:49:44.274 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:49:44.275 +04:00 [DBG] Authorization was successful.
2023-04-03 16:49:44.276 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:44.277 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:49:44.278 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:49:44.280 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:49:44.281 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:49:44.283 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:49:44.284 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:49:44.286 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:44.287 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:44.288 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:49:44.290 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:49:44.292 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:49:44.292 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:49:44.293 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:49:44.294 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:49:44.295 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:44.296 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:44.298 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:44.303 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:44.306 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:44.307 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:44.308 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:44.310 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:44.311 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 16:49:44.312 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:44.313 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:49:44.315 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:49:44.317 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:49:44.318 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:49:44.319 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:49:44.319 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:49:44.321 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:49:44.322 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 36.0694ms
2023-04-03 16:49:44.323 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:49:44.323 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:44.324 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:49:44.325 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:49:44.326 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:49:44.327 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:44.328 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:44.329 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 16:49:44.331 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:49:44.332 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 64.9956ms
2023-04-03 16:49:44.333 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:49:44.334 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:49:44.335 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:49:44.336 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:49:44.337 +04:00 [DBG] Authorization was successful.
2023-04-03 16:49:44.338 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:44.338 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:49:44.340 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:49:44.341 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:49:44.342 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:49:44.344 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:49:44.345 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:49:44.347 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:44.348 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:44.349 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:49:44.351 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:49:44.352 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:49:44.353 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:49:44.353 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:49:44.354 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:49:44.355 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:44.356 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:44.357 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:44.360 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:44.362 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:44.364 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:44.365 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:44.367 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:44.368 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 16:49:44.369 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:44.370 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:49:44.371 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:49:44.373 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:49:44.374 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:49:44.374 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:49:44.375 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:49:44.376 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:49:44.377 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 30.4386ms
2023-04-03 16:49:44.378 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:44.379 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:49:44.380 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:44.382 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:49:44.383 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 59.8784ms
2023-04-03 16:49:45.564 +04:00 [DBG] Connection id "0HMPK51CDS4V0" received FIN.
2023-04-03 16:49:45.566 +04:00 [DBG] Connection id "0HMPK51CDS4V0" is closed. The last processed stream ID was 7.
2023-04-03 16:49:45.566 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4V0 completed.
2023-04-03 16:49:45.567 +04:00 [DBG] Connection id "0HMPK51CDS4V0" sending FIN because: "The client closed the connection."
2023-04-03 16:49:45.580 +04:00 [DBG] Connection id "0HMPK51CDS4V0" stopped.
2023-04-03 16:49:46.399 +04:00 [DBG] Connection id "0HMPK51CDS4V1" accepted.
2023-04-03 16:49:46.401 +04:00 [DBG] Connection id "0HMPK51CDS4V1" started.
2023-04-03 16:49:46.402 +04:00 [DBG] Connection 0HMPK51CDS4V1 established using the following protocol: "Tls12"
2023-04-03 16:49:46.403 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:49:46.404 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:49:46.405 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:49:46.406 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:46.407 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:49:46.408 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:49:46.409 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:49:46.410 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:49:46.410 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:49:46.411 +04:00 [DBG] Authorization was successful.
2023-04-03 16:49:46.412 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:46.413 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:49:46.414 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:49:46.416 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:49:46.418 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:49:46.419 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:49:46.421 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:49:46.422 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:46.425 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:46.427 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:49:46.429 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:49:46.429 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:49:46.430 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:49:46.431 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:49:46.432 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:49:46.434 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:46.435 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:46.436 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:46.440 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:46.442 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:46.443 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:46.444 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:46.445 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:46.446 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:49:46.448 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:46.449 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:49:46.451 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:49:46.452 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:49:46.453 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:49:46.454 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:49:46.455 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:49:46.456 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:49:46.457 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 34.9375ms
2023-04-03 16:49:46.458 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:49:46.458 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:46.459 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:49:46.460 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:49:46.461 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:49:46.461 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:46.462 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:46.464 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 16:49:46.465 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:49:46.467 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 63.3131ms
2023-04-03 16:49:46.467 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:49:46.469 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:49:46.469 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:49:46.470 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:49:46.470 +04:00 [DBG] Authorization was successful.
2023-04-03 16:49:46.471 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:46.472 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:49:46.473 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:49:46.474 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:49:46.475 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:49:46.476 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:49:46.477 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:49:46.479 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:46.480 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:46.481 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:49:46.483 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:49:46.484 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:49:46.484 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:49:46.485 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 16:49:46.486 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:49:46.487 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:46.488 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:46.488 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:46.492 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:46.494 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:46.495 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:46.496 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:46.498 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:46.499 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:49:46.500 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:46.501 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:49:46.502 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:49:46.503 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:49:46.504 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:49:46.505 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:49:46.505 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:49:46.506 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:49:46.507 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 28.7199ms
2023-04-03 16:49:46.508 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:46.509 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:49:46.510 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:46.511 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:49:46.513 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 54.8473ms
2023-04-03 16:49:49.144 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:49:49.145 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:49:49.147 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:49:49.148 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:49.150 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:49:49.150 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:49:49.151 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:49:49.152 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:49:49.153 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:49:49.154 +04:00 [DBG] Authorization was successful.
2023-04-03 16:49:49.155 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:49.156 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:49:49.157 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:49:49.158 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:49:49.159 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:49:49.161 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:49:49.161 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:49:49.163 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:49.163 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:49.165 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:49:49.167 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:49:49.168 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:49:49.168 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:49:49.169 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 16:49:49.170 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:49:49.170 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:49.171 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:49.172 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:49.177 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:49.180 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:49.181 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:49.182 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:49.183 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:49.184 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:49:49.185 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:49.186 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:49:49.188 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:49:49.190 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:49:49.190 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:49:49.191 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:49:49.192 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:49:49.193 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:49:49.194 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 31.4667ms
2023-04-03 16:49:49.195 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:49.195 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:49:49.196 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:49:49.197 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:49:49.198 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:49.199 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:49:49.200 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:49:49.201 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:49.202 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 58.2934ms
2023-04-03 16:49:49.203 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:49:49.204 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:49:49.206 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:49:49.207 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:49:49.207 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:49:49.208 +04:00 [DBG] Authorization was successful.
2023-04-03 16:49:49.209 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:49.209 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:49:49.211 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:49:49.212 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:49:49.213 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:49:49.215 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:49:49.216 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:49:49.217 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:49.219 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:49:49.220 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:49:49.222 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:49:49.223 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:49:49.223 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:49:49.224 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:49:49.225 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:49:49.226 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:49.227 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:49.228 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:49.230 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:49:49.234 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:49.235 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:49.236 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:49:49.237 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:49.238 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:49:49.239 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:49.240 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:49:49.241 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:49:49.243 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:49:49.244 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:49:49.245 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:49:49.245 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:49:49.246 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:49:49.247 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 30.0025ms
2023-04-03 16:49:49.249 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:49:49.250 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:49:49.251 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:49:49.252 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 16:49:49.253 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 57.7553ms
2023-04-03 16:49:55.573 +04:00 [DBG] Connection id "0HMPK51CDS4V1" received FIN.
2023-04-03 16:49:55.575 +04:00 [DBG] Connection id "0HMPK51CDS4V1" is closed. The last processed stream ID was 7.
2023-04-03 16:49:55.575 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4V1 completed.
2023-04-03 16:49:55.577 +04:00 [DBG] Connection id "0HMPK51CDS4V1" sending FIN because: "The client closed the connection."
2023-04-03 16:49:55.589 +04:00 [DBG] Connection id "0HMPK51CDS4V1" stopped.
2023-04-03 16:50:03.388 +04:00 [DBG] Connection id "0HMPK51CDS4V2" accepted.
2023-04-03 16:50:03.389 +04:00 [DBG] Connection id "0HMPK51CDS4V2" started.
2023-04-03 16:50:03.390 +04:00 [DBG] Connection 0HMPK51CDS4V2 established using the following protocol: "Tls12"
2023-04-03 16:50:03.392 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:50:03.392 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:50:03.393 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:50:03.394 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:50:03.395 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:50:03.396 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:50:03.396 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:50:03.397 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 5.5681ms
2023-04-03 16:50:03.399 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:50:03.400 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:50:03.401 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:50:03.403 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:03.404 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:50:03.405 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:50:03.406 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:50:03.407 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:50:03.408 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:50:03.410 +04:00 [DBG] Authorization was successful.
2023-04-03 16:50:03.410 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:03.412 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:50:03.417 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:50:03.420 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:50:03.421 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:50:03.423 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:50:03.424 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:50:03.425 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:50:03.426 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:50:03.428 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:50:03.430 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:50:03.430 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:50:03.431 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:50:03.432 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:50:03.433 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:50:03.434 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:03.435 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:03.436 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:50:03.441 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:50:03.444 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:03.445 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:03.447 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:03.448 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:03.449 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 16:50:03.451 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:03.452 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:50:03.453 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:50:03.455 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:50:03.456 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:50:03.456 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:50:03.457 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:50:03.458 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:50:03.459 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 34.1248ms
2023-04-03 16:50:03.461 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:03.462 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:50:03.463 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:03.464 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:50:03.465 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 65.9889ms
2023-04-03 16:50:05.407 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:50:05.409 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:50:05.410 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:50:05.411 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:05.412 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:50:05.412 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:50:05.413 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:50:05.414 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:50:05.414 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:50:05.415 +04:00 [DBG] Authorization was successful.
2023-04-03 16:50:05.416 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:05.416 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:50:05.418 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:50:05.419 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:50:05.420 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:50:05.422 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:50:05.423 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:50:05.425 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:50:05.426 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:50:05.427 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:50:05.429 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:50:05.429 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:50:05.430 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:50:05.431 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:50:05.432 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:50:05.433 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:05.434 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:05.434 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:50:05.438 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:50:05.442 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:05.443 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:05.443 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:05.444 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:05.445 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 16:50:05.446 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:05.447 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:50:05.449 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:50:05.450 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:50:05.451 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:50:05.452 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:50:05.453 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:50:05.454 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:50:05.454 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 29.42ms
2023-04-03 16:50:05.456 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:05.457 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:50:05.458 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:05.458 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 16:50:05.459 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 51.8878ms
2023-04-03 16:50:05.599 +04:00 [DBG] Connection id "0HMPK51CDS4V2" received FIN.
2023-04-03 16:50:05.601 +04:00 [DBG] Connection id "0HMPK51CDS4V2" is closed. The last processed stream ID was 5.
2023-04-03 16:50:05.601 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4V2 completed.
2023-04-03 16:50:05.602 +04:00 [DBG] Connection id "0HMPK51CDS4V2" sending FIN because: "The client closed the connection."
2023-04-03 16:50:05.614 +04:00 [DBG] Connection id "0HMPK51CDS4V2" stopped.
2023-04-03 16:50:28.359 +04:00 [DBG] Connection id "0HMPK51CDS4V3" accepted.
2023-04-03 16:50:28.361 +04:00 [DBG] Connection id "0HMPK51CDS4V3" started.
2023-04-03 16:50:28.375 +04:00 [DBG] Connection 0HMPK51CDS4V3 established using the following protocol: "Tls12"
2023-04-03 16:50:28.377 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:50:28.377 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:50:28.378 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:50:28.380 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:50:28.381 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:50:28.383 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 16:50:28.384 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:50:28.385 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:50:28.386 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:50:28.387 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:50:28.387 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:50:28.388 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:50:28.389 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:50:28.389 +04:00 [DBG] The request is a preflight request.
2023-04-03 16:50:28.390 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 12.9077ms
2023-04-03 16:50:28.391 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 13.5580ms
2023-04-03 16:50:28.392 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:50:28.393 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:50:28.393 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:50:28.395 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:28.396 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:50:28.397 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:50:28.398 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:50:28.399 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:50:28.399 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:50:28.400 +04:00 [DBG] Authorization was successful.
2023-04-03 16:50:28.401 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:28.402 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:50:28.403 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:50:28.404 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:50:28.405 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:50:28.407 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:50:28.408 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:50:28.410 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:50:28.411 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:50:28.412 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:50:28.414 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:50:28.415 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:50:28.416 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:50:28.417 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:50:28.418 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:50:28.419 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:28.420 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:28.421 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:50:28.427 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:50:28.430 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:28.431 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:28.432 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:28.433 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:28.434 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:50:28.435 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:28.436 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:50:28.437 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:50:28.439 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:50:28.439 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:50:28.440 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:50:28.441 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:50:28.442 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:50:28.443 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 33.8164ms
2023-04-03 16:50:28.444 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:50:28.445 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:28.445 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:50:28.446 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:50:28.447 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:50:28.448 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:28.450 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:28.451 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 16:50:28.451 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:50:28.452 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 60.3220ms
2023-04-03 16:50:28.453 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:50:28.454 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:50:28.455 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:50:28.455 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:50:28.456 +04:00 [DBG] Authorization was successful.
2023-04-03 16:50:28.456 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:28.457 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:50:28.459 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:50:28.460 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:50:28.461 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:50:28.463 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:50:28.463 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:50:28.465 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:50:28.466 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:50:28.467 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:50:28.469 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:50:28.470 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:50:28.470 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:50:28.471 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 16:50:28.472 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:50:28.473 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:28.473 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:28.474 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:50:28.477 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:50:28.479 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:28.480 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:28.481 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:28.482 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:28.483 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 16:50:28.484 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:28.485 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 16:50:28.486 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:50:28.488 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:50:28.488 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:50:28.489 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:50:28.490 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:50:28.491 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:50:28.492 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 27.0876ms
2023-04-03 16:50:28.493 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:28.494 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:50:28.495 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:28.496 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 16:50:28.497 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 52.1066ms
2023-04-03 16:50:30.944 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:50:30.945 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:50:30.947 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:50:30.949 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:30.950 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:50:30.961 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:50:30.963 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:50:30.964 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:50:30.964 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:50:30.966 +04:00 [DBG] Authorization was successful.
2023-04-03 16:50:30.966 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:30.967 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:50:30.969 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:50:30.970 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:50:30.971 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:50:30.973 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:50:30.974 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:50:30.976 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:50:30.977 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:50:30.978 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:50:30.980 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:50:30.980 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:50:30.981 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 16:50:30.982 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 16:50:30.983 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:50:30.983 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:30.985 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:30.985 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:50:30.989 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:50:30.993 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:30.994 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:30.995 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:30.996 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:30.996 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 16:50:30.998 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:30.999 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:50:31.000 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:50:31.002 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:50:31.002 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:50:31.003 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:50:31.004 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:50:31.004 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:50:31.005 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 29.7634ms
2023-04-03 16:50:31.006 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 16:50:31.007 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:31.007 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 16:50:31.008 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:50:31.009 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 16:50:31.010 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:31.011 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:31.012 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:50:31.012 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 16:50:31.013 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 69.7727ms
2023-04-03 16:50:31.014 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 16:50:31.017 +04:00 [INF] CORS policy execution successful.
2023-04-03 16:50:31.018 +04:00 [DBG] Successfully validated the token.
2023-04-03 16:50:31.018 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 16:50:31.019 +04:00 [DBG] Authorization was successful.
2023-04-03 16:50:31.019 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:31.020 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 16:50:31.022 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 16:50:31.022 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 16:50:31.023 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 16:50:31.025 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 16:50:31.026 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 16:50:31.027 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:50:31.028 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 16:50:31.029 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 16:50:31.030 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 16:50:31.031 +04:00 [DBG] Creating DbConnection.
2023-04-03 16:50:31.033 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-03 16:50:31.034 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-03 16:50:31.035 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-03 16:50:31.036 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:31.037 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:31.038 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:50:31.041 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 16:50:31.043 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:31.045 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:31.046 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 16:50:31.047 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:31.049 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 16:50:31.050 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:31.051 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 16:50:31.053 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 16:50:31.055 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 16:50:31.055 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 16:50:31.056 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 16:50:31.057 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 16:50:31.059 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 16:50:31.060 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 33.0869ms
2023-04-03 16:50:31.061 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 16:50:31.062 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 16:50:31.063 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 16:50:31.065 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 16:50:31.066 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 60.2775ms
2023-04-03 16:50:35.639 +04:00 [DBG] Connection id "0HMPK51CDS4V3" received FIN.
2023-04-03 16:50:35.640 +04:00 [DBG] Connection id "0HMPK51CDS4V3" is closed. The last processed stream ID was 11.
2023-04-03 16:50:35.640 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4V3 completed.
2023-04-03 16:50:35.642 +04:00 [DBG] Connection id "0HMPK51CDS4V3" sending FIN because: "The client closed the connection."
2023-04-03 16:50:35.653 +04:00 [DBG] Connection id "0HMPK51CDS4V3" stopped.
2023-04-03 17:08:19.080 +04:00 [DBG] Connection id "0HMPK51CDS4V4" accepted.
2023-04-03 17:08:19.093 +04:00 [DBG] Connection id "0HMPK51CDS4V4" started.
2023-04-03 17:08:19.094 +04:00 [DBG] Connection 0HMPK51CDS4V4 established using the following protocol: "Tls12"
2023-04-03 17:08:19.097 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:08:19.098 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:08:19.099 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:19.100 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:08:19.100 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:08:19.101 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:08:19.102 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:08:19.103 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 5.8018ms
2023-04-03 17:08:19.104 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/see-balance application/json 36
2023-04-03 17:08:19.105 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:08:19.106 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:19.107 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:08:19.107 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:08:19.108 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:08:19.109 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:08:19.110 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:08:19.111 +04:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:19.112 +04:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:19.114 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/see-balance application/json 36 - 405 0 - 10.2595ms
2023-04-03 17:08:19.115 +04:00 [DBG] Connection id "0HMPK51CDS4V4", Request id "0HMPK51CDS4V4:00000003": started reading request body.
2023-04-03 17:08:19.117 +04:00 [DBG] Connection id "0HMPK51CDS4V4", Request id "0HMPK51CDS4V4:00000003": done reading request body.
2023-04-03 17:08:27.457 +04:00 [DBG] Connection id "0HMPK51CDS4V4" received FIN.
2023-04-03 17:08:27.458 +04:00 [DBG] Connection id "0HMPK51CDS4V4" is closed. The last processed stream ID was 3.
2023-04-03 17:08:27.458 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4V4 completed.
2023-04-03 17:08:27.459 +04:00 [DBG] Connection id "0HMPK51CDS4V4" sending FIN because: "The client closed the connection."
2023-04-03 17:08:27.476 +04:00 [DBG] Connection id "0HMPK51CDS4V4" stopped.
2023-04-03 17:08:38.407 +04:00 [DBG] Connection id "0HMPK51CDS4V5" accepted.
2023-04-03 17:08:38.408 +04:00 [DBG] Connection id "0HMPK51CDS4V5" started.
2023-04-03 17:08:38.410 +04:00 [DBG] Connection 0HMPK51CDS4V5 established using the following protocol: "Tls12"
2023-04-03 17:08:38.412 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:08:38.413 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:08:38.414 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:38.414 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:08:38.415 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:08:38.416 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:08:38.417 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:08:38.417 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 5.7909ms
2023-04-03 17:08:38.419 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/see-balance application/json 36
2023-04-03 17:08:38.419 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:08:38.420 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:38.421 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:08:38.422 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:08:38.423 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:08:38.424 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:08:38.424 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:08:38.425 +04:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:38.426 +04:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:38.426 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/see-balance application/json 36 - 405 0 - 7.6584ms
2023-04-03 17:08:38.428 +04:00 [DBG] Connection id "0HMPK51CDS4V5", Request id "0HMPK51CDS4V5:00000003": started reading request body.
2023-04-03 17:08:38.429 +04:00 [DBG] Connection id "0HMPK51CDS4V5", Request id "0HMPK51CDS4V5:00000003": done reading request body.
2023-04-03 17:08:45.944 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:08:45.945 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:08:45.946 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:45.947 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:08:45.948 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:08:45.949 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:08:45.950 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:08:45.951 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 6.5279ms
2023-04-03 17:08:45.952 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/see-balance application/json 34
2023-04-03 17:08:45.953 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:08:45.954 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:45.955 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:08:45.956 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:08:45.957 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:08:45.959 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:08:45.960 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:08:45.961 +04:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:45.962 +04:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:45.963 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/see-balance application/json 34 - 405 0 - 11.0496ms
2023-04-03 17:08:45.964 +04:00 [DBG] Connection id "0HMPK51CDS4V5", Request id "0HMPK51CDS4V5:00000007": started reading request body.
2023-04-03 17:08:45.966 +04:00 [DBG] Connection id "0HMPK51CDS4V5", Request id "0HMPK51CDS4V5:00000007": done reading request body.
2023-04-03 17:08:47.468 +04:00 [DBG] Connection id "0HMPK51CDS4V5" received FIN.
2023-04-03 17:08:47.470 +04:00 [DBG] Connection id "0HMPK51CDS4V5" is closed. The last processed stream ID was 7.
2023-04-03 17:08:47.471 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4V5 completed.
2023-04-03 17:08:47.472 +04:00 [DBG] Connection id "0HMPK51CDS4V5" sending FIN because: "The client closed the connection."
2023-04-03 17:08:47.483 +04:00 [DBG] Connection id "0HMPK51CDS4V5" stopped.
2023-04-03 17:08:57.160 +04:00 [DBG] Connection id "0HMPK51CDS4V6" accepted.
2023-04-03 17:08:57.161 +04:00 [DBG] Connection id "0HMPK51CDS4V6" started.
2023-04-03 17:08:57.163 +04:00 [DBG] Connection 0HMPK51CDS4V6 established using the following protocol: "Tls12"
2023-04-03 17:08:57.164 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:08:57.165 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:08:57.166 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:57.167 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:08:57.168 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:08:57.169 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:08:57.169 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:08:57.170 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 5.4977ms
2023-04-03 17:08:57.171 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/see-balance application/json 33
2023-04-03 17:08:57.172 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:08:57.172 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:57.173 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:08:57.174 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:08:57.174 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:08:57.175 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:08:57.176 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:08:57.176 +04:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:57.177 +04:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2023-04-03 17:08:57.178 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/see-balance application/json 33 - 405 0 - 7.4136ms
2023-04-03 17:08:57.179 +04:00 [DBG] Connection id "0HMPK51CDS4V6", Request id "0HMPK51CDS4V6:00000003": started reading request body.
2023-04-03 17:08:57.181 +04:00 [DBG] Connection id "0HMPK51CDS4V6", Request id "0HMPK51CDS4V6:00000003": done reading request body.
2023-04-03 17:08:57.474 +04:00 [DBG] Connection id "0HMPK51CDS4V6" received FIN.
2023-04-03 17:08:57.476 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4V6 completed.
2023-04-03 17:08:57.476 +04:00 [DBG] Connection id "0HMPK51CDS4V6" is closed. The last processed stream ID was 3.
2023-04-03 17:08:57.479 +04:00 [DBG] Connection id "0HMPK51CDS4V6" sending FIN because: "The client closed the connection."
2023-04-03 17:08:57.483 +04:00 [DBG] Connection id "0HMPK51CDS4V6" stopped.
2023-04-03 17:09:25.154 +04:00 [DBG] Connection id "0HMPK51CDS4V7" accepted.
2023-04-03 17:09:25.156 +04:00 [DBG] Connection id "0HMPK51CDS4V7" started.
2023-04-03 17:09:25.157 +04:00 [DBG] Connection 0HMPK51CDS4V7 established using the following protocol: "Tls12"
2023-04-03 17:09:25.159 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:09:25.159 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:09:25.160 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:09:25.162 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:09:25.162 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:09:25.163 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:09:25.164 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:09:25.165 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 6.2489ms
2023-04-03 17:09:25.166 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 34
2023-04-03 17:09:25.168 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:09:25.170 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:09:25.171 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:09:25.172 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:09:25.173 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:09:25.173 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:09:25.174 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:09:25.174 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:09:25.175 +04:00 [DBG] Authorization was successful.
2023-04-03 17:09:25.176 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:09:25.184 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:09:25.185 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:09:25.186 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:09:25.187 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:09:25.189 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:09:25.190 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:09:25.191 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:09:25.192 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:09:25.194 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:09:25.196 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:09:25.197 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:09:25.203 +04:00 [DBG] Connection id "0HMPK51CDS4V7", Request id "0HMPK51CDS4V7:00000003": started reading request body.
2023-04-03 17:09:25.204 +04:00 [DBG] Connection id "0HMPK51CDS4V7", Request id "0HMPK51CDS4V7:00000003": done reading request body.
2023-04-03 17:09:25.206 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:09:25.207 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:09:25.208 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:09:25.210 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:09:25.217 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:09:25.223 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 31.8668ms
2023-04-03 17:09:25.224 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:09:25.226 +04:00 [ERR] Pin must be 4 characters long
System.ArgumentException: Pin must be 4 characters long
   at BankSystem.Atm.Services.Models.Requests.ChangePinRequest.Validate() in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Models\Requests\ChangePinRequest.cs:line 12
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 68
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:09:25.244 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 34 - 1 - application/json 77.3266ms
2023-04-03 17:09:27.505 +04:00 [DBG] Connection id "0HMPK51CDS4V7" received FIN.
2023-04-03 17:09:27.507 +04:00 [DBG] Connection id "0HMPK51CDS4V7" is closed. The last processed stream ID was 3.
2023-04-03 17:09:27.507 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4V7 completed.
2023-04-03 17:09:27.509 +04:00 [DBG] Connection id "0HMPK51CDS4V7" sending FIN because: "The client closed the connection."
2023-04-03 17:09:27.526 +04:00 [DBG] Connection id "0HMPK51CDS4V7" stopped.
2023-04-03 17:09:36.946 +04:00 [DBG] Connection id "0HMPK51CDS4V8" accepted.
2023-04-03 17:09:36.947 +04:00 [DBG] Connection id "0HMPK51CDS4V8" started.
2023-04-03 17:09:36.949 +04:00 [DBG] Connection 0HMPK51CDS4V8 established using the following protocol: "Tls12"
2023-04-03 17:09:36.950 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:09:36.951 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:09:36.952 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:09:36.953 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:09:36.953 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:09:36.954 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:09:36.954 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:09:36.955 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 5.1893ms
2023-04-03 17:09:36.956 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:09:36.957 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:09:36.957 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:09:36.958 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:09:36.959 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:09:36.960 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:09:36.961 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:09:36.961 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:09:36.962 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:09:36.963 +04:00 [DBG] Authorization was successful.
2023-04-03 17:09:36.963 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:09:36.964 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:09:36.965 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:09:36.966 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:09:36.968 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:09:36.970 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:09:36.971 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:09:36.972 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:09:36.973 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:09:36.974 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:09:36.975 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:09:36.977 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:09:36.978 +04:00 [DBG] Connection id "0HMPK51CDS4V8", Request id "0HMPK51CDS4V8:00000003": started reading request body.
2023-04-03 17:09:36.979 +04:00 [DBG] Connection id "0HMPK51CDS4V8", Request id "0HMPK51CDS4V8:00000003": done reading request body.
2023-04-03 17:09:36.980 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:09:36.981 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:09:36.982 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:09:36.983 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:09:36.984 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:09:36.987 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:09:36.989 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .FirstOrDefault(c => c.Id == __cardId_0)'
2023-04-03 17:09:36.994 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin
            FROM Cards AS c
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-03 17:09:36.997 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:09:36.998 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:09:36.999 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-03 17:09:36.999 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:09:37.000 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:09:37.001 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:09:38.088 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:09:38.089 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:09:38.095 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:09:38.097 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:09:38.099 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:09:38.100 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 17:09:38.101 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:09:38.102 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:09:38.113 +04:00 [DBG] An entity of type 'CardEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:09:38.118 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 17:09:38.121 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 17:09:38.132 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 17:09:38.188 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:09:38.189 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:09:38.192 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:09:38.193 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 17:09:38.196 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:09:38.197 +04:00 [DBG] Executing DbCommand [Parameters=[@p7='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Cards] SET [AccountId] = @p0, [CardNumber] = @p1, [CreatedAt] = @p2, [Cvv] = @p3, [ExpiresAt] = @p4, [FullName] = @p5, [Pin] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2023-04-03 17:09:38.202 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Cards] SET [AccountId] = @p0, [CardNumber] = @p1, [CreatedAt] = @p2, [Cvv] = @p3, [ExpiresAt] = @p4, [FullName] = @p5, [Pin] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2023-04-03 17:09:38.208 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:09:38.209 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 17:09:38.212 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:09:38.213 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:09:38.215 +04:00 [DBG] An entity of type 'CardEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:09:38.218 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 1 entities written to the database.
2023-04-03 17:09:38.219 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 17:09:38.221 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 17:09:38.221 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 17:09:38.222 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 17:09:38.222 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 17:09:38.223 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 17:09:38.225 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 1252.7191ms
2023-04-03 17:09:38.226 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:09:38.227 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:09:38.228 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:09:38.229 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:09:38.230 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 200 - application/json;+charset=utf-8 1274.4143ms
2023-04-03 17:09:47.557 +04:00 [DBG] Connection id "0HMPK51CDS4V8" received FIN.
2023-04-03 17:09:47.559 +04:00 [DBG] Connection id "0HMPK51CDS4V8" is closed. The last processed stream ID was 3.
2023-04-03 17:09:47.559 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4V8 completed.
2023-04-03 17:09:47.560 +04:00 [DBG] Connection id "0HMPK51CDS4V8" sending FIN because: "The client closed the connection."
2023-04-03 17:09:47.573 +04:00 [DBG] Connection id "0HMPK51CDS4V8" stopped.
2023-04-03 17:11:20.085 +04:00 [DBG] Connection id "0HMPK51CDS4V9" accepted.
2023-04-03 17:11:20.087 +04:00 [DBG] Connection id "0HMPK51CDS4V9" started.
2023-04-03 17:11:20.090 +04:00 [DBG] Connection 0HMPK51CDS4V9 established using the following protocol: "Tls12"
2023-04-03 17:11:20.091 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:11:20.092 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:11:20.093 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:11:20.094 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:11:20.095 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:11:20.096 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:11:20.097 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:11:20.097 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 6.3691ms
2023-04-03 17:11:20.098 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:11:20.099 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:11:20.101 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:11:20.103 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:11:20.104 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:11:20.105 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:11:20.105 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:11:20.106 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:11:20.107 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:11:20.108 +04:00 [DBG] Authorization was successful.
2023-04-03 17:11:20.109 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:11:20.110 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:11:20.111 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:11:20.112 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:11:20.113 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:11:20.115 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:11:20.116 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:11:20.117 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:11:20.118 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:11:20.119 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:11:20.121 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:11:20.122 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:11:20.123 +04:00 [DBG] Connection id "0HMPK51CDS4V9", Request id "0HMPK51CDS4V9:00000003": started reading request body.
2023-04-03 17:11:20.124 +04:00 [DBG] Connection id "0HMPK51CDS4V9", Request id "0HMPK51CDS4V9:00000003": done reading request body.
2023-04-03 17:11:20.126 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:11:20.127 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:11:20.128 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:11:20.129 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:11:20.130 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:11:20.132 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:11:20.133 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:11:20.134 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:11:20.135 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:11:20.136 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:11:20.137 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:11:20.138 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:11:20.139 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:11:20.140 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:11:20.144 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:11:20.146 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:11:20.147 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:11:20.148 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 17:11:20.149 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:11:20.150 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:11:20.152 +04:00 [DBG] An entity of type 'CardEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:11:20.153 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 17:11:20.154 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 17:11:20.155 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 17:11:20.157 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:11:20.159 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:11:20.160 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:11:20.161 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 17:11:20.162 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 17:11:20.163 +04:00 [DBG] Executing DbCommand [Parameters=[@p7='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Cards] SET [AccountId] = @p0, [CardNumber] = @p1, [CreatedAt] = @p2, [Cvv] = @p3, [ExpiresAt] = @p4, [FullName] = @p5, [Pin] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2023-04-03 17:11:20.167 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Cards] SET [AccountId] = @p0, [CardNumber] = @p1, [CreatedAt] = @p2, [Cvv] = @p3, [ExpiresAt] = @p4, [FullName] = @p5, [Pin] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2023-04-03 17:11:20.170 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:11:20.171 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 17:11:20.172 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:11:20.173 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 17:11:20.175 +04:00 [DBG] An entity of type 'CardEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:11:20.177 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 1 entities written to the database.
2023-04-03 17:11:20.178 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 17:11:20.180 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 17:11:20.180 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 17:11:20.181 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 17:11:20.182 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 17:11:20.183 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 17:11:20.184 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 66.857ms
2023-04-03 17:11:20.186 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:11:20.187 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:11:20.188 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:11:20.189 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:11:20.190 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 200 - application/json;+charset=utf-8 91.6210ms
2023-04-03 17:11:27.737 +04:00 [DBG] Connection id "0HMPK51CDS4V9" received FIN.
2023-04-03 17:11:27.738 +04:00 [DBG] Connection id "0HMPK51CDS4V9" is closed. The last processed stream ID was 3.
2023-04-03 17:11:27.738 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4V9 completed.
2023-04-03 17:11:27.739 +04:00 [DBG] Connection id "0HMPK51CDS4V9" sending FIN because: "The client closed the connection."
2023-04-03 17:11:27.752 +04:00 [DBG] Connection id "0HMPK51CDS4V9" stopped.
2023-04-03 17:12:24.354 +04:00 [DBG] Connection id "0HMPK51CDS4VA" accepted.
2023-04-03 17:12:24.366 +04:00 [DBG] Connection id "0HMPK51CDS4VA" started.
2023-04-03 17:12:24.367 +04:00 [DBG] Connection 0HMPK51CDS4VA established using the following protocol: "Tls12"
2023-04-03 17:12:24.369 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:12:24.369 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:12:24.370 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:12:24.371 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:12:24.372 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:12:24.372 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:12:24.373 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:12:24.374 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 5.5596ms
2023-04-03 17:12:24.376 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:12:24.376 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:12:24.377 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:12:24.378 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:12:24.379 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:12:24.380 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:12:24.380 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:12:24.381 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:12:24.382 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:12:24.383 +04:00 [DBG] Authorization was successful.
2023-04-03 17:12:24.383 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:12:24.384 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:12:24.385 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:12:24.386 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:12:24.387 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:12:24.389 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:12:24.390 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:12:24.392 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:12:24.393 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:12:24.393 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:12:24.395 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:12:24.396 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:12:24.397 +04:00 [DBG] Connection id "0HMPK51CDS4VA", Request id "0HMPK51CDS4VA:00000003": started reading request body.
2023-04-03 17:12:24.398 +04:00 [DBG] Connection id "0HMPK51CDS4VA", Request id "0HMPK51CDS4VA:00000003": done reading request body.
2023-04-03 17:12:24.399 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:12:24.400 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:12:24.401 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:12:24.402 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:12:24.403 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:12:24.404 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:12:24.406 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:12:24.406 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:12:24.407 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:12:24.408 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:12:24.409 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:12:24.411 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:12:24.412 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:12:24.413 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:12:24.416 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:12:24.417 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:12:24.418 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:12:24.419 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 17:12:24.420 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:12:24.421 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:12:24.423 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 31.0073ms
2023-04-03 17:12:24.424 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:12:24.425 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:12:24.433 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:12:24.433 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:12:24.435 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:12:24.436 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 1 - application/json 60.3031ms
2023-04-03 17:12:27.833 +04:00 [DBG] Connection id "0HMPK51CDS4VA" received FIN.
2023-04-03 17:12:27.834 +04:00 [DBG] Connection id "0HMPK51CDS4VA" is closed. The last processed stream ID was 3.
2023-04-03 17:12:27.834 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VA completed.
2023-04-03 17:12:27.835 +04:00 [DBG] Connection id "0HMPK51CDS4VA" sending FIN because: "The client closed the connection."
2023-04-03 17:12:27.851 +04:00 [DBG] Connection id "0HMPK51CDS4VA" stopped.
2023-04-03 17:13:02.654 +04:00 [DBG] Connection id "0HMPK51CDS4VB" accepted.
2023-04-03 17:13:02.656 +04:00 [DBG] Connection id "0HMPK51CDS4VB" started.
2023-04-03 17:13:02.658 +04:00 [DBG] Connection 0HMPK51CDS4VB established using the following protocol: "Tls12"
2023-04-03 17:13:02.660 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:13:02.660 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:13:02.661 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:13:02.662 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:13:02.663 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:13:02.663 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:13:02.664 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:13:02.665 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 5.2918ms
2023-04-03 17:13:02.666 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:13:02.667 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:13:02.668 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:13:02.670 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:13:02.670 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:13:02.671 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:13:02.672 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:13:02.674 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:13:02.675 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:13:02.675 +04:00 [DBG] Authorization was successful.
2023-04-03 17:13:02.676 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:13:02.677 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:13:02.678 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:13:02.679 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:13:02.680 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:13:02.682 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:13:02.683 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:13:02.684 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:13:02.685 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:13:02.686 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:13:02.687 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:13:02.689 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:13:02.690 +04:00 [DBG] Connection id "0HMPK51CDS4VB", Request id "0HMPK51CDS4VB:00000003": started reading request body.
2023-04-03 17:13:02.691 +04:00 [DBG] Connection id "0HMPK51CDS4VB", Request id "0HMPK51CDS4VB:00000003": done reading request body.
2023-04-03 17:13:02.692 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:13:02.693 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:13:02.694 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:13:02.696 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:13:02.697 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:13:02.698 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:13:02.700 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:13:02.700 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:13:02.701 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:13:02.702 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 17:13:02.702 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:13:02.703 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:13:02.704 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:13:02.705 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:13:02.709 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:13:02.711 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:13:02.712 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:13:02.713 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 17:13:02.714 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:13:02.715 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:13:02.717 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 32.9524ms
2023-04-03 17:13:02.718 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:13:02.719 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:13:02.726 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:13:02.727 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:13:02.728 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:13:02.729 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 1 - application/json 62.3721ms
2023-04-03 17:13:07.884 +04:00 [DBG] Connection id "0HMPK51CDS4VB" received FIN.
2023-04-03 17:13:07.886 +04:00 [DBG] Connection id "0HMPK51CDS4VB" is closed. The last processed stream ID was 3.
2023-04-03 17:13:07.886 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VB completed.
2023-04-03 17:13:07.887 +04:00 [DBG] Connection id "0HMPK51CDS4VB" sending FIN because: "The client closed the connection."
2023-04-03 17:13:07.900 +04:00 [DBG] Connection id "0HMPK51CDS4VB" stopped.
2023-04-03 17:13:53.842 +04:00 [DBG] Connection id "0HMPK51CDS4VC" accepted.
2023-04-03 17:13:53.843 +04:00 [DBG] Connection id "0HMPK51CDS4VC" started.
2023-04-03 17:13:53.845 +04:00 [DBG] Connection 0HMPK51CDS4VC established using the following protocol: "Tls12"
2023-04-03 17:13:53.846 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:13:53.848 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:13:53.849 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:13:53.850 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:13:53.851 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:13:53.851 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:13:53.852 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:13:53.853 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 6.3783ms
2023-04-03 17:13:53.854 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:13:53.854 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:13:53.856 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:13:53.857 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:13:53.857 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:13:53.858 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:13:53.859 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:13:53.859 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:13:53.860 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:13:53.861 +04:00 [DBG] Authorization was successful.
2023-04-03 17:13:53.862 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:13:53.862 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:13:53.864 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:13:53.865 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:13:53.866 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:13:53.867 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:13:53.868 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:13:53.869 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:13:53.871 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:13:53.871 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:13:53.873 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:13:53.874 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:13:53.875 +04:00 [DBG] Connection id "0HMPK51CDS4VC", Request id "0HMPK51CDS4VC:00000003": started reading request body.
2023-04-03 17:13:53.876 +04:00 [DBG] Connection id "0HMPK51CDS4VC", Request id "0HMPK51CDS4VC:00000003": done reading request body.
2023-04-03 17:13:53.877 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:13:53.878 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:13:53.879 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:13:53.880 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:13:53.881 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:13:53.883 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:13:53.884 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:13:53.885 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:13:53.885 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:13:53.886 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 17:13:53.887 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:13:53.888 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:13:53.889 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:13:53.890 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:13:53.893 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:13:53.896 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:13:53.897 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:13:53.898 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 17:13:53.899 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:13:53.900 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:13:53.901 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 31.4144ms
2023-04-03 17:13:53.902 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:13:53.902 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:13:53.909 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:13:53.910 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:13:53.911 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:13:53.912 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 1 - application/json 58.6107ms
2023-04-03 17:13:57.937 +04:00 [DBG] Connection id "0HMPK51CDS4VC" received FIN.
2023-04-03 17:13:57.939 +04:00 [DBG] Connection id "0HMPK51CDS4VC" is closed. The last processed stream ID was 3.
2023-04-03 17:13:57.939 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VC completed.
2023-04-03 17:13:57.940 +04:00 [DBG] Connection id "0HMPK51CDS4VC" sending FIN because: "The client closed the connection."
2023-04-03 17:13:57.953 +04:00 [DBG] Connection id "0HMPK51CDS4VC" stopped.
2023-04-03 17:14:31.636 +04:00 [DBG] Connection id "0HMPK51CDS4VD" accepted.
2023-04-03 17:14:31.637 +04:00 [DBG] Connection id "0HMPK51CDS4VD" started.
2023-04-03 17:14:31.639 +04:00 [DBG] Connection 0HMPK51CDS4VD established using the following protocol: "Tls12"
2023-04-03 17:14:31.640 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:14:31.641 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:14:31.642 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:14:31.643 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:14:31.643 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:14:31.644 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:14:31.645 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:14:31.646 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 5.8345ms
2023-04-03 17:14:31.647 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:14:31.648 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:14:31.649 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:14:31.650 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:14:31.651 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:14:31.652 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:14:31.652 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:14:31.653 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:14:31.654 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:14:31.655 +04:00 [DBG] Authorization was successful.
2023-04-03 17:14:31.656 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:14:31.656 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:14:31.658 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:14:31.659 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:14:31.661 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:14:31.662 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:14:31.663 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:14:31.664 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:14:31.665 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:14:31.667 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:14:31.668 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:14:31.669 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:14:31.670 +04:00 [DBG] Connection id "0HMPK51CDS4VD", Request id "0HMPK51CDS4VD:00000003": started reading request body.
2023-04-03 17:14:31.671 +04:00 [DBG] Connection id "0HMPK51CDS4VD", Request id "0HMPK51CDS4VD:00000003": done reading request body.
2023-04-03 17:14:31.683 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:14:31.684 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:14:31.685 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:14:31.686 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:14:31.688 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:14:31.690 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:14:31.692 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:14:31.693 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:14:31.693 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:14:31.694 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:14:31.695 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:14:31.696 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:31.697 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:31.698 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:14:31.701 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:14:31.704 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:14:31.706 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:31.706 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 17:14:31.708 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:31.708 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:14:31.710 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 45.1853ms
2023-04-03 17:14:31.710 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:14:31.711 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:14:31.717 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:14:31.718 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:31.720 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:14:31.722 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 1 - application/json 74.5518ms
2023-04-03 17:14:32.643 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:14:32.645 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:14:32.646 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:14:32.648 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:14:32.649 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:14:32.650 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:14:32.651 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:14:32.652 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:14:32.653 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:14:32.654 +04:00 [DBG] Authorization was successful.
2023-04-03 17:14:32.655 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:14:32.656 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:14:32.657 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:14:32.658 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:14:32.659 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:14:32.661 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:14:32.662 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:14:32.663 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:14:32.664 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:14:32.665 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:14:32.666 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:14:32.667 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:14:32.668 +04:00 [DBG] Connection id "0HMPK51CDS4VD", Request id "0HMPK51CDS4VD:00000005": started reading request body.
2023-04-03 17:14:32.669 +04:00 [DBG] Connection id "0HMPK51CDS4VD", Request id "0HMPK51CDS4VD:00000005": done reading request body.
2023-04-03 17:14:32.670 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:14:32.670 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:14:32.672 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:14:32.673 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:14:32.674 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:14:32.676 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:14:32.678 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:14:32.678 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:14:32.679 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:14:32.679 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 17:14:32.680 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:14:32.681 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:32.682 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:32.683 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:14:32.686 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:14:32.688 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:14:32.690 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:32.691 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 17:14:32.692 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:32.693 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:14:32.694 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 30.6572ms
2023-04-03 17:14:32.695 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:14:32.695 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:14:32.701 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:14:32.702 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:32.704 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:14:32.705 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 1 - application/json 61.9035ms
2023-04-03 17:14:38.111 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:14:38.112 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:14:38.114 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:14:38.115 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:14:38.115 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:14:38.116 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:14:38.117 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:14:38.118 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 6.6508ms
2023-04-03 17:14:38.119 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:14:38.120 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:14:38.121 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:14:38.122 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:14:38.123 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:14:38.124 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:14:38.124 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:14:38.131 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:14:38.132 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:14:38.133 +04:00 [DBG] Authorization was successful.
2023-04-03 17:14:38.133 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:14:38.134 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:14:38.136 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:14:38.136 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:14:38.138 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:14:38.139 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:14:38.140 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:14:38.142 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:14:38.143 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:14:38.144 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:14:38.145 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:14:38.146 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:14:38.147 +04:00 [DBG] Connection id "0HMPK51CDS4VD", Request id "0HMPK51CDS4VD:00000009": started reading request body.
2023-04-03 17:14:38.148 +04:00 [DBG] Connection id "0HMPK51CDS4VD", Request id "0HMPK51CDS4VD:00000009": done reading request body.
2023-04-03 17:14:38.148 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:14:38.149 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:14:38.150 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:14:38.151 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:14:38.152 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:14:38.154 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:14:38.156 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:14:38.157 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:14:38.157 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:14:38.158 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:14:38.160 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:14:38.161 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:38.162 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:38.163 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:14:38.164 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:14:38.166 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:14:38.167 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:38.168 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 17:14:38.169 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:38.170 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:14:38.172 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 30.1766ms
2023-04-03 17:14:38.173 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:14:38.174 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:14:38.179 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:14:38.180 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:38.181 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 17:14:38.182 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 1 - application/json 62.9130ms
2023-04-03 17:14:43.001 +04:00 [DBG] Connection id "0HMPK51CDS4VD" received FIN.
2023-04-03 17:14:43.003 +04:00 [DBG] Connection id "0HMPK51CDS4VD" is closed. The last processed stream ID was 9.
2023-04-03 17:14:43.003 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VD completed.
2023-04-03 17:14:43.005 +04:00 [DBG] Connection id "0HMPK51CDS4VD" sending FIN because: "The client closed the connection."
2023-04-03 17:14:43.018 +04:00 [DBG] Connection id "0HMPK51CDS4VD" stopped.
2023-04-03 17:14:56.119 +04:00 [DBG] Connection id "0HMPK51CDS4VE" accepted.
2023-04-03 17:14:56.121 +04:00 [DBG] Connection id "0HMPK51CDS4VE" started.
2023-04-03 17:14:56.123 +04:00 [DBG] Connection 0HMPK51CDS4VE established using the following protocol: "Tls12"
2023-04-03 17:14:56.124 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:14:56.125 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:14:56.126 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:14:56.127 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:14:56.128 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:14:56.129 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:14:56.129 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:14:56.130 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 5.7970ms
2023-04-03 17:14:56.132 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:14:56.133 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:14:56.134 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:14:56.136 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:14:56.137 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:14:56.137 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:14:56.138 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:14:56.139 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:14:56.140 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:14:56.141 +04:00 [DBG] Authorization was successful.
2023-04-03 17:14:56.141 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:14:56.142 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:14:56.144 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:14:56.145 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:14:56.145 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:14:56.147 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:14:56.148 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:14:56.149 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:14:56.150 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:14:56.151 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:14:56.152 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:14:56.153 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:14:56.154 +04:00 [DBG] Connection id "0HMPK51CDS4VE", Request id "0HMPK51CDS4VE:00000003": started reading request body.
2023-04-03 17:14:56.156 +04:00 [DBG] Connection id "0HMPK51CDS4VE", Request id "0HMPK51CDS4VE:00000003": done reading request body.
2023-04-03 17:14:56.156 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:14:56.157 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:14:56.158 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:14:56.159 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:14:56.160 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:14:56.161 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:14:56.163 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:14:56.163 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:14:56.164 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:14:56.165 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 17:14:56.165 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:14:56.166 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:56.167 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:56.168 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:14:56.172 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:14:56.174 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:14:56.174 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:56.175 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 17:14:56.176 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:56.177 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:14:56.178 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 29.3434ms
2023-04-03 17:14:56.179 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:14:56.180 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:14:56.186 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:14:56.187 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:14:56.189 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 17:14:56.190 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 1 - application/json 57.8478ms
2023-04-03 17:15:03.027 +04:00 [DBG] Connection id "0HMPK51CDS4VE" received FIN.
2023-04-03 17:15:03.028 +04:00 [DBG] Connection id "0HMPK51CDS4VE" is closed. The last processed stream ID was 3.
2023-04-03 17:15:03.028 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VE completed.
2023-04-03 17:15:03.030 +04:00 [DBG] Connection id "0HMPK51CDS4VE" sending FIN because: "The client closed the connection."
2023-04-03 17:15:03.041 +04:00 [DBG] Connection id "0HMPK51CDS4VE" stopped.
2023-04-03 17:15:21.126 +04:00 [DBG] Connection id "0HMPK51CDS4VF" accepted.
2023-04-03 17:15:21.128 +04:00 [DBG] Connection id "0HMPK51CDS4VF" started.
2023-04-03 17:15:21.129 +04:00 [DBG] Connection 0HMPK51CDS4VF established using the following protocol: "Tls12"
2023-04-03 17:15:21.131 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:15:21.132 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:15:21.133 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:15:21.134 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:15:21.134 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:15:21.135 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:15:21.136 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:15:21.138 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 7.1975ms
2023-04-03 17:15:21.139 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:15:21.140 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:15:21.141 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:15:21.142 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:15:21.143 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:15:21.143 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:15:21.144 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:15:21.145 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:15:21.145 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:15:21.146 +04:00 [DBG] Authorization was successful.
2023-04-03 17:15:21.146 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:15:21.147 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:15:21.160 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:15:21.161 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:15:21.162 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:15:21.164 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:15:21.165 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:15:21.166 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:15:21.168 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:15:21.169 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:15:21.171 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:15:21.173 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:15:21.174 +04:00 [DBG] Connection id "0HMPK51CDS4VF", Request id "0HMPK51CDS4VF:00000003": started reading request body.
2023-04-03 17:15:21.175 +04:00 [DBG] Connection id "0HMPK51CDS4VF", Request id "0HMPK51CDS4VF:00000003": done reading request body.
2023-04-03 17:15:21.176 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:15:21.177 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:15:21.178 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:15:21.179 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:15:21.180 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:15:21.182 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:15:21.183 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:15:21.184 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:15:21.185 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:15:21.186 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:15:21.187 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-03 17:15:21.188 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:15:21.189 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:15:21.191 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:15:21.194 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:15:21.196 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:15:21.197 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:15:21.198 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 17:15:21.199 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:15:21.200 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 17:15:21.202 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 35.4636ms
2023-04-03 17:15:21.203 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:15:21.204 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:15:21.210 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:15:21.211 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:15:21.212 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 17:15:21.213 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 1 - application/json 73.7665ms
2023-04-03 17:15:23.065 +04:00 [DBG] Connection id "0HMPK51CDS4VF" received FIN.
2023-04-03 17:15:23.067 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VF completed.
2023-04-03 17:15:23.067 +04:00 [DBG] Connection id "0HMPK51CDS4VF" is closed. The last processed stream ID was 3.
2023-04-03 17:15:23.070 +04:00 [DBG] Connection id "0HMPK51CDS4VF" sending FIN because: "The client closed the connection."
2023-04-03 17:15:23.082 +04:00 [DBG] Connection id "0HMPK51CDS4VF" stopped.
2023-04-03 17:15:40.743 +04:00 [DBG] Connection id "0HMPK51CDS4VG" accepted.
2023-04-03 17:15:40.744 +04:00 [DBG] Connection id "0HMPK51CDS4VG" started.
2023-04-03 17:15:40.746 +04:00 [DBG] Connection 0HMPK51CDS4VG established using the following protocol: "Tls12"
2023-04-03 17:15:40.748 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:15:40.748 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:15:40.750 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:15:40.751 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:15:40.751 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:15:40.752 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:15:40.754 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:15:40.755 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 7.7017ms
2023-04-03 17:15:40.757 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:15:40.758 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:15:40.758 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:15:40.760 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:15:40.761 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:15:40.762 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:15:40.763 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:15:40.763 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:15:40.764 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:15:40.765 +04:00 [DBG] Authorization was successful.
2023-04-03 17:15:40.766 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:15:40.767 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:15:40.769 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:15:40.770 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:15:40.772 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:15:40.773 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:15:40.775 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:15:40.776 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:15:40.777 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:15:40.778 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:15:40.780 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:15:40.781 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:15:40.782 +04:00 [DBG] Connection id "0HMPK51CDS4VG", Request id "0HMPK51CDS4VG:00000003": started reading request body.
2023-04-03 17:15:40.783 +04:00 [DBG] Connection id "0HMPK51CDS4VG", Request id "0HMPK51CDS4VG:00000003": done reading request body.
2023-04-03 17:15:40.784 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:15:40.786 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:15:40.788 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:15:40.789 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:15:40.790 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:15:40.791 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:15:40.793 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:15:40.794 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:15:40.795 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:15:40.795 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:15:40.797 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:15:40.798 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:15:40.799 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:15:40.800 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:15:40.804 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:15:40.806 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:15:40.808 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:15:40.809 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 17:15:40.810 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:15:40.811 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 17:15:40.813 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 36.7972ms
2023-04-03 17:15:40.814 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:15:40.815 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:15:40.821 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:15:40.822 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:15:40.824 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:15:40.825 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 1 - application/json 68.4162ms
2023-04-03 17:15:43.075 +04:00 [DBG] Connection id "0HMPK51CDS4VG" received FIN.
2023-04-03 17:15:43.076 +04:00 [DBG] Connection id "0HMPK51CDS4VG" is closed. The last processed stream ID was 3.
2023-04-03 17:15:43.076 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VG completed.
2023-04-03 17:15:43.077 +04:00 [DBG] Connection id "0HMPK51CDS4VG" sending FIN because: "The client closed the connection."
2023-04-03 17:15:43.090 +04:00 [DBG] Connection id "0HMPK51CDS4VG" stopped.
2023-04-03 17:16:01.662 +04:00 [DBG] Connection id "0HMPK51CDS4VH" accepted.
2023-04-03 17:16:01.664 +04:00 [DBG] Connection id "0HMPK51CDS4VH" started.
2023-04-03 17:16:01.666 +04:00 [DBG] Connection 0HMPK51CDS4VH established using the following protocol: "Tls12"
2023-04-03 17:16:01.667 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:16:01.668 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:16:01.669 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:16:01.670 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:16:01.671 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:16:01.672 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:16:01.672 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:16:01.673 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 5.7504ms
2023-04-03 17:16:01.674 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:16:01.675 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:16:01.675 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:16:01.676 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:16:01.677 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:16:01.678 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:16:01.678 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:16:01.679 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:16:01.680 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:16:01.681 +04:00 [DBG] Authorization was successful.
2023-04-03 17:16:01.681 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:16:01.682 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:16:01.683 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:16:01.684 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:16:01.685 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:16:01.687 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:16:01.688 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:16:01.689 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:16:01.690 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:16:01.691 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:16:01.692 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:16:01.693 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:16:01.694 +04:00 [DBG] Connection id "0HMPK51CDS4VH", Request id "0HMPK51CDS4VH:00000003": started reading request body.
2023-04-03 17:16:01.695 +04:00 [DBG] Connection id "0HMPK51CDS4VH", Request id "0HMPK51CDS4VH:00000003": done reading request body.
2023-04-03 17:16:01.696 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:16:01.697 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:16:01.697 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:16:01.698 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:16:01.699 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:16:01.701 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:16:01.702 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:16:01.703 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:16:01.704 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:16:01.705 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:16:01.706 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:16:01.706 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:16:01.707 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:16:01.708 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:16:01.712 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:16:01.713 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:16:01.714 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:16:01.715 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 17:16:01.716 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:16:01.717 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:16:01.719 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 29.5655ms
2023-04-03 17:16:01.720 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:16:01.721 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:16:01.726 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:16:01.728 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:16:01.729 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:16:01.730 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 1 - application/json 56.1732ms
2023-04-03 17:16:03.104 +04:00 [DBG] Connection id "0HMPK51CDS4VH" received FIN.
2023-04-03 17:16:03.107 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VH completed.
2023-04-03 17:16:03.107 +04:00 [DBG] Connection id "0HMPK51CDS4VH" is closed. The last processed stream ID was 3.
2023-04-03 17:16:03.110 +04:00 [DBG] Connection id "0HMPK51CDS4VH" sending FIN because: "The client closed the connection."
2023-04-03 17:16:03.118 +04:00 [DBG] Connection id "0HMPK51CDS4VH" stopped.
2023-04-03 17:16:15.264 +04:00 [DBG] Connection id "0HMPK51CDS4VI" accepted.
2023-04-03 17:16:15.265 +04:00 [DBG] Connection id "0HMPK51CDS4VI" started.
2023-04-03 17:16:15.267 +04:00 [DBG] Connection 0HMPK51CDS4VI established using the following protocol: "Tls12"
2023-04-03 17:16:15.268 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:16:15.269 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:16:15.270 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:16:15.271 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:16:15.272 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:16:15.273 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:16:15.274 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:16:15.275 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 6.6679ms
2023-04-03 17:16:15.276 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:16:15.277 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:16:15.278 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:16:15.279 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:16:15.280 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:16:15.281 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:16:15.282 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:16:15.282 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:16:15.283 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:16:15.284 +04:00 [DBG] Authorization was successful.
2023-04-03 17:16:15.284 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:16:15.285 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:16:15.288 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:16:15.289 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:16:15.290 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:16:15.291 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:16:15.293 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:16:15.294 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:16:15.295 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:16:15.296 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:16:15.297 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:16:15.298 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:16:15.299 +04:00 [DBG] Connection id "0HMPK51CDS4VI", Request id "0HMPK51CDS4VI:00000003": started reading request body.
2023-04-03 17:16:15.300 +04:00 [DBG] Connection id "0HMPK51CDS4VI", Request id "0HMPK51CDS4VI:00000003": done reading request body.
2023-04-03 17:16:15.301 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:16:15.302 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:16:15.303 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:16:15.304 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:16:15.306 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:16:15.307 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:16:15.309 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:16:15.310 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:16:15.310 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:16:15.311 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:16:15.312 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:16:15.313 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:16:15.314 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:16:15.315 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:16:15.318 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:16:15.320 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:16:15.322 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:16:15.323 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 17:16:15.335 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:16:15.336 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 17:16:15.338 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 44.7393ms
2023-04-03 17:16:15.339 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:16:15.340 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:16:15.346 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:16:15.347 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:16:15.348 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 17:16:15.349 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 1 - application/json 73.4512ms
2023-04-03 17:16:23.133 +04:00 [DBG] Connection id "0HMPK51CDS4VI" received FIN.
2023-04-03 17:16:23.135 +04:00 [DBG] Connection id "0HMPK51CDS4VI" is closed. The last processed stream ID was 3.
2023-04-03 17:16:23.135 +04:00 [DBG] Connection id "0HMPK51CDS4VI" sending FIN because: "The client closed the connection."
2023-04-03 17:16:23.138 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VI completed.
2023-04-03 17:16:23.150 +04:00 [DBG] Connection id "0HMPK51CDS4VI" stopped.
2023-04-03 17:16:56.061 +04:00 [DBG] Connection id "0HMPK51CDS4VJ" accepted.
2023-04-03 17:16:56.062 +04:00 [DBG] Connection id "0HMPK51CDS4VJ" started.
2023-04-03 17:16:56.064 +04:00 [DBG] Connection 0HMPK51CDS4VJ established using the following protocol: "Tls12"
2023-04-03 17:16:56.065 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:16:56.066 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:16:56.067 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:16:56.068 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:16:56.069 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:16:56.070 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:16:56.071 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:16:56.072 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 7.0117ms
2023-04-03 17:16:56.074 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:16:56.075 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:16:56.077 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:16:56.079 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:16:56.080 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:16:56.081 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:16:56.082 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:16:56.082 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:16:56.083 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:16:56.084 +04:00 [DBG] Authorization was successful.
2023-04-03 17:16:56.086 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:16:56.087 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:16:56.089 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:16:56.090 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:16:56.091 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:16:56.093 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:16:56.095 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:16:56.096 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:16:56.097 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:16:56.098 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:16:56.099 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:16:56.101 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:16:56.102 +04:00 [DBG] Connection id "0HMPK51CDS4VJ", Request id "0HMPK51CDS4VJ:00000003": started reading request body.
2023-04-03 17:16:56.103 +04:00 [DBG] Connection id "0HMPK51CDS4VJ", Request id "0HMPK51CDS4VJ:00000003": done reading request body.
2023-04-03 17:16:56.104 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:16:56.105 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:16:56.106 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:16:56.107 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:16:56.108 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:16:56.109 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:16:56.111 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:16:56.112 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:16:56.112 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:16:56.113 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:16:56.114 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:16:56.115 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:16:56.116 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:16:56.117 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:16:56.121 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:16:56.123 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:16:56.124 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:16:56.125 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 17:16:56.126 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:16:56.127 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:16:56.129 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 32.5881ms
2023-04-03 17:16:56.130 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:16:56.130 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:16:56.137 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:16:56.138 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:16:56.139 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:16:56.140 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 1 - application/json 66.2684ms
2023-04-03 17:16:58.190 +04:00 [DBG] Connection id "0HMPK51CDS4VJ" received FIN.
2023-04-03 17:16:58.191 +04:00 [DBG] Connection id "0HMPK51CDS4VJ" is closed. The last processed stream ID was 3.
2023-04-03 17:16:58.191 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VJ completed.
2023-04-03 17:16:58.193 +04:00 [DBG] Connection id "0HMPK51CDS4VJ" sending FIN because: "The client closed the connection."
2023-04-03 17:16:58.205 +04:00 [DBG] Connection id "0HMPK51CDS4VJ" stopped.
2023-04-03 17:17:11.909 +04:00 [DBG] Connection id "0HMPK51CDS4VK" accepted.
2023-04-03 17:17:11.910 +04:00 [DBG] Connection id "0HMPK51CDS4VK" started.
2023-04-03 17:17:11.912 +04:00 [DBG] Connection 0HMPK51CDS4VK established using the following protocol: "Tls12"
2023-04-03 17:17:11.913 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:17:11.914 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:11.915 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:17:11.916 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:11.916 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:11.917 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:11.919 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:17:11.920 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 6.5494ms
2023-04-03 17:17:11.920 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:17:11.921 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:11.922 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:17:11.923 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:11.924 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:11.925 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:11.926 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:11.926 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:17:11.927 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:17:11.928 +04:00 [DBG] Authorization was successful.
2023-04-03 17:17:11.929 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:11.930 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:17:11.933 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:17:11.934 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:17:11.935 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:17:11.937 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:17:11.938 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:17:11.940 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:11.941 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:11.942 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:11.943 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:17:11.945 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:17:11.946 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000003": started reading request body.
2023-04-03 17:17:11.947 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000003": done reading request body.
2023-04-03 17:17:11.948 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:17:11.949 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:11.950 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:11.951 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:11.953 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:11.954 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:17:11.956 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:17:11.956 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:17:11.957 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:17:11.958 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:17:11.958 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:17:11.959 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:11.961 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:11.961 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:17:11.964 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:17:11.966 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:17:11.967 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:11.968 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 17:17:11.969 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:11.970 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:17:11.971 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 31.6465ms
2023-04-03 17:17:11.972 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:11.973 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:17:11.979 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:17:11.980 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:11.982 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:17:11.983 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 1 - application/json 62.4596ms
2023-04-03 17:17:14.407 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 35
2023-04-03 17:17:14.408 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:14.409 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:17:14.410 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:14.411 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:14.412 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:14.412 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:14.413 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:17:14.414 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:17:14.414 +04:00 [DBG] Authorization was successful.
2023-04-03 17:17:14.415 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:14.416 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:17:14.418 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:17:14.419 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:17:14.420 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:17:14.422 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:17:14.423 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:17:14.424 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:14.425 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:14.426 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:14.427 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:17:14.428 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:17:14.429 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000005": started reading request body.
2023-04-03 17:17:14.430 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000005": done reading request body.
2023-04-03 17:17:14.431 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:17:14.432 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:14.434 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:14.435 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:14.436 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:14.437 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:17:14.439 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:17:14.440 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:17:14.440 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:17:14.441 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:17:14.442 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:17:14.443 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:14.444 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:14.445 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:17:14.447 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:17:14.457 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:17:14.459 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:14.460 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 17:17:14.461 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:14.463 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 17:17:14.464 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 40.1974ms
2023-04-03 17:17:14.465 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:14.466 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:17:14.472 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:17:14.473 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:14.474 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:17:14.476 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 35 - 1 - application/json 68.5789ms
2023-04-03 17:17:15.058 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 35
2023-04-03 17:17:15.059 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:15.060 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:17:15.061 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:15.062 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:15.063 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:15.064 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:15.064 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:17:15.065 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:17:15.066 +04:00 [DBG] Authorization was successful.
2023-04-03 17:17:15.066 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:15.067 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:17:15.069 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:17:15.070 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:17:15.071 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:17:15.074 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:17:15.075 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:17:15.076 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:15.078 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:15.079 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:15.080 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:17:15.081 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:17:15.082 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000007": started reading request body.
2023-04-03 17:17:15.083 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000007": done reading request body.
2023-04-03 17:17:15.084 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:17:15.085 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:15.086 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:15.087 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:15.088 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:15.090 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:17:15.091 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:17:15.092 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:17:15.093 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:17:15.094 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:17:15.094 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:17:15.095 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:15.096 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:15.097 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:17:15.099 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:17:15.101 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:17:15.103 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:15.104 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 17:17:15.105 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:15.106 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:17:15.107 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 30.8163ms
2023-04-03 17:17:15.109 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:15.110 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:17:15.116 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:17:15.117 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:15.118 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:17:15.120 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 35 - 1 - application/json 61.3178ms
2023-04-03 17:17:16.836 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 37
2023-04-03 17:17:16.838 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:16.839 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:17:16.841 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:16.842 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:16.842 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:16.843 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:16.844 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:17:16.845 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:17:16.846 +04:00 [DBG] Authorization was successful.
2023-04-03 17:17:16.847 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:16.848 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:17:16.850 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:17:16.852 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:17:16.853 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:17:16.855 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:17:16.856 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:17:16.857 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:16.858 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:16.859 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:16.860 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:17:16.862 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:17:16.863 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000009": started reading request body.
2023-04-03 17:17:16.864 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000009": done reading request body.
2023-04-03 17:17:16.865 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:17:16.866 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:16.867 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:16.869 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:16.870 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:16.872 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 14.8201ms
2023-04-03 17:17:16.883 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:16.885 +04:00 [ERR] Pin must be 4 characters long
System.ArgumentException: Pin must be 4 characters long
   at BankSystem.Atm.Services.Models.Requests.ChangePinRequest.Validate() in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Models\Requests\ChangePinRequest.cs:line 12
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 68
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:17:16.892 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 37 - 1 - application/json 55.9014ms
2023-04-03 17:17:16.995 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:17:16.996 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:16.998 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:17:16.999 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:17.000 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:17.001 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:17.002 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:17:17.003 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 7.9935ms
2023-04-03 17:17:17.004 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 37
2023-04-03 17:17:17.005 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:17.006 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:17:17.007 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:17.008 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:17.009 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:17.010 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:17.010 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:17:17.011 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:17:17.011 +04:00 [DBG] Authorization was successful.
2023-04-03 17:17:17.012 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:17.013 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:17:17.015 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:17:17.016 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:17:17.017 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:17:17.020 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:17:17.021 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:17:17.022 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:17.024 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:17.025 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:17.027 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:17:17.028 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:17:17.030 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:0000000D": started reading request body.
2023-04-03 17:17:17.030 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:0000000D": done reading request body.
2023-04-03 17:17:17.031 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:17:17.032 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:17.034 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:17.036 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:17.037 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:17.038 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 16.2777ms
2023-04-03 17:17:17.039 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:17.040 +04:00 [ERR] Pin must be 4 characters long
System.ArgumentException: Pin must be 4 characters long
   at BankSystem.Atm.Services.Models.Requests.ChangePinRequest.Validate() in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Models\Requests\ChangePinRequest.cs:line 12
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 68
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:17:17.046 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 37 - 1 - application/json 42.0358ms
2023-04-03 17:17:17.146 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 37
2023-04-03 17:17:17.147 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:17.148 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:17:17.149 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:17.150 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:17.150 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:17.151 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:17.152 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:17:17.153 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:17:17.154 +04:00 [DBG] Authorization was successful.
2023-04-03 17:17:17.154 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:17.155 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:17:17.157 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:17:17.158 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:17:17.159 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:17:17.161 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:17:17.162 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:17:17.163 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:17.164 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:17.165 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:17.166 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:17:17.167 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:17:17.169 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:0000000F": started reading request body.
2023-04-03 17:17:17.170 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:0000000F": done reading request body.
2023-04-03 17:17:17.170 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:17:17.171 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:17.173 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:17.174 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:17.175 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:17.176 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 13.2595ms
2023-04-03 17:17:17.177 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:17.178 +04:00 [ERR] Pin must be 4 characters long
System.ArgumentException: Pin must be 4 characters long
   at BankSystem.Atm.Services.Models.Requests.ChangePinRequest.Validate() in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Models\Requests\ChangePinRequest.cs:line 12
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 68
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:17:17.184 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 37 - 1 - application/json 38.1489ms
2023-04-03 17:17:27.784 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:17:27.785 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:27.787 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:17:27.788 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:27.788 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:27.789 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:27.790 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:17:27.791 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 6.4904ms
2023-04-03 17:17:27.792 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 30
2023-04-03 17:17:27.792 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:27.794 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:17:27.795 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:27.796 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:27.797 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:27.798 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:27.799 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:17:27.800 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:17:27.801 +04:00 [DBG] Authorization was successful.
2023-04-03 17:17:27.801 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:27.803 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:17:27.804 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:17:27.805 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:17:27.806 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:17:27.808 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:17:27.809 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:17:27.811 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:27.812 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:27.813 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:27.814 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:17:27.815 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:17:27.817 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000013": started reading request body.
2023-04-03 17:17:27.818 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000013": done reading request body.
2023-04-03 17:17:27.820 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:17:27.820 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:27.822 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:27.823 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:27.824 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:27.826 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 14.9788ms
2023-04-03 17:17:27.827 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:27.827 +04:00 [ERR] Pin must be 4 characters long
System.ArgumentException: Pin must be 4 characters long
   at BankSystem.Atm.Services.Models.Requests.ChangePinRequest.Validate() in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Models\Requests\ChangePinRequest.cs:line 12
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 68
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:17:27.834 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 30 - 1 - application/json 42.2469ms
2023-04-03 17:17:28.355 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 30
2023-04-03 17:17:28.357 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:28.358 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:17:28.359 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:28.360 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:28.361 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:28.362 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:28.363 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:17:28.363 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:17:28.364 +04:00 [DBG] Authorization was successful.
2023-04-03 17:17:28.365 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:28.366 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:17:28.369 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:17:28.370 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:17:28.372 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:17:28.373 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:17:28.374 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:17:28.376 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:28.377 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:28.378 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:28.379 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:17:28.381 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:17:28.382 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000015": started reading request body.
2023-04-03 17:17:28.383 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000015": done reading request body.
2023-04-03 17:17:28.385 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:17:28.386 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:28.387 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:28.388 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:28.389 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:28.390 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 14.5826ms
2023-04-03 17:17:28.391 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:28.392 +04:00 [ERR] Pin must be 4 characters long
System.ArgumentException: Pin must be 4 characters long
   at BankSystem.Atm.Services.Models.Requests.ChangePinRequest.Validate() in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Models\Requests\ChangePinRequest.cs:line 12
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 68
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:17:28.398 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 30 - 1 - application/json 42.9764ms
2023-04-03 17:17:28.507 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 30
2023-04-03 17:17:28.508 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:28.509 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:17:28.511 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:28.512 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:28.513 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:28.514 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:28.514 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:17:28.515 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:17:28.516 +04:00 [DBG] Authorization was successful.
2023-04-03 17:17:28.517 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:28.518 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:17:28.520 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:17:28.522 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:17:28.523 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:17:28.525 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:17:28.526 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:17:28.527 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:28.528 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:28.529 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:28.530 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:17:28.531 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:17:28.533 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000017": started reading request body.
2023-04-03 17:17:28.534 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000017": done reading request body.
2023-04-03 17:17:28.535 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:17:28.536 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:28.537 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:28.538 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:28.540 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:28.541 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 13.8127ms
2023-04-03 17:17:28.542 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:28.542 +04:00 [ERR] Pin must be 4 characters long
System.ArgumentException: Pin must be 4 characters long
   at BankSystem.Atm.Services.Models.Requests.ChangePinRequest.Validate() in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Models\Requests\ChangePinRequest.cs:line 12
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 68
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:17:28.560 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 30 - 1 - application/json 52.6570ms
2023-04-03 17:17:28.660 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 30
2023-04-03 17:17:28.661 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:28.663 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:17:28.664 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:28.665 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:28.666 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:28.667 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:28.668 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:17:28.669 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:17:28.670 +04:00 [DBG] Authorization was successful.
2023-04-03 17:17:28.671 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:28.672 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:17:28.674 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:17:28.675 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:17:28.677 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:17:28.678 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:17:28.679 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:17:28.681 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:28.682 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:28.683 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:28.684 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:17:28.686 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:17:28.687 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000019": started reading request body.
2023-04-03 17:17:28.688 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:00000019": done reading request body.
2023-04-03 17:17:28.689 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:17:28.690 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:28.691 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:28.692 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:28.694 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:28.695 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 14.1466ms
2023-04-03 17:17:28.696 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:28.697 +04:00 [ERR] Pin must be 4 characters long
System.ArgumentException: Pin must be 4 characters long
   at BankSystem.Atm.Services.Models.Requests.ChangePinRequest.Validate() in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Models\Requests\ChangePinRequest.cs:line 12
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 68
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:17:28.703 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 30 - 1 - application/json 43.3115ms
2023-04-03 17:17:31.620 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 30
2023-04-03 17:17:31.621 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:31.622 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:17:31.624 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:31.625 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:31.626 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:31.627 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:31.628 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:17:31.628 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:17:31.630 +04:00 [DBG] Authorization was successful.
2023-04-03 17:17:31.630 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:31.631 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:17:31.633 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:17:31.634 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:17:31.635 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:17:31.637 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:17:31.638 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:17:31.640 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:31.641 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:31.642 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:31.643 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:17:31.645 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:17:31.646 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:0000001B": started reading request body.
2023-04-03 17:17:31.647 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:0000001B": done reading request body.
2023-04-03 17:17:31.648 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:17:31.649 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:31.650 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:31.651 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:31.653 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:31.654 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 14.1593ms
2023-04-03 17:17:31.655 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:31.656 +04:00 [ERR] Pin must be 4 characters long
System.ArgumentException: Pin must be 4 characters long
   at BankSystem.Atm.Services.Models.Requests.ChangePinRequest.Validate() in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Models\Requests\ChangePinRequest.cs:line 12
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 68
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:17:31.662 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 30 - 1 - application/json 42.0097ms
2023-04-03 17:17:33.865 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:17:33.867 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:33.869 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:17:33.870 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:33.871 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:33.871 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:33.872 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:17:33.873 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 7.3910ms
2023-04-03 17:17:33.874 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:17:33.874 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:17:33.875 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:17:33.877 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:33.877 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:17:33.878 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:17:33.879 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:17:33.880 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:17:33.881 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:17:33.881 +04:00 [DBG] Authorization was successful.
2023-04-03 17:17:33.882 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:33.883 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:17:33.885 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:17:33.886 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:17:33.887 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:17:33.889 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:17:33.890 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:17:33.891 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:33.892 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:17:33.893 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:33.894 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:17:33.896 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:17:33.898 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:0000001F": started reading request body.
2023-04-03 17:17:33.899 +04:00 [DBG] Connection id "0HMPK51CDS4VK", Request id "0HMPK51CDS4VK:0000001F": done reading request body.
2023-04-03 17:17:33.900 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:17:33.901 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:33.903 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:33.904 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:17:33.905 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:17:33.906 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:17:33.908 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:17:33.908 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:17:33.909 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:17:33.910 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:17:33.911 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:17:33.912 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:33.913 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:33.914 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:17:33.917 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:17:33.919 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:17:33.921 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:33.921 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 17:17:33.923 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:33.924 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:17:33.925 +04:00 [DBG] An entity of type 'CardEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:17:33.926 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 17:17:33.927 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 17:17:33.928 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 17:17:33.929 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:33.930 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:33.931 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:17:33.932 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 17:17:33.933 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 17:17:33.934 +04:00 [DBG] Executing DbCommand [Parameters=[@p7='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Cards] SET [AccountId] = @p0, [CardNumber] = @p1, [CreatedAt] = @p2, [Cvv] = @p3, [ExpiresAt] = @p4, [FullName] = @p5, [Pin] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2023-04-03 17:17:33.939 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Cards] SET [AccountId] = @p0, [CardNumber] = @p1, [CreatedAt] = @p2, [Cvv] = @p3, [ExpiresAt] = @p4, [FullName] = @p5, [Pin] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2023-04-03 17:17:33.941 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:33.941 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 0ms reading results.
2023-04-03 17:17:33.943 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:33.944 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 17:17:33.945 +04:00 [DBG] An entity of type 'CardEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:17:33.946 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 1 entities written to the database.
2023-04-03 17:17:33.947 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 17:17:33.949 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 17:17:33.950 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 17:17:33.951 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 17:17:33.952 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 17:17:33.953 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 17:17:33.954 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 63.1754ms
2023-04-03 17:17:33.955 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:17:33.956 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:17:33.957 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:17:33.958 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:17:33.959 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 200 - application/json;+charset=utf-8 85.7525ms
2023-04-03 17:18:08.303 +04:00 [DBG] Connection id "0HMPK51CDS4VK" received FIN.
2023-04-03 17:18:08.305 +04:00 [DBG] Connection id "0HMPK51CDS4VK" is closed. The last processed stream ID was 31.
2023-04-03 17:18:08.305 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VK completed.
2023-04-03 17:18:08.305 +04:00 [DBG] Connection id "0HMPK51CDS4VK" sending FIN because: "The client closed the connection."
2023-04-03 17:18:08.319 +04:00 [DBG] Connection id "0HMPK51CDS4VK" stopped.
2023-04-03 17:20:04.399 +04:00 [DBG] Connection id "0HMPK51CDS4VL" accepted.
2023-04-03 17:20:04.400 +04:00 [DBG] Connection id "0HMPK51CDS4VL" started.
2023-04-03 17:20:04.402 +04:00 [DBG] Connection 0HMPK51CDS4VL established using the following protocol: "Tls12"
2023-04-03 17:20:04.403 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:20:04.404 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:20:04.405 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:20:04.406 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:20:04.407 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:20:04.408 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:20:04.409 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:20:04.410 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 6.6356ms
2023-04-03 17:20:04.411 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 34
2023-04-03 17:20:04.412 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:20:04.413 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:20:04.414 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:20:04.415 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:20:04.416 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:20:04.417 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:20:04.417 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:20:04.418 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:20:04.419 +04:00 [DBG] Authorization was successful.
2023-04-03 17:20:04.419 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:20:04.420 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:20:04.422 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:20:04.423 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:20:04.424 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:20:04.426 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:20:04.428 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:20:04.429 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:20:04.431 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:20:04.432 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:20:04.433 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:20:04.434 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:20:04.435 +04:00 [DBG] Connection id "0HMPK51CDS4VL", Request id "0HMPK51CDS4VL:00000003": started reading request body.
2023-04-03 17:20:04.436 +04:00 [DBG] Connection id "0HMPK51CDS4VL", Request id "0HMPK51CDS4VL:00000003": done reading request body.
2023-04-03 17:20:04.437 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:20:04.438 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:20:04.439 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:20:04.440 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:20:04.441 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:20:04.443 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:20:04.445 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:20:04.445 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:20:04.446 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:20:04.447 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:20:04.448 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:20:04.449 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:04.450 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:04.451 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:20:04.455 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:20:04.457 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:04.459 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:04.460 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 17:20:04.461 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:04.462 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:20:04.464 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 34.2295ms
2023-04-03 17:20:04.465 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:20:04.466 +04:00 [ERR] Incorrect pin
System.ArgumentException: Incorrect pin
   at BankSystem.Atm.Services.ChangePinService.ChangePinAsync(ChangePinRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\ChangePinService.cs:line 28
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:20:04.471 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:20:04.472 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:04.474 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:20:04.475 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 34 - 1 - application/json 63.5952ms
2023-04-03 17:20:10.597 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:20:10.598 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:20:10.600 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:20:10.601 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:20:10.601 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:20:10.602 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:20:10.603 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:20:10.603 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 6.8516ms
2023-04-03 17:20:10.604 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 35
2023-04-03 17:20:10.605 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:20:10.606 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:20:10.607 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:20:10.608 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:20:10.609 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:20:10.610 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:20:10.610 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:20:10.611 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:20:10.612 +04:00 [DBG] Authorization was successful.
2023-04-03 17:20:10.612 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:20:10.613 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:20:10.627 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:20:10.629 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:20:10.630 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:20:10.633 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:20:10.634 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:20:10.635 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:20:10.636 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:20:10.637 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:20:10.638 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:20:10.639 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:20:10.640 +04:00 [DBG] Connection id "0HMPK51CDS4VL", Request id "0HMPK51CDS4VL:00000007": started reading request body.
2023-04-03 17:20:10.641 +04:00 [DBG] Connection id "0HMPK51CDS4VL", Request id "0HMPK51CDS4VL:00000007": done reading request body.
2023-04-03 17:20:10.642 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:20:10.643 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:20:10.645 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:20:10.646 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:20:10.648 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:20:10.649 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 14.1461ms
2023-04-03 17:20:10.650 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:20:10.651 +04:00 [ERR] Pin must be 4 characters long
System.ArgumentException: Pin must be 4 characters long
   at BankSystem.Atm.Services.Models.Requests.ChangePinRequest.Validate() in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Models\Requests\ChangePinRequest.cs:line 12
   at ATM.Api.Controllers.CardController.ChangePin(ChangePinRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 68
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 17:20:10.657 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 35 - 1 - application/json 52.2941ms
2023-04-03 17:20:13.499 +04:00 [DBG] Connection id "0HMPK51CDS4VL" received FIN.
2023-04-03 17:20:13.501 +04:00 [DBG] Connection id "0HMPK51CDS4VL" is closed. The last processed stream ID was 7.
2023-04-03 17:20:13.501 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VL completed.
2023-04-03 17:20:13.502 +04:00 [DBG] Connection id "0HMPK51CDS4VL" sending FIN because: "The client closed the connection."
2023-04-03 17:20:13.514 +04:00 [DBG] Connection id "0HMPK51CDS4VL" stopped.
2023-04-03 17:20:20.507 +04:00 [DBG] Connection id "0HMPK51CDS4VM" accepted.
2023-04-03 17:20:20.509 +04:00 [DBG] Connection id "0HMPK51CDS4VM" started.
2023-04-03 17:20:20.511 +04:00 [DBG] Connection 0HMPK51CDS4VM established using the following protocol: "Tls12"
2023-04-03 17:20:20.512 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - -
2023-04-03 17:20:20.513 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:20:20.514 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:20:20.515 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:20:20.516 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:20:20.516 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:20:20.517 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:20:20.518 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/change-pin - - - 204 - - 5.5699ms
2023-04-03 17:20:20.519 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33
2023-04-03 17:20:20.519 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/change-pin'
2023-04-03 17:20:20.520 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)' with route pattern 'api/Card/change-pin' is valid for the request path '/api/Card/change-pin'
2023-04-03 17:20:20.522 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:20:20.523 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:20:20.523 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:20:20.524 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:20:20.525 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:20:20.525 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:20:20.526 +04:00 [DBG] Authorization was successful.
2023-04-03 17:20:20.527 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:20:20.528 +04:00 [INF] Route matched with {action = "ChangePin", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePin(BankSystem.Atm.Services.Models.Requests.ChangePinRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:20:20.540 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:20:20.543 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:20:20.545 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:20:20.546 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:20:20.547 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:20:20.549 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:20:20.550 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:20:20.551 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:20:20.552 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' using the name '' in request data ...
2023-04-03 17:20:20.554 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 17:20:20.555 +04:00 [DBG] Connection id "0HMPK51CDS4VM", Request id "0HMPK51CDS4VM:00000003": started reading request body.
2023-04-03 17:20:20.556 +04:00 [DBG] Connection id "0HMPK51CDS4VM", Request id "0HMPK51CDS4VM:00000003": done reading request body.
2023-04-03 17:20:20.557 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'
2023-04-03 17:20:20.558 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:20:20.559 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:20:20.560 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest' ...
2023-04-03 17:20:20.561 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.ChangePinRequest'.
2023-04-03 17:20:20.562 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:20:20.564 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:20:20.565 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:20:20.566 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:20:20.566 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:20:20.567 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:20:20.569 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:20.570 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:20.570 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:20:20.574 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin]
FROM [Cards] AS [c]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:20:20.576 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:20.577 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:20.578 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 17:20:20.579 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:20.580 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:20:20.582 +04:00 [DBG] An entity of type 'CardEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:20.584 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 17:20:20.585 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 17:20:20.586 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 17:20:20.587 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:20.588 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:20.589 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:20:20.590 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 17:20:20.591 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 17:20:20.591 +04:00 [DBG] Executing DbCommand [Parameters=[@p7='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Cards] SET [AccountId] = @p0, [CardNumber] = @p1, [CreatedAt] = @p2, [Cvv] = @p3, [ExpiresAt] = @p4, [FullName] = @p5, [Pin] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2023-04-03 17:20:20.596 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Cards] SET [AccountId] = @p0, [CardNumber] = @p1, [CreatedAt] = @p2, [Cvv] = @p3, [ExpiresAt] = @p4, [FullName] = @p5, [Pin] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2023-04-03 17:20:20.599 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:20.600 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 17:20:20.601 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:20.602 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:20:20.604 +04:00 [DBG] An entity of type 'CardEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:20.606 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 1 entities written to the database.
2023-04-03 17:20:20.607 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 17:20:20.609 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 17:20:20.609 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 17:20:20.610 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 17:20:20.611 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 17:20:20.612 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 17:20:20.613 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api) in 64.1487ms
2023-04-03 17:20:20.615 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.ChangePin (BankSystem.Atm.Api)'
2023-04-03 17:20:20.616 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:20:20.617 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:20.618 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:20:20.619 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/change-pin application/json 33 - 200 - application/json;+charset=utf-8 100.5034ms
2023-04-03 17:20:23.512 +04:00 [DBG] Connection id "0HMPK51CDS4VM" received FIN.
2023-04-03 17:20:23.514 +04:00 [DBG] Connection id "0HMPK51CDS4VM" is closed. The last processed stream ID was 3.
2023-04-03 17:20:23.514 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VM completed.
2023-04-03 17:20:23.515 +04:00 [DBG] Connection id "0HMPK51CDS4VM" sending FIN because: "The client closed the connection."
2023-04-03 17:20:23.530 +04:00 [DBG] Connection id "0HMPK51CDS4VM" stopped.
2023-04-03 17:20:34.799 +04:00 [DBG] Connection id "0HMPK51CDS4VN" accepted.
2023-04-03 17:20:34.800 +04:00 [DBG] Connection id "0HMPK51CDS4VN" started.
2023-04-03 17:20:34.802 +04:00 [DBG] Connection 0HMPK51CDS4VN established using the following protocol: "Tls12"
2023-04-03 17:20:34.803 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:20:34.803 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:20:34.804 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:20:34.805 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:20:34.806 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:20:34.807 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:20:34.808 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:20:34.809 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:20:34.810 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:20:34.811 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:20:34.812 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:20:34.813 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:20:34.813 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:20:34.814 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:20:34.815 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 11.6011ms
2023-04-03 17:20:34.816 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 12.3514ms
2023-04-03 17:20:34.816 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:20:34.818 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:20:34.818 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 17:20:34.819 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:20:34.820 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:20:34.821 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:20:34.821 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:20:34.822 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:20:34.822 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:20:34.823 +04:00 [DBG] Authorization was successful.
2023-04-03 17:20:34.824 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:20:34.824 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:20:34.826 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:20:34.827 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:20:34.828 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:20:34.829 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:20:34.830 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:20:34.832 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:20:34.833 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:20:34.834 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:20:34.836 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:20:34.837 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:20:34.837 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:20:34.838 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:20:34.839 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:20:34.840 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:34.841 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:34.842 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:20:34.849 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:20:34.852 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:34.853 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:34.854 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:34.855 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:34.856 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 17:20:34.858 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:34.859 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 17:20:34.860 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 17:20:34.862 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 17:20:34.863 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 17:20:34.864 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 17:20:34.865 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 17:20:34.866 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 17:20:34.867 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 35.2272ms
2023-04-03 17:20:34.868 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:20:34.868 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:20:34.869 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:20:34.870 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:20:34.871 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 17:20:34.872 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:34.873 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:20:34.874 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 17:20:34.874 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:20:34.876 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 59.2986ms
2023-04-03 17:20:34.876 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:20:34.878 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:20:34.878 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:20:34.879 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:20:34.880 +04:00 [DBG] Authorization was successful.
2023-04-03 17:20:34.880 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:20:34.881 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:20:34.883 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:20:34.883 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:20:34.884 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:20:34.886 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:20:34.887 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:20:34.888 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:20:34.889 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:20:34.890 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:20:34.892 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:20:34.893 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:20:34.893 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:20:34.894 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 17:20:34.895 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:20:34.896 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:34.896 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:34.898 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:20:34.900 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:20:34.902 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:34.903 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:34.904 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:34.905 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:34.906 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 17:20:34.907 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:34.908 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:20:34.909 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 17:20:34.910 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 17:20:34.911 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 17:20:34.912 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 17:20:34.912 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 17:20:34.913 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 17:20:34.915 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 27.2709ms
2023-04-03 17:20:34.916 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:20:34.917 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:20:34.918 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:34.919 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 17:20:34.920 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 51.5876ms
2023-04-03 17:20:39.813 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:20:39.815 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:20:39.816 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 17:20:39.818 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:20:39.819 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:20:39.819 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:20:39.820 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:20:39.821 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:20:39.822 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:20:39.822 +04:00 [DBG] Authorization was successful.
2023-04-03 17:20:39.823 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:20:39.824 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:20:39.826 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:20:39.827 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:20:39.828 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:20:39.830 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:20:39.831 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:20:39.832 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:20:39.834 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:20:39.835 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:20:39.836 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:20:39.837 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:20:39.838 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:20:39.839 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:20:39.840 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:20:39.841 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:39.842 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:39.843 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:20:39.845 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:20:39.847 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:39.849 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:39.850 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:39.851 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:39.852 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 17:20:39.854 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:39.855 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:20:39.856 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 17:20:39.858 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 17:20:39.858 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 17:20:39.859 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 17:20:39.860 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 17:20:39.861 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 17:20:39.862 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 29.8596ms
2023-04-03 17:20:39.863 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:20:39.863 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:20:39.864 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:20:39.866 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:20:39.867 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 17:20:39.867 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:39.869 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:20:39.870 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 17:20:39.871 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:20:39.872 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 58.6427ms
2023-04-03 17:20:39.872 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:20:39.874 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:20:39.875 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:20:39.875 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:20:39.876 +04:00 [DBG] Authorization was successful.
2023-04-03 17:20:39.877 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:20:39.877 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:20:39.879 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:20:39.880 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:20:39.882 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:20:39.884 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:20:39.885 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:20:39.886 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:20:39.887 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:20:39.888 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:20:39.890 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:20:39.891 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:20:39.891 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:20:39.892 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:20:39.893 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:20:39.894 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:39.895 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:39.896 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:20:39.911 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:20:39.915 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:39.917 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:39.918 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:20:39.919 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:39.920 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 17:20:39.921 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:39.922 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 17:20:39.924 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 17:20:39.926 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 17:20:39.926 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 17:20:39.927 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 17:20:39.928 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 17:20:39.929 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 17:20:39.930 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 44.1641ms
2023-04-03 17:20:39.932 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:20:39.933 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:20:39.934 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:20:39.935 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 17:20:39.936 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 72.8743ms
2023-04-03 17:20:43.558 +04:00 [DBG] Connection id "0HMPK51CDS4VN" received FIN.
2023-04-03 17:20:43.560 +04:00 [DBG] Connection id "0HMPK51CDS4VN" is closed. The last processed stream ID was 11.
2023-04-03 17:20:43.560 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VN completed.
2023-04-03 17:20:43.561 +04:00 [DBG] Connection id "0HMPK51CDS4VN" sending FIN because: "The client closed the connection."
2023-04-03 17:20:43.573 +04:00 [DBG] Connection id "0HMPK51CDS4VN" stopped.
2023-04-03 17:30:43.125 +04:00 [DBG] Connection id "0HMPK51CDS4VO" accepted.
2023-04-03 17:30:43.127 +04:00 [DBG] Connection id "0HMPK51CDS4VO" started.
2023-04-03 17:30:43.129 +04:00 [DBG] Connection 0HMPK51CDS4VO established using the following protocol: "Tls12"
2023-04-03 17:30:43.131 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:30:43.131 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:30:43.131 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:30:43.132 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:30:43.133 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:30:43.134 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:30:43.135 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:30:43.136 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:30:43.136 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:30:43.138 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:30:43.139 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:30:43.139 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:30:43.140 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:30:43.141 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:30:43.142 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 11.3449ms
2023-04-03 17:30:43.143 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 12.2741ms
2023-04-03 17:30:43.144 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:30:43.146 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:30:43.146 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 17:30:43.147 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:30:43.148 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:30:43.149 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:30:43.149 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:30:43.150 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:30:43.150 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:30:43.151 +04:00 [DBG] Authorization was successful.
2023-04-03 17:30:43.152 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:30:43.153 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:30:43.154 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:30:43.155 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:30:43.156 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:30:43.158 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:30:43.159 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:30:43.160 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:30:43.161 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:30:43.162 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:30:43.164 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:30:43.164 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:30:43.165 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:30:43.166 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 17:30:43.166 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:30:43.167 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:30:44.136 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:30:44.138 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:30:44.145 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:30:44.148 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:30:44.150 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:30:44.151 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:30:44.153 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:30:44.154 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 17:30:44.155 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:30:44.156 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 17:30:44.157 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 17:30:44.160 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 17:30:44.161 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 17:30:44.161 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 17:30:44.162 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 17:30:44.163 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 17:30:44.164 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 1003.9786ms
2023-04-03 17:30:44.165 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:30:44.165 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:30:44.166 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:30:44.167 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:30:44.168 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 17:30:44.168 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:30:44.170 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:30:44.171 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 17:30:44.171 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:30:44.172 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 1028.1320ms
2023-04-03 17:30:44.173 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:30:44.175 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:30:44.176 +04:00 [DBG] Successfully validated the token.
2023-04-03 17:30:44.176 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 17:30:44.177 +04:00 [DBG] Authorization was successful.
2023-04-03 17:30:44.177 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:30:44.178 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 17:30:44.180 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 17:30:44.181 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 17:30:44.182 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 17:30:44.183 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 17:30:44.184 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 17:30:44.185 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:30:44.186 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 17:30:44.188 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 17:30:44.189 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 17:30:44.190 +04:00 [DBG] Creating DbConnection.
2023-04-03 17:30:44.190 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 17:30:44.191 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 17:30:44.192 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 17:30:44.193 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:30:44.194 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:30:44.195 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:30:44.197 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 17:30:44.199 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:30:44.200 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:30:44.201 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 17:30:44.202 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:30:44.203 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 17:30:44.204 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:30:44.205 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 17:30:44.207 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 17:30:44.208 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 17:30:44.208 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 17:30:44.209 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 17:30:44.210 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 17:30:44.210 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 17:30:44.211 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 25.7622ms
2023-04-03 17:30:44.213 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:30:44.214 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 17:30:44.215 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 17:30:44.215 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 17:30:44.216 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 51.0664ms
2023-04-03 17:31:39.436 +04:00 [DBG] Connection id "0HMPK51CDS4VO" received FIN.
2023-04-03 17:31:39.438 +04:00 [DBG] Connection id "0HMPK51CDS4VO" is closed. The last processed stream ID was 7.
2023-04-03 17:31:39.438 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VO completed.
2023-04-03 17:31:39.439 +04:00 [DBG] Connection id "0HMPK51CDS4VO" sending FIN because: "The client closed the connection."
2023-04-03 17:31:39.452 +04:00 [DBG] Connection id "0HMPK51CDS4VO" stopped.
2023-04-03 17:49:22.456 +04:00 [DBG] Connection id "0HMPK51CDS4VP" accepted.
2023-04-03 17:49:22.457 +04:00 [DBG] Connection id "0HMPK51CDS4VP" started.
2023-04-03 17:49:22.473 +04:00 [DBG] Connection 0HMPK51CDS4VP established using the following protocol: "Tls12"
2023-04-03 17:49:22.476 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:49:22.476 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:49:22.477 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:49:22.477 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:49:22.478 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:49:22.478 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 17:49:22.479 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:49:22.480 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:49:22.480 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:49:22.481 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:49:22.481 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:49:22.482 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:49:22.483 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:49:22.483 +04:00 [DBG] The request is a preflight request.
2023-04-03 17:49:22.484 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 8.0115ms
2023-04-03 17:49:22.484 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 8.5138ms
2023-04-03 17:49:22.486 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:49:22.487 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:49:22.488 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 17:49:22.489 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:49:22.490 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:49:22.490 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:49:22.491 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:49:22.546 +04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '4/3/2023 1:44:39 PM', Current time: '4/3/2023 1:49:22 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-04-03 17:49:22.565 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '4/3/2023 1:44:39 PM', Current time: '4/3/2023 1:49:22 PM'.
2023-04-03 17:49:22.567 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 17:49:22.575 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 17:49:22.576 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 90.1873ms
2023-04-03 17:49:22.577 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 17:49:22.578 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 17:49:22.579 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 17:49:22.580 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 17:49:22.581 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 17:49:22.582 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 17:49:22.583 +04:00 [INF] CORS policy execution successful.
2023-04-03 17:49:22.584 +04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '4/3/2023 1:44:39 PM', Current time: '4/3/2023 1:49:22 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-04-03 17:49:22.586 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '4/3/2023 1:44:39 PM', Current time: '4/3/2023 1:49:22 PM'.
2023-04-03 17:49:22.588 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-04-03 17:49:22.589 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-04-03 17:49:22.590 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 401 0 - 12.9691ms
2023-04-03 17:49:31.158 +04:00 [DBG] Connection id "0HMPK51CDS4VP" received FIN.
2023-04-03 17:49:31.160 +04:00 [DBG] Connection id "0HMPK51CDS4VP" is closed. The last processed stream ID was 7.
2023-04-03 17:49:31.160 +04:00 [DBG] Connection id "0HMPK51CDS4VP" sending FIN because: "The client closed the connection."
2023-04-03 17:49:31.162 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VP completed.
2023-04-03 17:49:31.163 +04:00 [DBG] Connection id "0HMPK51CDS4VP" stopped.
2023-04-03 18:07:05.529 +04:00 [DBG] Connection id "0HMPK51CDS4VQ" accepted.
2023-04-03 18:07:05.536 +04:00 [DBG] Connection id "0HMPK51CDS4VQ" started.
2023-04-03 18:07:05.541 +04:00 [DBG] Connection 0HMPK51CDS4VQ established using the following protocol: "Tls12"
2023-04-03 18:07:05.542 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-03 18:07:05.543 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 18:07:05.544 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:07:05.544 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:07:05.545 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:07:05.546 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:07:05.547 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:07:05.547 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 5.1829ms
2023-04-03 18:07:05.551 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 48
2023-04-03 18:07:05.552 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 18:07:05.553 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-03 18:07:05.554 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 18:07:05.554 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:07:05.555 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:07:05.555 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:07:05.556 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 18:07:05.558 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 18:07:05.560 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:07:05.563 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:07:05.564 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:07:05.566 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:07:05.567 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:07:05.568 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:07:05.569 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:07:05.574 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:07:05.576 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 18:07:05.578 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-03 18:07:05.580 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:07:05.581 +04:00 [DBG] Connection id "0HMPK51CDS4VQ", Request id "0HMPK51CDS4VQ:00000003": started reading request body.
2023-04-03 18:07:05.582 +04:00 [DBG] Connection id "0HMPK51CDS4VQ", Request id "0HMPK51CDS4VQ:00000003": done reading request body.
2023-04-03 18:07:05.585 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-03 18:07:05.586 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 18:07:05.586 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 18:07:05.587 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 18:07:05.589 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 18:07:05.596 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:07:05.606 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:07:05.607 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:07:05.609 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-03 18:07:05.610 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2023-04-03 18:07:05.612 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2023-04-03 18:07:05.613 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:07:06.686 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:07:06.688 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 18:07:06.697 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 18:07:06.700 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:07:06.700 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:07:06.701 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:07:06.702 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:07:06.708 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 1138.5794ms
2023-04-03 18:07:06.709 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 18:07:06.712 +04:00 [ERR] Can't identify card
System.ArgumentException: Can't identify card
   at BankSystem.Atm.Services.LoginService.LoginAsync(LoginRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\LoginService.cs:line 28
   at ATM.Api.Controllers.CardController.Login(LoginRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\CardController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 18:07:06.724 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:07:06.725 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:07:06.726 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 18:07:06.728 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 48 - 1 - application/json 1176.8911ms
2023-04-03 18:07:07.625 +04:00 [DBG] Connection id "0HMPK51CDS4VQ" received FIN.
2023-04-03 18:07:07.626 +04:00 [DBG] Connection id "0HMPK51CDS4VQ" is closed. The last processed stream ID was 3.
2023-04-03 18:07:07.626 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VQ completed.
2023-04-03 18:07:07.636 +04:00 [DBG] Connection id "0HMPK51CDS4VQ" sending FIN because: "The client closed the connection."
2023-04-03 18:07:07.641 +04:00 [DBG] Connection id "0HMPK51CDS4VQ" stopped.
2023-04-03 18:07:13.531 +04:00 [DBG] Connection id "0HMPK51CDS4VR" accepted.
2023-04-03 18:07:13.532 +04:00 [DBG] Connection id "0HMPK51CDS4VR" started.
2023-04-03 18:07:13.535 +04:00 [DBG] Connection 0HMPK51CDS4VR established using the following protocol: "Tls12"
2023-04-03 18:07:13.537 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-03 18:07:13.538 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 18:07:13.538 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:07:13.539 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:07:13.539 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:07:13.540 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:07:13.541 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:07:13.541 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 4.3249ms
2023-04-03 18:07:13.542 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 48
2023-04-03 18:07:13.543 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 18:07:13.544 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-03 18:07:13.545 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 18:07:13.546 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:07:13.547 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:07:13.548 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:07:13.548 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 18:07:13.549 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 18:07:13.549 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:07:13.551 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:07:13.552 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:07:13.553 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:07:13.554 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:07:13.554 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:07:13.556 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:07:13.557 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:07:13.558 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 18:07:13.559 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-03 18:07:13.560 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:07:13.561 +04:00 [DBG] Connection id "0HMPK51CDS4VR", Request id "0HMPK51CDS4VR:00000003": started reading request body.
2023-04-03 18:07:13.562 +04:00 [DBG] Connection id "0HMPK51CDS4VR", Request id "0HMPK51CDS4VR:00000003": done reading request body.
2023-04-03 18:07:13.563 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-03 18:07:13.564 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 18:07:13.564 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 18:07:13.565 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 18:07:13.566 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 18:07:13.567 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:07:13.568 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:07:13.569 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:07:13.570 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:07:13.570 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:07:13.571 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:07:13.572 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:07:13.572 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:07:13.573 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 18:07:13.578 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 18:07:13.582 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:07:13.585 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:07:13.586 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:07:13.587 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:07:13.587 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 7ms reading results.
2023-04-03 18:07:13.588 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:07:13.589 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:07:13.603 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:07:13.605 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:07:13.605 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:07:13.606 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:07:13.607 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:07:13.607 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:07:13.608 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 53.0629ms
2023-04-03 18:07:13.610 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 18:07:13.611 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:07:13.611 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:07:13.613 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:07:13.615 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 48 - 200 - application/json;+charset=utf-8 72.2933ms
2023-04-03 18:07:17.636 +04:00 [DBG] Connection id "0HMPK51CDS4VR" received FIN.
2023-04-03 18:07:17.637 +04:00 [DBG] Connection id "0HMPK51CDS4VR" is closed. The last processed stream ID was 3.
2023-04-03 18:07:17.637 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VR completed.
2023-04-03 18:07:17.638 +04:00 [DBG] Connection id "0HMPK51CDS4VR" sending FIN because: "The client closed the connection."
2023-04-03 18:07:17.652 +04:00 [DBG] Connection id "0HMPK51CDS4VR" stopped.
2023-04-03 18:08:39.051 +04:00 [DBG] Connection id "0HMPK51CDS4VS" accepted.
2023-04-03 18:08:39.052 +04:00 [DBG] Connection id "0HMPK51CDS4VS" started.
2023-04-03 18:08:39.055 +04:00 [DBG] Connection 0HMPK51CDS4VS established using the following protocol: "Tls12"
2023-04-03 18:08:39.057 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:08:39.057 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:08:39.057 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:08:39.058 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:08:39.059 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:08:39.060 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:08:39.061 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:08:39.062 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:08:39.063 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:08:39.063 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:08:39.064 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:08:39.065 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:08:39.065 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:08:39.066 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:08:39.067 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 10.0348ms
2023-04-03 18:08:39.067 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 10.3228ms
2023-04-03 18:08:39.068 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:08:39.069 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:08:39.070 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:08:39.071 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:08:39.072 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:08:39.073 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:08:39.073 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:08:39.075 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:08:39.076 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:08:39.076 +04:00 [DBG] Authorization was successful.
2023-04-03 18:08:39.077 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:08:39.079 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:08:39.081 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:08:39.082 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:08:39.083 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:08:39.084 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:08:39.086 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:08:39.087 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:08:39.090 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:08:39.092 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:08:39.094 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:08:39.096 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:08:39.096 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:08:39.097 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:08:39.098 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:08:39.099 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:39.100 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:39.101 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:08:39.105 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:08:39.108 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:39.109 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:39.110 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:39.111 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:39.113 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 18:08:39.114 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:39.115 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:08:39.117 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:08:39.118 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:08:39.119 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:08:39.119 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:08:39.120 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:08:39.121 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:08:39.122 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 35.1188ms
2023-04-03 18:08:39.124 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:08:39.124 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:08:39.125 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:08:39.125 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:08:39.127 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:08:39.127 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:39.129 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:08:39.130 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 18:08:39.131 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:08:39.131 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 63.1642ms
2023-04-03 18:08:39.132 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:08:39.133 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:08:39.134 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:08:39.135 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:08:39.136 +04:00 [DBG] Authorization was successful.
2023-04-03 18:08:39.136 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:08:39.137 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:08:39.138 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:08:39.139 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:08:39.141 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:08:39.142 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:08:39.143 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:08:39.145 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:08:39.146 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:08:39.147 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:08:39.149 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:08:39.150 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:08:39.151 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:08:39.151 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:08:39.153 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:08:39.154 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:39.155 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:39.156 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:08:39.158 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:08:39.160 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:39.161 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:39.162 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:39.163 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:39.164 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:08:39.165 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:39.166 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:08:39.167 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:08:39.169 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:08:39.169 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:08:39.170 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:08:39.170 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:08:39.171 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:08:39.173 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 28.8029ms
2023-04-03 18:08:39.175 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:08:39.175 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:08:39.176 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:39.177 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 18:08:39.178 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 54.8351ms
2023-04-03 18:08:42.749 +04:00 [DBG] Connection id "0HMPK51CDS4VS" received FIN.
2023-04-03 18:08:42.751 +04:00 [DBG] Connection id "0HMPK51CDS4VS" is closed. The last processed stream ID was 7.
2023-04-03 18:08:42.752 +04:00 [DBG] Connection id "0HMPK51CDS4VS" sending FIN because: "The client closed the connection."
2023-04-03 18:08:42.762 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VS completed.
2023-04-03 18:08:42.763 +04:00 [DBG] Connection id "0HMPK51CDS4VS" stopped.
2023-04-03 18:08:47.112 +04:00 [DBG] Connection id "0HMPK51CDS4VT" accepted.
2023-04-03 18:08:47.114 +04:00 [DBG] Connection id "0HMPK51CDS4VT" started.
2023-04-03 18:08:47.115 +04:00 [DBG] Connection 0HMPK51CDS4VT established using the following protocol: "Tls12"
2023-04-03 18:08:47.116 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:08:47.117 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:08:47.118 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:08:47.119 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:08:47.119 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:08:47.120 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:08:47.121 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:08:47.121 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 4.8649ms
2023-04-03 18:08:47.122 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26
2023-04-03 18:08:47.123 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:08:47.124 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:08:47.125 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:08:47.126 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:08:47.138 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:08:47.140 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:08:47.141 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:08:47.142 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:08:47.144 +04:00 [DBG] Authorization was successful.
2023-04-03 18:08:47.145 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:08:47.164 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:08:47.165 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:08:47.166 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:08:47.167 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:08:47.168 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:08:47.169 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:08:47.170 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:08:47.174 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:08:47.175 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:08:47.177 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:08:47.178 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:08:47.197 +04:00 [DBG] Connection id "0HMPK51CDS4VT", Request id "0HMPK51CDS4VT:00000003": started reading request body.
2023-04-03 18:08:47.198 +04:00 [DBG] Connection id "0HMPK51CDS4VT", Request id "0HMPK51CDS4VT:00000003": done reading request body.
2023-04-03 18:08:47.204 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:08:47.205 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:08:47.205 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:08:47.206 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:08:47.229 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:08:47.234 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 64.3405ms
2023-04-03 18:08:47.236 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:08:47.236 +04:00 [ERR] Invalid cash out amount. Please enter amount that is a multiple of 5, except zero such as 5, 10, 15, etc. 
System.ArgumentException: Invalid cash out amount. Please enter amount that is a multiple of 5, except zero such as 5, 10, 15, etc. 
   at BankSystem.Atm.Services.Models.Requests.CashOutRequest.Validate() in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Models\Requests\CashOutRequest.cs:line 14
   at ATM.Api.Controllers.TransactionController.CashOut(CashOutRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\TransactionController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 18:08:47.241 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26 - 1 - application/json 118.7214ms
2023-04-03 18:08:52.761 +04:00 [DBG] Connection id "0HMPK51CDS4VT" received FIN.
2023-04-03 18:08:52.763 +04:00 [DBG] Connection id "0HMPK51CDS4VT" is closed. The last processed stream ID was 3.
2023-04-03 18:08:52.763 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VT completed.
2023-04-03 18:08:52.764 +04:00 [DBG] Connection id "0HMPK51CDS4VT" sending FIN because: "The client closed the connection."
2023-04-03 18:08:52.777 +04:00 [DBG] Connection id "0HMPK51CDS4VT" stopped.
2023-04-03 18:08:53.719 +04:00 [DBG] Connection id "0HMPK51CDS4VU" accepted.
2023-04-03 18:08:53.721 +04:00 [DBG] Connection id "0HMPK51CDS4VU" started.
2023-04-03 18:08:53.722 +04:00 [DBG] Connection 0HMPK51CDS4VU established using the following protocol: "Tls12"
2023-04-03 18:08:53.723 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:08:53.724 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:08:53.725 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:08:53.726 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:08:53.727 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:08:53.728 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:08:53.728 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:08:53.729 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 5.4193ms
2023-04-03 18:08:53.734 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26
2023-04-03 18:08:53.736 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:08:53.737 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:08:53.738 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:08:53.738 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:08:53.739 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:08:53.741 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:08:53.742 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:08:53.742 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:08:53.743 +04:00 [DBG] Authorization was successful.
2023-04-03 18:08:53.744 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:08:53.745 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:08:53.746 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:08:53.747 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:08:53.748 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:08:53.749 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:08:53.750 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:08:53.751 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:08:53.754 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:08:53.756 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:08:53.757 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:08:53.758 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:08:53.759 +04:00 [DBG] Connection id "0HMPK51CDS4VU", Request id "0HMPK51CDS4VU:00000003": started reading request body.
2023-04-03 18:08:53.760 +04:00 [DBG] Connection id "0HMPK51CDS4VU", Request id "0HMPK51CDS4VU:00000003": done reading request body.
2023-04-03 18:08:53.762 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:08:53.763 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:08:53.764 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:08:53.765 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:08:53.765 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:08:53.777 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:08:53.782 +04:00 [DBG] Compiling query expression: 
'DbSet<CurrencyEntity>()'
2023-04-03 18:08:53.799 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CurrencyEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CurrencyEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CurrencyEntity.Code (string), 1], [Property: CurrencyEntity.Date (DateTime) Required, 2], [Property: CurrencyEntity.Diff (decimal) Required, 3], [Property: CurrencyEntity.DiffFormated (string), 4], [Property: CurrencyEntity.LastUpdatedAt (DateTime) Required, 5], [Property: CurrencyEntity.Name (string), 6], [Property: CurrencyEntity.Quantity (int) Required, 7], [Property: CurrencyEntity.Rate (decimal) Required, 8], [Property: CurrencyEntity.RateFormated (string), 9], [Property: CurrencyEntity.ValidFromDate (DateTime) Required, 10] }
        SELECT c.Id, c.Code, c.Date, c.Diff, c.DiffFormated, c.LastUpdatedAt, c.Name, c.Quantity, c.Rate, c.RateFormated, c.ValidFromDate
        FROM Currencies AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CurrencyEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-03 18:08:53.806 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:08:53.807 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:08:53.807 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:08:53.808 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:08:53.809 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:08:53.810 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:53.811 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:53.812 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:08:53.814 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:08:53.820 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:53.821 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:08:53.822 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:53.823 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:08:53.827 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 18:08:53.828 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 18:08:53.829 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 18:08:53.829 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 0 entities written to the database.
2023-04-03 18:08:54.171 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.174 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.175 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.177 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.178 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.179 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.180 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.181 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.181 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.182 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.183 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.184 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.185 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.186 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.186 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.187 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.188 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.190 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.191 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.193 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.194 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.195 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.196 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.197 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.198 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.198 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.199 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.201 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.202 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.203 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.204 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.205 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.206 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.207 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.209 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.209 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.211 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.212 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.213 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.214 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.215 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.216 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.217 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.217 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 18:08:54.218 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 18:08:54.229 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 18:08:54.252 +04:00 [DBG] Executing 42 update commands as a batch.
2023-04-03 18:08:54.263 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.265 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.267 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-03 18:08:54.283 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-03 18:08:54.286 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:08:54.287 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:08:54.292 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-03 18:08:54.294 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Size = 4000), @p21='?' (DbType = DateTime2), @p22='?' (DbType = Guid), @p23='?' (Size = 4000), @p24='?' (DbType = DateTime2), @p25='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p26='?' (Size = 4000), @p27='?' (DbType = DateTime2), @p28='?' (Size = 4000), @p29='?' (DbType = Int32), @p30='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p31='?' (Size = 4000), @p32='?' (DbType = DateTime2), @p33='?' (DbType = Guid), @p34='?' (Size = 4000), @p35='?' (DbType = DateTime2), @p36='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p37='?' (Size = 4000), @p38='?' (DbType = DateTime2), @p39='?' (Size = 4000), @p40='?' (DbType = Int32), @p41='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p42='?' (Size = 4000), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Guid), @p45='?' (Size = 4000), @p46='?' (DbType = DateTime2), @p47='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p48='?' (Size = 4000), @p49='?' (DbType = DateTime2), @p50='?' (Size = 4000), @p51='?' (DbType = Int32), @p52='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p53='?' (Size = 4000), @p54='?' (DbType = DateTime2), @p55='?' (DbType = Guid), @p56='?' (Size = 4000), @p57='?' (DbType = DateTime2), @p58='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p59='?' (Size = 4000), @p60='?' (DbType = DateTime2), @p61='?' (Size = 4000), @p62='?' (DbType = Int32), @p63='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p64='?' (Size = 4000), @p65='?' (DbType = DateTime2), @p66='?' (DbType = Guid), @p67='?' (Size = 4000), @p68='?' (DbType = DateTime2), @p69='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p70='?' (Size = 4000), @p71='?' (DbType = DateTime2), @p72='?' (Size = 4000), @p73='?' (DbType = Int32), @p74='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p75='?' (Size = 4000), @p76='?' (DbType = DateTime2), @p77='?' (DbType = Guid), @p78='?' (Size = 4000), @p79='?' (DbType = DateTime2), @p80='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p81='?' (Size = 4000), @p82='?' (DbType = DateTime2), @p83='?' (Size = 4000), @p84='?' (DbType = Int32), @p85='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p86='?' (Size = 4000), @p87='?' (DbType = DateTime2), @p88='?' (DbType = Guid), @p89='?' (Size = 4000), @p90='?' (DbType = DateTime2), @p91='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p92='?' (Size = 4000), @p93='?' (DbType = DateTime2), @p94='?' (Size = 4000), @p95='?' (DbType = Int32), @p96='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p97='?' (Size = 4000), @p98='?' (DbType = DateTime2), @p99='?' (DbType = Guid), @p100='?' (Size = 4000), @p101='?' (DbType = DateTime2), @p102='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p103='?' (Size = 4000), @p104='?' (DbType = DateTime2), @p105='?' (Size = 4000), @p106='?' (DbType = Int32), @p107='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p108='?' (Size = 4000), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Guid), @p111='?' (Size = 4000), @p112='?' (DbType = DateTime2), @p113='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p114='?' (Size = 4000), @p115='?' (DbType = DateTime2), @p116='?' (Size = 4000), @p117='?' (DbType = Int32), @p118='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p119='?' (Size = 4000), @p120='?' (DbType = DateTime2), @p121='?' (DbType = Guid), @p122='?' (Size = 4000), @p123='?' (DbType = DateTime2), @p124='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p125='?' (Size = 4000), @p126='?' (DbType = DateTime2), @p127='?' (Size = 4000), @p128='?' (DbType = Int32), @p129='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p130='?' (Size = 4000), @p131='?' (DbType = DateTime2), @p132='?' (DbType = Guid), @p133='?' (Size = 4000), @p134='?' (DbType = DateTime2), @p135='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p136='?' (Size = 4000), @p137='?' (DbType = DateTime2), @p138='?' (Size = 4000), @p139='?' (DbType = Int32), @p140='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p141='?' (Size = 4000), @p142='?' (DbType = DateTime2), @p143='?' (DbType = Guid), @p144='?' (Size = 4000), @p145='?' (DbType = DateTime2), @p146='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p147='?' (Size = 4000), @p148='?' (DbType = DateTime2), @p149='?' (Size = 4000), @p150='?' (DbType = Int32), @p151='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p152='?' (Size = 4000), @p153='?' (DbType = DateTime2), @p154='?' (DbType = Guid), @p155='?' (Size = 4000), @p156='?' (DbType = DateTime2), @p157='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p158='?' (Size = 4000), @p159='?' (DbType = DateTime2), @p160='?' (Size = 4000), @p161='?' (DbType = Int32), @p162='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p163='?' (Size = 4000), @p164='?' (DbType = DateTime2), @p165='?' (DbType = Guid), @p166='?' (Size = 4000), @p167='?' (DbType = DateTime2), @p168='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p169='?' (Size = 4000), @p170='?' (DbType = DateTime2), @p171='?' (Size = 4000), @p172='?' (DbType = Int32), @p173='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p174='?' (Size = 4000), @p175='?' (DbType = DateTime2), @p176='?' (DbType = Guid), @p177='?' (Size = 4000), @p178='?' (DbType = DateTime2), @p179='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p180='?' (Size = 4000), @p181='?' (DbType = DateTime2), @p182='?' (Size = 4000), @p183='?' (DbType = Int32), @p184='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p185='?' (Size = 4000), @p186='?' (DbType = DateTime2), @p187='?' (DbType = Guid), @p188='?' (Size = 4000), @p189='?' (DbType = DateTime2), @p190='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p191='?' (Size = 4000), @p192='?' (DbType = DateTime2), @p193='?' (Size = 4000), @p194='?' (DbType = Int32), @p195='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p196='?' (Size = 4000), @p197='?' (DbType = DateTime2), @p198='?' (DbType = Guid), @p199='?' (Size = 4000), @p200='?' (DbType = DateTime2), @p201='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p202='?' (Size = 4000), @p203='?' (DbType = DateTime2), @p204='?' (Size = 4000), @p205='?' (DbType = Int32), @p206='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p207='?' (Size = 4000), @p208='?' (DbType = DateTime2), @p209='?' (DbType = Guid), @p210='?' (Size = 4000), @p211='?' (DbType = DateTime2), @p212='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p213='?' (Size = 4000), @p214='?' (DbType = DateTime2), @p215='?' (Size = 4000), @p216='?' (DbType = Int32), @p217='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p218='?' (Size = 4000), @p219='?' (DbType = DateTime2), @p220='?' (DbType = Guid), @p221='?' (Size = 4000), @p222='?' (DbType = DateTime2), @p223='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p224='?' (Size = 4000), @p225='?' (DbType = DateTime2), @p226='?' (Size = 4000), @p227='?' (DbType = Int32), @p228='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p229='?' (Size = 4000), @p230='?' (DbType = DateTime2), @p231='?' (DbType = Guid), @p232='?' (Size = 4000), @p233='?' (DbType = DateTime2), @p234='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p235='?' (Size = 4000), @p236='?' (DbType = DateTime2), @p237='?' (Size = 4000), @p238='?' (DbType = Int32), @p239='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p240='?' (Size = 4000), @p241='?' (DbType = DateTime2), @p242='?' (DbType = Guid), @p243='?' (Size = 4000), @p244='?' (DbType = DateTime2), @p245='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p246='?' (Size = 4000), @p247='?' (DbType = DateTime2), @p248='?' (Size = 4000), @p249='?' (DbType = Int32), @p250='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p251='?' (Size = 4000), @p252='?' (DbType = DateTime2), @p253='?' (DbType = Guid), @p254='?' (Size = 4000), @p255='?' (DbType = DateTime2), @p256='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p257='?' (Size = 4000), @p258='?' (DbType = DateTime2), @p259='?' (Size = 4000), @p260='?' (DbType = Int32), @p261='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p262='?' (Size = 4000), @p263='?' (DbType = DateTime2), @p264='?' (DbType = Guid), @p265='?' (Size = 4000), @p266='?' (DbType = DateTime2), @p267='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p268='?' (Size = 4000), @p269='?' (DbType = DateTime2), @p270='?' (Size = 4000), @p271='?' (DbType = Int32), @p272='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p273='?' (Size = 4000), @p274='?' (DbType = DateTime2), @p275='?' (DbType = Guid), @p276='?' (Size = 4000), @p277='?' (DbType = DateTime2), @p278='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p279='?' (Size = 4000), @p280='?' (DbType = DateTime2), @p281='?' (Size = 4000), @p282='?' (DbType = Int32), @p283='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p284='?' (Size = 4000), @p285='?' (DbType = DateTime2), @p286='?' (DbType = Guid), @p287='?' (Size = 4000), @p288='?' (DbType = DateTime2), @p289='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p290='?' (Size = 4000), @p291='?' (DbType = DateTime2), @p292='?' (Size = 4000), @p293='?' (DbType = Int32), @p294='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p295='?' (Size = 4000), @p296='?' (DbType = DateTime2), @p297='?' (DbType = Guid), @p298='?' (Size = 4000), @p299='?' (DbType = DateTime2), @p300='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p301='?' (Size = 4000), @p302='?' (DbType = DateTime2), @p303='?' (Size = 4000), @p304='?' (DbType = Int32), @p305='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p306='?' (Size = 4000), @p307='?' (DbType = DateTime2), @p308='?' (DbType = Guid), @p309='?' (Size = 4000), @p310='?' (DbType = DateTime2), @p311='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p312='?' (Size = 4000), @p313='?' (DbType = DateTime2), @p314='?' (Size = 4000), @p315='?' (DbType = Int32), @p316='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p317='?' (Size = 4000), @p318='?' (DbType = DateTime2), @p319='?' (DbType = Guid), @p320='?' (Size = 4000), @p321='?' (DbType = DateTime2), @p322='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p323='?' (Size = 4000), @p324='?' (DbType = DateTime2), @p325='?' (Size = 4000), @p326='?' (DbType = Int32), @p327='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p328='?' (Size = 4000), @p329='?' (DbType = DateTime2), @p330='?' (DbType = Guid), @p331='?' (Size = 4000), @p332='?' (DbType = DateTime2), @p333='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p334='?' (Size = 4000), @p335='?' (DbType = DateTime2), @p336='?' (Size = 4000), @p337='?' (DbType = Int32), @p338='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p339='?' (Size = 4000), @p340='?' (DbType = DateTime2), @p341='?' (DbType = Guid), @p342='?' (Size = 4000), @p343='?' (DbType = DateTime2), @p344='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p345='?' (Size = 4000), @p346='?' (DbType = DateTime2), @p347='?' (Size = 4000), @p348='?' (DbType = Int32), @p349='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p350='?' (Size = 4000), @p351='?' (DbType = DateTime2), @p352='?' (DbType = Guid), @p353='?' (Size = 4000), @p354='?' (DbType = DateTime2), @p355='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p356='?' (Size = 4000), @p357='?' (DbType = DateTime2), @p358='?' (Size = 4000), @p359='?' (DbType = Int32), @p360='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p361='?' (Size = 4000), @p362='?' (DbType = DateTime2), @p363='?' (DbType = Guid), @p364='?' (Size = 4000), @p365='?' (DbType = DateTime2), @p366='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p367='?' (Size = 4000), @p368='?' (DbType = DateTime2), @p369='?' (Size = 4000), @p370='?' (DbType = Int32), @p371='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p372='?' (Size = 4000), @p373='?' (DbType = DateTime2), @p374='?' (DbType = Guid), @p375='?' (Size = 4000), @p376='?' (DbType = DateTime2), @p377='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p378='?' (Size = 4000), @p379='?' (DbType = DateTime2), @p380='?' (Size = 4000), @p381='?' (DbType = Int32), @p382='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p383='?' (Size = 4000), @p384='?' (DbType = DateTime2), @p385='?' (DbType = Guid), @p386='?' (Size = 4000), @p387='?' (DbType = DateTime2), @p388='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p389='?' (Size = 4000), @p390='?' (DbType = DateTime2), @p391='?' (Size = 4000), @p392='?' (DbType = Int32), @p393='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p394='?' (Size = 4000), @p395='?' (DbType = DateTime2), @p396='?' (DbType = Guid), @p397='?' (Size = 4000), @p398='?' (DbType = DateTime2), @p399='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p400='?' (Size = 4000), @p401='?' (DbType = DateTime2), @p402='?' (Size = 4000), @p403='?' (DbType = Int32), @p404='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p405='?' (Size = 4000), @p406='?' (DbType = DateTime2), @p407='?' (DbType = Guid), @p408='?' (Size = 4000), @p409='?' (DbType = DateTime2), @p410='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p411='?' (Size = 4000), @p412='?' (DbType = DateTime2), @p413='?' (Size = 4000), @p414='?' (DbType = Int32), @p415='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p416='?' (Size = 4000), @p417='?' (DbType = DateTime2), @p418='?' (DbType = Guid), @p419='?' (Size = 4000), @p420='?' (DbType = DateTime2), @p421='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p422='?' (Size = 4000), @p423='?' (DbType = DateTime2), @p424='?' (Size = 4000), @p425='?' (DbType = Int32), @p426='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p427='?' (Size = 4000), @p428='?' (DbType = DateTime2), @p429='?' (DbType = Guid), @p430='?' (Size = 4000), @p431='?' (DbType = DateTime2), @p432='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p433='?' (Size = 4000), @p434='?' (DbType = DateTime2), @p435='?' (Size = 4000), @p436='?' (DbType = Int32), @p437='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p438='?' (Size = 4000), @p439='?' (DbType = DateTime2), @p440='?' (DbType = Guid), @p441='?' (Size = 4000), @p442='?' (DbType = DateTime2), @p443='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p444='?' (Size = 4000), @p445='?' (DbType = DateTime2), @p446='?' (Size = 4000), @p447='?' (DbType = Int32), @p448='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p449='?' (Size = 4000), @p450='?' (DbType = DateTime2), @p451='?' (DbType = Guid), @p452='?' (Size = 4000), @p453='?' (DbType = DateTime2), @p454='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p455='?' (Size = 4000), @p456='?' (DbType = DateTime2), @p457='?' (Size = 4000), @p458='?' (DbType = Int32), @p459='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p460='?' (Size = 4000), @p461='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Currencies] ([Id], [Code], [Date], [Diff], [DiffFormated], [LastUpdatedAt], [Name], [Quantity], [Rate], [RateFormated], [ValidFromDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10),
(@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21),
(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32),
(@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43),
(@p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54),
(@p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65),
(@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76),
(@p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87),
(@p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98),
(@p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109),
(@p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120),
(@p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131),
(@p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142),
(@p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153),
(@p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164),
(@p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186),
(@p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197),
(@p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207, @p208),
(@p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219),
(@p220, @p221, @p222, @p223, @p224, @p225, @p226, @p227, @p228, @p229, @p230),
(@p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239, @p240, @p241),
(@p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252),
(@p253, @p254, @p255, @p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263),
(@p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271, @p272, @p273, @p274),
(@p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285),
(@p286, @p287, @p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296),
(@p297, @p298, @p299, @p300, @p301, @p302, @p303, @p304, @p305, @p306, @p307),
(@p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318),
(@p319, @p320, @p321, @p322, @p323, @p324, @p325, @p326, @p327, @p328, @p329),
(@p330, @p331, @p332, @p333, @p334, @p335, @p336, @p337, @p338, @p339, @p340),
(@p341, @p342, @p343, @p344, @p345, @p346, @p347, @p348, @p349, @p350, @p351),
(@p352, @p353, @p354, @p355, @p356, @p357, @p358, @p359, @p360, @p361, @p362),
(@p363, @p364, @p365, @p366, @p367, @p368, @p369, @p370, @p371, @p372, @p373),
(@p374, @p375, @p376, @p377, @p378, @p379, @p380, @p381, @p382, @p383, @p384),
(@p385, @p386, @p387, @p388, @p389, @p390, @p391, @p392, @p393, @p394, @p395),
(@p396, @p397, @p398, @p399, @p400, @p401, @p402, @p403, @p404, @p405, @p406),
(@p407, @p408, @p409, @p410, @p411, @p412, @p413, @p414, @p415, @p416, @p417),
(@p418, @p419, @p420, @p421, @p422, @p423, @p424, @p425, @p426, @p427, @p428),
(@p429, @p430, @p431, @p432, @p433, @p434, @p435, @p436, @p437, @p438, @p439),
(@p440, @p441, @p442, @p443, @p444, @p445, @p446, @p447, @p448, @p449, @p450),
(@p451, @p452, @p453, @p454, @p455, @p456, @p457, @p458, @p459, @p460, @p461);
2023-04-03 18:08:54.329 +04:00 [INF] Executed DbCommand (35ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Size = 4000), @p21='?' (DbType = DateTime2), @p22='?' (DbType = Guid), @p23='?' (Size = 4000), @p24='?' (DbType = DateTime2), @p25='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p26='?' (Size = 4000), @p27='?' (DbType = DateTime2), @p28='?' (Size = 4000), @p29='?' (DbType = Int32), @p30='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p31='?' (Size = 4000), @p32='?' (DbType = DateTime2), @p33='?' (DbType = Guid), @p34='?' (Size = 4000), @p35='?' (DbType = DateTime2), @p36='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p37='?' (Size = 4000), @p38='?' (DbType = DateTime2), @p39='?' (Size = 4000), @p40='?' (DbType = Int32), @p41='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p42='?' (Size = 4000), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Guid), @p45='?' (Size = 4000), @p46='?' (DbType = DateTime2), @p47='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p48='?' (Size = 4000), @p49='?' (DbType = DateTime2), @p50='?' (Size = 4000), @p51='?' (DbType = Int32), @p52='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p53='?' (Size = 4000), @p54='?' (DbType = DateTime2), @p55='?' (DbType = Guid), @p56='?' (Size = 4000), @p57='?' (DbType = DateTime2), @p58='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p59='?' (Size = 4000), @p60='?' (DbType = DateTime2), @p61='?' (Size = 4000), @p62='?' (DbType = Int32), @p63='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p64='?' (Size = 4000), @p65='?' (DbType = DateTime2), @p66='?' (DbType = Guid), @p67='?' (Size = 4000), @p68='?' (DbType = DateTime2), @p69='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p70='?' (Size = 4000), @p71='?' (DbType = DateTime2), @p72='?' (Size = 4000), @p73='?' (DbType = Int32), @p74='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p75='?' (Size = 4000), @p76='?' (DbType = DateTime2), @p77='?' (DbType = Guid), @p78='?' (Size = 4000), @p79='?' (DbType = DateTime2), @p80='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p81='?' (Size = 4000), @p82='?' (DbType = DateTime2), @p83='?' (Size = 4000), @p84='?' (DbType = Int32), @p85='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p86='?' (Size = 4000), @p87='?' (DbType = DateTime2), @p88='?' (DbType = Guid), @p89='?' (Size = 4000), @p90='?' (DbType = DateTime2), @p91='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p92='?' (Size = 4000), @p93='?' (DbType = DateTime2), @p94='?' (Size = 4000), @p95='?' (DbType = Int32), @p96='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p97='?' (Size = 4000), @p98='?' (DbType = DateTime2), @p99='?' (DbType = Guid), @p100='?' (Size = 4000), @p101='?' (DbType = DateTime2), @p102='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p103='?' (Size = 4000), @p104='?' (DbType = DateTime2), @p105='?' (Size = 4000), @p106='?' (DbType = Int32), @p107='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p108='?' (Size = 4000), @p109='?' (DbType = DateTime2), @p110='?' (DbType = Guid), @p111='?' (Size = 4000), @p112='?' (DbType = DateTime2), @p113='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p114='?' (Size = 4000), @p115='?' (DbType = DateTime2), @p116='?' (Size = 4000), @p117='?' (DbType = Int32), @p118='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p119='?' (Size = 4000), @p120='?' (DbType = DateTime2), @p121='?' (DbType = Guid), @p122='?' (Size = 4000), @p123='?' (DbType = DateTime2), @p124='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p125='?' (Size = 4000), @p126='?' (DbType = DateTime2), @p127='?' (Size = 4000), @p128='?' (DbType = Int32), @p129='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p130='?' (Size = 4000), @p131='?' (DbType = DateTime2), @p132='?' (DbType = Guid), @p133='?' (Size = 4000), @p134='?' (DbType = DateTime2), @p135='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p136='?' (Size = 4000), @p137='?' (DbType = DateTime2), @p138='?' (Size = 4000), @p139='?' (DbType = Int32), @p140='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p141='?' (Size = 4000), @p142='?' (DbType = DateTime2), @p143='?' (DbType = Guid), @p144='?' (Size = 4000), @p145='?' (DbType = DateTime2), @p146='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p147='?' (Size = 4000), @p148='?' (DbType = DateTime2), @p149='?' (Size = 4000), @p150='?' (DbType = Int32), @p151='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p152='?' (Size = 4000), @p153='?' (DbType = DateTime2), @p154='?' (DbType = Guid), @p155='?' (Size = 4000), @p156='?' (DbType = DateTime2), @p157='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p158='?' (Size = 4000), @p159='?' (DbType = DateTime2), @p160='?' (Size = 4000), @p161='?' (DbType = Int32), @p162='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p163='?' (Size = 4000), @p164='?' (DbType = DateTime2), @p165='?' (DbType = Guid), @p166='?' (Size = 4000), @p167='?' (DbType = DateTime2), @p168='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p169='?' (Size = 4000), @p170='?' (DbType = DateTime2), @p171='?' (Size = 4000), @p172='?' (DbType = Int32), @p173='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p174='?' (Size = 4000), @p175='?' (DbType = DateTime2), @p176='?' (DbType = Guid), @p177='?' (Size = 4000), @p178='?' (DbType = DateTime2), @p179='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p180='?' (Size = 4000), @p181='?' (DbType = DateTime2), @p182='?' (Size = 4000), @p183='?' (DbType = Int32), @p184='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p185='?' (Size = 4000), @p186='?' (DbType = DateTime2), @p187='?' (DbType = Guid), @p188='?' (Size = 4000), @p189='?' (DbType = DateTime2), @p190='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p191='?' (Size = 4000), @p192='?' (DbType = DateTime2), @p193='?' (Size = 4000), @p194='?' (DbType = Int32), @p195='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p196='?' (Size = 4000), @p197='?' (DbType = DateTime2), @p198='?' (DbType = Guid), @p199='?' (Size = 4000), @p200='?' (DbType = DateTime2), @p201='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p202='?' (Size = 4000), @p203='?' (DbType = DateTime2), @p204='?' (Size = 4000), @p205='?' (DbType = Int32), @p206='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p207='?' (Size = 4000), @p208='?' (DbType = DateTime2), @p209='?' (DbType = Guid), @p210='?' (Size = 4000), @p211='?' (DbType = DateTime2), @p212='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p213='?' (Size = 4000), @p214='?' (DbType = DateTime2), @p215='?' (Size = 4000), @p216='?' (DbType = Int32), @p217='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p218='?' (Size = 4000), @p219='?' (DbType = DateTime2), @p220='?' (DbType = Guid), @p221='?' (Size = 4000), @p222='?' (DbType = DateTime2), @p223='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p224='?' (Size = 4000), @p225='?' (DbType = DateTime2), @p226='?' (Size = 4000), @p227='?' (DbType = Int32), @p228='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p229='?' (Size = 4000), @p230='?' (DbType = DateTime2), @p231='?' (DbType = Guid), @p232='?' (Size = 4000), @p233='?' (DbType = DateTime2), @p234='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p235='?' (Size = 4000), @p236='?' (DbType = DateTime2), @p237='?' (Size = 4000), @p238='?' (DbType = Int32), @p239='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p240='?' (Size = 4000), @p241='?' (DbType = DateTime2), @p242='?' (DbType = Guid), @p243='?' (Size = 4000), @p244='?' (DbType = DateTime2), @p245='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p246='?' (Size = 4000), @p247='?' (DbType = DateTime2), @p248='?' (Size = 4000), @p249='?' (DbType = Int32), @p250='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p251='?' (Size = 4000), @p252='?' (DbType = DateTime2), @p253='?' (DbType = Guid), @p254='?' (Size = 4000), @p255='?' (DbType = DateTime2), @p256='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p257='?' (Size = 4000), @p258='?' (DbType = DateTime2), @p259='?' (Size = 4000), @p260='?' (DbType = Int32), @p261='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p262='?' (Size = 4000), @p263='?' (DbType = DateTime2), @p264='?' (DbType = Guid), @p265='?' (Size = 4000), @p266='?' (DbType = DateTime2), @p267='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p268='?' (Size = 4000), @p269='?' (DbType = DateTime2), @p270='?' (Size = 4000), @p271='?' (DbType = Int32), @p272='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p273='?' (Size = 4000), @p274='?' (DbType = DateTime2), @p275='?' (DbType = Guid), @p276='?' (Size = 4000), @p277='?' (DbType = DateTime2), @p278='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p279='?' (Size = 4000), @p280='?' (DbType = DateTime2), @p281='?' (Size = 4000), @p282='?' (DbType = Int32), @p283='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p284='?' (Size = 4000), @p285='?' (DbType = DateTime2), @p286='?' (DbType = Guid), @p287='?' (Size = 4000), @p288='?' (DbType = DateTime2), @p289='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p290='?' (Size = 4000), @p291='?' (DbType = DateTime2), @p292='?' (Size = 4000), @p293='?' (DbType = Int32), @p294='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p295='?' (Size = 4000), @p296='?' (DbType = DateTime2), @p297='?' (DbType = Guid), @p298='?' (Size = 4000), @p299='?' (DbType = DateTime2), @p300='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p301='?' (Size = 4000), @p302='?' (DbType = DateTime2), @p303='?' (Size = 4000), @p304='?' (DbType = Int32), @p305='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p306='?' (Size = 4000), @p307='?' (DbType = DateTime2), @p308='?' (DbType = Guid), @p309='?' (Size = 4000), @p310='?' (DbType = DateTime2), @p311='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p312='?' (Size = 4000), @p313='?' (DbType = DateTime2), @p314='?' (Size = 4000), @p315='?' (DbType = Int32), @p316='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p317='?' (Size = 4000), @p318='?' (DbType = DateTime2), @p319='?' (DbType = Guid), @p320='?' (Size = 4000), @p321='?' (DbType = DateTime2), @p322='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p323='?' (Size = 4000), @p324='?' (DbType = DateTime2), @p325='?' (Size = 4000), @p326='?' (DbType = Int32), @p327='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p328='?' (Size = 4000), @p329='?' (DbType = DateTime2), @p330='?' (DbType = Guid), @p331='?' (Size = 4000), @p332='?' (DbType = DateTime2), @p333='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p334='?' (Size = 4000), @p335='?' (DbType = DateTime2), @p336='?' (Size = 4000), @p337='?' (DbType = Int32), @p338='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p339='?' (Size = 4000), @p340='?' (DbType = DateTime2), @p341='?' (DbType = Guid), @p342='?' (Size = 4000), @p343='?' (DbType = DateTime2), @p344='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p345='?' (Size = 4000), @p346='?' (DbType = DateTime2), @p347='?' (Size = 4000), @p348='?' (DbType = Int32), @p349='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p350='?' (Size = 4000), @p351='?' (DbType = DateTime2), @p352='?' (DbType = Guid), @p353='?' (Size = 4000), @p354='?' (DbType = DateTime2), @p355='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p356='?' (Size = 4000), @p357='?' (DbType = DateTime2), @p358='?' (Size = 4000), @p359='?' (DbType = Int32), @p360='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p361='?' (Size = 4000), @p362='?' (DbType = DateTime2), @p363='?' (DbType = Guid), @p364='?' (Size = 4000), @p365='?' (DbType = DateTime2), @p366='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p367='?' (Size = 4000), @p368='?' (DbType = DateTime2), @p369='?' (Size = 4000), @p370='?' (DbType = Int32), @p371='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p372='?' (Size = 4000), @p373='?' (DbType = DateTime2), @p374='?' (DbType = Guid), @p375='?' (Size = 4000), @p376='?' (DbType = DateTime2), @p377='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p378='?' (Size = 4000), @p379='?' (DbType = DateTime2), @p380='?' (Size = 4000), @p381='?' (DbType = Int32), @p382='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p383='?' (Size = 4000), @p384='?' (DbType = DateTime2), @p385='?' (DbType = Guid), @p386='?' (Size = 4000), @p387='?' (DbType = DateTime2), @p388='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p389='?' (Size = 4000), @p390='?' (DbType = DateTime2), @p391='?' (Size = 4000), @p392='?' (DbType = Int32), @p393='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p394='?' (Size = 4000), @p395='?' (DbType = DateTime2), @p396='?' (DbType = Guid), @p397='?' (Size = 4000), @p398='?' (DbType = DateTime2), @p399='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p400='?' (Size = 4000), @p401='?' (DbType = DateTime2), @p402='?' (Size = 4000), @p403='?' (DbType = Int32), @p404='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p405='?' (Size = 4000), @p406='?' (DbType = DateTime2), @p407='?' (DbType = Guid), @p408='?' (Size = 4000), @p409='?' (DbType = DateTime2), @p410='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p411='?' (Size = 4000), @p412='?' (DbType = DateTime2), @p413='?' (Size = 4000), @p414='?' (DbType = Int32), @p415='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p416='?' (Size = 4000), @p417='?' (DbType = DateTime2), @p418='?' (DbType = Guid), @p419='?' (Size = 4000), @p420='?' (DbType = DateTime2), @p421='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p422='?' (Size = 4000), @p423='?' (DbType = DateTime2), @p424='?' (Size = 4000), @p425='?' (DbType = Int32), @p426='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p427='?' (Size = 4000), @p428='?' (DbType = DateTime2), @p429='?' (DbType = Guid), @p430='?' (Size = 4000), @p431='?' (DbType = DateTime2), @p432='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p433='?' (Size = 4000), @p434='?' (DbType = DateTime2), @p435='?' (Size = 4000), @p436='?' (DbType = Int32), @p437='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p438='?' (Size = 4000), @p439='?' (DbType = DateTime2), @p440='?' (DbType = Guid), @p441='?' (Size = 4000), @p442='?' (DbType = DateTime2), @p443='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p444='?' (Size = 4000), @p445='?' (DbType = DateTime2), @p446='?' (Size = 4000), @p447='?' (DbType = Int32), @p448='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p449='?' (Size = 4000), @p450='?' (DbType = DateTime2), @p451='?' (DbType = Guid), @p452='?' (Size = 4000), @p453='?' (DbType = DateTime2), @p454='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p455='?' (Size = 4000), @p456='?' (DbType = DateTime2), @p457='?' (Size = 4000), @p458='?' (DbType = Int32), @p459='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p460='?' (Size = 4000), @p461='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Currencies] ([Id], [Code], [Date], [Diff], [DiffFormated], [LastUpdatedAt], [Name], [Quantity], [Rate], [RateFormated], [ValidFromDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10),
(@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21),
(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32),
(@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43),
(@p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54),
(@p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65),
(@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76),
(@p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87),
(@p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98),
(@p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109),
(@p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120),
(@p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131),
(@p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142),
(@p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153),
(@p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164),
(@p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186),
(@p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197),
(@p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207, @p208),
(@p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219),
(@p220, @p221, @p222, @p223, @p224, @p225, @p226, @p227, @p228, @p229, @p230),
(@p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239, @p240, @p241),
(@p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252),
(@p253, @p254, @p255, @p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263),
(@p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271, @p272, @p273, @p274),
(@p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285),
(@p286, @p287, @p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296),
(@p297, @p298, @p299, @p300, @p301, @p302, @p303, @p304, @p305, @p306, @p307),
(@p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318),
(@p319, @p320, @p321, @p322, @p323, @p324, @p325, @p326, @p327, @p328, @p329),
(@p330, @p331, @p332, @p333, @p334, @p335, @p336, @p337, @p338, @p339, @p340),
(@p341, @p342, @p343, @p344, @p345, @p346, @p347, @p348, @p349, @p350, @p351),
(@p352, @p353, @p354, @p355, @p356, @p357, @p358, @p359, @p360, @p361, @p362),
(@p363, @p364, @p365, @p366, @p367, @p368, @p369, @p370, @p371, @p372, @p373),
(@p374, @p375, @p376, @p377, @p378, @p379, @p380, @p381, @p382, @p383, @p384),
(@p385, @p386, @p387, @p388, @p389, @p390, @p391, @p392, @p393, @p394, @p395),
(@p396, @p397, @p398, @p399, @p400, @p401, @p402, @p403, @p404, @p405, @p406),
(@p407, @p408, @p409, @p410, @p411, @p412, @p413, @p414, @p415, @p416, @p417),
(@p418, @p419, @p420, @p421, @p422, @p423, @p424, @p425, @p426, @p427, @p428),
(@p429, @p430, @p431, @p432, @p433, @p434, @p435, @p436, @p437, @p438, @p439),
(@p440, @p441, @p442, @p443, @p444, @p445, @p446, @p447, @p448, @p449, @p450),
(@p451, @p452, @p453, @p454, @p455, @p456, @p457, @p458, @p459, @p460, @p461);
2023-04-03 18:08:54.336 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.337 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:08:54.340 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:08:54.340 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:08:54.341 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:08:54.342 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Currencies] ([Id], [Code], [Date], [Diff], [DiffFormated], [LastUpdatedAt], [Name], [Quantity], [Rate], [RateFormated], [ValidFromDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2023-04-03 18:08:54.346 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Currencies] ([Id], [Code], [Date], [Diff], [DiffFormated], [LastUpdatedAt], [Name], [Quantity], [Rate], [RateFormated], [ValidFromDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2023-04-03 18:08:54.348 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.349 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:08:54.352 +04:00 [DBG] Committing transaction.
2023-04-03 18:08:54.357 +04:00 [DBG] Committed transaction.
2023-04-03 18:08:54.360 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.362 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:08:54.364 +04:00 [DBG] Disposing transaction.
2023-04-03 18:08:54.365 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.366 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.368 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.369 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.370 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.372 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.373 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.375 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.376 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.378 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.379 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.381 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.382 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.383 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.385 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.386 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.387 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.389 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.390 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.391 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.393 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.395 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.397 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.398 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.399 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.401 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.402 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.403 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.404 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.406 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.407 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.408 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.409 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.411 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.413 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.414 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.415 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.416 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.417 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.419 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.420 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.421 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.422 +04:00 [DBG] An entity of type 'CurrencyEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.424 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 43 entities written to the database.
2023-04-03 18:08:54.443 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .ThenInclude(a => a.UserEntity)
    .Where(c => c.Id == __cardId_0)
    .Select(c => new CardEntityDto{ 
        AccountId = c.Account.Id, 
        AccountOwnerEmail = c.Account.UserEntity.Email, 
        AccountCurrency = c.Account.Currency, 
        AccountIban = c.Account.Iban 
    }
    )
    .FirstOrDefault()'
2023-04-03 18:08:54.463 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntityDto>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntityDto>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                AccountId -> 0
                AccountOwnerEmail -> 1
                AccountCurrency -> 2
                AccountIban -> 3
            SELECT TOP(1) a.Id AS AccountId, a0.Email AS AccountOwnerEmail, a.Currency AS AccountCurrency, a.Iban AS AccountIban
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            INNER JOIN AspNetUsers AS a0 ON a.UserId == a0.Id
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntityDto>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-03 18:08:54.466 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:08:54.466 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:08:54.467 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:08:54.468 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.469 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.470 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:08:54.477 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:08:54.479 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.480 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:08:54.481 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.482 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:08:54.486 +04:00 [DBG] Compiling query expression: 
'DbSet<TransactionEntity>()
    .Where(t => t.AccountFromId == __accountId_0 && t.CreatedAt.Date == DateTime.Now.Date && (int)t.TransactionType == 0)'
2023-04-03 18:08:54.502 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<TransactionEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TransactionEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TransactionEntity.AccountFromIban (string), 1], [Property: TransactionEntity.AccountFromId (Guid?), 2], [Property: TransactionEntity.AccountToIban (string), 3], [Property: TransactionEntity.AccountToId (Guid?), 4], [Property: TransactionEntity.CreatedAt (DateTime) Required, 5], [Property: TransactionEntity.CurrencyFrom (CurrencyType) Required, 6], [Property: TransactionEntity.CurrencyTo (CurrencyType) Required, 7], [Property: TransactionEntity.Fee (decimal) Required, 8], [Property: TransactionEntity.ReceivedAmount (decimal) Required, 9], [Property: TransactionEntity.TransactionType (TransactionType) Required, 10], [Property: TransactionEntity.WithDrawnAmount (decimal) Required, 11] }
        SELECT t.Id, t.AccountFromIban, t.AccountFromId, t.AccountToIban, t.AccountToId, t.CreatedAt, t.CurrencyFrom, t.CurrencyTo, t.Fee, t.ReceivedAmount, t.TransactionType, t.WithDrawnAmount
        FROM Transactions AS t
        WHERE ((t.AccountFromId == @__accountId_0) && (CONVERT(date, t.CreatedAt) == CONVERT(date, GETDATE()))) && (t.TransactionType == 0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TransactionEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-03 18:08:54.509 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:08:54.510 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:08:54.511 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:08:54.512 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.513 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.513 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:08:54.522 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:08:54.524 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.525 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:08:54.525 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.526 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:08:54.535 +04:00 [DBG] Compiling query expression: 
'DbSet<AccountEntity>()
    .FirstOrDefault(a => a.Id == __accountId_0)'
2023-04-03 18:08:54.539 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AccountEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<AccountEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AccountEntity.Amount (decimal) Required, 1], [Property: AccountEntity.Currency (CurrencyType) Required, 2], [Property: AccountEntity.Iban (string), 3], [Property: AccountEntity.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Accounts AS a
            WHERE a.Id == @__accountId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-03 18:08:54.542 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:08:54.542 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:08:54.543 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:08:54.545 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.546 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.546 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:08:54.549 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:08:54.551 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.552 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.552 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 18:08:54.553 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.554 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:08:54.556 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.585 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.601 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.604 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 18:08:54.606 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 18:08:54.621 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 18:08:54.626 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-03 18:08:54.629 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.630 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.631 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-03 18:08:54.632 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-03 18:08:54.633 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:08:54.634 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:08:54.636 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:08:54.637 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:08:54.644 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:08:54.646 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.647 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 0ms reading results.
2023-04-03 18:08:54.648 +04:00 [DBG] Committing transaction.
2023-04-03 18:08:54.649 +04:00 [DBG] Committed transaction.
2023-04-03 18:08:54.650 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.650 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:08:54.651 +04:00 [DBG] Disposing transaction.
2023-04-03 18:08:54.653 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.656 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.657 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:54.659 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-03 18:08:54.660 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:08:54.663 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:08:54.663 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:08:54.664 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:08:54.664 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:08:54.665 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:08:54.670 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 918.6386ms
2023-04-03 18:08:54.671 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:08:54.672 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:08:54.673 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:54.674 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 18:08:54.675 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26 - 200 - application/json;+charset=utf-8 940.8880ms
2023-04-03 18:08:58.085 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:08:58.086 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:08:58.086 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:08:58.087 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:08:58.088 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:08:58.089 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:08:58.089 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:08:58.090 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:08:58.091 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:08:58.091 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:08:58.092 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:08:58.092 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:08:58.093 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:08:58.094 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:08:58.094 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 9.1740ms
2023-04-03 18:08:58.095 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 8.9118ms
2023-04-03 18:08:58.096 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:08:58.097 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:08:58.098 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:08:58.099 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:08:58.100 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:08:58.100 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:08:58.101 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:08:58.101 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:08:58.102 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:08:58.103 +04:00 [DBG] Authorization was successful.
2023-04-03 18:08:58.103 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:08:58.104 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:08:58.105 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:08:58.106 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:08:58.107 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:08:58.108 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:08:58.109 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:08:58.110 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:08:58.111 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:08:58.112 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:08:58.113 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:08:58.114 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:08:58.114 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:08:58.115 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:08:58.116 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:08:58.117 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:58.117 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:58.118 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:08:58.121 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:08:58.123 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:58.124 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:58.125 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:58.125 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:58.126 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:08:58.127 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:58.128 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:08:58.129 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:08:58.131 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:08:58.132 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:08:58.132 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:08:58.133 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:08:58.134 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:08:58.135 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 24.9849ms
2023-04-03 18:08:58.136 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:08:58.136 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:08:58.137 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:08:58.138 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:08:58.138 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:58.140 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:08:58.141 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 18:08:58.142 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:08:58.143 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 46.6860ms
2023-04-03 18:08:58.144 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:08:58.145 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:08:58.146 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:08:58.147 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:08:58.148 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:08:58.148 +04:00 [DBG] Authorization was successful.
2023-04-03 18:08:58.149 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:08:58.150 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:08:58.151 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:08:58.152 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:08:58.153 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:08:58.154 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:08:58.156 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:08:58.157 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:08:58.158 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:08:58.159 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:08:58.161 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:08:58.162 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:08:58.162 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:08:58.163 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:08:58.164 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:08:58.165 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:58.166 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:58.167 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:08:58.169 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:08:58.170 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:58.171 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:58.172 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:08:58.173 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:58.174 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:08:58.176 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:58.177 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:08:58.178 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:08:58.180 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:08:58.180 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:08:58.181 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:08:58.182 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:08:58.182 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:08:58.183 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 26.837ms
2023-04-03 18:08:58.184 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:08:58.186 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:08:58.187 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:08:58.188 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 18:08:58.189 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 53.1233ms
2023-04-03 18:09:03.841 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:09:03.843 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:09:03.847 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:09:03.848 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:09:03.849 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:09:03.850 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:09:03.851 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:09:03.851 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:09:03.852 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:09:03.853 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:09:03.854 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:09:03.854 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:09:03.855 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:09:03.855 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:09:03.856 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 14.6861ms
2023-04-03 18:09:03.857 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 13.9063ms
2023-04-03 18:09:03.857 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:09:03.859 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:09:03.860 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:09:03.861 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:03.862 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:09:03.862 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:09:03.863 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:09:03.863 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:09:03.864 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:09:03.864 +04:00 [DBG] Authorization was successful.
2023-04-03 18:09:03.876 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:03.877 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:09:03.878 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:09:03.879 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:09:03.880 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:09:03.881 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:09:03.882 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:09:03.883 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:09:03.884 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:09:03.886 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:09:03.887 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:09:03.888 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:09:03.888 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:09:03.889 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:09:03.890 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:09:03.890 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:03.891 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:03.892 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:09:03.896 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:09:03.898 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:03.899 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:03.900 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:03.901 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:03.903 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 18:09:03.904 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:03.905 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:09:03.906 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:09:03.907 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:09:03.908 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:09:03.908 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:09:03.909 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:09:03.909 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:09:03.910 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 27.2913ms
2023-04-03 18:09:03.911 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:09:03.912 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:03.912 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:09:03.913 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:09:03.914 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:09:03.915 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:03.916 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:03.917 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 18:09:03.918 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:09:03.919 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 61.1756ms
2023-04-03 18:09:03.919 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:09:03.920 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:09:03.921 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:09:03.921 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:09:03.922 +04:00 [DBG] Authorization was successful.
2023-04-03 18:09:03.923 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:03.923 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:09:03.925 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:09:03.926 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:09:03.927 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:09:03.929 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:09:03.930 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:09:03.931 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:09:03.933 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:09:03.934 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:09:03.935 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:09:03.936 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:09:03.937 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:09:03.938 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:09:03.939 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:09:03.940 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:03.940 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:03.941 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:09:03.943 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:09:03.944 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:03.945 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:03.946 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:03.947 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:03.948 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:09:03.949 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:03.950 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:09:03.951 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:09:03.952 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:09:03.952 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:09:03.953 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:09:03.953 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:09:03.954 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:09:03.955 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 23.9777ms
2023-04-03 18:09:03.956 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:03.957 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:09:03.958 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:03.958 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 18:09:03.959 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 47.6381ms
2023-04-03 18:09:10.833 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:09:10.833 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:09:10.834 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:09:10.835 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:09:10.837 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:09:10.838 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:09:10.839 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:09:10.839 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:09:10.840 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:09:10.841 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:09:10.841 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:09:10.842 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:09:10.843 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:09:10.844 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:09:10.845 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 11.8755ms
2023-04-03 18:09:10.845 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 12.2780ms
2023-04-03 18:09:10.846 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:09:10.847 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:09:10.848 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:09:10.849 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:10.849 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:09:10.850 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:09:10.851 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:09:10.862 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:09:10.862 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:09:10.863 +04:00 [DBG] Authorization was successful.
2023-04-03 18:09:10.864 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:10.864 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:09:10.865 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:09:10.866 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:09:10.867 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:09:10.868 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:09:10.869 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:09:10.870 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:09:10.871 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:09:10.873 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:09:10.874 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:09:10.875 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:09:10.876 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:09:10.877 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:09:10.878 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:09:10.879 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:10.879 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:10.880 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:09:10.882 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:09:10.883 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:10.884 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:10.885 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:10.886 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:10.887 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:09:10.888 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:10.889 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:09:10.890 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:09:10.891 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:09:10.891 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:09:10.892 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:09:10.893 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:09:10.894 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:09:10.895 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 25.1981ms
2023-04-03 18:09:10.896 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:09:10.896 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:10.897 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:09:10.898 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:09:10.898 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:09:10.899 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:10.900 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:10.901 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:09:10.901 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:09:10.902 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 55.8608ms
2023-04-03 18:09:10.903 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:09:10.905 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:09:10.906 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:09:10.906 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:09:10.907 +04:00 [DBG] Authorization was successful.
2023-04-03 18:09:10.908 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:10.909 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:09:10.911 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:09:10.912 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:09:10.913 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:09:10.914 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:09:10.916 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:09:10.917 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:09:10.918 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:09:10.920 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:09:10.922 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:09:10.923 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:09:10.923 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:09:10.924 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:09:10.925 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:09:10.927 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:10.928 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:10.929 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:09:10.930 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:09:10.932 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:10.934 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:10.935 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:10.936 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:10.937 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 18:09:10.938 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:10.939 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:09:10.939 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:09:10.941 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:09:10.941 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:09:10.942 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:09:10.942 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:09:10.944 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:09:10.945 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 28.3655ms
2023-04-03 18:09:10.946 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:10.947 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:09:10.948 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:10.949 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 18:09:10.950 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 53.8236ms
2023-04-03 18:09:14.201 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:09:14.203 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:09:14.204 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:09:14.205 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:14.206 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:09:14.207 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:09:14.208 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:09:14.208 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:09:14.209 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:09:14.211 +04:00 [DBG] Authorization was successful.
2023-04-03 18:09:14.211 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:14.212 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:09:14.214 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:09:14.215 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:09:14.216 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:09:14.217 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:09:14.218 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:09:14.219 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:09:14.220 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:09:14.222 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:09:14.223 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:09:14.224 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:09:14.224 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:09:14.225 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:09:14.226 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:09:14.228 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:14.229 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:14.229 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:09:14.231 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:09:14.233 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:14.234 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:14.235 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:14.236 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:14.237 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 18:09:14.238 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:14.239 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:09:14.240 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:09:14.241 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:09:14.242 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:09:14.243 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:09:14.244 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:09:14.245 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:09:14.246 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 26.6655ms
2023-04-03 18:09:14.247 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:14.247 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:09:14.248 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:09:14.249 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:09:14.250 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:14.251 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:09:14.251 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:09:14.252 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:14.254 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 52.5096ms
2023-04-03 18:09:14.254 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:09:14.255 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:09:14.256 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:09:14.256 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:09:14.257 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:09:14.258 +04:00 [DBG] Authorization was successful.
2023-04-03 18:09:14.258 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:14.259 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:09:14.261 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:09:14.262 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:09:14.263 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:09:14.264 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:09:14.265 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:09:14.267 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:09:14.268 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:09:14.269 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:09:14.270 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:09:14.271 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:09:14.272 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:09:14.272 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:09:14.273 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:09:14.274 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:14.275 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:14.275 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:09:14.277 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:09:14.279 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:14.280 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:14.280 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:09:14.282 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:14.283 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:09:14.283 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:14.284 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:09:14.285 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:09:14.287 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:09:14.287 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:09:14.288 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:09:14.288 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:09:14.289 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:09:14.290 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 22.7145ms
2023-04-03 18:09:14.291 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:09:14.291 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:09:14.292 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:09:14.293 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 18:09:14.294 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 47.0256ms
2023-04-03 18:11:25.594 +04:00 [DBG] Connection id "0HMPK51CDS4VU" is closing.
2023-04-03 18:11:25.597 +04:00 [DBG] Connection id "0HMPK51CDS4VU" is closed. The last processed stream ID was 31.
2023-04-03 18:11:25.598 +04:00 [DBG] Connection id "0HMPK51CDS4VU" received FIN.
2023-04-03 18:11:25.600 +04:00 [DBG] Connection id "0HMPK51CDS4VU" sending FIN because: "The client closed the connection."
2023-04-03 18:11:25.604 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VU completed.
2023-04-03 18:11:25.605 +04:00 [DBG] Connection id "0HMPK51CDS4VU" stopped.
2023-04-03 18:13:09.521 +04:00 [DBG] Connection id "0HMPK51CDS4VV" accepted.
2023-04-03 18:13:09.523 +04:00 [DBG] Connection id "0HMPK51CDS4VV" started.
2023-04-03 18:13:09.525 +04:00 [DBG] Connection 0HMPK51CDS4VV established using the following protocol: "Tls12"
2023-04-03 18:13:09.537 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:13:09.537 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:13:09.539 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:13:09.539 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:13:09.541 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:13:09.541 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:13:09.542 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:09.543 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:09.544 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:09.545 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:09.545 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:09.546 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:09.547 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:13:09.547 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:13:09.548 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 10.8662ms
2023-04-03 18:13:09.548 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 11.5440ms
2023-04-03 18:13:09.550 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:13:09.550 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:13:09.551 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:13:09.552 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:09.553 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:09.553 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:09.554 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:09.555 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:13:09.556 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:13:09.557 +04:00 [DBG] Authorization was successful.
2023-04-03 18:13:09.557 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:09.558 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:13:09.560 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:13:09.561 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:13:09.562 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:13:09.563 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:13:09.564 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:13:09.565 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:13:09.566 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:13:09.567 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:13:09.568 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:09.569 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:13:09.570 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:13:09.571 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:13:09.571 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:13:09.573 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:09.625 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:09.627 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:09.633 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:09.635 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:09.636 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:09.638 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:09.639 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:09.640 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 18:13:09.641 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:09.642 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:13:09.643 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:13:09.645 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:13:09.646 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:13:09.646 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:13:09.647 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:13:09.648 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:13:09.649 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 84.3451ms
2023-04-03 18:13:09.650 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:09.651 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:13:09.651 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:13:09.652 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:13:09.653 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:09.654 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:13:09.655 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 18:13:09.657 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:09.658 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 108.0042ms
2023-04-03 18:13:09.659 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:09.660 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:09.660 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:09.661 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:13:09.662 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:13:09.662 +04:00 [DBG] Authorization was successful.
2023-04-03 18:13:09.663 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:09.663 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:13:09.664 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:13:09.665 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:13:09.666 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:13:09.668 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:13:09.669 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:13:09.670 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:13:09.671 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:13:09.672 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:13:09.673 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:09.674 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:13:09.675 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:13:09.675 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:13:09.676 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:13:09.677 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:09.678 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:09.679 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:09.680 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:09.683 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:09.685 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:09.686 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:09.687 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:09.691 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 8ms reading results.
2023-04-03 18:13:09.694 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:09.695 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:13:09.696 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:13:09.698 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:13:09.699 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:13:09.700 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:13:09.701 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:13:09.702 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:13:09.703 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 33.5086ms
2023-04-03 18:13:09.705 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:09.706 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:13:09.707 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:09.708 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:13:09.710 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 59.7658ms
2023-04-03 18:13:15.349 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:13:15.350 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:13:15.351 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:13:15.352 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:15.353 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:15.353 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:15.354 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:13:15.354 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 4.9929ms
2023-04-03 18:13:15.356 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 29
2023-04-03 18:13:15.357 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:13:15.357 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:13:15.358 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:13:15.359 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:15.359 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:15.360 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:15.361 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:13:15.361 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:13:15.363 +04:00 [DBG] Authorization was successful.
2023-04-03 18:13:15.363 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:13:15.364 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:13:15.365 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:13:15.366 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:13:15.367 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:13:15.368 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:13:15.369 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:13:15.370 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:13:15.373 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:13:15.374 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:13:15.375 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:13:15.376 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:13:15.377 +04:00 [DBG] Connection id "0HMPK51CDS4VV", Request id "0HMPK51CDS4VV:0000000B": started reading request body.
2023-04-03 18:13:15.380 +04:00 [DBG] Connection id "0HMPK51CDS4VV", Request id "0HMPK51CDS4VV:0000000B": done reading request body.
2023-04-03 18:13:15.381 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:13:15.382 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:13:15.382 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:13:15.383 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:13:15.384 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:13:15.386 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:13:15.387 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:15.389 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:13:15.390 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:13:15.390 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:13:15.391 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:13:15.392 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:15.393 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:15.394 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:13:15.397 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:13:15.398 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.400 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.400 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.401 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.402 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.403 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.404 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.405 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.406 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.407 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.409 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.410 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.411 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.412 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.413 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.414 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.415 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.416 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.417 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.418 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.419 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.420 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.421 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.422 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.423 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.425 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.426 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.427 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.429 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.429 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.430 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.432 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.433 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.434 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.435 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.436 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.437 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.438 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.440 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.441 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.442 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.447 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.448 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.449 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:15.450 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 51ms reading results.
2023-04-03 18:13:15.451 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:15.452 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:13:15.454 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:15.455 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:13:15.456 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:13:15.457 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:15.458 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:15.459 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:15.462 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:15.464 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:15.465 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 0ms reading results.
2023-04-03 18:13:15.466 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:15.467 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:13:15.468 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:15.469 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:13:15.470 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:13:15.471 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:15.471 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:15.473 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:13:15.476 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:13:15.479 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:15.480 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:15.480 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:13:15.481 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:15.482 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:13:15.485 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 114.6238ms
2023-04-03 18:13:15.486 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:13:15.486 +04:00 [ERR] Cashout limit is 10000 per day
BankSystem.Atm.Exceptions.CashOutLimitExceededException: Cashout limit is 10000 per day
   at BankSystem.Atm.Services.CashoutService.IsCashOutPossibleAsync(CashOutDetails details) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\CashoutService.cs:line 80
   at BankSystem.Atm.Services.CashoutService.PerformCashoutAsync(CashOutRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\CashoutService.cs:line 106
   at ATM.Api.Controllers.TransactionController.CashOut(CashOutRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\TransactionController.cs:line 35
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 18:13:15.491 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:13:15.492 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:15.493 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:13:15.494 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 29 - 1 - application/json 138.8099ms
2023-04-03 18:13:18.095 +04:00 [DBG] Connection id "0HMPK51CDS4VV" received FIN.
2023-04-03 18:13:18.097 +04:00 [DBG] Connection id "0HMPK51CDS4VV" is closed. The last processed stream ID was 11.
2023-04-03 18:13:18.097 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS4VV completed.
2023-04-03 18:13:18.099 +04:00 [DBG] Connection id "0HMPK51CDS4VV" sending FIN because: "The client closed the connection."
2023-04-03 18:13:18.110 +04:00 [DBG] Connection id "0HMPK51CDS4VV" stopped.
2023-04-03 18:13:21.999 +04:00 [DBG] Connection id "0HMPK51CDS500" accepted.
2023-04-03 18:13:22.000 +04:00 [DBG] Connection id "0HMPK51CDS500" started.
2023-04-03 18:13:22.013 +04:00 [DBG] Connection 0HMPK51CDS500 established using the following protocol: "Tls12"
2023-04-03 18:13:22.015 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:13:22.016 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:13:22.017 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:13:22.018 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:22.019 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:22.019 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:22.020 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:13:22.020 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 4.9229ms
2023-04-03 18:13:22.021 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-03 18:13:22.023 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:13:22.024 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:13:22.025 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:13:22.026 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:22.027 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:22.027 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:22.028 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:13:22.029 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:13:22.030 +04:00 [DBG] Authorization was successful.
2023-04-03 18:13:22.030 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:13:22.031 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:13:22.032 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:13:22.033 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:13:22.034 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:13:22.035 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:13:22.036 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:13:22.038 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:13:22.039 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:13:22.041 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:13:22.042 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:13:22.043 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:13:22.044 +04:00 [DBG] Connection id "0HMPK51CDS500", Request id "0HMPK51CDS500:00000003": started reading request body.
2023-04-03 18:13:22.045 +04:00 [DBG] Connection id "0HMPK51CDS500", Request id "0HMPK51CDS500:00000003": done reading request body.
2023-04-03 18:13:22.046 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:13:22.046 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:13:22.047 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:13:22.048 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:13:22.049 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:13:22.051 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:13:22.052 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:22.053 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:13:22.054 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:13:22.054 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:13:22.056 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:13:22.057 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.058 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.059 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:13:22.060 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:13:22.063 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.064 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.065 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.066 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.067 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.068 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.069 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.070 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.071 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.073 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.074 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.075 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.076 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.077 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.078 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.079 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.080 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.081 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.083 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.084 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.085 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.086 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.087 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.088 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.089 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.091 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.092 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.093 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.094 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.095 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.096 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.097 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.098 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.099 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.100 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.101 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.102 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.103 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.104 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.105 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.107 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.108 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.109 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.110 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.110 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 47ms reading results.
2023-04-03 18:13:22.112 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.112 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:13:22.114 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:22.115 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:13:22.115 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:13:22.116 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.117 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.118 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:22.120 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:22.122 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.124 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:13:22.125 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.126 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:13:22.127 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:22.128 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:13:22.129 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:13:22.130 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.131 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.132 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:13:22.133 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:13:22.135 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.136 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.137 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 18:13:22.138 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.140 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:13:22.141 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:22.142 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:13:22.143 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:13:22.144 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.144 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.145 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:13:22.148 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:13:22.149 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.151 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.152 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 18:13:22.153 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.154 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:13:22.155 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.157 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.158 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.159 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 18:13:22.160 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 18:13:22.161 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 18:13:22.162 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-03 18:13:22.163 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.164 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.165 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-03 18:13:22.166 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-03 18:13:22.167 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:22.168 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:13:22.169 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:13:22.170 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:13:22.176 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:13:22.178 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.179 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 0ms reading results.
2023-04-03 18:13:22.180 +04:00 [DBG] Committing transaction.
2023-04-03 18:13:22.181 +04:00 [DBG] Committed transaction.
2023-04-03 18:13:22.182 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.183 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:13:22.184 +04:00 [DBG] Disposing transaction.
2023-04-03 18:13:22.185 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.186 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.188 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:22.190 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-03 18:13:22.191 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:13:22.192 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:13:22.193 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:13:22.193 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:13:22.194 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:13:22.195 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:13:22.196 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 158.2351ms
2023-04-03 18:13:22.197 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:13:22.198 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:13:22.199 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:22.200 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 18:13:22.201 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28 - 200 - application/json;+charset=utf-8 179.7926ms
2023-04-03 18:13:26.727 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:13:26.727 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:13:26.728 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:13:26.728 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:13:26.729 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:13:26.730 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:13:26.730 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:26.731 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:26.732 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:26.732 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:26.733 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:26.734 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:26.734 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:13:26.735 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:13:26.735 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 8.3527ms
2023-04-03 18:13:26.736 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 8.4861ms
2023-04-03 18:13:26.737 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:13:26.737 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:13:26.738 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:13:26.740 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:26.741 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:26.741 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:26.742 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:26.743 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:13:26.743 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:13:26.745 +04:00 [DBG] Authorization was successful.
2023-04-03 18:13:26.745 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:26.746 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:13:26.747 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:13:26.748 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:13:26.749 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:13:26.751 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:13:26.752 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:13:26.753 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:13:26.754 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:13:26.756 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:13:26.758 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:26.758 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:13:26.759 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:13:26.760 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:13:26.760 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:13:26.762 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:26.763 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:26.764 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:26.765 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:26.767 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:26.768 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:26.769 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:26.770 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:26.771 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:13:26.772 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:26.773 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:13:26.774 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:13:26.776 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:13:26.777 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:13:26.778 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:13:26.778 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:13:26.779 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:13:26.780 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 27.2541ms
2023-04-03 18:13:26.781 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:13:26.781 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:26.782 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:13:26.782 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:13:26.783 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:13:26.784 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:26.785 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:26.786 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:13:26.787 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:26.788 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 50.9496ms
2023-04-03 18:13:26.788 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:26.790 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:26.791 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:13:26.792 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:13:26.792 +04:00 [DBG] Authorization was successful.
2023-04-03 18:13:26.793 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:26.794 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:13:26.795 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:13:26.796 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:13:26.797 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:13:26.799 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:13:26.800 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:13:26.801 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:13:26.802 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:13:26.803 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:13:26.804 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:26.805 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:13:26.806 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:13:26.807 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:13:26.808 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:13:26.809 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:26.810 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:26.811 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:26.813 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:26.814 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:26.815 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:26.816 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:26.817 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:26.818 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 18:13:26.819 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:26.820 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:13:26.821 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:13:26.823 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:13:26.824 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:13:26.825 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:13:26.825 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:13:26.826 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:13:26.827 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 26.2881ms
2023-04-03 18:13:26.828 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:26.829 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:13:26.830 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:26.831 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 18:13:26.831 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 50.4571ms
2023-04-03 18:13:31.417 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:13:31.418 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:13:31.419 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:13:31.420 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:31.421 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:31.422 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:31.424 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:31.436 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:13:31.437 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:13:31.438 +04:00 [DBG] Authorization was successful.
2023-04-03 18:13:31.439 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:31.440 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:13:31.441 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:13:31.442 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:13:31.443 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:13:31.445 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:13:31.446 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:13:31.447 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:13:31.448 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:13:31.449 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:13:31.451 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:31.451 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:13:31.452 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:13:31.453 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:13:31.453 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:13:31.454 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:31.456 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:31.457 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:31.459 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:31.460 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:31.461 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:31.462 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:31.463 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:31.464 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:13:31.465 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:31.466 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:13:31.467 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:13:31.469 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:13:31.469 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:13:31.470 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:13:31.470 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:13:31.472 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:13:31.473 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 26.588ms
2023-04-03 18:13:31.474 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:13:31.474 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:31.475 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:13:31.476 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:13:31.477 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:13:31.477 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:31.478 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:31.479 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 18:13:31.480 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:31.481 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 64.6999ms
2023-04-03 18:13:31.482 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:31.483 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:31.484 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:13:31.484 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:13:31.485 +04:00 [DBG] Authorization was successful.
2023-04-03 18:13:31.486 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:31.486 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:13:31.488 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:13:31.490 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:13:31.491 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:13:31.492 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:13:31.493 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:13:31.494 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:13:31.495 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:13:31.496 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:13:31.498 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:31.499 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:13:31.499 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:13:31.500 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:13:31.501 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:13:31.502 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:31.503 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:31.504 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:31.506 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:31.508 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:31.510 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:31.511 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:31.512 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:31.512 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 18:13:31.513 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:31.514 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:13:31.515 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:13:31.517 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:13:31.518 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:13:31.519 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:13:31.519 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:13:31.520 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:13:31.521 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 27.0322ms
2023-04-03 18:13:31.522 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:13:31.524 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:13:31.525 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:31.526 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:13:31.527 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 52.5130ms
2023-04-03 18:13:43.583 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:13:43.584 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:13:43.586 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:13:43.587 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:43.587 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:43.588 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:43.589 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:13:43.590 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 7.5049ms
2023-04-03 18:13:43.591 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-03 18:13:43.592 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:13:43.592 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:13:43.593 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:13:43.594 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:13:43.594 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:13:43.595 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:13:43.596 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:13:43.596 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:13:43.597 +04:00 [DBG] Authorization was successful.
2023-04-03 18:13:43.597 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:13:43.598 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:13:43.599 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:13:43.600 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:13:43.601 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:13:43.602 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:13:43.603 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:13:43.604 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:13:43.604 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:13:43.606 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:13:43.607 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:13:43.608 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:13:43.609 +04:00 [DBG] Connection id "0HMPK51CDS500", Request id "0HMPK51CDS500:00000013": started reading request body.
2023-04-03 18:13:43.610 +04:00 [DBG] Connection id "0HMPK51CDS500", Request id "0HMPK51CDS500:00000013": done reading request body.
2023-04-03 18:13:43.610 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:13:43.611 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:13:43.612 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:13:43.612 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:13:43.613 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:13:43.614 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:13:43.615 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:43.616 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:13:43.616 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:13:43.617 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:13:43.618 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:13:43.619 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:43.619 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:43.620 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:13:43.622 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:13:43.623 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.624 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.625 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.626 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.627 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.627 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.628 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.629 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.630 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.631 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.631 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.632 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.633 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.634 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.634 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.635 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.636 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.637 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.638 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.639 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.640 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.641 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.642 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.643 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.643 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.644 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.645 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.646 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.647 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.647 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.648 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.649 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.650 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.651 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.652 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.653 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.654 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.655 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.656 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.657 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.658 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.658 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.659 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.660 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:43.661 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 37ms reading results.
2023-04-03 18:13:43.662 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:43.663 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:13:43.664 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:43.665 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:13:43.666 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:13:43.666 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:43.667 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:43.668 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:43.670 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:13:43.671 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:43.672 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:13:43.673 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:43.674 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:13:43.675 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:13:43.676 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:13:43.677 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:13:43.677 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:43.678 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:43.679 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:13:43.681 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:13:43.682 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.683 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:13:43.684 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:43.685 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:13:43.686 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:43.687 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:13:43.689 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 84.3465ms
2023-04-03 18:13:43.690 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:13:43.691 +04:00 [ERR] Cashout limit is 10000 per day
BankSystem.Atm.Exceptions.CashOutLimitExceededException: Cashout limit is 10000 per day
   at BankSystem.Atm.Services.CashoutService.IsCashOutPossibleAsync(CashOutDetails details) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\CashoutService.cs:line 80
   at BankSystem.Atm.Services.CashoutService.PerformCashoutAsync(CashOutRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\CashoutService.cs:line 106
   at ATM.Api.Controllers.TransactionController.CashOut(CashOutRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\TransactionController.cs:line 35
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 18:13:43.695 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:13:43.696 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:13:43.697 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:13:43.698 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28 - 1 - application/json 106.5853ms
2023-04-03 18:13:48.131 +04:00 [DBG] Connection id "0HMPK51CDS500" received FIN.
2023-04-03 18:13:48.133 +04:00 [DBG] Connection id "0HMPK51CDS500" is closed. The last processed stream ID was 19.
2023-04-03 18:13:48.133 +04:00 [DBG] The connection queue processing loop for 0HMPK51CDS500 completed.
2023-04-03 18:13:48.135 +04:00 [DBG] Connection id "0HMPK51CDS500" sending FIN because: "The client closed the connection."
2023-04-03 18:13:48.147 +04:00 [DBG] Connection id "0HMPK51CDS500" stopped.
2023-04-03 18:15:23.859 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-03 18:15:23.986 +04:00 [DBG] Hosting starting
2023-04-03 18:15:24.066 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-03 18:15:24.074 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-03 18:15:24.095 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-03 18:15:24.104 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-03 18:15:24.113 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-03 18:15:24.119 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-03 18:15:24.123 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:15:24.126 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-03 18:15:24.129 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:15:24.132 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-03 18:15:24.136 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-03 18:15:24.140 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-03 18:15:24.142 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-03 18:15:24.473 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-03 18:15:24.474 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-03 18:15:24.476 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-03 18:15:24.477 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-03 18:15:24.478 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-03 18:15:24.480 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-03 18:15:24.481 +04:00 [INF] Hosting environment: Development
2023-04-03 18:15:24.482 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-03 18:15:24.483 +04:00 [DBG] Hosting started
2023-04-03 18:15:24.606 +04:00 [DBG] Connection id "0HMPK9NF18N6U" accepted.
2023-04-03 18:15:24.608 +04:00 [DBG] Connection id "0HMPK9NF18N6U" started.
2023-04-03 18:15:24.762 +04:00 [DBG] Connection id "0HMPK9NF18N6V" received FIN.
2023-04-03 18:15:24.762 +04:00 [DBG] Connection id "0HMPK9NF18N6U" received FIN.
2023-04-03 18:15:24.764 +04:00 [DBG] Connection id "0HMPK9NF18N6V" accepted.
2023-04-03 18:15:24.765 +04:00 [DBG] Connection id "0HMPK9NF18N6V" started.
2023-04-03 18:15:24.776 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-03 18:15:24.776 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-03 18:15:24.843 +04:00 [DBG] Connection id "0HMPK9NF18N6V" stopped.
2023-04-03 18:15:24.843 +04:00 [DBG] Connection id "0HMPK9NF18N6U" stopped.
2023-04-03 18:15:24.847 +04:00 [DBG] Connection id "0HMPK9NF18N6V" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-03 18:15:24.847 +04:00 [DBG] Connection id "0HMPK9NF18N6U" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-03 18:15:25.897 +04:00 [DBG] Connection id "0HMPK9NF18N70" accepted.
2023-04-03 18:15:25.899 +04:00 [DBG] Connection id "0HMPK9NF18N70" started.
2023-04-03 18:15:25.990 +04:00 [DBG] Connection 0HMPK9NF18N70 established using the following protocol: "Tls12"
2023-04-03 18:15:26.101 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-03 18:15:26.138 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-03 18:15:26.169 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-03 18:15:26.171 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:15:26.441 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-03 18:15:26.475 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-03 18:15:26.479 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 380.5738ms
2023-04-03 18:15:26.507 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-03 18:15:26.515 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 7.1438ms
2023-04-03 18:15:26.530 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-03 18:15:26.598 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 68.7058ms
2023-04-03 18:15:26.687 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-03 18:15:26.689 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-03 18:15:26.691 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:15:26.874 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 187.5254ms
2023-04-03 18:15:28.286 +04:00 [DBG] Connection id "0HMPK9NF18N70" received FIN.
2023-04-03 18:15:28.336 +04:00 [DBG] The connection queue processing loop for 0HMPK9NF18N70 completed.
2023-04-03 18:15:28.343 +04:00 [DBG] Connection id "0HMPK9NF18N70" is closed. The last processed stream ID was 7.
2023-04-03 18:15:28.348 +04:00 [DBG] Connection id "0HMPK9NF18N70" sending FIN because: "The client closed the connection."
2023-04-03 18:15:28.354 +04:00 [DBG] Connection id "0HMPK9NF18N70" stopped.
2023-04-03 18:15:36.652 +04:00 [DBG] Connection id "0HMPK9NF18N71" accepted.
2023-04-03 18:15:36.653 +04:00 [DBG] Connection id "0HMPK9NF18N71" started.
2023-04-03 18:15:36.660 +04:00 [DBG] Connection 0HMPK9NF18N71 established using the following protocol: "Tls12"
2023-04-03 18:15:36.663 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:15:36.668 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:15:36.669 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:15:36.672 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:15:36.676 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:15:36.677 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:15:36.678 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:15:36.680 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 16.7587ms
2023-04-03 18:15:36.682 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-03 18:15:36.683 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:15:36.686 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:15:36.688 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:15:36.689 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:15:36.690 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:15:36.691 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:15:36.936 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:15:36.939 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:15:36.948 +04:00 [DBG] Authorization was successful.
2023-04-03 18:15:36.953 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:15:36.994 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:15:36.999 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:15:37.000 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:15:37.002 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:15:37.006 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:15:37.007 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:15:37.010 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:15:37.181 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-03 18:15:37.203 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:15:37.221 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:15:37.224 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:15:37.227 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:15:37.238 +04:00 [DBG] Connection id "0HMPK9NF18N71", Request id "0HMPK9NF18N71:00000003": started reading request body.
2023-04-03 18:15:37.240 +04:00 [DBG] Connection id "0HMPK9NF18N71", Request id "0HMPK9NF18N71:00000003": done reading request body.
2023-04-03 18:15:37.246 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:15:37.248 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:15:37.249 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:15:37.250 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:15:37.266 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:15:37.688 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2023-04-03 18:15:37.690 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2023-04-03 18:15:37.991 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:15:38.046 +04:00 [DBG] Compiling query expression: 
'DbSet<CurrencyEntity>()'
2023-04-03 18:15:38.172 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CurrencyEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CurrencyEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CurrencyEntity.Code (string), 1], [Property: CurrencyEntity.Date (DateTime) Required, 2], [Property: CurrencyEntity.Diff (decimal) Required, 3], [Property: CurrencyEntity.DiffFormated (string), 4], [Property: CurrencyEntity.LastUpdatedAt (DateTime) Required, 5], [Property: CurrencyEntity.Name (string), 6], [Property: CurrencyEntity.Quantity (int) Required, 7], [Property: CurrencyEntity.Rate (decimal) Required, 8], [Property: CurrencyEntity.RateFormated (string), 9], [Property: CurrencyEntity.ValidFromDate (DateTime) Required, 10] }
        SELECT c.Id, c.Code, c.Date, c.Diff, c.DiffFormated, c.LastUpdatedAt, c.Name, c.Quantity, c.Rate, c.RateFormated, c.ValidFromDate
        FROM Currencies AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CurrencyEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-03 18:15:38.209 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:15:38.212 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:15:38.256 +04:00 [DBG] Created DbConnection. (40ms).
2023-04-03 18:15:38.266 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (58ms).
2023-04-03 18:15:38.271 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (63ms).
2023-04-03 18:15:38.278 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:15:38.554 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:15:38.561 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:15:38.598 +04:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:15:38.624 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.654 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.656 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.657 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.658 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.661 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.662 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.663 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.664 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.665 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.666 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.668 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.670 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.671 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.672 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.673 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.675 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.677 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.678 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.680 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.681 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.682 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.683 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.684 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.685 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.687 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.688 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.689 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.691 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.693 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.695 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.696 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.697 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.698 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.699 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.701 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.702 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.704 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.705 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.707 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.708 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.713 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.714 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:15:38.720 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:15:38.728 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 122ms reading results.
2023-04-03 18:15:38.733 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:15:38.739 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (6ms).
2023-04-03 18:15:38.770 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .ThenInclude(a => a.UserEntity)
    .Where(c => c.Id == __cardId_0)
    .Select(c => new CardEntityDto{ 
        AccountId = c.Account.Id, 
        AccountOwnerEmail = c.Account.UserEntity.Email, 
        AccountCurrency = c.Account.Currency, 
        AccountIban = c.Account.Iban 
    }
    )
    .FirstOrDefault()'
2023-04-03 18:15:38.876 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntityDto>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntityDto>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                AccountId -> 0
                AccountOwnerEmail -> 1
                AccountCurrency -> 2
                AccountIban -> 3
            SELECT TOP(1) a.Id AS AccountId, a0.Email AS AccountOwnerEmail, a.Currency AS AccountCurrency, a.Iban AS AccountIban
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            INNER JOIN AspNetUsers AS a0 ON a.UserId == a0.Id
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntityDto>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-03 18:15:38.885 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:15:38.886 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:15:38.890 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-03 18:15:38.891 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:15:38.893 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:15:38.897 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:15:38.921 +04:00 [INF] Executed DbCommand (27ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:15:38.925 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:15:38.926 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 18:15:38.928 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:15:38.929 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:15:38.935 +04:00 [DBG] Compiling query expression: 
'DbSet<TransactionEntity>()
    .Where(t => t.AccountFromId == __accountId_0 && t.CreatedAt.Date == DateTime.Now.Date && (int)t.TransactionType == 0)'
2023-04-03 18:15:38.948 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<TransactionEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TransactionEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TransactionEntity.AccountFromIban (string), 1], [Property: TransactionEntity.AccountFromId (Guid?), 2], [Property: TransactionEntity.AccountToIban (string), 3], [Property: TransactionEntity.AccountToId (Guid?), 4], [Property: TransactionEntity.CreatedAt (DateTime) Required, 5], [Property: TransactionEntity.CurrencyFrom (CurrencyType) Required, 6], [Property: TransactionEntity.CurrencyTo (CurrencyType) Required, 7], [Property: TransactionEntity.Fee (decimal) Required, 8], [Property: TransactionEntity.ReceivedAmount (decimal) Required, 9], [Property: TransactionEntity.TransactionType (TransactionType) Required, 10], [Property: TransactionEntity.WithDrawnAmount (decimal) Required, 11] }
        SELECT t.Id, t.AccountFromIban, t.AccountFromId, t.AccountToIban, t.AccountToId, t.CreatedAt, t.CurrencyFrom, t.CurrencyTo, t.Fee, t.ReceivedAmount, t.TransactionType, t.WithDrawnAmount
        FROM Transactions AS t
        WHERE ((t.AccountFromId == @__accountId_0) && (CONVERT(date, t.CreatedAt) == CONVERT(date, GETDATE()))) && (t.TransactionType == 0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TransactionEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-03 18:15:38.956 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:15:38.957 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:15:38.959 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:15:38.959 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:15:38.960 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:15:38.961 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:15:38.967 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:15:38.970 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:15:38.971 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:15:38.972 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:15:38.974 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:16:10.199 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-03 18:16:10.297 +04:00 [DBG] Hosting starting
2023-04-03 18:16:10.333 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-03 18:16:10.342 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-03 18:16:10.359 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-03 18:16:10.366 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-03 18:16:10.372 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-03 18:16:10.377 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-03 18:16:10.380 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:16:10.383 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-03 18:16:10.384 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:16:10.388 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-03 18:16:10.392 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-03 18:16:10.395 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-03 18:16:10.397 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-03 18:16:10.539 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-03 18:16:10.540 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-03 18:16:10.541 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-03 18:16:10.542 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-03 18:16:10.542 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-03 18:16:10.543 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-03 18:16:10.544 +04:00 [INF] Hosting environment: Development
2023-04-03 18:16:10.545 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-03 18:16:10.545 +04:00 [DBG] Hosting started
2023-04-03 18:16:10.989 +04:00 [DBG] Connection id "0HMPK9NSRJSMF" received FIN.
2023-04-03 18:16:10.995 +04:00 [DBG] Connection id "0HMPK9NSRJSMF" accepted.
2023-04-03 18:16:10.997 +04:00 [DBG] Connection id "0HMPK9NSRJSMF" started.
2023-04-03 18:16:11.010 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-03 18:16:11.056 +04:00 [DBG] Connection id "0HMPK9NSRJSMF" stopped.
2023-04-03 18:16:11.058 +04:00 [DBG] Connection id "0HMPK9NSRJSMF" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-03 18:16:11.158 +04:00 [DBG] Connection id "0HMPK9NSRJSMG" accepted.
2023-04-03 18:16:11.160 +04:00 [DBG] Connection id "0HMPK9NSRJSMG" started.
2023-04-03 18:16:11.200 +04:00 [DBG] Connection 0HMPK9NSRJSMG established using the following protocol: "Tls12"
2023-04-03 18:16:11.316 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-03 18:16:11.339 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-03 18:16:11.358 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-03 18:16:11.360 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:16:11.512 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-03 18:16:11.532 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-03 18:16:11.535 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 220.7065ms
2023-04-03 18:16:11.555 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-03 18:16:11.560 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 5.1418ms
2023-04-03 18:16:11.576 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-03 18:16:11.592 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 15.6984ms
2023-04-03 18:16:11.680 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-03 18:16:11.682 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-03 18:16:11.684 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:16:11.791 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 111.3458ms
2023-04-03 18:16:18.332 +04:00 [DBG] Connection id "0HMPK9NSRJSMG" received FIN.
2023-04-03 18:16:18.336 +04:00 [DBG] The connection queue processing loop for 0HMPK9NSRJSMG completed.
2023-04-03 18:16:18.338 +04:00 [DBG] Connection id "0HMPK9NSRJSMG" is closed. The last processed stream ID was 7.
2023-04-03 18:16:18.341 +04:00 [DBG] Connection id "0HMPK9NSRJSMG" sending FIN because: "The client closed the connection."
2023-04-03 18:16:18.346 +04:00 [DBG] Connection id "0HMPK9NSRJSMG" stopped.
2023-04-03 18:16:35.582 +04:00 [DBG] Connection id "0HMPK9NSRJSMH" accepted.
2023-04-03 18:16:35.584 +04:00 [DBG] Connection id "0HMPK9NSRJSMH" started.
2023-04-03 18:16:35.592 +04:00 [DBG] Connection 0HMPK9NSRJSMH established using the following protocol: "Tls12"
2023-04-03 18:16:38.364 +04:00 [DBG] Connection id "0HMPK9NSRJSMH" received FIN.
2023-04-03 18:16:38.366 +04:00 [DBG] Connection id "0HMPK9NSRJSMH" is closed. The last processed stream ID was 0.
2023-04-03 18:16:38.366 +04:00 [DBG] The connection queue processing loop for 0HMPK9NSRJSMH completed.
2023-04-03 18:16:38.367 +04:00 [DBG] Connection id "0HMPK9NSRJSMH" sending FIN because: "The client closed the connection."
2023-04-03 18:16:38.384 +04:00 [DBG] Connection id "0HMPK9NSRJSMH" stopped.
2023-04-03 18:19:14.130 +04:00 [DBG] Connection id "0HMPK9NSRJSMI" accepted.
2023-04-03 18:19:14.132 +04:00 [DBG] Connection id "0HMPK9NSRJSMI" started.
2023-04-03 18:19:14.150 +04:00 [DBG] Connection 0HMPK9NSRJSMI established using the following protocol: "Tls12"
2023-04-03 18:19:14.153 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:19:14.157 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:19:14.159 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:19:14.162 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:19:14.164 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:19:14.166 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:19:14.168 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:19:14.169 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 15.9247ms
2023-04-03 18:19:14.170 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-03 18:19:14.172 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:19:14.174 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:19:14.177 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:19:14.178 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:19:14.179 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:19:14.179 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:19:14.327 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:19:14.332 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:19:14.338 +04:00 [DBG] Authorization was successful.
2023-04-03 18:19:14.342 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:19:14.379 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:19:14.384 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:19:14.385 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:19:14.386 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:19:14.388 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:19:14.389 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:19:14.392 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:19:14.501 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-03 18:19:14.521 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:19:14.531 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:19:14.534 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:19:14.536 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:19:14.546 +04:00 [DBG] Connection id "0HMPK9NSRJSMI", Request id "0HMPK9NSRJSMI:00000003": started reading request body.
2023-04-03 18:19:14.547 +04:00 [DBG] Connection id "0HMPK9NSRJSMI", Request id "0HMPK9NSRJSMI:00000003": done reading request body.
2023-04-03 18:19:14.551 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:19:14.553 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:19:14.554 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:19:14.555 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:19:14.564 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:19:14.917 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2023-04-03 18:19:14.919 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2023-04-03 18:19:15.179 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:19:15.221 +04:00 [DBG] Compiling query expression: 
'DbSet<CurrencyEntity>()'
2023-04-03 18:19:15.317 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CurrencyEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CurrencyEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CurrencyEntity.Code (string), 1], [Property: CurrencyEntity.Date (DateTime) Required, 2], [Property: CurrencyEntity.Diff (decimal) Required, 3], [Property: CurrencyEntity.DiffFormated (string), 4], [Property: CurrencyEntity.LastUpdatedAt (DateTime) Required, 5], [Property: CurrencyEntity.Name (string), 6], [Property: CurrencyEntity.Quantity (int) Required, 7], [Property: CurrencyEntity.Rate (decimal) Required, 8], [Property: CurrencyEntity.RateFormated (string), 9], [Property: CurrencyEntity.ValidFromDate (DateTime) Required, 10] }
        SELECT c.Id, c.Code, c.Date, c.Diff, c.DiffFormated, c.LastUpdatedAt, c.Name, c.Quantity, c.Rate, c.RateFormated, c.ValidFromDate
        FROM Currencies AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CurrencyEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-03 18:19:15.341 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:19:15.344 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:19:15.380 +04:00 [DBG] Created DbConnection. (34ms).
2023-04-03 18:19:15.386 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (47ms).
2023-04-03 18:19:15.390 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (51ms).
2023-04-03 18:19:15.394 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.552 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.558 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:19:15.589 +04:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:19:15.622 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.649 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.652 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.653 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.654 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.655 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.657 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.658 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.659 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.660 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.661 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.662 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.664 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.665 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.666 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.667 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.669 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.670 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.671 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.672 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.673 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.674 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.675 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.676 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.678 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.679 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.680 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.681 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.682 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.684 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.685 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.686 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.687 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.689 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.690 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.691 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.692 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.693 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.694 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.695 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.696 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.700 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.701 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.706 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.710 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 114ms reading results.
2023-04-03 18:19:15.714 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.718 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (4ms).
2023-04-03 18:19:15.739 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .ThenInclude(a => a.UserEntity)
    .Where(c => c.Id == __cardId_0)
    .Select(c => new CardEntityDto{ 
        AccountId = c.Account.Id, 
        AccountOwnerEmail = c.Account.UserEntity.Email, 
        AccountCurrency = c.Account.Currency, 
        AccountIban = c.Account.Iban 
    }
    )
    .FirstOrDefault()'
2023-04-03 18:19:15.820 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntityDto>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntityDto>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                AccountId -> 0
                AccountOwnerEmail -> 1
                AccountCurrency -> 2
                AccountIban -> 3
            SELECT TOP(1) a.Id AS AccountId, a0.Email AS AccountOwnerEmail, a.Currency AS AccountCurrency, a.Iban AS AccountIban
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            INNER JOIN AspNetUsers AS a0 ON a.UserId == a0.Id
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntityDto>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-03 18:19:15.829 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:19:15.831 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:19:15.834 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-03 18:19:15.835 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.838 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.841 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:19:15.876 +04:00 [INF] Executed DbCommand (37ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:19:15.880 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.881 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 18:19:15.884 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.885 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:19:15.890 +04:00 [DBG] Compiling query expression: 
'DbSet<TransactionEntity>()
    .Where(t => t.AccountFromId == __accountId_0 && t.CreatedAt.Date == DateTime.Now.Date && (int)t.TransactionType == 0)'
2023-04-03 18:19:15.903 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<TransactionEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TransactionEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TransactionEntity.AccountFromIban (string), 1], [Property: TransactionEntity.AccountFromId (Guid?), 2], [Property: TransactionEntity.AccountToIban (string), 3], [Property: TransactionEntity.AccountToId (Guid?), 4], [Property: TransactionEntity.CreatedAt (DateTime) Required, 5], [Property: TransactionEntity.CurrencyFrom (CurrencyType) Required, 6], [Property: TransactionEntity.CurrencyTo (CurrencyType) Required, 7], [Property: TransactionEntity.Fee (decimal) Required, 8], [Property: TransactionEntity.ReceivedAmount (decimal) Required, 9], [Property: TransactionEntity.TransactionType (TransactionType) Required, 10], [Property: TransactionEntity.WithDrawnAmount (decimal) Required, 11] }
        SELECT t.Id, t.AccountFromIban, t.AccountFromId, t.AccountToIban, t.AccountToId, t.CreatedAt, t.CurrencyFrom, t.CurrencyTo, t.Fee, t.ReceivedAmount, t.TransactionType, t.WithDrawnAmount
        FROM Transactions AS t
        WHERE ((t.AccountFromId == @__accountId_0) && (CONVERT(date, t.CreatedAt) == CONVERT(date, GETDATE()))) && (t.TransactionType == 0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TransactionEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-03 18:19:15.912 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:19:15.913 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:19:15.915 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:19:15.916 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.917 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.919 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:19:15.923 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:19:15.926 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.927 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:19:15.928 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.929 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:19:15.937 +04:00 [DBG] Compiling query expression: 
'DbSet<AccountEntity>()
    .FirstOrDefault(a => a.Id == __accountId_0)'
2023-04-03 18:19:15.943 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AccountEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<AccountEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AccountEntity.Amount (decimal) Required, 1], [Property: AccountEntity.Currency (CurrencyType) Required, 2], [Property: AccountEntity.Iban (string), 3], [Property: AccountEntity.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Accounts AS a
            WHERE a.Id == @__accountId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-03 18:19:15.946 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:19:15.947 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:19:15.948 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:19:15.949 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.951 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.952 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:19:15.955 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:19:15.963 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:15.974 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.976 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 18ms reading results.
2023-04-03 18:19:15.977 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:15.979 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:19:15.986 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:16.027 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:16.044 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:16.047 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 18:19:16.051 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 18:19:16.078 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 18:19:16.139 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-03 18:19:16.142 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:16.143 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:16.146 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-03 18:19:16.152 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-03 18:19:16.155 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:19:16.156 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:19:16.160 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-03 18:19:16.161 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:19:16.183 +04:00 [INF] Executed DbCommand (21ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:19:16.189 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:16.191 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 18:19:16.194 +04:00 [DBG] Committing transaction.
2023-04-03 18:19:16.198 +04:00 [DBG] Committed transaction.
2023-04-03 18:19:16.200 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:16.201 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:19:16.204 +04:00 [DBG] Disposing transaction.
2023-04-03 18:19:16.208 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:16.210 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:16.212 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:19:16.215 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-03 18:19:16.219 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:19:16.223 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:19:16.224 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:19:16.225 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:19:16.226 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:19:16.228 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:19:16.245 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 1852.4681ms
2023-04-03 18:19:16.246 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:19:16.249 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:19:16.253 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:19:16.255 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 18:19:16.256 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28 - 200 - application/json;+charset=utf-8 2086.1017ms
2023-04-03 18:20:04.015 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-03 18:20:04.178 +04:00 [DBG] Hosting starting
2023-04-03 18:20:04.252 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-03 18:20:04.259 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-03 18:20:04.267 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-03 18:20:04.272 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-03 18:20:04.279 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-03 18:20:04.287 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-03 18:20:04.291 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:20:04.295 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-03 18:20:04.298 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:20:04.304 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-03 18:20:04.309 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-03 18:20:04.314 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-03 18:20:04.316 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-03 18:20:04.510 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-03 18:20:04.511 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-03 18:20:04.513 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-03 18:20:04.514 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-03 18:20:04.515 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-03 18:20:04.516 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-03 18:20:04.516 +04:00 [INF] Hosting environment: Development
2023-04-03 18:20:04.517 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-03 18:20:04.518 +04:00 [DBG] Hosting started
2023-04-03 18:20:04.755 +04:00 [DBG] Connection id "0HMPK9Q2GVHFA" received FIN.
2023-04-03 18:20:04.761 +04:00 [DBG] Connection id "0HMPK9Q2GVHFA" accepted.
2023-04-03 18:20:04.763 +04:00 [DBG] Connection id "0HMPK9Q2GVHFA" started.
2023-04-03 18:20:04.783 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-03 18:20:04.834 +04:00 [DBG] Connection id "0HMPK9Q2GVHFA" stopped.
2023-04-03 18:20:04.839 +04:00 [DBG] Connection id "0HMPK9Q2GVHFA" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-03 18:20:05.461 +04:00 [DBG] Connection id "0HMPK9Q2GVHFB" accepted.
2023-04-03 18:20:05.462 +04:00 [DBG] Connection id "0HMPK9Q2GVHFB" started.
2023-04-03 18:20:05.519 +04:00 [DBG] Connection 0HMPK9Q2GVHFB established using the following protocol: "Tls12"
2023-04-03 18:20:05.582 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-03 18:20:05.607 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-03 18:20:05.635 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-03 18:20:05.636 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:20:05.843 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-03 18:20:05.868 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-03 18:20:05.871 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 290.9921ms
2023-04-03 18:20:05.896 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-03 18:20:05.903 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 6.8932ms
2023-04-03 18:20:05.939 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-03 18:20:06.028 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 89.5298ms
2023-04-03 18:20:06.105 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-03 18:20:06.107 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-03 18:20:06.108 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:20:06.243 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 137.3955ms
2023-04-03 18:20:08.687 +04:00 [DBG] Connection id "0HMPK9Q2GVHFB" received FIN.
2023-04-03 18:20:08.689 +04:00 [DBG] The connection queue processing loop for 0HMPK9Q2GVHFB completed.
2023-04-03 18:20:08.691 +04:00 [DBG] Connection id "0HMPK9Q2GVHFB" is closed. The last processed stream ID was 7.
2023-04-03 18:20:08.692 +04:00 [DBG] Connection id "0HMPK9Q2GVHFB" sending FIN because: "The client closed the connection."
2023-04-03 18:20:08.701 +04:00 [DBG] Connection id "0HMPK9Q2GVHFB" stopped.
2023-04-03 18:20:20.103 +04:00 [DBG] Connection id "0HMPK9Q2GVHFC" accepted.
2023-04-03 18:20:20.104 +04:00 [DBG] Connection id "0HMPK9Q2GVHFC" started.
2023-04-03 18:20:20.112 +04:00 [DBG] Connection 0HMPK9Q2GVHFC established using the following protocol: "Tls12"
2023-04-03 18:20:20.116 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:20:20.123 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:20:20.124 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:20:20.126 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:20:20.129 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:20:20.130 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:20:20.131 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:20:20.133 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 17.2989ms
2023-04-03 18:20:20.134 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-03 18:20:20.136 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:20:20.139 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:20:20.141 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:20:20.142 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:20:20.143 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:20:20.144 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:20:20.427 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:20:20.431 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:20:20.440 +04:00 [DBG] Authorization was successful.
2023-04-03 18:20:20.445 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:20:20.476 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:20:20.479 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:20:20.481 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:20:20.482 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:20:20.484 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:20:20.485 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:20:20.488 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:20:20.666 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-03 18:20:20.696 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:20:20.716 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:20:20.720 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:20:20.724 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:20:20.737 +04:00 [DBG] Connection id "0HMPK9Q2GVHFC", Request id "0HMPK9Q2GVHFC:00000003": started reading request body.
2023-04-03 18:20:20.738 +04:00 [DBG] Connection id "0HMPK9Q2GVHFC", Request id "0HMPK9Q2GVHFC:00000003": done reading request body.
2023-04-03 18:20:20.744 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:20:20.746 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:20:20.748 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:20:20.754 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:20:20.772 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:20:21.208 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2023-04-03 18:20:21.210 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2023-04-03 18:20:21.516 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:20:21.577 +04:00 [DBG] Compiling query expression: 
'DbSet<CurrencyEntity>()'
2023-04-03 18:20:21.718 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CurrencyEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CurrencyEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CurrencyEntity.Code (string), 1], [Property: CurrencyEntity.Date (DateTime) Required, 2], [Property: CurrencyEntity.Diff (decimal) Required, 3], [Property: CurrencyEntity.DiffFormated (string), 4], [Property: CurrencyEntity.LastUpdatedAt (DateTime) Required, 5], [Property: CurrencyEntity.Name (string), 6], [Property: CurrencyEntity.Quantity (int) Required, 7], [Property: CurrencyEntity.Rate (decimal) Required, 8], [Property: CurrencyEntity.RateFormated (string), 9], [Property: CurrencyEntity.ValidFromDate (DateTime) Required, 10] }
        SELECT c.Id, c.Code, c.Date, c.Diff, c.DiffFormated, c.LastUpdatedAt, c.Name, c.Quantity, c.Rate, c.RateFormated, c.ValidFromDate
        FROM Currencies AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CurrencyEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-03 18:20:21.748 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:20:21.751 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:20:21.800 +04:00 [DBG] Created DbConnection. (46ms).
2023-04-03 18:20:21.807 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (61ms).
2023-04-03 18:20:21.810 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (64ms).
2023-04-03 18:20:21.815 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:20:22.081 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:20:22.089 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:20:22.126 +04:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:20:22.162 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.192 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.194 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.195 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.196 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.198 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.199 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.201 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.202 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.203 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.204 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.206 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.207 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.208 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.209 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.210 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.211 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.213 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.214 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.215 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.216 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.218 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.219 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.220 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.222 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.223 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.224 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.225 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.226 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.227 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.228 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.230 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.231 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.232 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.234 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.235 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.236 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.237 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.239 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.240 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.241 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.245 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.247 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:20:22.253 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:20:22.269 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 136ms reading results.
2023-04-03 18:20:22.274 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:20:22.279 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (5ms).
2023-04-03 18:20:22.304 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .ThenInclude(a => a.UserEntity)
    .Where(c => c.Id == __cardId_0)
    .Select(c => new CardEntityDto{ 
        AccountId = c.Account.Id, 
        AccountOwnerEmail = c.Account.UserEntity.Email, 
        AccountCurrency = c.Account.Currency, 
        AccountIban = c.Account.Iban 
    }
    )
    .FirstOrDefault()'
2023-04-03 18:20:22.400 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntityDto>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntityDto>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                AccountId -> 0
                AccountOwnerEmail -> 1
                AccountCurrency -> 2
                AccountIban -> 3
            SELECT TOP(1) a.Id AS AccountId, a0.Email AS AccountOwnerEmail, a.Currency AS AccountCurrency, a.Iban AS AccountIban
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            INNER JOIN AspNetUsers AS a0 ON a.UserId == a0.Id
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntityDto>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-03 18:20:22.409 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:20:22.411 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:20:22.415 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-03 18:20:22.416 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:20:22.418 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:20:22.422 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:20:22.450 +04:00 [INF] Executed DbCommand (31ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:20:22.454 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:20:22.456 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:20:22.457 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:20:22.458 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:20:22.465 +04:00 [DBG] Compiling query expression: 
'DbSet<TransactionEntity>()
    .Where(t => t.AccountFromId == __accountId_0 && t.CreatedAt.Date == DateTime.Now.Date && (int)t.TransactionType == 0)'
2023-04-03 18:20:22.478 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<TransactionEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TransactionEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TransactionEntity.AccountFromIban (string), 1], [Property: TransactionEntity.AccountFromId (Guid?), 2], [Property: TransactionEntity.AccountToIban (string), 3], [Property: TransactionEntity.AccountToId (Guid?), 4], [Property: TransactionEntity.CreatedAt (DateTime) Required, 5], [Property: TransactionEntity.CurrencyFrom (CurrencyType) Required, 6], [Property: TransactionEntity.CurrencyTo (CurrencyType) Required, 7], [Property: TransactionEntity.Fee (decimal) Required, 8], [Property: TransactionEntity.ReceivedAmount (decimal) Required, 9], [Property: TransactionEntity.TransactionType (TransactionType) Required, 10], [Property: TransactionEntity.WithDrawnAmount (decimal) Required, 11] }
        SELECT t.Id, t.AccountFromIban, t.AccountFromId, t.AccountToIban, t.AccountToId, t.CreatedAt, t.CurrencyFrom, t.CurrencyTo, t.Fee, t.ReceivedAmount, t.TransactionType, t.WithDrawnAmount
        FROM Transactions AS t
        WHERE ((t.AccountFromId == @__accountId_0) && (CONVERT(date, t.CreatedAt) == CONVERT(date, GETDATE()))) && (t.TransactionType == 0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TransactionEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-03 18:20:22.490 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:20:22.491 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:20:22.493 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:20:22.494 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:20:22.495 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:20:22.496 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:20:22.500 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:20:22.503 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:20:22.523 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 20ms reading results.
2023-04-03 18:20:22.525 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:20:22.526 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:20:59.509 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-03 18:20:59.673 +04:00 [DBG] Hosting starting
2023-04-03 18:20:59.723 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-03 18:20:59.729 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-03 18:20:59.736 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-03 18:20:59.741 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-03 18:20:59.745 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-03 18:20:59.754 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-03 18:20:59.759 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:20:59.762 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-03 18:20:59.766 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:20:59.770 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-03 18:20:59.775 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-03 18:20:59.781 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-03 18:20:59.783 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-03 18:20:59.974 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-03 18:20:59.975 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-03 18:20:59.976 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-03 18:20:59.978 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-03 18:20:59.978 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-03 18:20:59.980 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-03 18:20:59.981 +04:00 [INF] Hosting environment: Development
2023-04-03 18:20:59.982 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-03 18:20:59.983 +04:00 [DBG] Hosting started
2023-04-03 18:21:00.236 +04:00 [DBG] Connection id "0HMPK9QJ231F0" received FIN.
2023-04-03 18:21:00.243 +04:00 [DBG] Connection id "0HMPK9QJ231F0" accepted.
2023-04-03 18:21:00.246 +04:00 [DBG] Connection id "0HMPK9QJ231F0" started.
2023-04-03 18:21:00.265 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-03 18:21:00.313 +04:00 [DBG] Connection id "0HMPK9QJ231F0" stopped.
2023-04-03 18:21:00.317 +04:00 [DBG] Connection id "0HMPK9QJ231F0" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-03 18:21:00.752 +04:00 [DBG] Connection id "0HMPK9QJ231F1" accepted.
2023-04-03 18:21:00.754 +04:00 [DBG] Connection id "0HMPK9QJ231F1" started.
2023-04-03 18:21:00.827 +04:00 [DBG] Connection 0HMPK9QJ231F1 established using the following protocol: "Tls12"
2023-04-03 18:21:00.943 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-03 18:21:00.970 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-03 18:21:00.991 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-03 18:21:00.993 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:21:01.185 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-03 18:21:01.211 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-03 18:21:01.217 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 275.5030ms
2023-04-03 18:21:01.236 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-03 18:21:01.243 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 7.1821ms
2023-04-03 18:21:01.259 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-03 18:21:01.295 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 36.0992ms
2023-04-03 18:21:01.377 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-03 18:21:01.379 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-03 18:21:01.380 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:21:01.488 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 110.3582ms
2023-04-03 18:21:04.277 +04:00 [DBG] Connection id "0HMPK9QJ231F2" accepted.
2023-04-03 18:21:04.278 +04:00 [DBG] Connection id "0HMPK9QJ231F2" started.
2023-04-03 18:21:04.285 +04:00 [DBG] Connection 0HMPK9QJ231F2 established using the following protocol: "Tls12"
2023-04-03 18:21:04.288 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:21:04.293 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:21:04.294 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:21:04.297 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:21:04.301 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:21:04.302 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:21:04.303 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:21:04.305 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 16.8844ms
2023-04-03 18:21:04.307 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-03 18:21:04.308 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:21:04.311 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:21:04.312 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:21:04.314 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:21:04.315 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:21:04.316 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:21:04.552 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:21:04.555 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:21:04.561 +04:00 [DBG] Authorization was successful.
2023-04-03 18:21:04.564 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:21:04.585 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:21:04.589 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:21:04.591 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:21:04.592 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:21:04.593 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:21:04.594 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:21:04.597 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:21:04.762 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-03 18:21:04.783 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:21:04.799 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:21:04.803 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:21:04.806 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:21:04.817 +04:00 [DBG] Connection id "0HMPK9QJ231F2", Request id "0HMPK9QJ231F2:00000003": started reading request body.
2023-04-03 18:21:04.818 +04:00 [DBG] Connection id "0HMPK9QJ231F2", Request id "0HMPK9QJ231F2:00000003": done reading request body.
2023-04-03 18:21:04.825 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:21:04.828 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:21:04.829 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:21:04.831 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:21:04.844 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:24:36.897 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-03 18:24:37.027 +04:00 [DBG] Hosting starting
2023-04-03 18:24:37.116 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-03 18:24:37.152 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-03 18:24:37.168 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-03 18:24:37.180 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-03 18:24:37.191 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-03 18:24:37.203 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-03 18:24:37.211 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:24:37.215 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-03 18:24:37.219 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:24:37.224 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-03 18:24:37.232 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-03 18:24:37.239 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-03 18:24:37.242 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-03 18:24:37.430 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-03 18:24:37.432 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-03 18:24:37.433 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-03 18:24:37.434 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-03 18:24:37.435 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-03 18:24:37.436 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-03 18:24:37.437 +04:00 [INF] Hosting environment: Development
2023-04-03 18:24:37.437 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-03 18:24:37.438 +04:00 [DBG] Hosting started
2023-04-03 18:24:37.884 +04:00 [DBG] Connection id "0HMPK9SJTNNVJ" received FIN.
2023-04-03 18:24:37.897 +04:00 [DBG] Connection id "0HMPK9SJTNNVJ" accepted.
2023-04-03 18:24:37.900 +04:00 [DBG] Connection id "0HMPK9SJTNNVJ" started.
2023-04-03 18:24:37.922 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-03 18:24:37.972 +04:00 [DBG] Connection id "0HMPK9SJTNNVJ" stopped.
2023-04-03 18:24:37.976 +04:00 [DBG] Connection id "0HMPK9SJTNNVJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-03 18:24:38.391 +04:00 [DBG] Connection id "0HMPK9SJTNNVK" accepted.
2023-04-03 18:24:38.395 +04:00 [DBG] Connection id "0HMPK9SJTNNVK" started.
2023-04-03 18:24:39.010 +04:00 [DBG] Connection 0HMPK9SJTNNVK established using the following protocol: "Tls12"
2023-04-03 18:24:39.078 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-03 18:24:39.102 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-03 18:24:39.135 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-03 18:24:39.138 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:24:39.312 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-03 18:24:39.340 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-03 18:24:39.345 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 267.5862ms
2023-04-03 18:24:39.366 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-03 18:24:39.396 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 29.6152ms
2023-04-03 18:24:39.409 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-03 18:24:39.447 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 37.8340ms
2023-04-03 18:24:39.523 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-03 18:24:39.524 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-03 18:24:39.525 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:24:39.656 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 132.8855ms
2023-04-03 18:24:44.390 +04:00 [DBG] Connection id "0HMPK9SJTNNVL" accepted.
2023-04-03 18:24:44.400 +04:00 [DBG] Connection id "0HMPK9SJTNNVL" started.
2023-04-03 18:24:44.407 +04:00 [DBG] Connection 0HMPK9SJTNNVL established using the following protocol: "Tls12"
2023-04-03 18:24:44.411 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:24:44.418 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:24:44.420 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:24:44.423 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:24:44.426 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:24:44.428 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:24:44.430 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:24:44.432 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 20.9537ms
2023-04-03 18:24:44.433 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-03 18:24:44.435 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:24:44.438 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:24:44.440 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:24:44.440 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:24:44.441 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:24:44.442 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:24:44.680 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:24:44.683 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:24:44.688 +04:00 [DBG] Authorization was successful.
2023-04-03 18:24:44.691 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:24:44.710 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:24:44.714 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:24:44.715 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:24:44.716 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:24:44.718 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:24:44.719 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:24:44.722 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:24:44.878 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-03 18:24:44.915 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:24:44.932 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:24:44.936 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:24:44.939 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:24:44.951 +04:00 [DBG] Connection id "0HMPK9SJTNNVL", Request id "0HMPK9SJTNNVL:00000003": started reading request body.
2023-04-03 18:24:44.953 +04:00 [DBG] Connection id "0HMPK9SJTNNVL", Request id "0HMPK9SJTNNVL:00000003": done reading request body.
2023-04-03 18:24:44.959 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:24:44.961 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:24:44.962 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:24:44.963 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:24:44.974 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:26:27.236 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-03 18:26:27.427 +04:00 [DBG] Hosting starting
2023-04-03 18:26:27.490 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-03 18:26:27.498 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-03 18:26:27.507 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-03 18:26:27.513 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-03 18:26:27.521 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-03 18:26:27.531 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-03 18:26:27.536 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:26:27.540 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-03 18:26:27.543 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:26:27.548 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-03 18:26:27.552 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-03 18:26:27.556 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-03 18:26:27.558 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-03 18:26:27.782 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-03 18:26:27.783 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-03 18:26:27.784 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-03 18:26:27.785 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-03 18:26:27.786 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-03 18:26:27.787 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-03 18:26:27.788 +04:00 [INF] Hosting environment: Development
2023-04-03 18:26:27.789 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-03 18:26:27.789 +04:00 [DBG] Hosting started
2023-04-03 18:26:27.931 +04:00 [DBG] Connection id "0HMPK9TKN7DHN" accepted.
2023-04-03 18:26:27.932 +04:00 [DBG] Connection id "0HMPK9TKN7DHN" started.
2023-04-03 18:26:27.942 +04:00 [DBG] Connection id "0HMPK9TKN7DHN" received FIN.
2023-04-03 18:26:27.942 +04:00 [DBG] Connection id "0HMPK9TKN7DHO" received FIN.
2023-04-03 18:26:27.945 +04:00 [DBG] Connection id "0HMPK9TKN7DHO" accepted.
2023-04-03 18:26:27.946 +04:00 [DBG] Connection id "0HMPK9TKN7DHO" started.
2023-04-03 18:26:27.951 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-03 18:26:27.951 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-03 18:26:27.994 +04:00 [DBG] Connection id "0HMPK9TKN7DHO" stopped.
2023-04-03 18:26:27.994 +04:00 [DBG] Connection id "0HMPK9TKN7DHN" stopped.
2023-04-03 18:26:27.998 +04:00 [DBG] Connection id "0HMPK9TKN7DHO" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-03 18:26:27.998 +04:00 [DBG] Connection id "0HMPK9TKN7DHN" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-03 18:26:28.377 +04:00 [DBG] Connection id "0HMPK9TKN7DHP" accepted.
2023-04-03 18:26:28.382 +04:00 [DBG] Connection id "0HMPK9TKN7DHP" started.
2023-04-03 18:26:28.451 +04:00 [DBG] Connection 0HMPK9TKN7DHP established using the following protocol: "Tls12"
2023-04-03 18:26:28.517 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-03 18:26:28.540 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-03 18:26:28.560 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-03 18:26:28.561 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:26:28.755 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-03 18:26:28.775 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-03 18:26:28.779 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 263.6450ms
2023-04-03 18:26:28.795 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-03 18:26:28.801 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 5.1773ms
2023-04-03 18:26:28.821 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-03 18:26:28.856 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 34.5059ms
2023-04-03 18:26:28.932 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-03 18:26:28.934 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-03 18:26:28.935 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:26:29.059 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 126.6392ms
2023-04-03 18:26:30.773 +04:00 [DBG] Connection id "0HMPK9TKN7DHQ" accepted.
2023-04-03 18:26:30.774 +04:00 [DBG] Connection id "0HMPK9TKN7DHQ" started.
2023-04-03 18:26:30.789 +04:00 [DBG] Connection 0HMPK9TKN7DHQ established using the following protocol: "Tls12"
2023-04-03 18:26:30.793 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:26:30.798 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:26:30.800 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:26:30.802 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:26:30.805 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:26:30.806 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:26:30.808 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:26:30.810 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 17.3104ms
2023-04-03 18:26:30.812 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 30
2023-04-03 18:26:30.813 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:26:30.816 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:26:30.818 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:26:30.819 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:26:30.820 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:26:30.821 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:26:31.057 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:26:31.060 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:26:31.067 +04:00 [DBG] Authorization was successful.
2023-04-03 18:26:31.070 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:26:31.091 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:26:31.094 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:26:31.096 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:26:31.097 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:26:31.099 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:26:31.100 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:26:31.102 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:26:31.271 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-03 18:26:31.295 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:26:31.312 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:26:31.317 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:26:31.320 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:26:31.330 +04:00 [DBG] Connection id "0HMPK9TKN7DHQ", Request id "0HMPK9TKN7DHQ:00000003": started reading request body.
2023-04-03 18:26:31.332 +04:00 [DBG] Connection id "0HMPK9TKN7DHQ", Request id "0HMPK9TKN7DHQ:00000003": done reading request body.
2023-04-03 18:26:31.336 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:26:31.338 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:26:31.339 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:26:31.340 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:26:31.351 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:28:30.091 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-03 18:28:30.200 +04:00 [DBG] Hosting starting
2023-04-03 18:28:30.260 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-03 18:28:30.266 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-03 18:28:30.276 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-03 18:28:30.281 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-03 18:28:30.294 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-03 18:28:30.301 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-03 18:28:30.307 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:28:30.310 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-03 18:28:30.312 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:28:30.317 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-03 18:28:30.322 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-03 18:28:30.327 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-03 18:28:30.329 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-03 18:28:30.616 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-03 18:28:30.617 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-03 18:28:30.618 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-03 18:28:30.620 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-03 18:28:30.621 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-03 18:28:30.623 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-03 18:28:30.625 +04:00 [INF] Hosting environment: Development
2023-04-03 18:28:30.626 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-03 18:28:30.628 +04:00 [DBG] Hosting started
2023-04-03 18:28:30.959 +04:00 [DBG] Connection id "0HMPK9UPCGP8R" received FIN.
2023-04-03 18:28:30.966 +04:00 [DBG] Connection id "0HMPK9UPCGP8R" accepted.
2023-04-03 18:28:30.968 +04:00 [DBG] Connection id "0HMPK9UPCGP8R" started.
2023-04-03 18:28:30.991 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-03 18:28:31.071 +04:00 [DBG] Connection id "0HMPK9UPCGP8R" stopped.
2023-04-03 18:28:31.075 +04:00 [DBG] Connection id "0HMPK9UPCGP8R" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-03 18:28:31.449 +04:00 [DBG] Connection id "0HMPK9UPCGP8S" accepted.
2023-04-03 18:28:31.451 +04:00 [DBG] Connection id "0HMPK9UPCGP8S" started.
2023-04-03 18:28:31.551 +04:00 [DBG] Connection 0HMPK9UPCGP8S established using the following protocol: "Tls12"
2023-04-03 18:28:31.652 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-03 18:28:31.683 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-03 18:28:31.715 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-03 18:28:31.717 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:28:31.944 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-03 18:28:31.974 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-03 18:28:31.977 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 326.7360ms
2023-04-03 18:28:31.990 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-03 18:28:31.997 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 6.5444ms
2023-04-03 18:28:32.012 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-03 18:28:32.047 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 34.5480ms
2023-04-03 18:28:32.108 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-03 18:28:32.110 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-03 18:28:32.111 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:28:32.249 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 140.4766ms
2023-04-03 18:28:33.685 +04:00 [DBG] Connection id "0HMPK9UPCGP8T" accepted.
2023-04-03 18:28:33.686 +04:00 [DBG] Connection id "0HMPK9UPCGP8T" started.
2023-04-03 18:28:33.693 +04:00 [DBG] Connection 0HMPK9UPCGP8T established using the following protocol: "Tls12"
2023-04-03 18:28:33.698 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:28:33.704 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:28:33.706 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:28:33.708 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:28:33.711 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:28:33.712 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:28:33.714 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:28:33.716 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 18.2125ms
2023-04-03 18:28:33.718 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-03 18:28:33.719 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:28:33.723 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:28:33.726 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:28:33.727 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:28:33.728 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:28:33.729 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:28:34.029 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:28:34.032 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:28:34.044 +04:00 [DBG] Authorization was successful.
2023-04-03 18:28:34.048 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:28:34.091 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:28:34.094 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:28:34.096 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:28:34.098 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:28:34.100 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:28:34.102 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:28:34.106 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:28:34.269 +04:00 [DBG] Connection id "0HMPK9UPCGP8S" received FIN.
2023-04-03 18:28:34.280 +04:00 [DBG] The connection queue processing loop for 0HMPK9UPCGP8S completed.
2023-04-03 18:28:34.283 +04:00 [DBG] Connection id "0HMPK9UPCGP8S" is closed. The last processed stream ID was 7.
2023-04-03 18:28:34.284 +04:00 [DBG] Connection id "0HMPK9UPCGP8S" sending FIN because: "The client closed the connection."
2023-04-03 18:28:34.297 +04:00 [DBG] Connection id "0HMPK9UPCGP8S" stopped.
2023-04-03 18:28:34.317 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-03 18:28:34.345 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:28:34.361 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:28:34.365 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:28:34.368 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:28:34.380 +04:00 [DBG] Connection id "0HMPK9UPCGP8T", Request id "0HMPK9UPCGP8T:00000003": started reading request body.
2023-04-03 18:28:34.381 +04:00 [DBG] Connection id "0HMPK9UPCGP8T", Request id "0HMPK9UPCGP8T:00000003": done reading request body.
2023-04-03 18:28:34.391 +04:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Decimal. Path: $.amount | LineNumber: 0 | BytePositionInLine: 14.
2023-04-03 18:28:34.392 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:28:34.394 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:28:34.396 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:28:34.403 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:28:34.407 +04:00 [DBG] The request has model state errors, returning an error response.
2023-04-03 18:28:34.409 +04:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-04-03 18:28:34.412 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:28:34.415 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:28:34.416 +04:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-04-03 18:28:34.419 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-04-03 18:28:34.420 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-04-03 18:28:34.429 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 323.564ms
2023-04-03 18:28:34.430 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:28:34.433 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28 - 400 - application/problem+json;+charset=utf-8 715.3284ms
2023-04-03 18:28:42.699 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:28:42.701 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:28:42.703 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:28:42.704 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:28:42.707 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:28:42.708 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:28:42.710 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:28:42.711 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 11.0675ms
2023-04-03 18:28:42.712 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-03 18:28:42.713 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:28:42.715 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:28:42.716 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:28:42.717 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:28:42.718 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:28:42.719 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:28:42.721 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:28:42.721 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:28:42.724 +04:00 [DBG] Authorization was successful.
2023-04-03 18:28:42.726 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:28:42.727 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:28:42.728 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:28:42.729 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:28:42.731 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:28:42.741 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:28:42.742 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:28:42.743 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:28:42.751 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:28:42.752 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:28:42.753 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:28:42.755 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:28:42.756 +04:00 [DBG] Connection id "0HMPK9UPCGP8T", Request id "0HMPK9UPCGP8T:00000007": started reading request body.
2023-04-03 18:28:42.758 +04:00 [DBG] Connection id "0HMPK9UPCGP8T", Request id "0HMPK9UPCGP8T:00000007": done reading request body.
2023-04-03 18:28:42.760 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:28:42.761 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:28:42.762 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:28:42.763 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:28:42.769 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:32:10.172 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-03 18:32:10.288 +04:00 [DBG] Hosting starting
2023-04-03 18:32:10.354 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-03 18:32:10.362 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-03 18:32:10.382 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-03 18:32:10.390 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-03 18:32:10.398 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-03 18:32:10.405 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-03 18:32:10.410 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:32:10.414 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-03 18:32:10.417 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:32:10.421 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-03 18:32:10.426 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-03 18:32:10.430 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-03 18:32:10.431 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-03 18:32:10.679 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-03 18:32:10.680 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-03 18:32:10.681 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-03 18:32:10.683 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-03 18:32:10.684 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-03 18:32:10.685 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-03 18:32:10.686 +04:00 [INF] Hosting environment: Development
2023-04-03 18:32:10.687 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-03 18:32:10.688 +04:00 [DBG] Hosting started
2023-04-03 18:32:11.084 +04:00 [DBG] Connection id "0HMPKA0QVP4LA" accepted.
2023-04-03 18:32:11.086 +04:00 [DBG] Connection id "0HMPKA0QVP4LA" started.
2023-04-03 18:32:11.121 +04:00 [DBG] Connection id "0HMPKA0QVP4LA" received FIN.
2023-04-03 18:32:11.130 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-03 18:32:11.208 +04:00 [DBG] Connection id "0HMPKA0QVP4LA" stopped.
2023-04-03 18:32:11.211 +04:00 [DBG] Connection id "0HMPKA0QVP4LA" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-03 18:32:11.624 +04:00 [DBG] Connection id "0HMPKA0QVP4LB" accepted.
2023-04-03 18:32:11.626 +04:00 [DBG] Connection id "0HMPKA0QVP4LB" started.
2023-04-03 18:32:11.699 +04:00 [DBG] Connection 0HMPKA0QVP4LB established using the following protocol: "Tls12"
2023-04-03 18:32:11.780 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-03 18:32:11.807 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-03 18:32:11.830 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-03 18:32:11.832 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:32:12.043 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-03 18:32:12.072 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-03 18:32:12.076 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 298.4078ms
2023-04-03 18:32:12.091 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-03 18:32:12.096 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 4.9117ms
2023-04-03 18:32:12.122 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-03 18:32:12.168 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 46.6820ms
2023-04-03 18:32:12.228 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-03 18:32:12.230 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-03 18:32:12.231 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:32:12.345 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 116.6172ms
2023-04-03 18:32:14.602 +04:00 [DBG] Connection id "0HMPKA0QVP4LB" received FIN.
2023-04-03 18:32:14.605 +04:00 [DBG] The connection queue processing loop for 0HMPKA0QVP4LB completed.
2023-04-03 18:32:14.607 +04:00 [DBG] Connection id "0HMPKA0QVP4LB" is closed. The last processed stream ID was 7.
2023-04-03 18:32:14.609 +04:00 [DBG] Connection id "0HMPKA0QVP4LB" sending FIN because: "The client closed the connection."
2023-04-03 18:32:14.611 +04:00 [DBG] Connection id "0HMPKA0QVP4LB" stopped.
2023-04-03 18:32:23.502 +04:00 [DBG] Connection id "0HMPKA0QVP4LC" accepted.
2023-04-03 18:32:23.504 +04:00 [DBG] Connection id "0HMPKA0QVP4LC" started.
2023-04-03 18:32:23.510 +04:00 [DBG] Connection 0HMPKA0QVP4LC established using the following protocol: "Tls12"
2023-04-03 18:32:23.513 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:32:23.522 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:32:23.524 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:32:23.528 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:32:23.533 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:32:23.535 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:32:23.537 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:32:23.539 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 25.8155ms
2023-04-03 18:32:23.541 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 25
2023-04-03 18:32:23.543 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:32:23.547 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:32:23.550 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:32:23.551 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:32:23.553 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:32:23.554 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:32:23.837 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:32:23.840 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:32:23.849 +04:00 [DBG] Authorization was successful.
2023-04-03 18:32:23.854 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:32:23.893 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:32:23.897 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:32:23.899 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:32:23.901 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:32:23.904 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:32:23.905 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:32:23.909 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:32:24.090 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-03 18:32:24.115 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:32:24.134 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:32:24.139 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:32:24.142 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:32:24.157 +04:00 [DBG] Connection id "0HMPKA0QVP4LC", Request id "0HMPKA0QVP4LC:00000003": started reading request body.
2023-04-03 18:32:24.158 +04:00 [DBG] Connection id "0HMPKA0QVP4LC", Request id "0HMPKA0QVP4LC:00000003": done reading request body.
2023-04-03 18:32:24.166 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:32:24.168 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:32:24.169 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:32:24.171 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:32:24.186 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:32:24.395 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 485.6347ms
2023-04-03 18:32:24.398 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:32:24.435 +04:00 [ERR] Invalid cash out amount. Please enter amount that is a multiple of 5, except zero such as 5, 10, 15, etc. 
System.ArgumentException: Invalid cash out amount. Please enter amount that is a multiple of 5, except zero such as 5, 10, 15, etc. 
   at BankSystem.Atm.Services.Models.Requests.CashOutRequest.Validate() in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Models\Requests\CashOutRequest.cs:line 15
   at ATM.Api.Controllers.TransactionController.CashOut(CashOutRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\TransactionController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 18:32:24.532 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 25 - 1 - application/json 991.0299ms
2023-04-03 18:32:24.608 +04:00 [DBG] Connection id "0HMPKA0QVP4LC" received FIN.
2023-04-03 18:32:24.609 +04:00 [DBG] Connection id "0HMPKA0QVP4LC" sending FIN because: "The client closed the connection."
2023-04-03 18:32:24.609 +04:00 [DBG] Connection id "0HMPKA0QVP4LC" is closed. The last processed stream ID was 3.
2023-04-03 18:32:24.612 +04:00 [DBG] The connection queue processing loop for 0HMPKA0QVP4LC completed.
2023-04-03 18:32:24.613 +04:00 [DBG] Connection id "0HMPKA0QVP4LC" stopped.
2023-04-03 18:32:32.089 +04:00 [DBG] Connection id "0HMPKA0QVP4LD" accepted.
2023-04-03 18:32:32.090 +04:00 [DBG] Connection id "0HMPKA0QVP4LD" started.
2023-04-03 18:32:32.092 +04:00 [DBG] Connection 0HMPKA0QVP4LD established using the following protocol: "Tls12"
2023-04-03 18:32:32.094 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:32:32.095 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:32:32.096 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:32:32.097 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:32:32.099 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:32:32.100 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:32:32.101 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:32:32.102 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 7.7479ms
2023-04-03 18:32:32.104 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26
2023-04-03 18:32:32.105 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:32:32.106 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:32:32.107 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:32:32.108 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:32:32.109 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:32:32.110 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:32:32.113 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:32:32.114 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:32:32.118 +04:00 [DBG] Authorization was successful.
2023-04-03 18:32:32.120 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:32:32.122 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:32:32.124 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:32:32.125 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:32:32.127 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:32:32.129 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:32:32.130 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:32:32.133 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:32:32.143 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:32:32.144 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:32:32.145 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:32:32.146 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:32:32.148 +04:00 [DBG] Connection id "0HMPKA0QVP4LD", Request id "0HMPKA0QVP4LD:00000003": started reading request body.
2023-04-03 18:32:32.149 +04:00 [DBG] Connection id "0HMPKA0QVP4LD", Request id "0HMPKA0QVP4LD:00000003": done reading request body.
2023-04-03 18:32:32.150 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:32:32.151 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:32:32.152 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:32:32.153 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:32:32.154 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:32:39.461 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2023-04-03 18:32:39.463 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2023-04-03 18:32:39.813 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:32:39.882 +04:00 [DBG] Compiling query expression: 
'DbSet<CurrencyEntity>()'
2023-04-03 18:32:40.015 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CurrencyEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CurrencyEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CurrencyEntity.Code (string), 1], [Property: CurrencyEntity.Date (DateTime) Required, 2], [Property: CurrencyEntity.Diff (decimal) Required, 3], [Property: CurrencyEntity.DiffFormated (string), 4], [Property: CurrencyEntity.LastUpdatedAt (DateTime) Required, 5], [Property: CurrencyEntity.Name (string), 6], [Property: CurrencyEntity.Quantity (int) Required, 7], [Property: CurrencyEntity.Rate (decimal) Required, 8], [Property: CurrencyEntity.RateFormated (string), 9], [Property: CurrencyEntity.ValidFromDate (DateTime) Required, 10] }
        SELECT c.Id, c.Code, c.Date, c.Diff, c.DiffFormated, c.LastUpdatedAt, c.Name, c.Quantity, c.Rate, c.RateFormated, c.ValidFromDate
        FROM Currencies AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CurrencyEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-03 18:32:40.047 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:32:40.052 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:32:40.089 +04:00 [DBG] Created DbConnection. (34ms).
2023-04-03 18:32:40.099 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (53ms).
2023-04-03 18:32:40.103 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (58ms).
2023-04-03 18:32:40.108 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:40.430 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:40.441 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:32:40.502 +04:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:32:40.543 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.596 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.599 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.605 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.608 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.611 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.613 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.615 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.617 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.618 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.621 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.623 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.625 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.627 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.629 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.630 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.632 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.634 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.636 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.637 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.639 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.641 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.642 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.644 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.646 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.647 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.648 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.649 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.651 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.653 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.655 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.656 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.657 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.659 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.660 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.661 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.662 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.663 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.664 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.665 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.666 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.671 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.673 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:40.679 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:40.686 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 175ms reading results.
2023-04-03 18:32:40.690 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:40.695 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (4ms).
2023-04-03 18:32:40.727 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .ThenInclude(a => a.UserEntity)
    .Where(c => c.Id == __cardId_0)
    .Select(c => new CardEntityDto{ 
        AccountId = c.Account.Id, 
        AccountOwnerEmail = c.Account.UserEntity.Email, 
        AccountCurrency = c.Account.Currency, 
        AccountIban = c.Account.Iban 
    }
    )
    .FirstOrDefault()'
2023-04-03 18:32:40.835 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntityDto>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntityDto>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                AccountId -> 0
                AccountOwnerEmail -> 1
                AccountCurrency -> 2
                AccountIban -> 3
            SELECT TOP(1) a.Id AS AccountId, a0.Email AS AccountOwnerEmail, a.Currency AS AccountCurrency, a.Iban AS AccountIban
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            INNER JOIN AspNetUsers AS a0 ON a.UserId == a0.Id
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntityDto>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-03 18:32:40.846 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:32:40.847 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:32:40.853 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2023-04-03 18:32:40.854 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:40.856 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:40.860 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:32:40.898 +04:00 [INF] Executed DbCommand (40ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:32:40.903 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:40.905 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 18:32:40.908 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:40.910 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:32:40.919 +04:00 [DBG] Compiling query expression: 
'DbSet<TransactionEntity>()
    .Where(t => t.AccountFromId == __accountId_0 && t.CreatedAt.Date == DateTime.Now.Date && (int)t.TransactionType == 0)'
2023-04-03 18:32:40.937 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<TransactionEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TransactionEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TransactionEntity.AccountFromIban (string), 1], [Property: TransactionEntity.AccountFromId (Guid?), 2], [Property: TransactionEntity.AccountToIban (string), 3], [Property: TransactionEntity.AccountToId (Guid?), 4], [Property: TransactionEntity.CreatedAt (DateTime) Required, 5], [Property: TransactionEntity.CurrencyFrom (CurrencyType) Required, 6], [Property: TransactionEntity.CurrencyTo (CurrencyType) Required, 7], [Property: TransactionEntity.Fee (decimal) Required, 8], [Property: TransactionEntity.ReceivedAmount (decimal) Required, 9], [Property: TransactionEntity.TransactionType (TransactionType) Required, 10], [Property: TransactionEntity.WithDrawnAmount (decimal) Required, 11] }
        SELECT t.Id, t.AccountFromIban, t.AccountFromId, t.AccountToIban, t.AccountToId, t.CreatedAt, t.CurrencyFrom, t.CurrencyTo, t.Fee, t.ReceivedAmount, t.TransactionType, t.WithDrawnAmount
        FROM Transactions AS t
        WHERE ((t.AccountFromId == @__accountId_0) && (CONVERT(date, t.CreatedAt) == CONVERT(date, GETDATE()))) && (t.TransactionType == 0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TransactionEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-03 18:32:40.951 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:32:40.952 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:32:40.954 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:32:40.955 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:40.957 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:40.958 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:32:40.964 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:32:40.967 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:40.968 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:32:40.970 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:40.972 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:32:46.757 +04:00 [DBG] Compiling query expression: 
'DbSet<AccountEntity>()
    .FirstOrDefault(a => a.Id == __accountId_0)'
2023-04-03 18:32:46.763 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AccountEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<AccountEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AccountEntity.Amount (decimal) Required, 1], [Property: AccountEntity.Currency (CurrencyType) Required, 2], [Property: AccountEntity.Iban (string), 3], [Property: AccountEntity.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Accounts AS a
            WHERE a.Id == @__accountId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-03 18:32:46.766 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:32:46.767 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:32:46.769 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:32:46.770 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:46.772 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:46.773 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:32:46.778 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:32:46.787 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:46.799 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:46.800 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 19ms reading results.
2023-04-03 18:32:46.803 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:46.804 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:32:46.814 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:46.856 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:46.872 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:46.877 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 18:32:46.880 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 18:32:46.912 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 18:32:46.978 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-03 18:32:46.982 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:46.984 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:46.987 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-03 18:32:46.995 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-03 18:32:46.999 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:32:47.001 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:32:47.006 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2023-04-03 18:32:47.008 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:32:47.036 +04:00 [INF] Executed DbCommand (28ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:32:47.043 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:47.044 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 18:32:47.049 +04:00 [DBG] Committing transaction.
2023-04-03 18:32:47.053 +04:00 [DBG] Committed transaction.
2023-04-03 18:32:47.055 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:47.056 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:32:47.059 +04:00 [DBG] Disposing transaction.
2023-04-03 18:32:47.063 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:47.066 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:47.068 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:47.071 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-03 18:32:47.076 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:32:47.079 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:32:47.080 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:32:47.081 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:32:47.083 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:32:47.084 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:32:47.105 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 14972.046ms
2023-04-03 18:32:47.107 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:32:47.110 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:32:47.115 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:47.118 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 18:32:47.120 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26 - 200 - application/json;+charset=utf-8 15016.0031ms
2023-04-03 18:32:52.754 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:32:52.755 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:32:52.756 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:32:52.757 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:32:52.758 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:32:52.759 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:32:52.760 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:32:52.760 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 6.4705ms
2023-04-03 18:32:52.762 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-03 18:32:52.763 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:32:52.764 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:32:52.765 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:32:52.766 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:32:52.767 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:32:52.768 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:32:52.771 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:32:52.772 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:32:52.774 +04:00 [DBG] Authorization was successful.
2023-04-03 18:32:52.775 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:32:52.776 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:32:52.778 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:32:52.779 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:32:52.780 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:32:52.782 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:32:52.784 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:32:52.785 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:32:52.788 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:32:52.789 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:32:52.791 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:32:52.792 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:32:52.794 +04:00 [DBG] Connection id "0HMPKA0QVP4LD", Request id "0HMPKA0QVP4LD:00000007": started reading request body.
2023-04-03 18:32:52.795 +04:00 [DBG] Connection id "0HMPKA0QVP4LD", Request id "0HMPKA0QVP4LD:00000007": done reading request body.
2023-04-03 18:32:52.796 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:32:52.797 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:32:52.798 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:32:52.799 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:32:52.800 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:32:54.169 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:32:54.173 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:32:54.174 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:32:54.175 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:32:54.176 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:32:54.177 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:32:54.178 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:54.179 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:54.180 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:32:54.183 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:32:54.186 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.187 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.188 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.189 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.190 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.191 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.192 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.193 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.194 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.195 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.196 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.197 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.199 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.200 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.201 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.202 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.204 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.205 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.206 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.207 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.208 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.209 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.210 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.211 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.212 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.213 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.215 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.218 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.220 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.221 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.222 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.223 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.224 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.225 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.226 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.226 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.227 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.228 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.230 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.232 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.234 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.236 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.237 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.239 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:54.240 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 54ms reading results.
2023-04-03 18:32:54.242 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:54.243 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:32:54.249 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:32:54.250 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:32:54.251 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:32:54.252 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:54.253 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:54.255 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:32:54.260 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:32:54.263 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:54.264 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:32:54.265 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:54.266 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:32:54.269 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:32:54.270 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:32:54.271 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:32:54.272 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:54.273 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:54.274 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:32:54.287 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:32:54.291 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:32:54.294 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:54.295 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-03 18:32:54.297 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:54.298 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:32:57.075 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 4289.4415ms
2023-04-03 18:32:57.077 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:32:57.149 +04:00 [ERR] Cashout limit is 10000 per day
BankSystem.Atm.Exceptions.CashOutLimitExceededException: Cashout limit is 10000 per day
   at BankSystem.Atm.Services.CashoutService.IsCashOutPossibleAsync(CashOutDetails details) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\CashoutService.cs:line 80
   at BankSystem.Atm.Services.CashoutService.PerformCashoutAsync(CashOutRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\CashoutService.cs:line 106
   at ATM.Api.Controllers.TransactionController.CashOut(CashOutRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\TransactionController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 18:32:57.158 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:32:57.160 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:32:57.161 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:32:57.163 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28 - 1 - application/json 4400.8794ms
2023-04-03 18:33:03.882 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-03 18:33:03.948 +04:00 [DBG] Hosting starting
2023-04-03 18:33:03.968 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-03 18:33:03.974 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-03 18:33:03.978 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-03 18:33:03.982 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-03 18:33:03.987 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-03 18:33:03.992 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-03 18:33:03.994 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:33:03.997 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-03 18:33:03.999 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-03 18:33:04.002 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-03 18:33:04.005 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-03 18:33:04.009 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-03 18:33:04.011 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-03 18:33:04.120 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-03 18:33:04.121 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-03 18:33:04.122 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-03 18:33:04.123 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-03 18:33:04.124 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-03 18:33:04.126 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-03 18:33:04.127 +04:00 [INF] Hosting environment: Development
2023-04-03 18:33:04.128 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-03 18:33:04.128 +04:00 [DBG] Hosting started
2023-04-03 18:33:04.347 +04:00 [DBG] Connection id "0HMPKA1ARO0KQ" received FIN.
2023-04-03 18:33:04.347 +04:00 [DBG] Connection id "0HMPKA1ARO0KP" received FIN.
2023-04-03 18:33:04.353 +04:00 [DBG] Connection id "0HMPKA1ARO0KP" accepted.
2023-04-03 18:33:04.353 +04:00 [DBG] Connection id "0HMPKA1ARO0KQ" accepted.
2023-04-03 18:33:04.355 +04:00 [DBG] Connection id "0HMPKA1ARO0KP" started.
2023-04-03 18:33:04.355 +04:00 [DBG] Connection id "0HMPKA1ARO0KQ" started.
2023-04-03 18:33:04.371 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-03 18:33:04.371 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-03 18:33:04.405 +04:00 [DBG] Connection id "0HMPKA1ARO0KQ" stopped.
2023-04-03 18:33:04.405 +04:00 [DBG] Connection id "0HMPKA1ARO0KP" stopped.
2023-04-03 18:33:04.408 +04:00 [DBG] Connection id "0HMPKA1ARO0KP" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-03 18:33:04.408 +04:00 [DBG] Connection id "0HMPKA1ARO0KQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-03 18:33:04.711 +04:00 [DBG] Connection id "0HMPKA1ARO0KR" accepted.
2023-04-03 18:33:04.712 +04:00 [DBG] Connection id "0HMPKA1ARO0KR" started.
2023-04-03 18:33:04.755 +04:00 [DBG] Connection 0HMPKA1ARO0KR established using the following protocol: "Tls12"
2023-04-03 18:33:04.875 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-03 18:33:04.890 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-03 18:33:04.909 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-03 18:33:04.910 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:33:05.032 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-03 18:33:05.046 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-03 18:33:05.049 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 175.6885ms
2023-04-03 18:33:05.065 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-03 18:33:05.069 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 3.7596ms
2023-04-03 18:33:05.083 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-03 18:33:05.098 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 14.7727ms
2023-04-03 18:33:05.178 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-03 18:33:05.180 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-03 18:33:05.181 +04:00 [DBG] Request did not match any endpoints
2023-04-03 18:33:05.279 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 100.2094ms
2023-04-03 18:33:14.654 +04:00 [DBG] Connection id "0HMPKA1ARO0KR" received FIN.
2023-04-03 18:33:14.662 +04:00 [DBG] Connection id "0HMPKA1ARO0KR" is closed. The last processed stream ID was 7.
2023-04-03 18:33:14.664 +04:00 [DBG] Connection id "0HMPKA1ARO0KR" sending FIN because: "The client closed the connection."
2023-04-03 18:33:14.666 +04:00 [DBG] The connection queue processing loop for 0HMPKA1ARO0KR completed.
2023-04-03 18:33:14.668 +04:00 [DBG] Connection id "0HMPKA1ARO0KR" stopped.
2023-04-03 18:34:32.604 +04:00 [DBG] Connection id "0HMPKA1ARO0KS" accepted.
2023-04-03 18:34:32.605 +04:00 [DBG] Connection id "0HMPKA1ARO0KS" started.
2023-04-03 18:34:32.613 +04:00 [DBG] Connection 0HMPKA1ARO0KS established using the following protocol: "Tls12"
2023-04-03 18:34:32.614 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:34:32.619 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:34:32.620 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:34:32.623 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:34:32.626 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:34:32.627 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:34:32.628 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:34:32.629 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 14.9441ms
2023-04-03 18:34:32.631 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-03 18:34:32.633 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:34:32.636 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:34:32.638 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:34:32.639 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:34:32.640 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:34:32.641 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:34:32.791 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:34:32.794 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:34:32.801 +04:00 [DBG] Authorization was successful.
2023-04-03 18:34:32.804 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:34:32.830 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:34:32.835 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:34:32.836 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:34:32.838 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:34:32.840 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:34:32.841 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:34:32.844 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:34:32.957 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-03 18:34:32.976 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:34:32.985 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:34:32.988 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:34:32.991 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:34:33.002 +04:00 [DBG] Connection id "0HMPKA1ARO0KS", Request id "0HMPKA1ARO0KS:00000003": started reading request body.
2023-04-03 18:34:33.004 +04:00 [DBG] Connection id "0HMPKA1ARO0KS", Request id "0HMPKA1ARO0KS:00000003": done reading request body.
2023-04-03 18:34:33.009 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:34:33.011 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:34:33.012 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:34:33.013 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:34:33.024 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:34:33.385 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2023-04-03 18:34:33.387 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2023-04-03 18:34:33.653 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:34:33.693 +04:00 [DBG] Compiling query expression: 
'DbSet<CurrencyEntity>()'
2023-04-03 18:34:33.787 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CurrencyEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CurrencyEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CurrencyEntity.Code (string), 1], [Property: CurrencyEntity.Date (DateTime) Required, 2], [Property: CurrencyEntity.Diff (decimal) Required, 3], [Property: CurrencyEntity.DiffFormated (string), 4], [Property: CurrencyEntity.LastUpdatedAt (DateTime) Required, 5], [Property: CurrencyEntity.Name (string), 6], [Property: CurrencyEntity.Quantity (int) Required, 7], [Property: CurrencyEntity.Rate (decimal) Required, 8], [Property: CurrencyEntity.RateFormated (string), 9], [Property: CurrencyEntity.ValidFromDate (DateTime) Required, 10] }
        SELECT c.Id, c.Code, c.Date, c.Diff, c.DiffFormated, c.LastUpdatedAt, c.Name, c.Quantity, c.Rate, c.RateFormated, c.ValidFromDate
        FROM Currencies AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CurrencyEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-03 18:34:33.811 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:34:33.814 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:34:33.836 +04:00 [DBG] Created DbConnection. (20ms).
2023-04-03 18:34:33.842 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (33ms).
2023-04-03 18:34:33.845 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (36ms).
2023-04-03 18:34:33.848 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:34.001 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:34.008 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:34:34.041 +04:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:34:34.067 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.091 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.093 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.094 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.095 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.096 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.097 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.098 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.100 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.101 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.102 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.103 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.104 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.105 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.106 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.107 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.108 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.109 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.110 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.111 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.112 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.113 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.114 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.116 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.117 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.118 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.119 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.120 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.121 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.122 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.123 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.124 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.125 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.126 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.127 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.128 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.129 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.130 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.132 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.133 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.134 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.137 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.138 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.142 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:34.148 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 100ms reading results.
2023-04-03 18:34:34.151 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:34.156 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (4ms).
2023-04-03 18:34:34.177 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .ThenInclude(a => a.UserEntity)
    .Where(c => c.Id == __cardId_0)
    .Select(c => new CardEntityDto{ 
        AccountId = c.Account.Id, 
        AccountOwnerEmail = c.Account.UserEntity.Email, 
        AccountCurrency = c.Account.Currency, 
        AccountIban = c.Account.Iban 
    }
    )
    .FirstOrDefault()'
2023-04-03 18:34:34.259 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntityDto>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntityDto>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                AccountId -> 0
                AccountOwnerEmail -> 1
                AccountCurrency -> 2
                AccountIban -> 3
            SELECT TOP(1) a.Id AS AccountId, a0.Email AS AccountOwnerEmail, a.Currency AS AccountCurrency, a.Iban AS AccountIban
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            INNER JOIN AspNetUsers AS a0 ON a.UserId == a0.Id
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntityDto>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-03 18:34:34.268 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:34:34.269 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:34:34.271 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:34:34.273 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:34.275 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:34.278 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:34:34.293 +04:00 [INF] Executed DbCommand (18ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:34:34.297 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:34.300 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:34:34.301 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:34.303 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:34:34.307 +04:00 [DBG] Compiling query expression: 
'DbSet<TransactionEntity>()
    .Where(t => t.AccountFromId == __accountId_0 && t.CreatedAt.Date == DateTime.Now.Date && (int)t.TransactionType == 0)'
2023-04-03 18:34:34.319 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<TransactionEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TransactionEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TransactionEntity.AccountFromIban (string), 1], [Property: TransactionEntity.AccountFromId (Guid?), 2], [Property: TransactionEntity.AccountToIban (string), 3], [Property: TransactionEntity.AccountToId (Guid?), 4], [Property: TransactionEntity.CreatedAt (DateTime) Required, 5], [Property: TransactionEntity.CurrencyFrom (CurrencyType) Required, 6], [Property: TransactionEntity.CurrencyTo (CurrencyType) Required, 7], [Property: TransactionEntity.Fee (decimal) Required, 8], [Property: TransactionEntity.ReceivedAmount (decimal) Required, 9], [Property: TransactionEntity.TransactionType (TransactionType) Required, 10], [Property: TransactionEntity.WithDrawnAmount (decimal) Required, 11] }
        SELECT t.Id, t.AccountFromIban, t.AccountFromId, t.AccountToIban, t.AccountToId, t.CreatedAt, t.CurrencyFrom, t.CurrencyTo, t.Fee, t.ReceivedAmount, t.TransactionType, t.WithDrawnAmount
        FROM Transactions AS t
        WHERE ((t.AccountFromId == @__accountId_0) && (CONVERT(date, t.CreatedAt) == CONVERT(date, GETDATE()))) && (t.TransactionType == 0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TransactionEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-03 18:34:34.329 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:34:34.330 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:34:34.331 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:34:34.333 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:34.334 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:34.335 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:34:34.338 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:34:34.344 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:34.368 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:34.369 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 29ms reading results.
2023-04-03 18:34:34.371 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:34.372 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:34:34.384 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 1538.7069ms
2023-04-03 18:34:34.386 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:34:34.393 +04:00 [ERR] Cashout limit is 10000 per day
BankSystem.Atm.Exceptions.CashOutLimitExceededException: Cashout limit is 10000 per day
   at BankSystem.Atm.Services.CashoutService.IsCashOutPossibleAsync(CashOutDetails details) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\CashoutService.cs:line 80
   at BankSystem.Atm.Services.CashoutService.PerformCashoutAsync(CashOutRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\CashoutService.cs:line 106
   at ATM.Api.Controllers.TransactionController.CashOut(CashOutRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\TransactionController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 18:34:34.460 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:34:34.464 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:34.467 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 18:34:34.469 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28 - 1 - application/json 1837.3130ms
2023-04-03 18:34:39.756 +04:00 [DBG] Connection id "0HMPKA1ARO0KS" received FIN.
2023-04-03 18:34:39.757 +04:00 [DBG] Connection id "0HMPKA1ARO0KS" is closed. The last processed stream ID was 3.
2023-04-03 18:34:39.758 +04:00 [DBG] The connection queue processing loop for 0HMPKA1ARO0KS completed.
2023-04-03 18:34:39.759 +04:00 [DBG] Connection id "0HMPKA1ARO0KS" sending FIN because: "The client closed the connection."
2023-04-03 18:34:39.764 +04:00 [DBG] Connection id "0HMPKA1ARO0KS" stopped.
2023-04-03 18:34:39.824 +04:00 [DBG] Connection id "0HMPKA1ARO0KT" accepted.
2023-04-03 18:34:39.825 +04:00 [DBG] Connection id "0HMPKA1ARO0KT" started.
2023-04-03 18:34:39.827 +04:00 [DBG] Connection 0HMPKA1ARO0KT established using the following protocol: "Tls12"
2023-04-03 18:34:39.828 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:34:39.829 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:34:39.829 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:34:39.830 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:34:39.832 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:34:39.832 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:34:39.833 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:34:39.834 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 5.8633ms
2023-04-03 18:34:39.835 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 27
2023-04-03 18:34:39.836 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:34:39.836 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:34:39.838 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:34:39.838 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:34:39.839 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:34:39.839 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:34:39.841 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:34:39.842 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:34:39.843 +04:00 [DBG] Authorization was successful.
2023-04-03 18:34:39.845 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:34:39.846 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:34:39.848 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:34:39.849 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:34:39.850 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:34:39.851 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:34:39.852 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:34:39.853 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:34:39.855 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:34:39.857 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:34:39.858 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:34:39.859 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:34:39.860 +04:00 [DBG] Connection id "0HMPKA1ARO0KT", Request id "0HMPKA1ARO0KT:00000003": started reading request body.
2023-04-03 18:34:39.861 +04:00 [DBG] Connection id "0HMPKA1ARO0KT", Request id "0HMPKA1ARO0KT:00000003": done reading request body.
2023-04-03 18:34:39.862 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:34:39.863 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:34:39.864 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:34:39.865 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:34:39.866 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:34:39.874 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:34:39.878 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:34:39.878 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:34:39.879 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:34:39.880 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:34:39.880 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:34:39.881 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:39.883 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:39.884 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:34:39.886 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:34:39.889 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.890 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.891 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.892 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.893 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.895 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.896 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.897 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.898 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.900 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.901 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.902 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.903 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.904 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.906 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.907 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.908 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.909 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.911 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.912 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.913 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.914 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.916 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.917 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.918 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.919 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.920 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.921 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.923 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.924 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.925 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.927 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.928 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.929 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.930 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.931 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.933 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.934 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.935 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.936 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.937 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.938 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.940 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.942 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:39.943 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 54ms reading results.
2023-04-03 18:34:39.944 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:39.944 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:34:39.948 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:34:39.950 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:34:39.951 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:34:39.952 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:39.953 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:39.954 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:34:39.958 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:34:39.962 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:39.963 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:34:39.964 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:39.965 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:34:39.967 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:34:39.968 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:34:39.969 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:34:39.970 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:39.971 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:39.972 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:34:39.976 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:34:39.980 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:39.981 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:39.982 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 18:34:39.983 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:39.984 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:34:39.988 +04:00 [DBG] Compiling query expression: 
'DbSet<AccountEntity>()
    .FirstOrDefault(a => a.Id == __accountId_0)'
2023-04-03 18:34:39.994 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AccountEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<AccountEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AccountEntity.Amount (decimal) Required, 1], [Property: AccountEntity.Currency (CurrencyType) Required, 2], [Property: AccountEntity.Iban (string), 3], [Property: AccountEntity.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Accounts AS a
            WHERE a.Id == @__accountId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-03 18:34:39.999 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:34:40.000 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:34:40.001 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:34:40.002 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:40.003 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:40.003 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:34:40.007 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:34:40.014 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:40.023 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:40.025 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 16ms reading results.
2023-04-03 18:34:40.027 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:40.027 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:34:40.035 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:40.050 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:40.063 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:40.069 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 18:34:40.071 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 18:34:40.101 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 18:34:40.153 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-03 18:34:40.157 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:40.158 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:40.160 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-03 18:34:40.164 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-03 18:34:40.168 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:34:40.169 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:34:40.173 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-03 18:34:40.175 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:34:40.186 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:34:40.192 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:40.193 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 18:34:40.197 +04:00 [DBG] Committing transaction.
2023-04-03 18:34:40.202 +04:00 [DBG] Committed transaction.
2023-04-03 18:34:40.204 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:40.205 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:34:40.208 +04:00 [DBG] Disposing transaction.
2023-04-03 18:34:40.212 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:40.215 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:40.217 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:34:40.221 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-03 18:34:40.224 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:34:40.229 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:34:40.230 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:34:40.231 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:34:40.233 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:34:40.235 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:34:40.256 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 402.254ms
2023-04-03 18:34:40.257 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:34:40.259 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:34:40.260 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:34:40.261 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:34:40.263 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 27 - 200 - application/json;+charset=utf-8 427.9758ms
2023-04-03 18:34:49.781 +04:00 [DBG] Connection id "0HMPKA1ARO0KT" received FIN.
2023-04-03 18:34:49.783 +04:00 [DBG] Connection id "0HMPKA1ARO0KT" is closed. The last processed stream ID was 3.
2023-04-03 18:34:49.783 +04:00 [DBG] The connection queue processing loop for 0HMPKA1ARO0KT completed.
2023-04-03 18:34:49.784 +04:00 [DBG] Connection id "0HMPKA1ARO0KT" sending FIN because: "The client closed the connection."
2023-04-03 18:34:49.797 +04:00 [DBG] Connection id "0HMPKA1ARO0KT" stopped.
2023-04-03 18:35:23.327 +04:00 [DBG] Connection id "0HMPKA1ARO0KU" accepted.
2023-04-03 18:35:23.329 +04:00 [DBG] Connection id "0HMPKA1ARO0KU" started.
2023-04-03 18:35:23.331 +04:00 [DBG] Connection 0HMPKA1ARO0KU established using the following protocol: "Tls12"
2023-04-03 18:35:23.333 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:35:23.334 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:35:23.335 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:35:23.336 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:35:23.337 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:35:23.338 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:35:23.339 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:35:23.340 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 6.9555ms
2023-04-03 18:35:23.341 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 27
2023-04-03 18:35:23.342 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:35:23.343 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:35:23.344 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:35:23.345 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:35:23.345 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:35:23.346 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:35:23.349 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:35:23.350 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:35:23.351 +04:00 [DBG] Authorization was successful.
2023-04-03 18:35:23.353 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:35:23.354 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:35:23.355 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:35:23.356 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:35:23.357 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:35:23.359 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:35:23.360 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:35:23.361 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:35:23.364 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:35:23.365 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:35:23.366 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:35:23.367 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:35:23.368 +04:00 [DBG] Connection id "0HMPKA1ARO0KU", Request id "0HMPKA1ARO0KU:00000003": started reading request body.
2023-04-03 18:35:23.369 +04:00 [DBG] Connection id "0HMPKA1ARO0KU", Request id "0HMPKA1ARO0KU:00000003": done reading request body.
2023-04-03 18:35:23.370 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:35:23.371 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:35:23.372 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:35:23.373 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:35:23.374 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:35:23.412 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:35:23.415 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:35:23.416 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:35:23.417 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:35:23.417 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:35:23.418 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:35:23.419 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.420 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.421 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:35:23.424 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:35:23.426 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.427 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.428 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.430 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.431 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.433 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.434 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.435 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.437 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.438 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.439 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.440 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.441 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.442 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.443 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.444 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.445 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.446 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.448 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.449 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.450 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.452 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.453 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.454 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.455 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.456 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.458 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.459 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.460 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.461 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.462 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.464 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.465 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.467 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.468 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.469 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.470 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.471 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.473 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.474 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.475 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.476 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.477 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.478 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.479 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 53ms reading results.
2023-04-03 18:35:23.480 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.481 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:35:23.483 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:35:23.484 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:35:23.485 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:35:23.486 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.487 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.488 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:35:23.493 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:35:23.495 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.496 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 0ms reading results.
2023-04-03 18:35:23.497 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.498 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:35:23.500 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:35:23.501 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:35:23.502 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:35:23.502 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.503 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.504 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:35:23.508 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:35:23.510 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.511 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.512 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.513 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:35:23.515 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.516 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:35:23.518 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:35:23.518 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:35:23.519 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:35:23.520 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.521 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.522 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:35:23.525 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:35:23.527 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.528 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.529 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 18:35:23.530 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.531 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:35:23.533 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.535 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.536 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.538 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 18:35:23.539 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 18:35:23.540 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 18:35:23.541 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-03 18:35:23.542 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.543 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.544 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-03 18:35:23.545 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-03 18:35:23.546 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:35:23.547 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:35:23.549 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:35:23.550 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:35:23.556 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:35:23.559 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.560 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:35:23.561 +04:00 [DBG] Committing transaction.
2023-04-03 18:35:23.562 +04:00 [DBG] Committed transaction.
2023-04-03 18:35:23.563 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.564 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:35:23.565 +04:00 [DBG] Disposing transaction.
2023-04-03 18:35:23.566 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.568 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.569 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:35:23.570 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-03 18:35:23.572 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:35:23.573 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:35:23.574 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:35:23.575 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:35:23.576 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:35:23.577 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:35:23.578 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 216.9558ms
2023-04-03 18:35:23.580 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:35:23.581 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:35:23.582 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:35:23.584 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:35:23.585 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 27 - 200 - application/json;+charset=utf-8 243.5338ms
2023-04-03 18:35:29.842 +04:00 [DBG] Connection id "0HMPKA1ARO0KU" received FIN.
2023-04-03 18:35:29.845 +04:00 [DBG] Connection id "0HMPKA1ARO0KU" is closed. The last processed stream ID was 3.
2023-04-03 18:35:29.845 +04:00 [DBG] The connection queue processing loop for 0HMPKA1ARO0KU completed.
2023-04-03 18:35:29.846 +04:00 [DBG] Connection id "0HMPKA1ARO0KU" sending FIN because: "The client closed the connection."
2023-04-03 18:35:29.851 +04:00 [DBG] Connection id "0HMPKA1ARO0KU" stopped.
2023-04-03 18:36:57.791 +04:00 [DBG] Connection id "0HMPKA1ARO0KV" accepted.
2023-04-03 18:36:57.792 +04:00 [DBG] Connection id "0HMPKA1ARO0KV" started.
2023-04-03 18:36:57.793 +04:00 [DBG] Connection 0HMPKA1ARO0KV established using the following protocol: "Tls12"
2023-04-03 18:36:57.795 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:36:57.796 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:36:57.797 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:36:57.798 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:36:57.799 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:36:57.800 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:36:57.801 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:36:57.802 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 6.6177ms
2023-04-03 18:36:57.803 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26
2023-04-03 18:36:57.804 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:36:57.805 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:36:57.806 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:36:57.807 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:36:57.808 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:36:57.808 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:36:57.810 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:36:57.810 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:36:57.811 +04:00 [DBG] Authorization was successful.
2023-04-03 18:36:57.812 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:36:57.813 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:36:57.815 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:36:57.815 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:36:57.817 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:36:57.819 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:36:57.820 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:36:57.822 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:36:57.823 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:36:57.824 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:36:57.825 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:36:57.827 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:36:57.828 +04:00 [DBG] Connection id "0HMPKA1ARO0KV", Request id "0HMPKA1ARO0KV:00000003": started reading request body.
2023-04-03 18:36:57.829 +04:00 [DBG] Connection id "0HMPKA1ARO0KV", Request id "0HMPKA1ARO0KV:00000003": done reading request body.
2023-04-03 18:36:57.831 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:36:57.832 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:36:57.834 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:36:57.835 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:36:57.836 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:36:57.838 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:36:57.840 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:36:57.841 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:36:57.841 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:36:57.842 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:36:57.843 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:36:57.844 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.846 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.847 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:36:57.850 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:36:57.853 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.854 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.855 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.857 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.858 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.859 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.860 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.861 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.862 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.864 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.870 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.879 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.880 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.882 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.884 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.885 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.886 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.887 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.888 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.889 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.890 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.892 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.893 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.894 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.895 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.896 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.898 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.899 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.900 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.902 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.903 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.904 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.905 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.906 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.907 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.908 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.910 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.911 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.912 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.914 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.915 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.916 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.917 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.919 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.920 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 66ms reading results.
2023-04-03 18:36:57.921 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.922 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:36:57.923 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:36:57.924 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:36:57.925 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:36:57.926 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.927 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.928 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:36:57.933 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:36:57.936 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.937 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:36:57.938 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.939 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:36:57.941 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:36:57.941 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:36:57.942 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:36:57.943 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.945 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.946 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:36:57.949 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:36:57.952 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.953 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.954 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.954 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.955 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:36:57.956 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.957 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:36:57.958 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:36:57.959 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:36:57.961 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:36:57.962 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.964 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.965 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:36:57.968 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:36:57.970 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.971 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.972 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 18:36:57.973 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.974 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:36:57.976 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.978 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.979 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:57.980 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 18:36:57.981 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 18:36:57.982 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 18:36:57.983 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-03 18:36:57.984 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.985 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:57.986 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-03 18:36:57.987 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-03 18:36:57.988 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:36:57.988 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:36:57.989 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:36:57.990 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:36:57.999 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:36:58.002 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:58.003 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 0ms reading results.
2023-04-03 18:36:58.004 +04:00 [DBG] Committing transaction.
2023-04-03 18:36:58.005 +04:00 [DBG] Committed transaction.
2023-04-03 18:36:58.006 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:58.007 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:36:58.008 +04:00 [DBG] Disposing transaction.
2023-04-03 18:36:58.009 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:58.010 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:58.012 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:36:58.014 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-03 18:36:58.015 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:36:58.017 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:36:58.017 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:36:58.018 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:36:58.019 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:36:58.020 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:36:58.021 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 199.4034ms
2023-04-03 18:36:58.022 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:36:58.023 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:36:58.025 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:36:58.026 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:36:58.027 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26 - 200 - application/json;+charset=utf-8 224.5076ms
2023-04-03 18:36:59.953 +04:00 [DBG] Connection id "0HMPKA1ARO0KV" received FIN.
2023-04-03 18:36:59.955 +04:00 [DBG] Connection id "0HMPKA1ARO0KV" is closed. The last processed stream ID was 3.
2023-04-03 18:36:59.955 +04:00 [DBG] The connection queue processing loop for 0HMPKA1ARO0KV completed.
2023-04-03 18:36:59.957 +04:00 [DBG] Connection id "0HMPKA1ARO0KV" sending FIN because: "The client closed the connection."
2023-04-03 18:36:59.968 +04:00 [DBG] Connection id "0HMPKA1ARO0KV" stopped.
2023-04-03 18:37:23.480 +04:00 [DBG] Connection id "0HMPKA1ARO0L0" accepted.
2023-04-03 18:37:23.481 +04:00 [DBG] Connection id "0HMPKA1ARO0L0" started.
2023-04-03 18:37:23.483 +04:00 [DBG] Connection 0HMPKA1ARO0L0 established using the following protocol: "Tls12"
2023-04-03 18:37:23.484 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:37:23.485 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:37:23.486 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:37:23.486 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:37:23.487 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:37:23.487 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:37:23.488 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:37:23.489 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 4.5317ms
2023-04-03 18:37:23.490 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26
2023-04-03 18:37:23.490 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:37:23.491 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:37:23.492 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:37:23.493 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:37:23.494 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:37:23.494 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:37:23.495 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:37:23.496 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:37:23.497 +04:00 [DBG] Authorization was successful.
2023-04-03 18:37:23.497 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:37:23.499 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:37:23.500 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:37:23.501 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:37:23.502 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:37:23.504 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:37:23.505 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:37:23.506 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:37:23.507 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:37:23.508 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:37:23.509 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:37:23.510 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:37:23.511 +04:00 [DBG] Connection id "0HMPKA1ARO0L0", Request id "0HMPKA1ARO0L0:00000003": started reading request body.
2023-04-03 18:37:23.512 +04:00 [DBG] Connection id "0HMPKA1ARO0L0", Request id "0HMPKA1ARO0L0:00000003": done reading request body.
2023-04-03 18:37:23.513 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:37:23.514 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:37:23.515 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:37:23.516 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:37:23.517 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:37:23.519 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 13.1057ms
2023-04-03 18:37:23.520 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:37:23.520 +04:00 [ERR] Invalid cash out amount. Please enter amount that is a multiple of 5, except zero such as 5, 10, 15, etc. 
System.ArgumentException: Invalid cash out amount. Please enter amount that is a multiple of 5, except zero such as 5, 10, 15, etc. 
   at BankSystem.Atm.Services.Models.Requests.CashOutRequest.Validate() in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Models\Requests\CashOutRequest.cs:line 15
   at ATM.Api.Controllers.TransactionController.CashOut(CashOutRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\TransactionController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 18:37:23.527 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26 - 1 - application/json 37.3503ms
2023-04-03 18:37:29.997 +04:00 [DBG] Connection id "0HMPKA1ARO0L0" received FIN.
2023-04-03 18:37:29.998 +04:00 [DBG] Connection id "0HMPKA1ARO0L0" is closed. The last processed stream ID was 3.
2023-04-03 18:37:29.998 +04:00 [DBG] The connection queue processing loop for 0HMPKA1ARO0L0 completed.
2023-04-03 18:37:30.000 +04:00 [DBG] Connection id "0HMPKA1ARO0L0" sending FIN because: "The client closed the connection."
2023-04-03 18:37:30.012 +04:00 [DBG] Connection id "0HMPKA1ARO0L0" stopped.
2023-04-03 18:37:46.951 +04:00 [DBG] Connection id "0HMPKA1ARO0L1" accepted.
2023-04-03 18:37:46.952 +04:00 [DBG] Connection id "0HMPKA1ARO0L1" started.
2023-04-03 18:37:46.954 +04:00 [DBG] Connection 0HMPKA1ARO0L1 established using the following protocol: "Tls12"
2023-04-03 18:37:46.956 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:37:46.957 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:37:46.958 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:37:46.959 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:37:46.960 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:37:46.961 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:37:46.962 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:37:46.963 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 7.1418ms
2023-04-03 18:37:46.964 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26
2023-04-03 18:37:46.965 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:37:46.966 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:37:46.967 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:37:46.967 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:37:46.968 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:37:46.969 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:37:46.970 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:37:46.971 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:37:46.971 +04:00 [DBG] Authorization was successful.
2023-04-03 18:37:46.972 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:37:46.973 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:37:46.974 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:37:46.976 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:37:46.977 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:37:46.979 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:37:46.981 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:37:46.987 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:37:46.990 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:37:46.991 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:37:46.993 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:37:46.994 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:37:46.996 +04:00 [DBG] Connection id "0HMPKA1ARO0L1", Request id "0HMPKA1ARO0L1:00000003": started reading request body.
2023-04-03 18:37:46.997 +04:00 [DBG] Connection id "0HMPKA1ARO0L1", Request id "0HMPKA1ARO0L1:00000003": done reading request body.
2023-04-03 18:37:46.998 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:37:46.999 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:37:47.000 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:37:47.001 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:37:47.002 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:37:47.004 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 17.4345ms
2023-04-03 18:37:47.005 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:37:47.006 +04:00 [ERR] Invalid cash out amount. Please enter amount that is a multiple of 5, except zero such as 5, 10, 15, etc. 
System.ArgumentException: Invalid cash out amount. Please enter amount that is a multiple of 5, except zero such as 5, 10, 15, etc. 
   at BankSystem.Atm.Services.Models.Requests.CashOutRequest.Validate() in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Models\Requests\CashOutRequest.cs:line 15
   at ATM.Api.Controllers.TransactionController.CashOut(CashOutRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\TransactionController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-03 18:37:47.011 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26 - 1 - application/json 46.7250ms
2023-04-03 18:37:50.013 +04:00 [DBG] Connection id "0HMPKA1ARO0L1" received FIN.
2023-04-03 18:37:50.015 +04:00 [DBG] Connection id "0HMPKA1ARO0L1" is closed. The last processed stream ID was 3.
2023-04-03 18:37:50.015 +04:00 [DBG] The connection queue processing loop for 0HMPKA1ARO0L1 completed.
2023-04-03 18:37:50.016 +04:00 [DBG] Connection id "0HMPKA1ARO0L1" sending FIN because: "The client closed the connection."
2023-04-03 18:37:50.028 +04:00 [DBG] Connection id "0HMPKA1ARO0L1" stopped.
2023-04-03 18:38:11.173 +04:00 [DBG] Connection id "0HMPKA1ARO0L2" accepted.
2023-04-03 18:38:11.175 +04:00 [DBG] Connection id "0HMPKA1ARO0L2" started.
2023-04-03 18:38:11.177 +04:00 [DBG] Connection 0HMPKA1ARO0L2 established using the following protocol: "Tls12"
2023-04-03 18:38:11.178 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:38:11.179 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:38:11.180 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:38:11.181 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:38:11.182 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:38:11.183 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:38:11.184 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:38:11.185 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 6.6652ms
2023-04-03 18:38:11.186 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26
2023-04-03 18:38:11.187 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:38:11.188 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:38:11.189 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:38:11.190 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:38:11.190 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:38:11.191 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:38:11.192 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:38:11.192 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:38:11.194 +04:00 [DBG] Authorization was successful.
2023-04-03 18:38:11.194 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:38:11.196 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:38:11.197 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:38:11.198 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:38:11.199 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:38:11.201 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:38:11.202 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:38:11.204 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:38:11.205 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:38:11.206 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:38:11.207 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:38:11.209 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:38:11.210 +04:00 [DBG] Connection id "0HMPKA1ARO0L2", Request id "0HMPKA1ARO0L2:00000003": started reading request body.
2023-04-03 18:38:11.211 +04:00 [DBG] Connection id "0HMPKA1ARO0L2", Request id "0HMPKA1ARO0L2:00000003": done reading request body.
2023-04-03 18:38:11.212 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:38:11.213 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:38:11.214 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:38:11.215 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:38:11.216 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:38:11.218 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:38:11.220 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:38:11.220 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:38:11.221 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:38:11.222 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:38:11.222 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:38:11.223 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.224 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.225 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:38:11.228 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:38:11.230 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.231 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.233 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.234 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.235 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.236 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.237 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.238 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.239 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.240 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.241 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.242 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.243 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.244 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.246 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.247 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.249 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.250 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.251 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.252 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.253 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.254 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.255 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.256 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.257 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.258 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.259 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.260 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.261 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.263 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.265 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.266 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.267 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.268 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.268 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.270 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.271 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.271 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.272 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.274 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.275 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.276 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.277 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.279 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.281 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 50ms reading results.
2023-04-03 18:38:11.287 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.292 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (5ms).
2023-04-03 18:38:11.293 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:38:11.294 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:38:11.295 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:38:11.296 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.297 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.298 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:38:11.302 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:38:11.306 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.308 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:38:11.309 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.310 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:38:11.312 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:38:11.313 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:38:11.314 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:38:11.315 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.316 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.317 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:38:11.321 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:38:11.324 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.326 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.327 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.329 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.330 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.331 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 6ms reading results.
2023-04-03 18:38:11.332 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.333 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:38:11.334 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:38:11.336 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:38:11.337 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:38:11.338 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.339 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.340 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:38:11.343 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:38:11.345 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.346 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.347 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 18:38:11.349 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.350 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:38:11.351 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.353 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.355 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.357 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 18:38:11.358 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 18:38:11.359 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 18:38:11.360 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-03 18:38:11.361 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.362 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.363 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-03 18:38:11.364 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-03 18:38:11.365 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:38:11.366 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:38:11.367 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:38:11.368 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:38:11.376 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:38:11.381 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.382 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:38:11.383 +04:00 [DBG] Committing transaction.
2023-04-03 18:38:11.384 +04:00 [DBG] Committed transaction.
2023-04-03 18:38:11.385 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.386 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:38:11.387 +04:00 [DBG] Disposing transaction.
2023-04-03 18:38:11.388 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.390 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.391 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:11.393 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-03 18:38:11.394 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:38:11.397 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:38:11.398 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:38:11.399 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:38:11.400 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:38:11.401 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:38:11.402 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 198.715ms
2023-04-03 18:38:11.403 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:38:11.404 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:38:11.405 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:11.406 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 18:38:11.407 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26 - 200 - application/json;+charset=utf-8 221.1939ms
2023-04-03 18:38:17.085 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:38:17.086 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:38:17.087 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:38:17.088 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:38:17.089 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:38:17.089 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:38:17.090 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:38:17.091 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 5.8298ms
2023-04-03 18:38:17.092 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26
2023-04-03 18:38:17.093 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:38:17.095 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:38:17.097 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:38:17.098 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:38:17.099 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:38:17.100 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:38:17.101 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:38:17.102 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:38:17.103 +04:00 [DBG] Authorization was successful.
2023-04-03 18:38:17.103 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:38:17.104 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:38:17.106 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:38:17.107 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:38:17.109 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:38:17.110 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:38:17.112 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:38:17.113 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:38:17.115 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:38:17.117 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:38:17.118 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:38:17.120 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:38:17.121 +04:00 [DBG] Connection id "0HMPKA1ARO0L2", Request id "0HMPKA1ARO0L2:00000007": started reading request body.
2023-04-03 18:38:17.122 +04:00 [DBG] Connection id "0HMPKA1ARO0L2", Request id "0HMPKA1ARO0L2:00000007": done reading request body.
2023-04-03 18:38:17.123 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:38:17.124 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:38:17.126 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:38:17.127 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:38:17.129 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:38:17.131 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:38:17.133 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:38:17.134 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:38:17.135 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:38:17.136 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:38:17.137 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:38:17.138 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.139 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.140 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:38:17.143 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:38:17.145 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.147 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.148 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.150 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.151 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.152 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.154 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.155 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.156 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.158 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.159 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.160 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.161 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.163 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.164 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.165 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.166 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.167 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.169 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.170 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.171 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.172 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.173 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.174 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.175 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.177 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.178 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.180 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.181 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.182 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.183 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.184 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.185 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.186 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.188 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.189 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.190 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.191 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.192 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.193 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.195 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.196 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.197 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.198 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.199 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 54ms reading results.
2023-04-03 18:38:17.200 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.201 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:38:17.203 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:38:17.203 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:38:17.204 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:38:17.205 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.206 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.207 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:38:17.213 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:38:17.215 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.216 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:38:17.217 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.218 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:38:17.220 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:38:17.220 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:38:17.221 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:38:17.222 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.223 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.224 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:38:17.228 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:38:17.231 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.232 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.233 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.234 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.235 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.236 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.237 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 6ms reading results.
2023-04-03 18:38:17.238 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.239 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:38:17.241 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:38:17.242 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:38:17.244 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:38:17.245 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.246 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.247 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:38:17.249 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:38:17.251 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.252 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.253 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 18:38:17.254 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.255 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:38:17.256 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.257 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.258 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.259 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 18:38:17.260 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 18:38:17.261 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 18:38:17.262 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-03 18:38:17.263 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.264 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.264 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-03 18:38:17.265 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-03 18:38:17.266 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:38:17.267 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:38:17.268 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:38:17.268 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:38:17.275 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:38:17.278 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.279 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:38:17.280 +04:00 [DBG] Committing transaction.
2023-04-03 18:38:17.281 +04:00 [DBG] Committed transaction.
2023-04-03 18:38:17.282 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.283 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:38:17.284 +04:00 [DBG] Disposing transaction.
2023-04-03 18:38:17.284 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.286 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.287 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:17.288 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-03 18:38:17.289 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:38:17.291 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:38:17.292 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:38:17.292 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:38:17.293 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:38:17.296 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:38:17.299 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 185.2868ms
2023-04-03 18:38:17.301 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:38:17.303 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:38:17.304 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:17.308 +04:00 [DBG] Disposed connection to database '' on server '' (3ms).
2023-04-03 18:38:17.309 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26 - 200 - application/json;+charset=utf-8 216.8394ms
2023-04-03 18:38:20.063 +04:00 [DBG] Connection id "0HMPKA1ARO0L2" received FIN.
2023-04-03 18:38:20.065 +04:00 [DBG] Connection id "0HMPKA1ARO0L2" is closed. The last processed stream ID was 7.
2023-04-03 18:38:20.065 +04:00 [DBG] The connection queue processing loop for 0HMPKA1ARO0L2 completed.
2023-04-03 18:38:20.066 +04:00 [DBG] Connection id "0HMPKA1ARO0L2" sending FIN because: "The client closed the connection."
2023-04-03 18:38:20.074 +04:00 [DBG] Connection id "0HMPKA1ARO0L2" stopped.
2023-04-03 18:38:45.816 +04:00 [DBG] Connection id "0HMPKA1ARO0L3" accepted.
2023-04-03 18:38:45.818 +04:00 [DBG] Connection id "0HMPKA1ARO0L3" started.
2023-04-03 18:38:45.820 +04:00 [DBG] Connection 0HMPKA1ARO0L3 established using the following protocol: "Tls12"
2023-04-03 18:38:45.822 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:38:45.822 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:38:45.823 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:38:45.824 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:38:45.825 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:38:45.826 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:38:45.826 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:38:45.827 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 5.5268ms
2023-04-03 18:38:45.829 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26
2023-04-03 18:38:45.830 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:38:45.831 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:38:45.832 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:38:45.833 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:38:45.833 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:38:45.834 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:38:45.835 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:38:45.836 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:38:45.836 +04:00 [DBG] Authorization was successful.
2023-04-03 18:38:45.837 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:38:45.838 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:38:45.839 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:38:45.841 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:38:45.842 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:38:45.844 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:38:45.845 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:38:45.847 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:38:45.848 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:38:45.849 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:38:45.850 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:38:45.851 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:38:45.852 +04:00 [DBG] Connection id "0HMPKA1ARO0L3", Request id "0HMPKA1ARO0L3:00000003": started reading request body.
2023-04-03 18:38:45.853 +04:00 [DBG] Connection id "0HMPKA1ARO0L3", Request id "0HMPKA1ARO0L3:00000003": done reading request body.
2023-04-03 18:38:45.854 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:38:45.855 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:38:45.857 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:38:45.858 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:38:45.859 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:38:45.862 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:38:45.873 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:38:45.874 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:38:45.875 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:38:45.876 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:38:45.877 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-03 18:38:45.879 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:45.880 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:45.881 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:38:45.883 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:38:45.885 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.886 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.888 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.889 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.890 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.891 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.892 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.894 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.896 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.897 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.898 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.899 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.900 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.901 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.902 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.904 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.907 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.908 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.909 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.910 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.912 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.913 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.914 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.916 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.917 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.918 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.919 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.920 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.922 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.923 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.924 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.925 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.926 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.928 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.930 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.931 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.932 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.933 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.934 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.936 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.937 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.938 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.939 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.940 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:45.941 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 56ms reading results.
2023-04-03 18:38:45.942 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:45.943 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:38:45.945 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:38:45.946 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:38:45.947 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:38:45.948 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:45.949 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:45.950 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:38:45.955 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:38:45.958 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:45.959 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:38:45.960 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:45.962 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:38:45.963 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:38:45.964 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:38:45.965 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:38:45.966 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:45.967 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:45.968 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:38:45.972 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:38:45.974 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.975 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.977 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.978 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.980 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.981 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.982 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:45.983 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 8ms reading results.
2023-04-03 18:38:45.984 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:45.985 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:38:45.987 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:38:45.987 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:38:45.988 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:38:45.989 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:45.990 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:45.991 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:38:45.994 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:38:45.997 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:45.998 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:45.999 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-03 18:38:46.000 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:46.001 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:38:46.003 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:46.004 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:46.005 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:46.006 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 18:38:46.007 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 18:38:46.008 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 18:38:46.009 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-03 18:38:46.010 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:46.012 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:46.013 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-03 18:38:46.014 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-03 18:38:46.015 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:38:46.016 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:38:46.017 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:38:46.019 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:38:46.024 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:38:46.028 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:46.030 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:38:46.031 +04:00 [DBG] Committing transaction.
2023-04-03 18:38:46.033 +04:00 [DBG] Committed transaction.
2023-04-03 18:38:46.033 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:46.035 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:38:46.036 +04:00 [DBG] Disposing transaction.
2023-04-03 18:38:46.037 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:46.039 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:46.040 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:38:46.042 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-03 18:38:46.043 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:38:46.046 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:38:46.047 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:38:46.047 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:38:46.048 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:38:46.049 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:38:46.050 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 203.7176ms
2023-04-03 18:38:46.051 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:38:46.052 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:38:46.053 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:38:46.054 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:38:46.055 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26 - 200 - application/json;+charset=utf-8 226.5736ms
2023-04-03 18:38:50.121 +04:00 [DBG] Connection id "0HMPKA1ARO0L3" received FIN.
2023-04-03 18:38:50.122 +04:00 [DBG] Connection id "0HMPKA1ARO0L3" is closed. The last processed stream ID was 3.
2023-04-03 18:38:50.122 +04:00 [DBG] The connection queue processing loop for 0HMPKA1ARO0L3 completed.
2023-04-03 18:38:50.123 +04:00 [DBG] Connection id "0HMPKA1ARO0L3" sending FIN because: "The client closed the connection."
2023-04-03 18:38:50.140 +04:00 [DBG] Connection id "0HMPKA1ARO0L3" stopped.
2023-04-03 18:39:25.417 +04:00 [DBG] Connection id "0HMPKA1ARO0L4" accepted.
2023-04-03 18:39:25.419 +04:00 [DBG] Connection id "0HMPKA1ARO0L4" started.
2023-04-03 18:39:25.421 +04:00 [DBG] Connection 0HMPKA1ARO0L4 established using the following protocol: "Tls12"
2023-04-03 18:39:25.422 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-03 18:39:25.423 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:39:25.424 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:39:25.425 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:39:25.426 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:39:25.428 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:39:25.429 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:39:25.429 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 7.1687ms
2023-04-03 18:39:25.430 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26
2023-04-03 18:39:25.431 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-03 18:39:25.444 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-03 18:39:25.445 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:39:25.446 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:39:25.447 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:39:25.447 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:39:25.448 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:39:25.449 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:39:25.450 +04:00 [DBG] Authorization was successful.
2023-04-03 18:39:25.451 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:39:25.452 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-03 18:39:25.453 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:39:25.454 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:39:25.455 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:39:25.457 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:39:25.458 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:39:25.469 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:39:25.473 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-03 18:39:25.475 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:39:25.476 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-03 18:39:25.477 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:39:25.478 +04:00 [DBG] Connection id "0HMPKA1ARO0L4", Request id "0HMPKA1ARO0L4:00000003": started reading request body.
2023-04-03 18:39:25.479 +04:00 [DBG] Connection id "0HMPKA1ARO0L4", Request id "0HMPKA1ARO0L4:00000003": done reading request body.
2023-04-03 18:39:25.480 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-03 18:39:25.481 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:39:25.482 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:39:25.483 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-03 18:39:25.484 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-03 18:39:25.486 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:39:25.487 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:39:25.488 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:39:25.489 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:39:25.490 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:39:25.491 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:39:25.492 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.493 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.494 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:39:25.497 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-03 18:39:25.498 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.499 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.500 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.501 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.502 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.503 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.504 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.505 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.507 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.508 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.509 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.510 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.511 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.512 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.513 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.514 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.515 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.516 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.517 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.518 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.519 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.520 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.521 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.522 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.523 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.524 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.525 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.526 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.527 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.528 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.529 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.531 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.532 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.533 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.534 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.535 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.536 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.537 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.538 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.539 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.540 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.541 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.542 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.544 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.545 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 46ms reading results.
2023-04-03 18:39:25.546 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.547 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:39:25.548 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:39:25.549 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:39:25.550 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:39:25.551 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.551 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.552 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:39:25.557 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [AccountId], [a0].[Email] AS [AccountOwnerEmail], [a].[Currency] AS [AccountCurrency], [a].[Iban] AS [AccountIban]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:39:25.561 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.562 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:39:25.563 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.564 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:39:25.565 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:39:25.566 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:39:25.566 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:39:25.567 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.568 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.569 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:39:25.573 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-03 18:39:25.575 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.576 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.577 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.579 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.580 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.581 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.581 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.582 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.583 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 8ms reading results.
2023-04-03 18:39:25.585 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.586 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:39:25.587 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:39:25.588 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:39:25.588 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:39:25.589 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.590 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.591 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:39:25.594 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-04-03 18:39:25.596 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.597 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.597 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-03 18:39:25.598 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.600 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:39:25.601 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.602 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.603 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.604 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-03 18:39:25.605 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-03 18:39:25.606 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-03 18:39:25.607 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-03 18:39:25.608 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.608 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.609 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-03 18:39:25.611 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-03 18:39:25.612 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:39:25.612 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-03 18:39:25.613 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:39:25.614 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:39:25.620 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-03 18:39:25.623 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.624 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 0ms reading results.
2023-04-03 18:39:25.625 +04:00 [DBG] Committing transaction.
2023-04-03 18:39:25.628 +04:00 [DBG] Committed transaction.
2023-04-03 18:39:25.628 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.629 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:39:25.631 +04:00 [DBG] Disposing transaction.
2023-04-03 18:39:25.632 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.634 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.635 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:25.636 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-03 18:39:25.637 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:39:25.639 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:39:25.639 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:39:25.640 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:39:25.641 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:39:25.642 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:39:25.644 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 174.3839ms
2023-04-03 18:39:25.645 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-03 18:39:25.645 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:39:25.646 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:25.647 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 18:39:25.648 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26 - 200 - application/json;+charset=utf-8 217.7485ms
2023-04-03 18:39:36.743 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:39:36.744 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:39:36.748 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:39:36.750 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:39:36.750 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:39:36.751 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:39:36.752 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:39:36.753 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:39:36.754 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:39:36.754 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:39:36.755 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:39:36.756 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:39:36.757 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:39:36.757 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:39:36.758 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 14.6999ms
2023-04-03 18:39:36.759 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 14.9084ms
2023-04-03 18:39:36.761 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:39:36.762 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:39:36.763 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:39:36.764 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:39:36.765 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:39:36.766 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:39:36.766 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:39:36.767 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:39:36.768 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:39:36.769 +04:00 [DBG] Authorization was successful.
2023-04-03 18:39:36.770 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:39:36.774 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:39:36.776 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:39:36.777 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:39:36.779 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:39:36.781 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:39:36.782 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:39:36.784 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:39:36.786 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:39:36.789 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:39:36.792 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.Id == __cardId_0)'
2023-04-03 18:39:36.796 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-03 18:39:36.815 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-03 18:39:36.819 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:39:36.820 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:39:36.820 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:39:36.821 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:39:36.822 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:39:36.823 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:36.824 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:36.825 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:39:36.831 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:39:36.835 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:36.848 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:36.853 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:36.856 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:36.857 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 23ms reading results.
2023-04-03 18:39:36.859 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:36.860 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:39:36.862 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:39:36.864 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:39:36.864 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:39:36.865 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:39:36.866 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:39:36.867 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:39:36.868 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 84.9615ms
2023-04-03 18:39:36.870 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:39:36.870 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:39:36.871 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:39:36.872 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:39:36.872 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:36.873 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:39:36.875 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-03 18:39:36.876 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:39:36.878 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 116.9148ms
2023-04-03 18:39:36.878 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:39:36.880 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:39:36.880 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:39:36.881 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:39:36.882 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:39:36.882 +04:00 [DBG] Authorization was successful.
2023-04-03 18:39:36.883 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:39:36.884 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:39:36.885 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:39:36.886 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:39:36.887 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:39:36.888 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:39:36.889 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:39:36.892 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:39:36.894 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:39:36.895 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:39:36.897 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:39:36.898 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:39:36.898 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:39:36.899 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:39:36.900 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:39:36.901 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:36.902 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:36.902 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:39:36.904 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:39:36.907 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:36.909 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:36.910 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:36.911 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:36.912 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 18:39:36.913 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:36.914 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:39:36.915 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:39:36.916 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:39:36.917 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:39:36.918 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:39:36.918 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:39:36.919 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:39:36.920 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 28.0313ms
2023-04-03 18:39:36.921 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:39:36.922 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:39:36.923 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:36.924 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 18:39:36.925 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 54.6801ms
2023-04-03 18:39:56.064 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-03 18:39:56.065 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 18:39:56.066 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:39:56.067 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:39:56.067 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:39:56.068 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:39:56.069 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:39:56.070 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 5.6913ms
2023-04-03 18:39:56.071 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 48
2023-04-03 18:39:56.071 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-03 18:39:56.072 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-03 18:39:56.073 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 18:39:56.074 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:39:56.075 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:39:56.076 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:39:56.077 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-03 18:39:56.078 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 18:39:56.081 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:39:56.083 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:39:56.083 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:39:56.084 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:39:56.086 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:39:56.087 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:39:56.088 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:39:56.089 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:39:56.090 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 18:39:56.091 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-03 18:39:56.093 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-03 18:39:56.095 +04:00 [DBG] Connection id "0HMPKA1ARO0L4", Request id "0HMPKA1ARO0L4:0000000F": started reading request body.
2023-04-03 18:39:56.096 +04:00 [DBG] Connection id "0HMPKA1ARO0L4", Request id "0HMPKA1ARO0L4:0000000F": done reading request body.
2023-04-03 18:39:56.098 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-03 18:39:56.099 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 18:39:56.099 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 18:39:56.100 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-03 18:39:56.103 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-03 18:39:56.106 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:39:56.109 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.CardNumber == __request_CardNumber_0 && c.Pin == __request_Pin_1)'
2023-04-03 18:39:56.110 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-03 18:39:56.115 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE (c.CardNumber == @__request_CardNumber_0) && (c.Pin == @__request_Pin_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-03 18:39:56.119 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:39:56.119 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:39:56.120 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:39:56.120 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:39:56.121 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:39:56.122 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:56.123 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:56.124 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 18:39:56.132 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-03 18:39:56.134 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:56.135 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:56.136 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:56.137 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:56.138 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 18:39:56.139 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:56.140 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:39:56.148 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:39:56.150 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:39:56.150 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:39:56.151 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:39:56.152 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:39:56.153 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:39:56.153 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 65.6674ms
2023-04-03 18:39:56.155 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-03 18:39:56.156 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:39:56.157 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:56.158 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:39:56.160 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 48 - 200 - application/json;+charset=utf-8 88.8744ms
2023-04-03 18:39:59.358 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:39:59.359 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:39:59.359 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:39:59.360 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:39:59.361 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:39:59.362 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:39:59.363 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:39:59.364 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:39:59.365 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:39:59.365 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:39:59.366 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:39:59.367 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:39:59.367 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:39:59.368 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:39:59.369 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 10.5958ms
2023-04-03 18:39:59.369 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 10.7462ms
2023-04-03 18:39:59.371 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:39:59.372 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:39:59.373 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:39:59.374 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:39:59.375 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:39:59.376 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:39:59.377 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:39:59.378 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:39:59.379 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:39:59.379 +04:00 [DBG] Authorization was successful.
2023-04-03 18:39:59.380 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:39:59.381 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:39:59.382 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:39:59.383 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:39:59.384 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:39:59.386 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:39:59.387 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:39:59.388 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:39:59.390 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:39:59.391 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:39:59.393 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:39:59.394 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:39:59.395 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:39:59.396 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:39:59.396 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:39:59.397 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:59.398 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:59.399 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:39:59.402 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:39:59.404 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:59.405 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:59.406 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:59.407 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:59.408 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:39:59.409 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:59.410 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-03 18:39:59.411 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:39:59.413 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:39:59.414 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:39:59.414 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:39:59.415 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:39:59.416 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:39:59.417 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 28.2446ms
2023-04-03 18:39:59.418 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:39:59.418 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:39:59.419 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:39:59.419 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:39:59.420 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:39:59.421 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:59.422 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:39:59.423 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:39:59.424 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:39:59.425 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 54.3727ms
2023-04-03 18:39:59.426 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:39:59.428 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:39:59.429 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:39:59.429 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:39:59.430 +04:00 [DBG] Authorization was successful.
2023-04-03 18:39:59.431 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:39:59.431 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:39:59.433 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:39:59.434 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:39:59.435 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:39:59.436 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:39:59.437 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:39:59.438 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:39:59.439 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:39:59.440 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:39:59.442 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:39:59.443 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:39:59.444 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:39:59.444 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:39:59.445 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:39:59.446 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:59.447 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:59.448 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:39:59.450 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:39:59.452 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:59.453 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:59.453 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:39:59.454 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:59.455 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-03 18:39:59.457 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:59.457 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:39:59.458 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:39:59.460 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:39:59.461 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:39:59.461 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:39:59.462 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:39:59.463 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:39:59.464 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 25.6199ms
2023-04-03 18:39:59.465 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:39:59.465 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:39:59.466 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:39:59.467 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-03 18:39:59.468 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 50.4338ms
2023-04-03 18:40:11.111 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:40:11.111 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:40:11.112 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:40:11.113 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:40:11.114 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:40:11.115 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-03 18:40:11.116 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:40:11.117 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:40:11.118 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:40:11.118 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:40:11.119 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:40:11.120 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:40:11.120 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:40:11.121 +04:00 [DBG] The request is a preflight request.
2023-04-03 18:40:11.122 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 10.6224ms
2023-04-03 18:40:11.122 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 11.2049ms
2023-04-03 18:40:11.123 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:40:11.125 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:40:11.126 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:40:11.127 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:40:11.128 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:40:11.129 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:40:11.130 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:40:11.131 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:40:11.131 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:40:11.132 +04:00 [DBG] Authorization was successful.
2023-04-03 18:40:11.133 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:40:11.133 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:40:11.135 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:40:11.136 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:40:11.137 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:40:11.139 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:40:11.140 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:40:11.141 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:40:11.143 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:40:11.144 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:40:11.146 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:40:11.147 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:40:11.148 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:40:11.148 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:40:11.149 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-03 18:40:11.150 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:40:11.151 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:40:11.152 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:40:11.154 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:40:11.157 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:40:11.158 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:40:11.159 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:40:11.161 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:40:11.163 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 6ms reading results.
2023-04-03 18:40:11.164 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:40:11.165 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:40:11.166 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:40:11.168 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:40:11.169 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:40:11.169 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:40:11.170 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:40:11.171 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:40:11.172 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 30.898ms
2023-04-03 18:40:11.173 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-03 18:40:11.173 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:40:11.174 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-03 18:40:11.175 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:40:11.176 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-03 18:40:11.177 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:40:11.179 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:40:11.180 +04:00 [DBG] Disposed connection to database '' on server '' (3ms).
2023-04-03 18:40:11.181 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-03 18:40:11.182 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 59.0439ms
2023-04-03 18:40:11.183 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-03 18:40:11.184 +04:00 [INF] CORS policy execution successful.
2023-04-03 18:40:11.185 +04:00 [DBG] Successfully validated the token.
2023-04-03 18:40:11.186 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-03 18:40:11.186 +04:00 [DBG] Authorization was successful.
2023-04-03 18:40:11.187 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:40:11.188 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-03 18:40:11.189 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-03 18:40:11.190 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-03 18:40:11.191 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-03 18:40:11.192 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-03 18:40:11.194 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-03 18:40:11.195 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:40:11.196 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-03 18:40:11.197 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-03 18:40:11.199 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-03 18:40:11.199 +04:00 [DBG] Creating DbConnection.
2023-04-03 18:40:11.200 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-03 18:40:11.201 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-03 18:40:11.202 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-03 18:40:11.203 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:40:11.204 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:40:11.205 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:40:11.207 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-03 18:40:11.209 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:40:11.211 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:40:11.211 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-03 18:40:11.212 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:40:11.213 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-03 18:40:11.214 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:40:11.215 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-03 18:40:11.217 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-03 18:40:11.218 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-03 18:40:11.219 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-03 18:40:11.219 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-03 18:40:11.220 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-03 18:40:11.221 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-03 18:40:11.222 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 26.3461ms
2023-04-03 18:40:11.223 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-03 18:40:11.224 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-03 18:40:11.225 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-03 18:40:11.227 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-03 18:40:11.228 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 54.5774ms
2023-04-03 18:40:40.300 +04:00 [DBG] Connection id "0HMPKA1ARO0L4" received FIN.
2023-04-03 18:40:40.301 +04:00 [DBG] Connection id "0HMPKA1ARO0L4" is closed. The last processed stream ID was 31.
2023-04-03 18:40:40.301 +04:00 [DBG] The connection queue processing loop for 0HMPKA1ARO0L4 completed.
2023-04-03 18:40:40.302 +04:00 [DBG] Connection id "0HMPKA1ARO0L4" sending FIN because: "The client closed the connection."
2023-04-03 18:40:40.314 +04:00 [DBG] Connection id "0HMPKA1ARO0L4" stopped.
