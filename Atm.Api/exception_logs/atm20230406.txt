2023-04-06 18:57:00.518 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-06 18:57:00.587 +04:00 [DBG] Hosting starting
2023-04-06 18:57:00.612 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-06 18:57:00.619 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-06 18:57:00.626 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-06 18:57:00.632 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-06 18:57:00.637 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-06 18:57:00.643 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-06 18:57:00.647 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-06 18:57:00.650 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-06 18:57:00.652 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-06 18:57:00.655 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-06 18:57:00.661 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-06 18:57:00.665 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-06 18:57:00.667 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-06 18:57:00.800 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-06 18:57:00.801 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-06 18:57:00.802 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-06 18:57:00.802 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-06 18:57:00.803 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-06 18:57:00.804 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-06 18:57:00.805 +04:00 [INF] Hosting environment: Development
2023-04-06 18:57:00.805 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-06 18:57:00.806 +04:00 [DBG] Hosting started
2023-04-06 18:57:01.123 +04:00 [DBG] Connection id "0HMPMLSMLNGTO" accepted.
2023-04-06 18:57:01.123 +04:00 [DBG] Connection id "0HMPMLSMLNGTP" accepted.
2023-04-06 18:57:01.125 +04:00 [DBG] Connection id "0HMPMLSMLNGTO" started.
2023-04-06 18:57:01.125 +04:00 [DBG] Connection id "0HMPMLSMLNGTP" started.
2023-04-06 18:57:01.146 +04:00 [DBG] Connection id "0HMPMLSMLNGTO" received FIN.
2023-04-06 18:57:01.146 +04:00 [DBG] Connection id "0HMPMLSMLNGTP" received FIN.
2023-04-06 18:57:01.154 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-06 18:57:01.154 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-06 18:57:01.189 +04:00 [DBG] Connection id "0HMPMLSMLNGTO" stopped.
2023-04-06 18:57:01.189 +04:00 [DBG] Connection id "0HMPMLSMLNGTP" stopped.
2023-04-06 18:57:01.192 +04:00 [DBG] Connection id "0HMPMLSMLNGTP" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-06 18:57:01.192 +04:00 [DBG] Connection id "0HMPMLSMLNGTO" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-06 18:57:01.367 +04:00 [DBG] Connection id "0HMPMLSMLNGTQ" accepted.
2023-04-06 18:57:01.370 +04:00 [DBG] Connection id "0HMPMLSMLNGTQ" started.
2023-04-06 18:57:01.430 +04:00 [DBG] Connection 0HMPMLSMLNGTQ established using the following protocol: "Tls12"
2023-04-06 18:57:01.632 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-06 18:57:01.654 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-06 18:57:01.680 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-06 18:57:01.682 +04:00 [DBG] Request did not match any endpoints
2023-04-06 18:57:01.929 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-06 18:57:01.944 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-06 18:57:01.949 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 318.9812ms
2023-04-06 18:57:01.972 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-06 18:57:01.980 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 7.4576ms
2023-04-06 18:57:02.004 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-06 18:57:02.027 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.8099ms
2023-04-06 18:57:02.138 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-06 18:57:02.140 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-06 18:57:02.142 +04:00 [DBG] Request did not match any endpoints
2023-04-06 18:57:02.295 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 157.3543ms
2023-04-06 18:57:03.681 +04:00 [DBG] Connection id "0HMPMLSMLNGTR" accepted.
2023-04-06 18:57:03.682 +04:00 [DBG] Connection id "0HMPMLSMLNGTR" started.
2023-04-06 18:57:03.686 +04:00 [DBG] Connection 0HMPMLSMLNGTR established using the following protocol: "Tls12"
2023-04-06 18:57:03.689 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-06 18:57:03.692 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-06 18:57:03.694 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 18:57:03.697 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:57:03.699 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:57:03.700 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:57:03.701 +04:00 [DBG] The request is a preflight request.
2023-04-06 18:57:03.702 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 13.3964ms
2023-04-06 18:57:03.704 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 45
2023-04-06 18:57:03.706 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-06 18:57:03.709 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-06 18:57:03.711 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-06 18:57:03.712 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:57:03.713 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:57:03.714 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:57:03.779 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-06 18:57:03.784 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-06 18:57:03.809 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-06 18:57:03.812 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 18:57:03.814 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 18:57:03.815 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 18:57:03.817 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 18:57:03.819 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 18:57:03.821 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:57:03.982 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-06 18:57:04.002 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:57:04.011 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-06 18:57:04.014 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-06 18:57:04.016 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-06 18:57:04.021 +04:00 [DBG] Connection id "0HMPMLSMLNGTR", Request id "0HMPMLSMLNGTR:00000003": started reading request body.
2023-04-06 18:57:04.023 +04:00 [DBG] Connection id "0HMPMLSMLNGTR", Request id "0HMPMLSMLNGTR:00000003": done reading request body.
2023-04-06 18:57:04.026 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-06 18:57:04.028 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-06 18:57:04.029 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-06 18:57:04.030 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-06 18:57:04.037 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-06 18:57:04.540 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2023-04-06 18:57:04.543 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2023-04-06 18:57:04.813 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 18:57:04.898 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.CardNumber == __request_CardNumber_0 && c.Pin == __request_Pin_1)'
2023-04-06 18:57:04.949 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-06 18:57:05.070 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE (c.CardNumber == @__request_CardNumber_0) && (c.Pin == @__request_Pin_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-06 18:57:05.106 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:57:05.108 +04:00 [DBG] Creating DbConnection.
2023-04-06 18:57:05.129 +04:00 [DBG] Created DbConnection. (18ms).
2023-04-06 18:57:05.136 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (28ms).
2023-04-06 18:57:05.146 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (40ms).
2023-04-06 18:57:05.150 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:05.327 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:05.335 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-06 18:57:05.397 +04:00 [INF] Executed DbCommand (64ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-06 18:57:05.421 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:05.461 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:05.470 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:05.484 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:05.490 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 86ms reading results.
2023-04-06 18:57:05.494 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:05.500 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (6ms).
2023-04-06 18:57:05.603 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 18:57:05.607 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 18:57:05.608 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 18:57:05.609 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 18:57:05.611 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 18:57:05.612 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 18:57:05.623 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 1800.7711ms
2023-04-06 18:57:05.624 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-06 18:57:05.627 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 18:57:05.630 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:05.633 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-06 18:57:05.634 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 45 - 200 - application/json;+charset=utf-8 1930.5247ms
2023-04-06 18:57:06.984 +04:00 [DBG] Connection id "0HMPMLSMLNGTQ" received FIN.
2023-04-06 18:57:06.984 +04:00 [DBG] Connection id "0HMPMLSMLNGTR" received FIN.
2023-04-06 18:57:06.987 +04:00 [DBG] Connection id "0HMPMLSMLNGTQ" is closed. The last processed stream ID was 7.
2023-04-06 18:57:06.987 +04:00 [DBG] Connection id "0HMPMLSMLNGTR" is closed. The last processed stream ID was 3.
2023-04-06 18:57:06.997 +04:00 [DBG] Connection id "0HMPMLSMLNGTQ" sending FIN because: "The client closed the connection."
2023-04-06 18:57:06.997 +04:00 [DBG] Connection id "0HMPMLSMLNGTR" sending FIN because: "The client closed the connection."
2023-04-06 18:57:06.999 +04:00 [DBG] The connection queue processing loop for 0HMPMLSMLNGTQ completed.
2023-04-06 18:57:07.000 +04:00 [DBG] The connection queue processing loop for 0HMPMLSMLNGTR completed.
2023-04-06 18:57:07.003 +04:00 [DBG] Connection id "0HMPMLSMLNGTQ" stopped.
2023-04-06 18:57:07.003 +04:00 [DBG] Connection id "0HMPMLSMLNGTR" stopped.
2023-04-06 18:57:10.266 +04:00 [DBG] Connection id "0HMPMLSMLNGTS" accepted.
2023-04-06 18:57:10.267 +04:00 [DBG] Connection id "0HMPMLSMLNGTS" started.
2023-04-06 18:57:10.269 +04:00 [DBG] Connection 0HMPMLSMLNGTS established using the following protocol: "Tls12"
2023-04-06 18:57:10.270 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:57:10.270 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:57:10.271 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:57:10.272 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:57:10.273 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 18:57:10.274 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 18:57:10.276 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:57:10.277 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:57:10.278 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:57:10.278 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:57:10.280 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:57:10.281 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:57:10.282 +04:00 [DBG] The request is a preflight request.
2023-04-06 18:57:10.283 +04:00 [DBG] The request is a preflight request.
2023-04-06 18:57:10.284 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 13.3559ms
2023-04-06 18:57:10.284 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 14.1173ms
2023-04-06 18:57:10.286 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:57:10.287 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:57:10.288 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-06 18:57:10.290 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:10.291 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:57:10.292 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:57:10.293 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:57:10.336 +04:00 [DBG] Successfully validated the token.
2023-04-06 18:57:10.338 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 18:57:10.346 +04:00 [DBG] Authorization was successful.
2023-04-06 18:57:10.347 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:10.352 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-06 18:57:10.354 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 18:57:10.355 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 18:57:10.357 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 18:57:10.358 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 18:57:10.360 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 18:57:10.361 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:57:10.364 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:57:10.378 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 18:57:10.382 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.Id == __cardId_0)'
2023-04-06 18:57:10.384 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-06 18:57:10.392 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-06 18:57:10.396 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:57:10.397 +04:00 [DBG] Creating DbConnection.
2023-04-06 18:57:10.398 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-06 18:57:10.399 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-06 18:57:10.401 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-06 18:57:10.402 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:10.404 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:10.406 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:57:10.416 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:57:10.419 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:10.421 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:10.423 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:10.424 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:10.426 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 6ms reading results.
2023-04-06 18:57:10.428 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:10.430 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-06 18:57:10.432 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 18:57:10.435 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 18:57:10.436 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 18:57:10.437 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 18:57:10.439 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 18:57:10.440 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 18:57:10.447 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 85.4093ms
2023-04-06 18:57:10.448 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:57:10.449 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:10.450 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:57:10.452 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 18:57:10.453 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-06 18:57:10.454 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:10.456 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:10.458 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-06 18:57:10.459 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:57:10.460 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 174.4336ms
2023-04-06 18:57:10.461 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:57:10.464 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:57:10.468 +04:00 [DBG] Successfully validated the token.
2023-04-06 18:57:10.469 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 18:57:10.471 +04:00 [DBG] Authorization was successful.
2023-04-06 18:57:10.473 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:10.475 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-06 18:57:10.477 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 18:57:10.479 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 18:57:10.481 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 18:57:10.483 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 18:57:10.484 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 18:57:10.486 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:57:10.489 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:57:10.548 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 18:57:10.554 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:57:10.555 +04:00 [DBG] Creating DbConnection.
2023-04-06 18:57:10.556 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 18:57:10.557 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-06 18:57:10.558 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-06 18:57:10.559 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:10.560 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:10.562 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:57:10.568 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:57:10.571 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:10.572 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:10.574 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:10.575 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:10.576 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-06 18:57:10.578 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:10.580 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-06 18:57:10.582 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 18:57:10.584 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 18:57:10.585 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 18:57:10.586 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 18:57:10.587 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 18:57:10.588 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 18:57:10.589 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 103.9977ms
2023-04-06 18:57:10.591 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:10.592 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 18:57:10.593 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:10.594 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-06 18:57:10.596 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 147.7394ms
2023-04-06 18:57:13.220 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:57:13.221 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:57:13.222 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-06 18:57:13.224 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:13.225 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:57:13.225 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:57:13.226 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:57:13.227 +04:00 [DBG] Successfully validated the token.
2023-04-06 18:57:13.229 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 18:57:13.231 +04:00 [DBG] Authorization was successful.
2023-04-06 18:57:13.232 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:13.233 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-06 18:57:13.235 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 18:57:13.236 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 18:57:13.238 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 18:57:13.240 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 18:57:13.241 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 18:57:13.243 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:57:13.245 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:57:13.247 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 18:57:13.250 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:57:13.251 +04:00 [DBG] Creating DbConnection.
2023-04-06 18:57:13.251 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 18:57:13.252 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-06 18:57:13.253 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-06 18:57:13.254 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:13.256 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:13.257 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:57:13.262 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:57:13.264 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:13.266 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:13.267 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:13.269 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:13.270 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-06 18:57:13.271 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:13.272 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-06 18:57:13.274 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 18:57:13.276 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 18:57:13.277 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 18:57:13.278 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 18:57:13.279 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 18:57:13.282 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 18:57:13.284 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 40.5687ms
2023-04-06 18:57:13.285 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:13.285 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:57:13.286 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 18:57:13.287 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:57:13.288 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:13.289 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-06 18:57:13.290 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-06 18:57:13.292 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:13.293 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 73.5866ms
2023-04-06 18:57:13.294 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:57:13.297 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:57:13.298 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:57:13.299 +04:00 [DBG] Successfully validated the token.
2023-04-06 18:57:13.300 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 18:57:13.301 +04:00 [DBG] Authorization was successful.
2023-04-06 18:57:13.301 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:13.302 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-06 18:57:13.304 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 18:57:13.305 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 18:57:13.307 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 18:57:13.309 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 18:57:13.311 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 18:57:13.313 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:57:13.314 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:57:13.316 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 18:57:13.318 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:57:13.319 +04:00 [DBG] Creating DbConnection.
2023-04-06 18:57:13.320 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 18:57:13.321 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-06 18:57:13.322 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-06 18:57:13.323 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:13.324 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:13.326 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:57:13.329 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:57:13.332 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:13.333 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:13.334 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:13.335 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:13.336 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-06 18:57:13.337 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:13.338 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-06 18:57:13.340 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 18:57:13.342 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 18:57:13.343 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 18:57:13.344 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 18:57:13.345 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 18:57:13.346 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 18:57:13.347 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 34.8245ms
2023-04-06 18:57:13.349 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:13.350 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 18:57:13.351 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:13.352 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-06 18:57:13.353 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 67.8072ms
2023-04-06 18:57:16.989 +04:00 [DBG] Connection id "0HMPMLSMLNGTS" received FIN.
2023-04-06 18:57:16.990 +04:00 [DBG] Connection id "0HMPMLSMLNGTS" is closed. The last processed stream ID was 11.
2023-04-06 18:57:16.991 +04:00 [DBG] The connection queue processing loop for 0HMPMLSMLNGTS completed.
2023-04-06 18:57:16.992 +04:00 [DBG] Connection id "0HMPMLSMLNGTS" sending FIN because: "The client closed the connection."
2023-04-06 18:57:16.995 +04:00 [DBG] Connection id "0HMPMLSMLNGTS" stopped.
2023-04-06 18:57:27.849 +04:00 [DBG] Connection id "0HMPMLSMLNGTT" accepted.
2023-04-06 18:57:27.850 +04:00 [DBG] Connection id "0HMPMLSMLNGTT" started.
2023-04-06 18:57:27.852 +04:00 [DBG] Connection 0HMPMLSMLNGTT established using the following protocol: "Tls12"
2023-04-06 18:57:27.853 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-06 18:57:27.854 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-06 18:57:27.855 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 18:57:27.856 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:57:27.856 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:57:27.857 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:57:27.858 +04:00 [DBG] The request is a preflight request.
2023-04-06 18:57:27.859 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 6.1248ms
2023-04-06 18:57:27.861 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 27
2023-04-06 18:57:27.861 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-06 18:57:27.862 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-06 18:57:27.863 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-06 18:57:27.864 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:57:27.865 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:57:27.866 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:57:27.866 +04:00 [DBG] Successfully validated the token.
2023-04-06 18:57:27.867 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 18:57:27.868 +04:00 [DBG] Authorization was successful.
2023-04-06 18:57:27.869 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-06 18:57:27.872 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-06 18:57:27.874 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 18:57:27.875 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 18:57:27.876 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 18:57:27.878 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 18:57:27.879 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 18:57:27.881 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-06 18:57:27.882 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-06 18:57:27.884 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-06 18:57:27.885 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-06 18:57:27.886 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-06 18:57:27.891 +04:00 [DBG] Connection id "0HMPMLSMLNGTT", Request id "0HMPMLSMLNGTT:00000003": started reading request body.
2023-04-06 18:57:27.893 +04:00 [DBG] Connection id "0HMPMLSMLNGTT", Request id "0HMPMLSMLNGTT:00000003": done reading request body.
2023-04-06 18:57:27.896 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-06 18:57:27.897 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-06 18:57:27.899 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-06 18:57:27.900 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-06 18:57:27.904 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-06 18:57:27.911 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 18:57:27.913 +04:00 [DBG] Compiling query expression: 
'DbSet<CurrencyEntity>()'
2023-04-06 18:57:27.917 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CurrencyEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CurrencyEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CurrencyEntity.Code (string), 1], [Property: CurrencyEntity.Date (DateTime) Required, 2], [Property: CurrencyEntity.Diff (decimal) Required, 3], [Property: CurrencyEntity.DiffFormated (string), 4], [Property: CurrencyEntity.LastUpdatedAt (DateTime) Required, 5], [Property: CurrencyEntity.Name (string), 6], [Property: CurrencyEntity.Quantity (int) Required, 7], [Property: CurrencyEntity.Rate (decimal) Required, 8], [Property: CurrencyEntity.RateFormated (string), 9], [Property: CurrencyEntity.ValidFromDate (DateTime) Required, 10] }
        SELECT c.Id, c.Code, c.Date, c.Diff, c.DiffFormated, c.LastUpdatedAt, c.Name, c.Quantity, c.Rate, c.RateFormated, c.ValidFromDate
        FROM Currencies AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CurrencyEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-06 18:57:27.921 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:57:27.922 +04:00 [DBG] Creating DbConnection.
2023-04-06 18:57:27.922 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 18:57:27.924 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-06 18:57:27.925 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-06 18:57:27.926 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:27.927 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:27.929 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-06 18:57:27.932 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-06 18:57:27.937 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.953 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.955 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.957 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.958 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.959 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.960 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.962 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.963 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.965 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.966 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.967 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.968 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.969 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.971 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.972 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.974 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.975 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.976 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.977 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.979 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.981 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.982 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.983 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.984 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.985 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.987 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.988 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.989 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.990 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.991 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.993 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.994 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.995 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.997 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.998 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:27.999 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.000 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.001 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.003 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.004 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.007 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.009 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.010 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:28.012 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 77ms reading results.
2023-04-06 18:57:28.013 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:28.014 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 18:57:28.021 +04:00 [DBG] Compiling query expression: 
'DbSet<AccountEntity>()
    .Include(a => a.UserEntity)
    .FirstOrDefault(a => a.Cards
        .Any(c => c.Id == __cardId_0))'
2023-04-06 18:57:28.026 +04:00 [DBG] Including navigation: 'AccountEntity.UserEntity'.
2023-04-06 18:57:28.047 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AccountEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<AccountEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AccountEntity.Amount (decimal) Required, 1], [Property: AccountEntity.Currency (CurrencyType) Required, 2], [Property: AccountEntity.Iban (string), 3], [Property: AccountEntity.UserId (Guid) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: UserEntity.AccessFailedCount (int) Required, 6], [Property: UserEntity.BirthDate (DateTime) Required, 7], [Property: UserEntity.ConcurrencyStamp (string) Concurrency, 8], [Property: UserEntity.Email (string) MaxLength(256), 9], [Property: UserEntity.EmailConfirmed (bool) Required, 10], [Property: UserEntity.FirstName (string), 11], [Property: UserEntity.LastName (string), 12], [Property: UserEntity.LockoutEnabled (bool) Required, 13], [Property: UserEntity.LockoutEnd (DateTimeOffset?), 14], [Property: UserEntity.NormalizedEmail (string) Index MaxLength(256), 15], [Property: UserEntity.NormalizedUserName (string) Index MaxLength(256), 16], [Property: UserEntity.PasswordHash (string), 17], [Property: UserEntity.PersonalNumber (string), 18], [Property: UserEntity.PhoneNumber (string), 19], [Property: UserEntity.PhoneNumberConfirmed (bool) Required, 20], [Property: UserEntity.RegisteredAt (DateTime) Required, 21], [Property: UserEntity.SecurityStamp (string), 22], [Property: UserEntity.TwoFactorEnabled (bool) Required, 23], [Property: UserEntity.UserName (string) MaxLength(256), 24] }
            SELECT TOP(1) a.Id, a.Amount, a.Currency, a.Iban, a.UserId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.FirstName, a0.LastName, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.PersonalNumber, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RegisteredAt, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
            FROM Accounts AS a
            INNER JOIN AspNetUsers AS a0 ON a.UserId == a0.Id
            WHERE EXISTS (
                SELECT 1
                FROM Cards AS c
                WHERE ((a.Id != NULL) && (a.Id == c.AccountId)) && (c.Id == @__cardId_0))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-06 18:57:28.053 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:57:28.055 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-06 18:57:28.055 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-06 18:57:28.057 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:28.058 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:28.059 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-06 18:57:28.067 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-06 18:57:28.071 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.085 +04:00 [DBG] The navigation 'AccountEntity.UserEntity' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.088 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.113 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:28.115 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 44ms reading results.
2023-04-06 18:57:28.116 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:28.117 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-06 18:57:28.123 +04:00 [DBG] Compiling query expression: 
'DbSet<TransactionEntity>()
    .Where(t => t.AccountFromId == __accountId_0 && t.CreatedAt.Date == DateTime.Now.Date && (int)t.TransactionType == 0)'
2023-04-06 18:57:28.134 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<TransactionEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TransactionEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TransactionEntity.AccountFromIban (string), 1], [Property: TransactionEntity.AccountFromId (Guid?), 2], [Property: TransactionEntity.AccountToIban (string), 3], [Property: TransactionEntity.AccountToId (Guid?), 4], [Property: TransactionEntity.CreatedAt (DateTime) Required, 5], [Property: TransactionEntity.CurrencyFrom (CurrencyType) Required, 6], [Property: TransactionEntity.CurrencyTo (CurrencyType) Required, 7], [Property: TransactionEntity.Fee (decimal) Required, 8], [Property: TransactionEntity.ReceivedAmount (decimal) Required, 9], [Property: TransactionEntity.TransactionType (TransactionType) Required, 10], [Property: TransactionEntity.WithDrawnAmount (decimal) Required, 11] }
        SELECT t.Id, t.AccountFromIban, t.AccountFromId, t.AccountToIban, t.AccountToId, t.CreatedAt, t.CurrencyFrom, t.CurrencyTo, t.Fee, t.ReceivedAmount, t.TransactionType, t.WithDrawnAmount
        FROM Transactions AS t
        WHERE ((t.AccountFromId == @__accountId_0) && (CONVERT(date, t.CreatedAt) == CONVERT(date, GETDATE()))) && (t.TransactionType == 0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TransactionEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-06 18:57:28.141 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:57:28.142 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-06 18:57:28.143 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-06 18:57:28.145 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:28.146 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:28.147 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-06 18:57:28.156 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-06 18:57:28.159 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:28.160 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-06 18:57:28.162 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:28.163 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-06 18:57:28.175 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.233 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.251 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.256 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-06 18:57:28.259 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-06 18:57:28.301 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-06 18:57:28.354 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-06 18:57:28.358 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:28.360 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:28.362 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-06 18:57:28.367 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-06 18:57:28.370 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:57:28.371 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-06 18:57:28.375 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-06 18:57:28.376 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-06 18:57:28.387 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-06 18:57:28.393 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:28.394 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-06 18:57:28.398 +04:00 [DBG] Committing transaction.
2023-04-06 18:57:28.401 +04:00 [DBG] Committed transaction.
2023-04-06 18:57:28.403 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:28.404 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-06 18:57:28.407 +04:00 [DBG] Disposing transaction.
2023-04-06 18:57:28.411 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.414 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.415 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:28.418 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-06 18:57:28.420 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 18:57:28.422 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 18:57:28.423 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 18:57:28.424 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 18:57:28.424 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 18:57:28.425 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 18:57:28.433 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 552.598ms
2023-04-06 18:57:28.434 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-06 18:57:28.435 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 18:57:28.436 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:28.438 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-06 18:57:28.439 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 27 - 200 - application/json;+charset=utf-8 578.3845ms
2023-04-06 18:57:37.013 +04:00 [DBG] Connection id "0HMPMLSMLNGTT" received FIN.
2023-04-06 18:57:37.014 +04:00 [DBG] Connection id "0HMPMLSMLNGTT" is closed. The last processed stream ID was 3.
2023-04-06 18:57:37.014 +04:00 [DBG] The connection queue processing loop for 0HMPMLSMLNGTT completed.
2023-04-06 18:57:37.015 +04:00 [DBG] Connection id "0HMPMLSMLNGTT" sending FIN because: "The client closed the connection."
2023-04-06 18:57:37.028 +04:00 [DBG] Connection id "0HMPMLSMLNGTT" stopped.
2023-04-06 18:57:57.457 +04:00 [DBG] Connection id "0HMPMLSMLNGTU" accepted.
2023-04-06 18:57:57.459 +04:00 [DBG] Connection id "0HMPMLSMLNGTU" started.
2023-04-06 18:57:57.460 +04:00 [DBG] Connection 0HMPMLSMLNGTU established using the following protocol: "Tls12"
2023-04-06 18:57:57.462 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:57:57.463 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:57:57.463 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:57:57.464 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:57:57.465 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 18:57:57.466 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 18:57:57.467 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:57:57.467 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:57:57.468 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:57:57.469 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:57:57.470 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:57:57.470 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:57:57.471 +04:00 [DBG] The request is a preflight request.
2023-04-06 18:57:57.472 +04:00 [DBG] The request is a preflight request.
2023-04-06 18:57:57.472 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 9.9572ms
2023-04-06 18:57:57.473 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 10.3788ms
2023-04-06 18:57:57.474 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:57:57.476 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:57:57.476 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-06 18:57:57.478 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:57.479 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:57:57.480 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:57:57.481 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:57:57.482 +04:00 [DBG] Successfully validated the token.
2023-04-06 18:57:57.482 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 18:57:57.483 +04:00 [DBG] Authorization was successful.
2023-04-06 18:57:57.484 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:57.484 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-06 18:57:57.486 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 18:57:57.487 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 18:57:57.489 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 18:57:57.491 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 18:57:57.492 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 18:57:57.494 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:57:57.496 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:57:57.497 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 18:57:57.499 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:57:57.500 +04:00 [DBG] Creating DbConnection.
2023-04-06 18:57:57.501 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 18:57:57.501 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-06 18:57:57.502 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-06 18:57:57.503 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:57.504 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:57.505 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:57:57.512 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:57:57.514 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:57.515 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:57.517 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:57.518 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:57.519 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-06 18:57:57.520 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:57.521 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 18:57:57.522 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 18:57:57.524 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 18:57:57.525 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 18:57:57.526 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 18:57:57.527 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 18:57:57.528 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 18:57:57.530 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 35.9661ms
2023-04-06 18:57:57.531 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:57.531 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:57:57.532 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 18:57:57.533 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:57:57.534 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:57.535 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-06 18:57:57.536 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-06 18:57:57.537 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:57.539 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 64.2611ms
2023-04-06 18:57:57.540 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:57:57.542 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:57:57.543 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:57:57.545 +04:00 [DBG] Successfully validated the token.
2023-04-06 18:57:57.545 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 18:57:57.546 +04:00 [DBG] Authorization was successful.
2023-04-06 18:57:57.547 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:57.548 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-06 18:57:57.550 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 18:57:57.551 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 18:57:57.552 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 18:57:57.553 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 18:57:57.554 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 18:57:57.556 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:57:57.556 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:57:57.558 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 18:57:57.561 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:57:57.562 +04:00 [DBG] Creating DbConnection.
2023-04-06 18:57:57.563 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 18:57:57.563 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-06 18:57:57.564 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-06 18:57:57.565 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:57.566 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:57.567 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:57:57.571 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:57:57.574 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:57.575 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:57.576 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:57:57.578 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:57.579 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-06 18:57:57.580 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:57.581 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-06 18:57:57.583 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 18:57:57.584 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 18:57:57.585 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 18:57:57.586 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 18:57:57.586 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 18:57:57.587 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 18:57:57.588 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 32.9047ms
2023-04-06 18:57:57.590 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:57:57.591 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 18:57:57.592 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:57:57.593 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-06 18:57:57.594 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 62.5987ms
2023-04-06 18:58:07.053 +04:00 [DBG] Connection id "0HMPMLSMLNGTU" received FIN.
2023-04-06 18:58:07.055 +04:00 [DBG] Connection id "0HMPMLSMLNGTU" is closed. The last processed stream ID was 7.
2023-04-06 18:58:07.055 +04:00 [DBG] The connection queue processing loop for 0HMPMLSMLNGTU completed.
2023-04-06 18:58:07.056 +04:00 [DBG] Connection id "0HMPMLSMLNGTU" sending FIN because: "The client closed the connection."
2023-04-06 18:58:07.069 +04:00 [DBG] Connection id "0HMPMLSMLNGTU" stopped.
2023-04-06 18:58:23.929 +04:00 [DBG] Connection id "0HMPMLSMLNGTV" accepted.
2023-04-06 18:58:23.930 +04:00 [DBG] Connection id "0HMPMLSMLNGTV" started.
2023-04-06 18:58:23.942 +04:00 [DBG] Connection 0HMPMLSMLNGTV established using the following protocol: "Tls12"
2023-04-06 18:58:23.944 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-06 18:58:23.945 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-06 18:58:23.946 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 18:58:23.947 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:58:23.948 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:58:23.949 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:58:23.949 +04:00 [DBG] The request is a preflight request.
2023-04-06 18:58:23.950 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 6.3040ms
2023-04-06 18:58:23.952 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26
2023-04-06 18:58:23.952 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-06 18:58:23.953 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-06 18:58:23.955 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-06 18:58:23.956 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:58:23.956 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:58:23.957 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:58:23.958 +04:00 [DBG] Successfully validated the token.
2023-04-06 18:58:23.959 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 18:58:23.960 +04:00 [DBG] Authorization was successful.
2023-04-06 18:58:23.962 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-06 18:58:23.963 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-06 18:58:23.964 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 18:58:23.966 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 18:58:23.967 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 18:58:23.969 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 18:58:23.969 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 18:58:23.971 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-06 18:58:23.973 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-06 18:58:23.973 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-06 18:58:23.975 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-06 18:58:23.976 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-06 18:58:23.978 +04:00 [DBG] Connection id "0HMPMLSMLNGTV", Request id "0HMPMLSMLNGTV:00000003": started reading request body.
2023-04-06 18:58:23.979 +04:00 [DBG] Connection id "0HMPMLSMLNGTV", Request id "0HMPMLSMLNGTV:00000003": done reading request body.
2023-04-06 18:58:23.980 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-06 18:58:23.981 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-06 18:58:23.982 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-06 18:58:23.983 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-06 18:58:23.984 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-06 18:58:23.986 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 18:58:23.987 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:58:23.988 +04:00 [DBG] Creating DbConnection.
2023-04-06 18:58:23.989 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 18:58:23.989 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-06 18:58:23.990 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-06 18:58:23.991 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:23.992 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:23.993 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-06 18:58:23.996 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-06 18:58:23.998 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:23.999 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.000 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.001 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.002 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.003 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.004 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.005 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.006 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.007 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.009 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.010 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.011 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.012 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.014 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.015 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.016 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.017 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.019 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.020 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.021 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.022 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.023 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.025 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.025 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.027 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.029 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.030 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.030 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.032 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.033 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.034 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.035 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.036 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.037 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.038 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.039 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.040 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.041 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.042 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.043 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.045 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.046 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.047 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:24.048 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 50ms reading results.
2023-04-06 18:58:24.049 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:24.050 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 18:58:24.052 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:58:24.052 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-06 18:58:24.053 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-06 18:58:24.054 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:24.055 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:24.056 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-06 18:58:24.063 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-06 18:58:24.066 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.067 +04:00 [DBG] The navigation 'AccountEntity.UserEntity' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.068 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.069 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:24.070 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-06 18:58:24.071 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:24.072 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 18:58:24.074 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:58:24.075 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-06 18:58:24.076 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-06 18:58:24.077 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:24.078 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:24.079 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-06 18:58:24.083 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-06 18:58:24.085 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.087 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:24.088 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 2ms reading results.
2023-04-06 18:58:24.089 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:24.090 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 18:58:24.092 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.095 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.096 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.097 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-06 18:58:24.098 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-06 18:58:24.099 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-06 18:58:24.101 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-06 18:58:24.101 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:24.102 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:24.103 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-06 18:58:24.104 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-06 18:58:24.105 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:58:24.106 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-06 18:58:24.107 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-06 18:58:24.108 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-06 18:58:24.115 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-06 18:58:24.119 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:24.120 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-06 18:58:24.121 +04:00 [DBG] Committing transaction.
2023-04-06 18:58:24.122 +04:00 [DBG] Committed transaction.
2023-04-06 18:58:24.123 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:24.124 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 18:58:24.125 +04:00 [DBG] Disposing transaction.
2023-04-06 18:58:24.125 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.127 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.129 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:24.130 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-06 18:58:24.131 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 18:58:24.133 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 18:58:24.134 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 18:58:24.134 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 18:58:24.135 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 18:58:24.136 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 18:58:24.137 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 166.2467ms
2023-04-06 18:58:24.138 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-06 18:58:24.139 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 18:58:24.140 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:24.141 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-06 18:58:24.142 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26 - 200 - application/json;+charset=utf-8 190.6875ms
2023-04-06 18:58:25.531 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:58:25.532 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:58:25.533 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:58:25.533 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:58:25.535 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 18:58:25.536 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 18:58:25.537 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:58:25.538 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:58:25.539 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:58:25.540 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:58:25.541 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:58:25.542 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:58:25.543 +04:00 [DBG] The request is a preflight request.
2023-04-06 18:58:25.544 +04:00 [DBG] The request is a preflight request.
2023-04-06 18:58:25.545 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 14.6054ms
2023-04-06 18:58:25.546 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 14.8055ms
2023-04-06 18:58:25.549 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:58:25.549 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:58:25.551 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-06 18:58:25.552 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:58:25.553 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:58:25.554 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:58:25.555 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:58:25.556 +04:00 [DBG] Successfully validated the token.
2023-04-06 18:58:25.559 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 18:58:25.562 +04:00 [DBG] Authorization was successful.
2023-04-06 18:58:25.563 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:58:25.564 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-06 18:58:25.566 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 18:58:25.567 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 18:58:25.568 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 18:58:25.570 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 18:58:25.571 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 18:58:25.573 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:58:25.575 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:58:25.578 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 18:58:25.580 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:58:25.582 +04:00 [DBG] Creating DbConnection.
2023-04-06 18:58:25.583 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-06 18:58:25.584 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-06 18:58:25.585 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-06 18:58:25.586 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:25.587 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:25.589 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:58:25.596 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:58:25.600 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:25.601 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:25.603 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:25.604 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:25.606 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 6ms reading results.
2023-04-06 18:58:25.608 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:25.610 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-06 18:58:25.611 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 18:58:25.614 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 18:58:25.615 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 18:58:25.616 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 18:58:25.617 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 18:58:25.619 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 18:58:25.621 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 47.4399ms
2023-04-06 18:58:25.622 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:58:25.622 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:58:25.623 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:58:25.624 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 18:58:25.626 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-06 18:58:25.627 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:25.629 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:58:25.631 +04:00 [DBG] Disposed connection to database '' on server '' (3ms).
2023-04-06 18:58:25.632 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:58:25.633 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 84.1298ms
2023-04-06 18:58:25.634 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:58:25.636 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:58:25.637 +04:00 [DBG] Successfully validated the token.
2023-04-06 18:58:25.638 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 18:58:25.639 +04:00 [DBG] Authorization was successful.
2023-04-06 18:58:25.640 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:58:25.641 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-06 18:58:25.643 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 18:58:25.645 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 18:58:25.646 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 18:58:25.648 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 18:58:25.650 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 18:58:25.652 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:58:25.654 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:58:25.655 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 18:58:25.658 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:58:25.659 +04:00 [DBG] Creating DbConnection.
2023-04-06 18:58:25.660 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 18:58:25.661 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-06 18:58:25.662 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-06 18:58:25.663 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:25.665 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:25.666 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:58:25.671 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:58:25.673 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:25.675 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:25.676 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:25.678 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:25.679 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-06 18:58:25.680 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:25.681 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 18:58:25.683 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 18:58:25.684 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 18:58:25.685 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 18:58:25.686 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 18:58:25.686 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 18:58:25.688 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 18:58:25.689 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 36.4959ms
2023-04-06 18:58:25.690 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:58:25.691 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 18:58:25.691 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:25.692 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-06 18:58:25.694 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 71.3192ms
2023-04-06 18:58:27.097 +04:00 [DBG] Connection id "0HMPMLSMLNGTV" received FIN.
2023-04-06 18:58:27.098 +04:00 [DBG] Connection id "0HMPMLSMLNGTV" is closed. The last processed stream ID was 11.
2023-04-06 18:58:27.098 +04:00 [DBG] The connection queue processing loop for 0HMPMLSMLNGTV completed.
2023-04-06 18:58:27.099 +04:00 [DBG] Connection id "0HMPMLSMLNGTV" sending FIN because: "The client closed the connection."
2023-04-06 18:58:27.111 +04:00 [DBG] Connection id "0HMPMLSMLNGTV" stopped.
2023-04-06 18:58:43.440 +04:00 [DBG] Connection id "0HMPMLSMLNGU0" accepted.
2023-04-06 18:58:43.441 +04:00 [DBG] Connection id "0HMPMLSMLNGU0" started.
2023-04-06 18:58:43.443 +04:00 [DBG] Connection 0HMPMLSMLNGU0 established using the following protocol: "Tls12"
2023-04-06 18:58:43.445 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-06 18:58:43.446 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-06 18:58:43.447 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 18:58:43.448 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:58:43.450 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:58:43.451 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:58:43.452 +04:00 [DBG] The request is a preflight request.
2023-04-06 18:58:43.453 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 7.4847ms
2023-04-06 18:58:43.454 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 48
2023-04-06 18:58:43.454 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-06 18:58:43.455 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-06 18:58:43.456 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-06 18:58:43.457 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:58:43.458 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:58:43.459 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:58:43.460 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-06 18:58:43.461 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-06 18:58:43.462 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-06 18:58:43.464 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 18:58:43.465 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 18:58:43.466 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 18:58:43.468 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 18:58:43.469 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 18:58:43.470 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:58:43.471 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:58:43.472 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-06 18:58:43.473 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-06 18:58:43.474 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-06 18:58:43.475 +04:00 [DBG] Connection id "0HMPMLSMLNGU0", Request id "0HMPMLSMLNGU0:00000003": started reading request body.
2023-04-06 18:58:43.476 +04:00 [DBG] Connection id "0HMPMLSMLNGU0", Request id "0HMPMLSMLNGU0:00000003": done reading request body.
2023-04-06 18:58:43.477 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-06 18:58:43.478 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-06 18:58:43.479 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-06 18:58:43.481 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-06 18:58:43.482 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-06 18:58:43.483 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 18:58:43.485 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:58:43.486 +04:00 [DBG] Creating DbConnection.
2023-04-06 18:58:43.486 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 18:58:43.487 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-06 18:58:43.488 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-06 18:58:43.489 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:43.490 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:43.491 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-06 18:58:43.496 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-06 18:58:43.498 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:43.499 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:43.500 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:43.501 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:43.502 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-06 18:58:43.503 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:43.504 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 18:58:43.505 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 18:58:43.507 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 18:58:43.508 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 18:58:43.509 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 18:58:43.510 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 18:58:43.511 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 18:58:43.512 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 42.3434ms
2023-04-06 18:58:43.513 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-06 18:58:43.514 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 18:58:43.515 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:43.517 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-06 18:58:43.518 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 48 - 200 - application/json;+charset=utf-8 64.0976ms
2023-04-06 18:58:46.802 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:58:46.802 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:58:46.803 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:58:46.804 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:58:46.805 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 18:58:46.806 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 18:58:46.806 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:58:46.807 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:58:46.808 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:58:46.809 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:58:46.811 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:58:46.812 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:58:46.813 +04:00 [DBG] The request is a preflight request.
2023-04-06 18:58:46.814 +04:00 [DBG] The request is a preflight request.
2023-04-06 18:58:46.814 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 12.6195ms
2023-04-06 18:58:46.815 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 12.8258ms
2023-04-06 18:58:46.816 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:58:46.818 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:58:46.819 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-06 18:58:46.821 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:58:46.822 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:58:46.823 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:58:46.823 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:58:46.824 +04:00 [DBG] Successfully validated the token.
2023-04-06 18:58:46.825 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 18:58:46.826 +04:00 [DBG] Authorization was successful.
2023-04-06 18:58:46.827 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:58:46.828 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-06 18:58:46.830 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 18:58:46.831 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 18:58:46.832 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 18:58:46.834 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 18:58:46.835 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 18:58:46.836 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:58:46.838 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:58:46.839 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 18:58:46.842 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:58:46.843 +04:00 [DBG] Creating DbConnection.
2023-04-06 18:58:46.844 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 18:58:46.845 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-06 18:58:46.846 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-06 18:58:46.847 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:46.848 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:46.850 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:58:46.855 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:58:46.858 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:46.860 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:46.862 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:46.863 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:46.864 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 6ms reading results.
2023-04-06 18:58:46.866 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:46.867 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 18:58:46.869 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 18:58:46.870 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 18:58:46.871 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 18:58:46.872 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 18:58:46.872 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 18:58:46.874 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 18:58:46.875 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 38.6093ms
2023-04-06 18:58:46.876 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:58:46.877 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-06 18:58:46.878 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 18:58:46.879 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 18:58:46.880 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:46.882 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-06 18:58:46.883 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-06 18:58:46.884 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:58:46.885 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 69.3683ms
2023-04-06 18:58:46.886 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 18:58:46.888 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 18:58:46.889 +04:00 [INF] CORS policy execution successful.
2023-04-06 18:58:46.890 +04:00 [DBG] Successfully validated the token.
2023-04-06 18:58:46.891 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 18:58:46.892 +04:00 [DBG] Authorization was successful.
2023-04-06 18:58:46.892 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:58:46.894 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-06 18:58:46.896 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 18:58:46.897 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 18:58:46.898 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 18:58:46.900 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 18:58:46.901 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 18:58:46.902 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:58:46.903 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 18:58:46.904 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 18:58:46.906 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 18:58:46.906 +04:00 [DBG] Creating DbConnection.
2023-04-06 18:58:46.907 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 18:58:46.908 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-06 18:58:46.910 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-06 18:58:46.911 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:46.912 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:46.913 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:58:46.917 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 18:58:46.919 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:46.921 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:46.922 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 18:58:46.923 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:46.924 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-06 18:58:46.925 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:46.926 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-06 18:58:46.928 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 18:58:46.930 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 18:58:46.931 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 18:58:46.932 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 18:58:46.933 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 18:58:46.934 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 18:58:46.935 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 33.0424ms
2023-04-06 18:58:46.936 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 18:58:46.937 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 18:58:46.938 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 18:58:46.940 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-06 18:58:46.941 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 64.1222ms
2023-04-06 18:58:47.109 +04:00 [DBG] Connection id "0HMPMLSMLNGU0" received FIN.
2023-04-06 18:58:47.110 +04:00 [DBG] Connection id "0HMPMLSMLNGU0" is closed. The last processed stream ID was 11.
2023-04-06 18:58:47.111 +04:00 [DBG] The connection queue processing loop for 0HMPMLSMLNGU0 completed.
2023-04-06 18:58:47.112 +04:00 [DBG] Connection id "0HMPMLSMLNGU0" sending FIN because: "The client closed the connection."
2023-04-06 18:58:47.119 +04:00 [DBG] Connection id "0HMPMLSMLNGU0" stopped.
2023-04-06 19:02:02.346 +04:00 [DBG] Connection id "0HMPMLSMLNGU1" accepted.
2023-04-06 19:02:02.348 +04:00 [DBG] Connection id "0HMPMLSMLNGU1" started.
2023-04-06 19:02:02.354 +04:00 [DBG] Connection 0HMPMLSMLNGU1 established using the following protocol: "Tls12"
2023-04-06 19:02:02.356 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-06 19:02:02.356 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-06 19:02:02.358 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 19:02:02.358 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 19:02:02.359 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 19:02:02.360 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 19:02:02.361 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 19:02:02.362 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 19:02:02.362 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 19:02:02.363 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 19:02:02.363 +04:00 [INF] CORS policy execution successful.
2023-04-06 19:02:02.364 +04:00 [INF] CORS policy execution successful.
2023-04-06 19:02:02.365 +04:00 [DBG] The request is a preflight request.
2023-04-06 19:02:02.365 +04:00 [DBG] The request is a preflight request.
2023-04-06 19:02:02.366 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 10.1010ms
2023-04-06 19:02:02.367 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 10.8726ms
2023-04-06 19:02:02.378 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-06 19:02:02.379 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 19:02:02.380 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-06 19:02:02.381 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 19:02:02.382 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 19:02:02.382 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 19:02:02.383 +04:00 [INF] CORS policy execution successful.
2023-04-06 19:02:02.384 +04:00 [DBG] Successfully validated the token.
2023-04-06 19:02:02.384 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 19:02:02.386 +04:00 [DBG] Authorization was successful.
2023-04-06 19:02:02.386 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 19:02:02.387 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-06 19:02:02.389 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 19:02:02.390 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 19:02:02.391 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 19:02:02.392 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 19:02:02.393 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 19:02:02.394 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 19:02:02.395 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 19:02:02.397 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 19:02:02.399 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 19:02:02.399 +04:00 [DBG] Creating DbConnection.
2023-04-06 19:02:02.400 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 19:02:02.401 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-06 19:02:02.402 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-06 19:02:02.403 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:02.404 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:02.404 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 19:02:02.409 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 19:02:02.411 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:02.412 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:02.413 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:02.414 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:02.415 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-06 19:02:02.416 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:02.417 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 19:02:02.419 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 19:02:02.420 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 19:02:02.421 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 19:02:02.422 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 19:02:02.422 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 19:02:02.424 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 19:02:02.425 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 30.6139ms
2023-04-06 19:02:02.426 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 19:02:02.427 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-06 19:02:02.427 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 19:02:02.428 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-06 19:02:02.429 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:02.430 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-06 19:02:02.431 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-06 19:02:02.432 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 19:02:02.434 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 55.3861ms
2023-04-06 19:02:02.434 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 19:02:02.436 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 19:02:02.437 +04:00 [INF] CORS policy execution successful.
2023-04-06 19:02:02.438 +04:00 [DBG] Successfully validated the token.
2023-04-06 19:02:02.439 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 19:02:02.440 +04:00 [DBG] Authorization was successful.
2023-04-06 19:02:02.441 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 19:02:02.442 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-06 19:02:02.444 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 19:02:02.445 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 19:02:02.446 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 19:02:02.447 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 19:02:02.449 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 19:02:02.450 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 19:02:02.451 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-06 19:02:02.452 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 19:02:02.454 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 19:02:02.454 +04:00 [DBG] Creating DbConnection.
2023-04-06 19:02:02.455 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 19:02:02.455 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-06 19:02:02.457 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-06 19:02:02.458 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:02.459 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:02.460 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 19:02:02.463 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-06 19:02:02.466 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:02.467 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:02.468 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:02.469 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:02.470 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-06 19:02:02.471 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:02.472 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 19:02:02.473 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 19:02:02.475 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 19:02:02.476 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 19:02:02.477 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 19:02:02.477 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 19:02:02.479 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 19:02:02.480 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 29.629ms
2023-04-06 19:02:02.481 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-06 19:02:02.482 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 19:02:02.483 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:02.484 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-06 19:02:02.485 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 58.0466ms
2023-04-06 19:02:07.299 +04:00 [DBG] Connection id "0HMPMLSMLNGU1" received FIN.
2023-04-06 19:02:07.301 +04:00 [DBG] Connection id "0HMPMLSMLNGU1" is closed. The last processed stream ID was 7.
2023-04-06 19:02:07.301 +04:00 [DBG] The connection queue processing loop for 0HMPMLSMLNGU1 completed.
2023-04-06 19:02:07.302 +04:00 [DBG] Connection id "0HMPMLSMLNGU1" sending FIN because: "The client closed the connection."
2023-04-06 19:02:07.315 +04:00 [DBG] Connection id "0HMPMLSMLNGU1" stopped.
2023-04-06 19:02:10.352 +04:00 [DBG] Connection id "0HMPMLSMLNGU2" accepted.
2023-04-06 19:02:10.353 +04:00 [DBG] Connection id "0HMPMLSMLNGU2" started.
2023-04-06 19:02:10.354 +04:00 [DBG] Connection 0HMPMLSMLNGU2 established using the following protocol: "Tls12"
2023-04-06 19:02:10.356 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-06 19:02:10.357 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-06 19:02:10.358 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 19:02:10.359 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 19:02:10.360 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 19:02:10.361 +04:00 [INF] CORS policy execution successful.
2023-04-06 19:02:10.361 +04:00 [DBG] The request is a preflight request.
2023-04-06 19:02:10.362 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 6.1393ms
2023-04-06 19:02:10.363 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-06 19:02:10.364 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-06 19:02:10.365 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-06 19:02:10.366 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-06 19:02:10.367 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 19:02:10.368 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 19:02:10.369 +04:00 [INF] CORS policy execution successful.
2023-04-06 19:02:10.370 +04:00 [DBG] Successfully validated the token.
2023-04-06 19:02:10.370 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 19:02:10.371 +04:00 [DBG] Authorization was successful.
2023-04-06 19:02:10.372 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-06 19:02:10.373 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-06 19:02:10.375 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 19:02:10.376 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 19:02:10.377 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 19:02:10.379 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 19:02:10.380 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 19:02:10.381 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-06 19:02:10.383 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-06 19:02:10.384 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-06 19:02:10.385 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-06 19:02:10.386 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-06 19:02:10.387 +04:00 [DBG] Connection id "0HMPMLSMLNGU2", Request id "0HMPMLSMLNGU2:00000003": started reading request body.
2023-04-06 19:02:10.388 +04:00 [DBG] Connection id "0HMPMLSMLNGU2", Request id "0HMPMLSMLNGU2:00000003": done reading request body.
2023-04-06 19:02:10.389 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-06 19:02:10.390 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-06 19:02:10.391 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-06 19:02:10.392 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-06 19:02:10.393 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-06 19:02:10.395 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 19:02:10.396 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 19:02:10.397 +04:00 [DBG] Creating DbConnection.
2023-04-06 19:02:10.397 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 19:02:10.398 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-06 19:02:10.399 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-06 19:02:10.400 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:10.401 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:10.402 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-06 19:02:10.404 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-06 19:02:10.406 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.407 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.409 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.410 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.411 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.413 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.414 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.415 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.417 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.418 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.419 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.420 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.421 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.422 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.424 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.425 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.426 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.427 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.428 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.430 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.431 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.432 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.433 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.434 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.435 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.436 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.437 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.439 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.440 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.442 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.443 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.444 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.445 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.447 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.448 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.449 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.451 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.452 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.453 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.454 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.455 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.457 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.458 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.459 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:10.461 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 55ms reading results.
2023-04-06 19:02:10.462 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:10.463 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 19:02:10.465 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 19:02:10.465 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-06 19:02:10.466 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-06 19:02:10.467 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:10.468 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:10.469 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-06 19:02:10.477 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-06 19:02:10.479 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.480 +04:00 [DBG] The navigation 'AccountEntity.UserEntity' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.481 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:10.482 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:10.483 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-06 19:02:10.484 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:10.485 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 19:02:10.487 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 19:02:10.487 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-06 19:02:10.488 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-06 19:02:10.490 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:10.491 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:10.492 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-06 19:02:10.496 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-06 19:02:10.499 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:10.500 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-06 19:02:10.501 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:10.502 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 19:02:10.515 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 134.085ms
2023-04-06 19:02:10.517 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-06 19:02:10.544 +04:00 [ERR] Cashout limit is 10000 per day
BankSystem.Atm.Exceptions.CashOutLimitExceededException: Cashout limit is 10000 per day
   at BankSystem.Atm.Services.CashoutService.ValidateCashOutAsync(AccountEntity account, Decimal totalPayment) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\CashoutService.cs:line 86
   at BankSystem.Atm.Services.CashoutService.PerformCashOutAsync(CashOutRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\CashoutService.cs:line 105
   at ATM.Api.Controllers.TransactionController.CashOut(CashOutRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\TransactionController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-06 19:02:10.616 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 19:02:10.617 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:10.618 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-06 19:02:10.620 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28 - 1 - application/json 256.5746ms
2023-04-06 19:02:17.319 +04:00 [DBG] Connection id "0HMPMLSMLNGU2" received FIN.
2023-04-06 19:02:17.320 +04:00 [DBG] Connection id "0HMPMLSMLNGU2" is closed. The last processed stream ID was 3.
2023-04-06 19:02:17.320 +04:00 [DBG] The connection queue processing loop for 0HMPMLSMLNGU2 completed.
2023-04-06 19:02:17.321 +04:00 [DBG] Connection id "0HMPMLSMLNGU2" sending FIN because: "The client closed the connection."
2023-04-06 19:02:17.335 +04:00 [DBG] Connection id "0HMPMLSMLNGU2" stopped.
2023-04-06 19:02:18.400 +04:00 [DBG] Connection id "0HMPMLSMLNGU3" accepted.
2023-04-06 19:02:18.401 +04:00 [DBG] Connection id "0HMPMLSMLNGU3" started.
2023-04-06 19:02:18.402 +04:00 [DBG] Connection 0HMPMLSMLNGU3 established using the following protocol: "Tls12"
2023-04-06 19:02:18.404 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-06 19:02:18.404 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-06 19:02:18.405 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 19:02:18.406 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 19:02:18.407 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 19:02:18.408 +04:00 [INF] CORS policy execution successful.
2023-04-06 19:02:18.409 +04:00 [DBG] The request is a preflight request.
2023-04-06 19:02:18.409 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 5.8505ms
2023-04-06 19:02:18.411 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28
2023-04-06 19:02:18.411 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-06 19:02:18.412 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-06 19:02:18.413 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-06 19:02:18.414 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 19:02:18.415 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 19:02:18.415 +04:00 [INF] CORS policy execution successful.
2023-04-06 19:02:18.416 +04:00 [DBG] Successfully validated the token.
2023-04-06 19:02:18.416 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 19:02:18.417 +04:00 [DBG] Authorization was successful.
2023-04-06 19:02:18.418 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-06 19:02:18.419 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-06 19:02:18.420 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 19:02:18.421 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 19:02:18.422 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 19:02:18.424 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 19:02:18.426 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 19:02:18.427 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-06 19:02:18.428 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-06 19:02:18.429 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-06 19:02:18.430 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-06 19:02:18.431 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-06 19:02:18.432 +04:00 [DBG] Connection id "0HMPMLSMLNGU3", Request id "0HMPMLSMLNGU3:00000003": started reading request body.
2023-04-06 19:02:18.433 +04:00 [DBG] Connection id "0HMPMLSMLNGU3", Request id "0HMPMLSMLNGU3:00000003": done reading request body.
2023-04-06 19:02:18.434 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-06 19:02:18.435 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-06 19:02:18.436 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-06 19:02:18.437 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-06 19:02:18.438 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-06 19:02:18.440 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 19:02:18.442 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 19:02:18.443 +04:00 [DBG] Creating DbConnection.
2023-04-06 19:02:18.443 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 19:02:18.444 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-06 19:02:18.445 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-06 19:02:18.446 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:18.447 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:18.448 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-06 19:02:18.451 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-06 19:02:18.453 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.454 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.455 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.457 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.458 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.459 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.460 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.461 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.462 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.464 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.465 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.466 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.467 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.468 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.469 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.470 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.471 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.473 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.475 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.476 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.477 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.479 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.480 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.481 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.482 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.483 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.484 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.485 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.486 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.487 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.489 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.490 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.492 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.493 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.494 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.495 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.496 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.497 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.498 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.499 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.501 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.502 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.503 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.504 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:18.505 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 52ms reading results.
2023-04-06 19:02:18.508 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:18.509 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-06 19:02:18.511 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 19:02:18.512 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-06 19:02:18.513 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-06 19:02:18.514 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:18.515 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:18.516 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-06 19:02:18.523 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-06 19:02:18.526 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.527 +04:00 [DBG] The navigation 'AccountEntity.UserEntity' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.529 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:18.530 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:18.531 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-06 19:02:18.532 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:18.534 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-06 19:02:18.535 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 19:02:18.536 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-06 19:02:18.537 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-06 19:02:18.539 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:18.540 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:18.541 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-06 19:02:18.545 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-06 19:02:18.547 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:18.548 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 0ms reading results.
2023-04-06 19:02:18.550 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:18.551 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 19:02:18.553 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 126.0171ms
2023-04-06 19:02:18.554 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-06 19:02:18.555 +04:00 [ERR] Cashout limit is 10000 per day
BankSystem.Atm.Exceptions.CashOutLimitExceededException: Cashout limit is 10000 per day
   at BankSystem.Atm.Services.CashoutService.ValidateCashOutAsync(AccountEntity account, Decimal totalPayment) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\CashoutService.cs:line 86
   at BankSystem.Atm.Services.CashoutService.PerformCashOutAsync(CashOutRequest request, Guid cardId) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm\Services\CashoutService.cs:line 105
   at ATM.Api.Controllers.TransactionController.CashOut(CashOutRequest request) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Controllers\TransactionController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-06 19:02:18.563 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 19:02:18.564 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:18.565 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-06 19:02:18.567 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 28 - 1 - application/json 155.9801ms
2023-04-06 19:02:24.240 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-06 19:02:24.241 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-06 19:02:24.243 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-06 19:02:24.243 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 19:02:24.244 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 19:02:24.245 +04:00 [INF] CORS policy execution successful.
2023-04-06 19:02:24.245 +04:00 [DBG] The request is a preflight request.
2023-04-06 19:02:24.246 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 5.9281ms
2023-04-06 19:02:24.247 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26
2023-04-06 19:02:24.248 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-06 19:02:24.250 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-06 19:02:24.251 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-06 19:02:24.252 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-06 19:02:24.253 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-06 19:02:24.253 +04:00 [INF] CORS policy execution successful.
2023-04-06 19:02:24.254 +04:00 [DBG] Successfully validated the token.
2023-04-06 19:02:24.255 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-06 19:02:24.256 +04:00 [DBG] Authorization was successful.
2023-04-06 19:02:24.257 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-06 19:02:24.258 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-06 19:02:24.259 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-06 19:02:24.260 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-06 19:02:24.261 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-06 19:02:24.263 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-06 19:02:24.264 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-06 19:02:24.265 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-06 19:02:24.267 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-06 19:02:24.268 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-06 19:02:24.269 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-06 19:02:24.270 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-06 19:02:24.271 +04:00 [DBG] Connection id "0HMPMLSMLNGU3", Request id "0HMPMLSMLNGU3:00000007": started reading request body.
2023-04-06 19:02:24.273 +04:00 [DBG] Connection id "0HMPMLSMLNGU3", Request id "0HMPMLSMLNGU3:00000007": done reading request body.
2023-04-06 19:02:24.274 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-06 19:02:24.275 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-06 19:02:24.276 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-06 19:02:24.277 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-06 19:02:24.278 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-06 19:02:24.280 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-06 19:02:24.282 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 19:02:24.282 +04:00 [DBG] Creating DbConnection.
2023-04-06 19:02:24.283 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-06 19:02:24.284 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-06 19:02:24.284 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-06 19:02:24.285 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.286 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.287 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-06 19:02:24.290 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-06 19:02:24.292 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.293 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.294 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.295 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.296 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.297 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.298 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.299 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.300 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.301 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.302 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.303 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.304 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.305 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.306 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.308 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.309 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.310 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.311 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.312 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.314 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.315 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.317 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.318 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.319 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.320 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.321 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.322 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.324 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.325 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.326 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.327 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.329 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.330 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.331 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.332 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.333 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.334 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.335 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.336 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.337 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.338 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.340 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.341 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.342 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 50ms reading results.
2023-04-06 19:02:24.344 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.345 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-06 19:02:24.346 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 19:02:24.347 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-06 19:02:24.347 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-06 19:02:24.349 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.350 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.351 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-06 19:02:24.358 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-06 19:02:24.360 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.361 +04:00 [DBG] The navigation 'AccountEntity.UserEntity' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.362 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.363 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.364 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-06 19:02:24.365 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.366 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 19:02:24.367 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 19:02:24.368 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-06 19:02:24.369 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-06 19:02:24.370 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.371 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.372 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-06 19:02:24.377 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-06 19:02:24.379 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.380 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 0ms reading results.
2023-04-06 19:02:24.381 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.382 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-06 19:02:24.383 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.384 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.385 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.386 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-06 19:02:24.387 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-06 19:02:24.388 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-06 19:02:24.390 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-06 19:02:24.391 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.392 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.394 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-06 19:02:24.394 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-06 19:02:24.395 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-06 19:02:24.396 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-06 19:02:24.397 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-06 19:02:24.398 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-06 19:02:24.405 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-06 19:02:24.409 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.411 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-06 19:02:24.412 +04:00 [DBG] Committing transaction.
2023-04-06 19:02:24.425 +04:00 [DBG] Committed transaction.
2023-04-06 19:02:24.426 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.427 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-06 19:02:24.429 +04:00 [DBG] Disposing transaction.
2023-04-06 19:02:24.430 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.431 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.433 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-06 19:02:24.434 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-06 19:02:24.435 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-06 19:02:24.438 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-06 19:02:24.440 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-06 19:02:24.441 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-06 19:02:24.442 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-06 19:02:24.444 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-06 19:02:24.446 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 180.0549ms
2023-04-06 19:02:24.447 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-06 19:02:24.448 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-06 19:02:24.449 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-06 19:02:24.450 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-06 19:02:24.451 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26 - 200 - application/json;+charset=utf-8 203.9949ms
2023-04-06 19:02:27.339 +04:00 [DBG] Connection id "0HMPMLSMLNGU3" received FIN.
2023-04-06 19:02:27.341 +04:00 [DBG] Connection id "0HMPMLSMLNGU3" is closed. The last processed stream ID was 7.
2023-04-06 19:02:27.341 +04:00 [DBG] The connection queue processing loop for 0HMPMLSMLNGU3 completed.
2023-04-06 19:02:27.343 +04:00 [DBG] Connection id "0HMPMLSMLNGU3" sending FIN because: "The client closed the connection."
2023-04-06 19:02:27.354 +04:00 [DBG] Connection id "0HMPMLSMLNGU3" stopped.
