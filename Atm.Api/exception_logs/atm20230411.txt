2023-04-11 15:40:15.229 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-11 15:40:15.302 +04:00 [DBG] Hosting starting
2023-04-11 15:40:15.324 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-11 15:40:15.330 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-11 15:40:15.335 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-11 15:40:15.341 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-11 15:40:15.344 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-11 15:40:15.349 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-11 15:40:15.351 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-11 15:40:15.355 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-11 15:40:15.358 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-11 15:40:15.361 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-11 15:40:15.365 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-11 15:40:15.368 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-11 15:40:15.370 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-11 15:40:15.476 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-11 15:40:15.477 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-11 15:40:15.479 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-11 15:40:15.480 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-11 15:40:15.481 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-11 15:40:15.482 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-11 15:40:15.482 +04:00 [INF] Hosting environment: Development
2023-04-11 15:40:15.483 +04:00 [INF] Content root path: C:\Users\srevazishvili\source\repos\BankSystemMain\BankSystemCopy\Atm.Api
2023-04-11 15:40:15.484 +04:00 [DBG] Hosting started
2023-04-11 15:40:15.799 +04:00 [DBG] Connection id "0HMPQG62EEBB5" accepted.
2023-04-11 15:40:15.801 +04:00 [DBG] Connection id "0HMPQG62EEBB5" started.
2023-04-11 15:40:15.809 +04:00 [DBG] Connection id "0HMPQG62EEBB6" accepted.
2023-04-11 15:40:15.810 +04:00 [DBG] Connection id "0HMPQG62EEBB6" started.
2023-04-11 15:40:15.841 +04:00 [DBG] Connection id "0HMPQG62EEBB5" received FIN.
2023-04-11 15:40:15.841 +04:00 [DBG] Connection id "0HMPQG62EEBB6" received FIN.
2023-04-11 15:40:15.846 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-11 15:40:15.846 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-11 15:40:15.873 +04:00 [DBG] Connection id "0HMPQG62EEBB6" stopped.
2023-04-11 15:40:15.873 +04:00 [DBG] Connection id "0HMPQG62EEBB5" stopped.
2023-04-11 15:40:15.875 +04:00 [DBG] Connection id "0HMPQG62EEBB5" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-11 15:40:15.875 +04:00 [DBG] Connection id "0HMPQG62EEBB6" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-11 15:40:16.002 +04:00 [DBG] Connection id "0HMPQG62EEBB7" accepted.
2023-04-11 15:40:16.004 +04:00 [DBG] Connection id "0HMPQG62EEBB7" started.
2023-04-11 15:40:16.043 +04:00 [DBG] Connection 0HMPQG62EEBB7 established using the following protocol: "Tls12"
2023-04-11 15:40:16.090 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-11 15:40:16.105 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-11 15:40:16.124 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-11 15:40:16.125 +04:00 [DBG] Request did not match any endpoints
2023-04-11 15:40:16.298 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-11 15:40:16.312 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-11 15:40:16.316 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 230.2724ms
2023-04-11 15:40:16.340 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-11 15:40:16.346 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 5.6029ms
2023-04-11 15:40:16.365 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-11 15:40:16.383 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 17.6337ms
2023-04-11 15:40:16.477 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-11 15:40:16.478 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-11 15:40:16.480 +04:00 [DBG] Request did not match any endpoints
2023-04-11 15:40:16.569 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 91.5237ms
2023-04-11 15:40:19.654 +04:00 [DBG] Connection id "0HMPQG62EEBB7" received FIN.
2023-04-11 15:40:19.658 +04:00 [DBG] The connection queue processing loop for 0HMPQG62EEBB7 completed.
2023-04-11 15:40:19.660 +04:00 [DBG] Connection id "0HMPQG62EEBB7" is closed. The last processed stream ID was 7.
2023-04-11 15:40:19.662 +04:00 [DBG] Connection id "0HMPQG62EEBB7" sending FIN because: "The client closed the connection."
2023-04-11 15:40:19.670 +04:00 [DBG] Connection id "0HMPQG62EEBB7" stopped.
2023-04-11 22:26:05.259 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-11 22:26:05.327 +04:00 [DBG] Hosting starting
2023-04-11 22:26:05.353 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-11 22:26:05.359 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-11 22:26:05.367 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-11 22:26:05.372 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-11 22:26:05.375 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-11 22:26:05.380 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-11 22:26:05.384 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-11 22:26:05.386 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-11 22:26:05.389 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-11 22:26:05.392 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-11 22:26:05.396 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-11 22:26:05.399 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-11 22:26:05.401 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-11 22:26:05.528 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-11 22:26:05.529 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-11 22:26:05.530 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-11 22:26:05.532 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-11 22:26:05.533 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-11 22:26:05.534 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-11 22:26:05.535 +04:00 [INF] Hosting environment: Development
2023-04-11 22:26:05.536 +04:00 [INF] Content root path: C:\Users\srevazishvili\Source\Repos\BankSystem\Atm.Api
2023-04-11 22:26:05.537 +04:00 [DBG] Hosting started
2023-04-11 22:26:05.718 +04:00 [DBG] Connection id "0HMPQN8R9BHMT" accepted.
2023-04-11 22:26:05.720 +04:00 [DBG] Connection id "0HMPQN8R9BHMT" started.
2023-04-11 22:26:05.727 +04:00 [DBG] Connection id "0HMPQN8R9BHMU" accepted.
2023-04-11 22:26:05.728 +04:00 [DBG] Connection id "0HMPQN8R9BHMU" started.
2023-04-11 22:26:05.744 +04:00 [DBG] Connection id "0HMPQN8R9BHMT" received FIN.
2023-04-11 22:26:05.744 +04:00 [DBG] Connection id "0HMPQN8R9BHMU" received FIN.
2023-04-11 22:26:05.750 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-11 22:26:05.750 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-11 22:26:05.777 +04:00 [DBG] Connection id "0HMPQN8R9BHMU" stopped.
2023-04-11 22:26:05.777 +04:00 [DBG] Connection id "0HMPQN8R9BHMT" stopped.
2023-04-11 22:26:05.779 +04:00 [DBG] Connection id "0HMPQN8R9BHMT" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-11 22:26:05.779 +04:00 [DBG] Connection id "0HMPQN8R9BHMU" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-11 22:26:05.907 +04:00 [DBG] Connection id "0HMPQN8R9BHMV" accepted.
2023-04-11 22:26:05.909 +04:00 [DBG] Connection id "0HMPQN8R9BHMV" started.
2023-04-11 22:26:05.951 +04:00 [DBG] Connection 0HMPQN8R9BHMV established using the following protocol: "Tls12"
2023-04-11 22:26:06.068 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-11 22:26:06.089 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-11 22:26:06.129 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-11 22:26:06.131 +04:00 [DBG] Request did not match any endpoints
2023-04-11 22:26:06.294 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-11 22:26:06.308 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-11 22:26:06.310 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 244.9555ms
2023-04-11 22:26:06.327 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-11 22:26:06.335 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 6.6980ms
2023-04-11 22:26:06.355 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-11 22:26:06.380 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 24.2577ms
2023-04-11 22:26:06.489 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-11 22:26:06.491 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-11 22:26:06.492 +04:00 [DBG] Request did not match any endpoints
2023-04-11 22:26:06.622 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 132.3850ms
2023-04-11 22:26:08.163 +04:00 [DBG] Connection id "0HMPQN8R9BHMV" received FIN.
2023-04-11 22:26:08.167 +04:00 [DBG] The connection queue processing loop for 0HMPQN8R9BHMV completed.
2023-04-11 22:26:08.169 +04:00 [DBG] Connection id "0HMPQN8R9BHMV" is closed. The last processed stream ID was 7.
2023-04-11 22:26:08.172 +04:00 [DBG] Connection id "0HMPQN8R9BHMV" sending FIN because: "The client closed the connection."
2023-04-11 22:26:08.178 +04:00 [DBG] Connection id "0HMPQN8R9BHMV" stopped.
2023-04-11 22:26:12.793 +04:00 [DBG] Connection id "0HMPQN8R9BHN0" accepted.
2023-04-11 22:26:12.794 +04:00 [DBG] Connection id "0HMPQN8R9BHN0" started.
2023-04-11 22:26:12.810 +04:00 [DBG] Connection 0HMPQN8R9BHN0 established using the following protocol: "Tls12"
2023-04-11 22:26:12.812 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-11 22:26:12.817 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-11 22:26:12.818 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-11 22:26:12.820 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:26:12.823 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:26:12.824 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:26:12.825 +04:00 [DBG] The request is a preflight request.
2023-04-11 22:26:12.826 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 14.3719ms
2023-04-11 22:26:12.828 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 44
2023-04-11 22:26:12.830 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-11 22:26:12.834 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-11 22:26:12.835 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-11 22:26:12.836 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:26:12.837 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:26:12.838 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:26:12.861 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-11 22:26:12.868 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-11 22:26:12.889 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-11 22:26:12.893 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-11 22:26:12.894 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-11 22:26:12.896 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-11 22:26:12.898 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-11 22:26:12.899 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-11 22:26:12.902 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:26:13.030 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-11 22:26:13.049 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:26:13.058 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-11 22:26:13.060 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-11 22:26:13.063 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-11 22:26:13.067 +04:00 [DBG] Connection id "0HMPQN8R9BHN0", Request id "0HMPQN8R9BHN0:00000003": started reading request body.
2023-04-11 22:26:13.069 +04:00 [DBG] Connection id "0HMPQN8R9BHN0", Request id "0HMPQN8R9BHN0:00000003": done reading request body.
2023-04-11 22:26:13.073 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-11 22:26:13.075 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-11 22:26:13.076 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-11 22:26:13.077 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-11 22:26:13.083 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-11 22:26:13.450 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2023-04-11 22:26:13.453 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2023-04-11 22:26:13.714 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-11 22:26:13.787 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.CardNumber == __request_CardNumber_0 && c.Pin == __request_Pin_1)'
2023-04-11 22:26:13.846 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-11 22:26:13.965 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE (c.CardNumber == @__request_CardNumber_0) && (c.Pin == @__request_Pin_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-11 22:26:13.997 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:26:14.000 +04:00 [DBG] Creating DbConnection.
2023-04-11 22:26:14.023 +04:00 [DBG] Created DbConnection. (20ms).
2023-04-11 22:26:14.028 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (32ms).
2023-04-11 22:26:14.037 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (41ms).
2023-04-11 22:26:14.041 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:26:14.184 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:26:14.194 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-11 22:26:14.236 +04:00 [INF] Executed DbCommand (45ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-11 22:26:14.247 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:26:14.253 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 11ms reading results.
2023-04-11 22:26:14.257 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:26:14.262 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (4ms).
2023-04-11 22:26:14.267 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 1364.45ms
2023-04-11 22:26:14.269 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-11 22:26:14.277 +04:00 [ERR] Can't identify card
System.ArgumentException: Can't identify card
   at BankSystem.Atm.Services.LoginService.LoginAsync(LoginRequest request) in C:\Users\srevazishvili\Source\Repos\BankSystem\Atm\Services\LoginService.cs:line 28
   at ATM.Api.Controllers.CardController.Login(LoginRequest request) in C:\Users\srevazishvili\Source\Repos\BankSystem\Atm.Api\Controllers\CardController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ATM.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in C:\Users\srevazishvili\Source\Repos\BankSystem\Atm.Api\Middlewares\GlobalExceptionHandlingMiddleware.cs:line 46
2023-04-11 22:26:14.365 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-11 22:26:14.370 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:26:14.373 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-11 22:26:14.374 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 44 - 1 - application/json 1546.3614ms
2023-04-11 22:26:18.172 +04:00 [DBG] Connection id "0HMPQN8R9BHN0" received FIN.
2023-04-11 22:26:18.174 +04:00 [DBG] Connection id "0HMPQN8R9BHN0" is closed. The last processed stream ID was 3.
2023-04-11 22:26:18.174 +04:00 [DBG] The connection queue processing loop for 0HMPQN8R9BHN0 completed.
2023-04-11 22:26:18.175 +04:00 [DBG] Connection id "0HMPQN8R9BHN0" sending FIN because: "The client closed the connection."
2023-04-11 22:26:18.187 +04:00 [DBG] Connection id "0HMPQN8R9BHN0" stopped.
2023-04-11 22:27:47.888 +04:00 [DBG] Connection id "0HMPQN8R9BHN1" accepted.
2023-04-11 22:27:47.890 +04:00 [DBG] Connection id "0HMPQN8R9BHN1" started.
2023-04-11 22:27:47.892 +04:00 [DBG] Connection 0HMPQN8R9BHN1 established using the following protocol: "Tls12"
2023-04-11 22:27:47.893 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-11 22:27:47.895 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-11 22:27:47.896 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-11 22:27:47.897 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:27:47.898 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:27:47.899 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:27:47.900 +04:00 [DBG] The request is a preflight request.
2023-04-11 22:27:47.901 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 7.3064ms
2023-04-11 22:27:47.902 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 45
2023-04-11 22:27:47.903 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-11 22:27:47.904 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-11 22:27:47.906 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-11 22:27:47.907 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:27:47.908 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:27:47.909 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:27:47.911 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-11 22:27:47.914 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-11 22:27:47.915 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-11 22:27:47.917 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-11 22:27:47.918 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-11 22:27:47.919 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-11 22:27:47.922 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-11 22:27:47.923 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-11 22:27:47.924 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:27:47.927 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:27:47.929 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-11 22:27:47.931 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-11 22:27:47.932 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-11 22:27:47.934 +04:00 [DBG] Connection id "0HMPQN8R9BHN1", Request id "0HMPQN8R9BHN1:00000003": started reading request body.
2023-04-11 22:27:47.935 +04:00 [DBG] Connection id "0HMPQN8R9BHN1", Request id "0HMPQN8R9BHN1:00000003": done reading request body.
2023-04-11 22:27:47.936 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-11 22:27:47.938 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-11 22:27:47.939 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-11 22:27:47.940 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-11 22:27:47.942 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-11 22:27:47.955 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-11 22:27:47.961 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:27:47.962 +04:00 [DBG] Creating DbConnection.
2023-04-11 22:27:47.964 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-11 22:27:47.965 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2023-04-11 22:27:47.966 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-11 22:27:47.967 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:27:47.969 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:27:47.971 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-11 22:27:47.984 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-11 22:27:48.005 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:27:48.036 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:27:48.043 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:27:48.052 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:27:48.053 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 67ms reading results.
2023-04-11 22:27:48.055 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:27:48.056 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-11 22:27:48.122 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-11 22:27:48.127 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-11 22:27:48.127 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-11 22:27:48.128 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-11 22:27:48.131 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-11 22:27:48.132 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-11 22:27:48.141 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 216.1188ms
2023-04-11 22:27:48.142 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-11 22:27:48.143 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-11 22:27:48.144 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:27:48.145 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-11 22:27:48.146 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 45 - 200 - application/json;+charset=utf-8 244.0557ms
2023-04-11 22:27:48.310 +04:00 [DBG] Connection id "0HMPQN8R9BHN1" received FIN.
2023-04-11 22:27:48.312 +04:00 [DBG] Connection id "0HMPQN8R9BHN1" is closed. The last processed stream ID was 3.
2023-04-11 22:27:48.312 +04:00 [DBG] The connection queue processing loop for 0HMPQN8R9BHN1 completed.
2023-04-11 22:27:48.313 +04:00 [DBG] Connection id "0HMPQN8R9BHN1" sending FIN because: "The client closed the connection."
2023-04-11 22:27:48.326 +04:00 [DBG] Connection id "0HMPQN8R9BHN1" stopped.
2023-04-11 22:27:50.490 +04:00 [DBG] Connection id "0HMPQN8R9BHN2" accepted.
2023-04-11 22:27:50.491 +04:00 [DBG] Connection id "0HMPQN8R9BHN2" started.
2023-04-11 22:27:50.493 +04:00 [DBG] Connection 0HMPQN8R9BHN2 established using the following protocol: "Tls12"
2023-04-11 22:27:50.495 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:27:50.495 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:27:50.496 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:27:50.497 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:27:50.497 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-11 22:27:50.498 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-11 22:27:50.499 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:27:50.500 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:27:50.501 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:27:50.501 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:27:50.502 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:27:50.503 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:27:50.504 +04:00 [DBG] The request is a preflight request.
2023-04-11 22:27:50.505 +04:00 [DBG] The request is a preflight request.
2023-04-11 22:27:50.506 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 10.5614ms
2023-04-11 22:27:50.507 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 11.6247ms
2023-04-11 22:27:50.507 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:27:50.509 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:27:50.510 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-11 22:27:50.512 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:27:50.513 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:27:50.514 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:27:50.514 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:27:50.550 +04:00 [DBG] Successfully validated the token.
2023-04-11 22:27:50.553 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-11 22:27:50.558 +04:00 [DBG] Authorization was successful.
2023-04-11 22:27:50.559 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:27:50.564 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-11 22:27:50.566 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-11 22:27:50.567 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-11 22:27:50.569 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-11 22:27:50.570 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-11 22:27:50.572 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-11 22:27:50.573 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:27:50.576 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:27:50.627 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-11 22:27:50.632 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.Id == __cardId_0)'
2023-04-11 22:27:50.635 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-11 22:27:50.644 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-11 22:27:50.649 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:27:50.650 +04:00 [DBG] Creating DbConnection.
2023-04-11 22:27:50.651 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-11 22:27:50.652 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-11 22:27:50.653 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-11 22:27:50.654 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:27:50.655 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:27:50.657 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:27:50.664 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:27:50.667 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:27:50.668 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:27:50.670 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:27:50.672 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:27:50.673 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 6ms reading results.
2023-04-11 22:27:50.674 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:27:50.675 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-11 22:27:50.677 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-11 22:27:50.679 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-11 22:27:50.680 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-11 22:27:50.681 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-11 22:27:50.682 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-11 22:27:50.683 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-11 22:27:50.686 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 113.16ms
2023-04-11 22:27:50.687 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:27:50.688 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:27:50.688 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:27:50.689 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-11 22:27:50.690 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-11 22:27:50.692 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:27:50.694 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:27:50.696 +04:00 [DBG] Disposed connection to database '' on server '' (4ms).
2023-04-11 22:27:50.697 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:27:50.698 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 191.0855ms
2023-04-11 22:27:50.699 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:27:50.701 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:27:50.703 +04:00 [DBG] Successfully validated the token.
2023-04-11 22:27:50.704 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-11 22:27:50.705 +04:00 [DBG] Authorization was successful.
2023-04-11 22:27:50.706 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:27:50.707 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-11 22:27:50.710 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-11 22:27:50.711 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-11 22:27:50.712 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-11 22:27:50.714 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-11 22:27:50.715 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-11 22:27:50.717 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:27:50.718 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:27:50.719 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-11 22:27:50.722 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:27:50.723 +04:00 [DBG] Creating DbConnection.
2023-04-11 22:27:50.723 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-11 22:27:50.725 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-11 22:27:50.726 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-11 22:27:50.727 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:27:50.728 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:27:50.729 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:27:50.735 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:27:50.737 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:27:50.739 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:27:50.741 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:27:50.743 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:27:50.744 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 7ms reading results.
2023-04-11 22:27:50.747 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:27:50.748 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-11 22:27:50.749 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-11 22:27:50.752 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-11 22:27:50.753 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-11 22:27:50.754 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-11 22:27:50.755 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-11 22:27:50.756 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-11 22:27:50.757 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 40.6886ms
2023-04-11 22:27:50.759 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:27:50.759 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-11 22:27:50.761 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:27:50.762 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-11 22:27:50.764 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 76.3335ms
2023-04-11 22:27:58.325 +04:00 [DBG] Connection id "0HMPQN8R9BHN2" received FIN.
2023-04-11 22:27:58.327 +04:00 [DBG] Connection id "0HMPQN8R9BHN2" is closed. The last processed stream ID was 7.
2023-04-11 22:27:58.327 +04:00 [DBG] The connection queue processing loop for 0HMPQN8R9BHN2 completed.
2023-04-11 22:27:58.328 +04:00 [DBG] Connection id "0HMPQN8R9BHN2" sending FIN because: "The client closed the connection."
2023-04-11 22:27:58.334 +04:00 [DBG] Connection id "0HMPQN8R9BHN2" stopped.
2023-04-11 22:28:12.424 +04:00 [DBG] Connection id "0HMPQN8R9BHN3" accepted.
2023-04-11 22:28:12.425 +04:00 [DBG] Connection id "0HMPQN8R9BHN3" started.
2023-04-11 22:28:12.427 +04:00 [DBG] Connection 0HMPQN8R9BHN3 established using the following protocol: "Tls12"
2023-04-11 22:28:12.429 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-11 22:28:12.430 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-11 22:28:12.431 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-11 22:28:12.432 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:28:12.432 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:28:12.433 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:28:12.434 +04:00 [DBG] The request is a preflight request.
2023-04-11 22:28:12.435 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 6.1370ms
2023-04-11 22:28:12.436 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26
2023-04-11 22:28:12.437 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-11 22:28:12.438 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-11 22:28:12.439 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-11 22:28:12.440 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:28:12.441 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:28:12.442 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:28:12.443 +04:00 [DBG] Successfully validated the token.
2023-04-11 22:28:12.444 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-11 22:28:12.445 +04:00 [DBG] Authorization was successful.
2023-04-11 22:28:12.446 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-11 22:28:12.450 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-11 22:28:12.452 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-11 22:28:12.453 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-11 22:28:12.455 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-11 22:28:12.457 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-11 22:28:12.458 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-11 22:28:12.459 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-11 22:28:12.460 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-11 22:28:12.462 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-11 22:28:12.463 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-11 22:28:12.464 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-11 22:28:12.469 +04:00 [DBG] Connection id "0HMPQN8R9BHN3", Request id "0HMPQN8R9BHN3:00000003": started reading request body.
2023-04-11 22:28:12.471 +04:00 [DBG] Connection id "0HMPQN8R9BHN3", Request id "0HMPQN8R9BHN3:00000003": done reading request body.
2023-04-11 22:28:12.485 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-11 22:28:12.486 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-11 22:28:12.487 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-11 22:28:12.488 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-11 22:28:12.493 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-11 22:28:12.500 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-11 22:28:12.503 +04:00 [DBG] Compiling query expression: 
'DbSet<CurrencyEntity>()'
2023-04-11 22:28:12.507 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CurrencyEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CurrencyEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CurrencyEntity.Code (string), 1], [Property: CurrencyEntity.Date (DateTime) Required, 2], [Property: CurrencyEntity.Diff (decimal) Required, 3], [Property: CurrencyEntity.DiffFormated (string), 4], [Property: CurrencyEntity.LastUpdatedAt (DateTime) Required, 5], [Property: CurrencyEntity.Name (string), 6], [Property: CurrencyEntity.Quantity (int) Required, 7], [Property: CurrencyEntity.Rate (decimal) Required, 8], [Property: CurrencyEntity.RateFormated (string), 9], [Property: CurrencyEntity.ValidFromDate (DateTime) Required, 10] }
        SELECT c.Id, c.Code, c.Date, c.Diff, c.DiffFormated, c.LastUpdatedAt, c.Name, c.Quantity, c.Rate, c.RateFormated, c.ValidFromDate
        FROM Currencies AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CurrencyEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-11 22:28:12.510 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:28:12.511 +04:00 [DBG] Creating DbConnection.
2023-04-11 22:28:12.512 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-11 22:28:12.514 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-11 22:28:12.515 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-11 22:28:12.516 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.517 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.517 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-11 22:28:12.522 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-11 22:28:12.526 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.542 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.544 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.546 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.547 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.548 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.549 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.551 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.552 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.553 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.554 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.555 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.557 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.558 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.559 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.560 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.562 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.564 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.565 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.566 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.567 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.568 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.569 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.570 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.572 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.573 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.574 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.575 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.576 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.577 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.579 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.580 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.582 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.583 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.584 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.585 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.586 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.587 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.588 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.590 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.591 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.594 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.596 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.598 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.599 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 75ms reading results.
2023-04-11 22:28:12.600 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.601 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-11 22:28:12.606 +04:00 [DBG] Compiling query expression: 
'DbSet<AccountEntity>()
    .Include(a => a.UserEntity)
    .FirstOrDefault(a => a.Cards
        .Any(c => c.Id == __cardId_0))'
2023-04-11 22:28:12.613 +04:00 [DBG] Including navigation: 'AccountEntity.UserEntity'.
2023-04-11 22:28:12.634 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AccountEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<AccountEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AccountEntity.Amount (decimal) Required, 1], [Property: AccountEntity.Currency (CurrencyType) Required, 2], [Property: AccountEntity.Iban (string), 3], [Property: AccountEntity.UserId (Guid) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: UserEntity.AccessFailedCount (int) Required, 6], [Property: UserEntity.BirthDate (DateTime) Required, 7], [Property: UserEntity.ConcurrencyStamp (string) Concurrency, 8], [Property: UserEntity.Email (string) MaxLength(256), 9], [Property: UserEntity.EmailConfirmed (bool) Required, 10], [Property: UserEntity.FirstName (string), 11], [Property: UserEntity.LastName (string), 12], [Property: UserEntity.LockoutEnabled (bool) Required, 13], [Property: UserEntity.LockoutEnd (DateTimeOffset?), 14], [Property: UserEntity.NormalizedEmail (string) Index MaxLength(256), 15], [Property: UserEntity.NormalizedUserName (string) Index MaxLength(256), 16], [Property: UserEntity.PasswordHash (string), 17], [Property: UserEntity.PersonalNumber (string), 18], [Property: UserEntity.PhoneNumber (string), 19], [Property: UserEntity.PhoneNumberConfirmed (bool) Required, 20], [Property: UserEntity.RegisteredAt (DateTime) Required, 21], [Property: UserEntity.SecurityStamp (string), 22], [Property: UserEntity.TwoFactorEnabled (bool) Required, 23], [Property: UserEntity.UserName (string) MaxLength(256), 24] }
            SELECT TOP(1) a.Id, a.Amount, a.Currency, a.Iban, a.UserId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.FirstName, a0.LastName, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.PersonalNumber, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RegisteredAt, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
            FROM Accounts AS a
            INNER JOIN AspNetUsers AS a0 ON a.UserId == a0.Id
            WHERE EXISTS (
                SELECT 1
                FROM Cards AS c
                WHERE ((a.Id != NULL) && (a.Id == c.AccountId)) && (c.Id == @__cardId_0))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-11 22:28:12.641 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:28:12.642 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-11 22:28:12.643 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-11 22:28:12.644 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.646 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.647 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-11 22:28:12.653 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-11 22:28:12.657 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.669 +04:00 [DBG] The navigation 'AccountEntity.UserEntity' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.672 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.697 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.698 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 42ms reading results.
2023-04-11 22:28:12.700 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.701 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-11 22:28:12.707 +04:00 [DBG] Compiling query expression: 
'DbSet<TransactionEntity>()
    .Where(t => t.AccountFromId == __accountId_0 && t.CreatedAt.Date == DateTime.Now.Date && (int)t.TransactionType == 0)'
2023-04-11 22:28:12.717 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<TransactionEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TransactionEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TransactionEntity.AccountFromIban (string), 1], [Property: TransactionEntity.AccountFromId (Guid?), 2], [Property: TransactionEntity.AccountToIban (string), 3], [Property: TransactionEntity.AccountToId (Guid?), 4], [Property: TransactionEntity.CreatedAt (DateTime) Required, 5], [Property: TransactionEntity.CurrencyFrom (CurrencyType) Required, 6], [Property: TransactionEntity.CurrencyTo (CurrencyType) Required, 7], [Property: TransactionEntity.Fee (decimal) Required, 8], [Property: TransactionEntity.ReceivedAmount (decimal) Required, 9], [Property: TransactionEntity.TransactionType (TransactionType) Required, 10], [Property: TransactionEntity.WithDrawnAmount (decimal) Required, 11] }
        SELECT t.Id, t.AccountFromIban, t.AccountFromId, t.AccountToIban, t.AccountToId, t.CreatedAt, t.CurrencyFrom, t.CurrencyTo, t.Fee, t.ReceivedAmount, t.TransactionType, t.WithDrawnAmount
        FROM Transactions AS t
        WHERE ((t.AccountFromId == @__accountId_0) && (CONVERT(date, t.CreatedAt) == CONVERT(date, GETDATE()))) && (t.TransactionType == 0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TransactionEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-11 22:28:12.725 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:28:12.726 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-11 22:28:12.727 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-11 22:28:12.728 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.729 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.730 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-11 22:28:12.737 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-11 22:28:12.739 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.740 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-11 22:28:12.742 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.743 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-11 22:28:12.756 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.793 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.808 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.814 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-11 22:28:12.817 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-11 22:28:12.849 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-11 22:28:12.907 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-11 22:28:12.910 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.911 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.914 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-11 22:28:12.919 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-11 22:28:12.923 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:28:12.924 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-11 22:28:12.929 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-11 22:28:12.930 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-11 22:28:12.939 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-11 22:28:12.947 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.948 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-11 22:28:12.952 +04:00 [DBG] Committing transaction.
2023-04-11 22:28:12.955 +04:00 [DBG] Committed transaction.
2023-04-11 22:28:12.958 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.959 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-11 22:28:12.961 +04:00 [DBG] Disposing transaction.
2023-04-11 22:28:12.966 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.969 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.970 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:12.974 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-11 22:28:12.975 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-11 22:28:12.977 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-11 22:28:12.978 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-11 22:28:12.979 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-11 22:28:12.980 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-11 22:28:12.981 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-11 22:28:12.988 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 528.9796ms
2023-04-11 22:28:12.989 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-11 22:28:12.990 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-11 22:28:12.991 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:12.992 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-11 22:28:12.993 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 26 - 200 - application/json;+charset=utf-8 557.2037ms
2023-04-11 22:28:18.345 +04:00 [DBG] Connection id "0HMPQN8R9BHN3" received FIN.
2023-04-11 22:28:18.347 +04:00 [DBG] Connection id "0HMPQN8R9BHN3" is closed. The last processed stream ID was 3.
2023-04-11 22:28:18.347 +04:00 [DBG] The connection queue processing loop for 0HMPQN8R9BHN3 completed.
2023-04-11 22:28:18.348 +04:00 [DBG] Connection id "0HMPQN8R9BHN3" sending FIN because: "The client closed the connection."
2023-04-11 22:28:18.355 +04:00 [DBG] Connection id "0HMPQN8R9BHN3" stopped.
2023-04-11 22:28:50.776 +04:00 [DBG] Connection id "0HMPQN8R9BHN4" accepted.
2023-04-11 22:28:50.778 +04:00 [DBG] Connection id "0HMPQN8R9BHN4" started.
2023-04-11 22:28:50.780 +04:00 [DBG] Connection 0HMPQN8R9BHN4 established using the following protocol: "Tls12"
2023-04-11 22:28:50.782 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:28:50.782 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:28:50.782 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:28:50.783 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:28:50.784 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-11 22:28:50.785 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-11 22:28:50.786 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:28:50.787 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:28:50.788 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:28:50.788 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:28:50.789 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:28:50.790 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:28:50.790 +04:00 [DBG] The request is a preflight request.
2023-04-11 22:28:50.791 +04:00 [DBG] The request is a preflight request.
2023-04-11 22:28:50.792 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 10.4350ms
2023-04-11 22:28:50.793 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 10.8326ms
2023-04-11 22:28:50.794 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:28:50.795 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:28:50.796 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-11 22:28:50.797 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:28:50.798 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:28:50.799 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:28:50.800 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:28:50.801 +04:00 [DBG] Successfully validated the token.
2023-04-11 22:28:50.801 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-11 22:28:50.802 +04:00 [DBG] Authorization was successful.
2023-04-11 22:28:50.803 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:28:50.804 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-11 22:28:50.806 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-11 22:28:50.807 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-11 22:28:50.808 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-11 22:28:50.809 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-11 22:28:50.811 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-11 22:28:50.812 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:28:50.814 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:28:50.815 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-11 22:28:50.817 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:28:50.818 +04:00 [DBG] Creating DbConnection.
2023-04-11 22:28:50.819 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-11 22:28:50.821 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2023-04-11 22:28:50.823 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-04-11 22:28:50.824 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:50.825 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:50.826 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:28:50.831 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:28:50.834 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:50.835 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:50.837 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:50.838 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:50.839 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-11 22:28:50.840 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:50.841 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-11 22:28:50.843 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-11 22:28:50.845 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-11 22:28:50.846 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-11 22:28:50.846 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-11 22:28:50.847 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-11 22:28:50.848 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-11 22:28:50.849 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 36.8865ms
2023-04-11 22:28:50.850 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:28:50.851 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:28:50.852 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:28:50.852 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-11 22:28:50.854 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-11 22:28:50.855 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:50.856 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:28:50.857 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-11 22:28:50.858 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:28:50.859 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 65.4047ms
2023-04-11 22:28:50.860 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:28:50.862 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:28:50.863 +04:00 [DBG] Successfully validated the token.
2023-04-11 22:28:50.864 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-11 22:28:50.866 +04:00 [DBG] Authorization was successful.
2023-04-11 22:28:50.867 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:28:50.868 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-11 22:28:50.869 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-11 22:28:50.871 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-11 22:28:50.872 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-11 22:28:50.873 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-11 22:28:50.875 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-11 22:28:50.876 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:28:50.877 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:28:50.879 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-11 22:28:50.881 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:28:50.882 +04:00 [DBG] Creating DbConnection.
2023-04-11 22:28:50.883 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-11 22:28:50.884 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-11 22:28:50.885 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-11 22:28:50.886 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:50.887 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:50.888 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:28:50.891 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:28:50.893 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:50.894 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:50.896 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:28:50.897 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:50.898 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-11 22:28:50.899 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:50.900 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-11 22:28:50.902 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-11 22:28:50.904 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-11 22:28:50.904 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-11 22:28:50.905 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-11 22:28:50.906 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-11 22:28:50.907 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-11 22:28:50.908 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 32.0088ms
2023-04-11 22:28:50.909 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:28:50.910 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-11 22:28:50.911 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:28:50.913 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-11 22:28:50.914 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 63.7301ms
2023-04-11 22:29:18.472 +04:00 [DBG] Connection id "0HMPQN8R9BHN4" received FIN.
2023-04-11 22:29:18.474 +04:00 [DBG] Connection id "0HMPQN8R9BHN4" is closed. The last processed stream ID was 7.
2023-04-11 22:29:18.474 +04:00 [DBG] The connection queue processing loop for 0HMPQN8R9BHN4 completed.
2023-04-11 22:29:18.475 +04:00 [DBG] Connection id "0HMPQN8R9BHN4" sending FIN because: "The client closed the connection."
2023-04-11 22:29:18.487 +04:00 [DBG] Connection id "0HMPQN8R9BHN4" stopped.
2023-04-11 22:43:31.098 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-11 22:43:31.171 +04:00 [DBG] Hosting starting
2023-04-11 22:43:31.198 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-11 22:43:31.204 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-11 22:43:31.209 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-11 22:43:31.214 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-11 22:43:31.217 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-11 22:43:31.223 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-11 22:43:31.226 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-11 22:43:31.229 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-11 22:43:31.232 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-11 22:43:31.235 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-11 22:43:31.239 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-11 22:43:31.243 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-11 22:43:31.245 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-11 22:43:31.356 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-11 22:43:31.358 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-11 22:43:31.359 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-11 22:43:31.360 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-11 22:43:31.361 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-11 22:43:31.362 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-11 22:43:31.362 +04:00 [INF] Hosting environment: Development
2023-04-11 22:43:31.363 +04:00 [INF] Content root path: C:\Users\srevazishvili\Source\Repos\BankSystem\Atm.Api
2023-04-11 22:43:31.364 +04:00 [DBG] Hosting started
2023-04-11 22:43:31.663 +04:00 [DBG] Connection id "0HMPQNIJ093AJ" received FIN.
2023-04-11 22:43:31.663 +04:00 [DBG] Connection id "0HMPQNIJ093AI" received FIN.
2023-04-11 22:43:31.669 +04:00 [DBG] Connection id "0HMPQNIJ093AJ" accepted.
2023-04-11 22:43:31.669 +04:00 [DBG] Connection id "0HMPQNIJ093AI" accepted.
2023-04-11 22:43:31.671 +04:00 [DBG] Connection id "0HMPQNIJ093AJ" started.
2023-04-11 22:43:31.671 +04:00 [DBG] Connection id "0HMPQNIJ093AI" started.
2023-04-11 22:43:31.680 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-11 22:43:31.680 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-11 22:43:31.703 +04:00 [DBG] Connection id "0HMPQNIJ093AJ" stopped.
2023-04-11 22:43:31.703 +04:00 [DBG] Connection id "0HMPQNIJ093AI" stopped.
2023-04-11 22:43:31.706 +04:00 [DBG] Connection id "0HMPQNIJ093AI" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-11 22:43:31.706 +04:00 [DBG] Connection id "0HMPQNIJ093AJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-11 22:43:32.746 +04:00 [DBG] Connection id "0HMPQNIJ093AK" accepted.
2023-04-11 22:43:32.747 +04:00 [DBG] Connection id "0HMPQNIJ093AK" started.
2023-04-11 22:43:32.793 +04:00 [DBG] Connection 0HMPQNIJ093AK established using the following protocol: "Tls12"
2023-04-11 22:43:32.841 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-11 22:43:32.862 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-11 22:43:32.888 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-11 22:43:32.890 +04:00 [DBG] Request did not match any endpoints
2023-04-11 22:43:33.048 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-11 22:43:33.067 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-11 22:43:33.071 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 231.4516ms
2023-04-11 22:43:33.093 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-11 22:43:33.099 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 5.4018ms
2023-04-11 22:43:33.113 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-11 22:43:33.138 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 24.7026ms
2023-04-11 22:43:33.238 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-11 22:43:33.240 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-11 22:43:33.242 +04:00 [DBG] Request did not match any endpoints
2023-04-11 22:43:33.356 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 117.5230ms
2023-04-11 22:43:53.179 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-11 22:43:53.244 +04:00 [DBG] Hosting starting
2023-04-11 22:43:53.265 +04:00 [INF] User profile is available. Using 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-04-11 22:43:53.270 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-298957ac-1947-4690-b38f-95802ef792d5.xml'.
2023-04-11 22:43:53.275 +04:00 [DBG] Reading data from file 'C:\Users\srevazishvili\AppData\Local\ASP.NET\DataProtection-Keys\key-6b67ca3e-ca56-48ef-abcb-f08bc91b8c44.xml'.
2023-04-11 22:43:53.280 +04:00 [DBG] Found key {298957ac-1947-4690-b38f-95802ef792d5}.
2023-04-11 22:43:53.283 +04:00 [DBG] Found key {6b67ca3e-ca56-48ef-abcb-f08bc91b8c44}.
2023-04-11 22:43:53.289 +04:00 [DBG] Considering key {298957ac-1947-4690-b38f-95802ef792d5} with expiration date 2023-06-02 19:40:18Z as default key.
2023-04-11 22:43:53.292 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-11 22:43:53.295 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-04-11 22:43:53.297 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=7.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-11 22:43:53.300 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-04-11 22:43:53.304 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-04-11 22:43:53.308 +04:00 [DBG] Using key {298957ac-1947-4690-b38f-95802ef792d5} as the default key.
2023-04-11 22:43:53.310 +04:00 [DBG] Key ring with default key {298957ac-1947-4690-b38f-95802ef792d5} was loaded during application startup.
2023-04-11 22:43:53.409 +04:00 [INF] Now listening on: https://localhost:7261
2023-04-11 22:43:53.410 +04:00 [INF] Now listening on: http://localhost:5059
2023-04-11 22:43:53.411 +04:00 [DBG] Loaded hosting startup assembly BankSystem.Atm.Api
2023-04-11 22:43:53.412 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-04-11 22:43:53.413 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-04-11 22:43:53.414 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-11 22:43:53.414 +04:00 [INF] Hosting environment: Development
2023-04-11 22:43:53.415 +04:00 [INF] Content root path: C:\Users\srevazishvili\Source\Repos\BankSystem\Atm.Api
2023-04-11 22:43:53.416 +04:00 [DBG] Hosting started
2023-04-11 22:43:53.856 +04:00 [DBG] Connection id "0HMPQNIPJTK08" received FIN.
2023-04-11 22:43:53.856 +04:00 [DBG] Connection id "0HMPQNIPJTK07" received FIN.
2023-04-11 22:43:53.861 +04:00 [DBG] Connection id "0HMPQNIPJTK07" accepted.
2023-04-11 22:43:53.861 +04:00 [DBG] Connection id "0HMPQNIPJTK08" accepted.
2023-04-11 22:43:53.862 +04:00 [DBG] Connection id "0HMPQNIPJTK07" started.
2023-04-11 22:43:53.863 +04:00 [DBG] Connection id "0HMPQNIPJTK08" started.
2023-04-11 22:43:53.873 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-11 22:43:53.873 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-04-11 22:43:53.874 +04:00 [DBG] Connection id "0HMPQNIPJTK09" accepted.
2023-04-11 22:43:53.892 +04:00 [DBG] Connection id "0HMPQNIPJTK08" stopped.
2023-04-11 22:43:53.892 +04:00 [DBG] Connection id "0HMPQNIPJTK07" stopped.
2023-04-11 22:43:53.892 +04:00 [DBG] Connection id "0HMPQNIPJTK09" started.
2023-04-11 22:43:53.894 +04:00 [DBG] Connection id "0HMPQNIPJTK07" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-11 22:43:53.894 +04:00 [DBG] Connection id "0HMPQNIPJTK08" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-11 22:43:53.925 +04:00 [DBG] Connection 0HMPQNIPJTK09 established using the following protocol: "Tls12"
2023-04-11 22:43:53.960 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/index.html - -
2023-04-11 22:43:53.974 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-11 22:43:53.992 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-11 22:43:53.994 +04:00 [DBG] Request did not match any endpoints
2023-04-11 22:43:54.123 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-04-11 22:43:54.135 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-04-11 22:43:54.138 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/index.html - - - 200 - text/html;charset=utf-8 179.1716ms
2023-04-11 22:43:54.178 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_vs/browserLink - -
2023-04-11 22:43:54.178 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - -
2023-04-11 22:43:54.183 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_framework/aspnetcore-browser-refresh.js - - - 200 12006 application/javascript;+charset=utf-8 4.6464ms
2023-04-11 22:43:54.196 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 17.8278ms
2023-04-11 22:43:54.291 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - -
2023-04-11 22:43:54.292 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-11 22:43:54.293 +04:00 [DBG] Request did not match any endpoints
2023-04-11 22:43:54.379 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 87.7931ms
2023-04-11 22:44:01.992 +04:00 [DBG] Connection id "0HMPQNIPJTK09" received FIN.
2023-04-11 22:44:01.995 +04:00 [DBG] The connection queue processing loop for 0HMPQNIPJTK09 completed.
2023-04-11 22:44:01.997 +04:00 [DBG] Connection id "0HMPQNIPJTK09" is closed. The last processed stream ID was 7.
2023-04-11 22:44:01.999 +04:00 [DBG] Connection id "0HMPQNIPJTK09" sending FIN because: "The client closed the connection."
2023-04-11 22:44:02.006 +04:00 [DBG] Connection id "0HMPQNIPJTK09" stopped.
2023-04-11 22:44:29.397 +04:00 [DBG] Connection id "0HMPQNIPJTK0A" accepted.
2023-04-11 22:44:29.398 +04:00 [DBG] Connection id "0HMPQNIPJTK0A" started.
2023-04-11 22:44:29.403 +04:00 [DBG] Connection 0HMPQNIPJTK0A established using the following protocol: "Tls12"
2023-04-11 22:44:29.405 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/login - -
2023-04-11 22:44:29.409 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-11 22:44:29.411 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-11 22:44:29.413 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:44:29.415 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:44:29.416 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:44:29.416 +04:00 [DBG] The request is a preflight request.
2023-04-11 22:44:29.417 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/login - - - 204 - - 12.2600ms
2023-04-11 22:44:29.418 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Card/login application/json 48
2023-04-11 22:44:29.421 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/login'
2023-04-11 22:44:29.423 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)' with route pattern 'api/Card/login' is valid for the request path '/api/Card/login'
2023-04-11 22:44:29.425 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-11 22:44:29.426 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:44:29.427 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:44:29.428 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:44:29.450 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-11 22:44:29.455 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-11 22:44:29.473 +04:00 [INF] Route matched with {action = "Login", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankSystem.Atm.Services.Models.Requests.LoginRequest) on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-11 22:44:29.475 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-11 22:44:29.476 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-11 22:44:29.478 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-11 22:44:29.480 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-11 22:44:29.481 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-11 22:44:29.483 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:44:29.605 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-11 22:44:29.624 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:44:29.632 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-11 22:44:29.635 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-11 22:44:29.637 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-11 22:44:29.641 +04:00 [DBG] Connection id "0HMPQNIPJTK0A", Request id "0HMPQNIPJTK0A:00000003": started reading request body.
2023-04-11 22:44:29.642 +04:00 [DBG] Connection id "0HMPQNIPJTK0A", Request id "0HMPQNIPJTK0A:00000003": done reading request body.
2023-04-11 22:44:29.647 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'
2023-04-11 22:44:29.648 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-11 22:44:29.649 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-11 22:44:29.651 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest' ...
2023-04-11 22:44:29.657 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.LoginRequest'.
2023-04-11 22:44:29.994 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2023-04-11 22:44:29.995 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2023-04-11 22:44:30.243 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-11 22:44:30.313 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.CardNumber == __request_CardNumber_0 && c.Pin == __request_Pin_1)'
2023-04-11 22:44:30.363 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-11 22:44:30.485 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE (c.CardNumber == @__request_CardNumber_0) && (c.Pin == @__request_Pin_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-11 22:44:30.519 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:44:30.523 +04:00 [DBG] Creating DbConnection.
2023-04-11 22:44:30.546 +04:00 [DBG] Created DbConnection. (21ms).
2023-04-11 22:44:30.553 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (34ms).
2023-04-11 22:44:30.562 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (44ms).
2023-04-11 22:44:30.565 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:30.714 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:30.722 +04:00 [DBG] Executing DbCommand [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-11 22:44:30.758 +04:00 [INF] Executed DbCommand (38ms) [Parameters=[@__request_CardNumber_0='?' (Size = 4000), @__request_Pin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[CardNumber] = @__request_CardNumber_0 AND [c].[Pin] = @__request_Pin_1
2023-04-11 22:44:30.781 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:30.810 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:30.818 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:30.831 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:30.837 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 71ms reading results.
2023-04-11 22:44:30.840 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:30.845 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (4ms).
2023-04-11 22:44:30.923 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-11 22:44:30.927 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-11 22:44:30.927 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-11 22:44:30.928 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-11 22:44:30.930 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-11 22:44:30.932 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-11 22:44:30.944 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api) in 1459.8773ms
2023-04-11 22:44:30.946 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.Login (BankSystem.Atm.Api)'
2023-04-11 22:44:30.949 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-11 22:44:30.953 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:30.956 +04:00 [DBG] Disposed connection to database '' on server '' (3ms).
2023-04-11 22:44:30.958 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Card/login application/json 48 - 200 - application/json;+charset=utf-8 1539.8437ms
2023-04-11 22:44:32.450 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:44:32.450 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:44:32.451 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:44:32.452 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:44:32.453 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-11 22:44:32.454 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-11 22:44:32.455 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:44:32.456 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:44:32.457 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:44:32.457 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:44:32.457 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:44:32.458 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:44:32.459 +04:00 [DBG] The request is a preflight request.
2023-04-11 22:44:32.460 +04:00 [DBG] The request is a preflight request.
2023-04-11 22:44:32.462 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 12.2302ms
2023-04-11 22:44:32.462 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 12.4234ms
2023-04-11 22:44:32.464 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:44:32.465 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:44:32.466 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-11 22:44:32.467 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:44:32.467 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:44:32.468 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:44:32.469 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:44:32.502 +04:00 [DBG] Successfully validated the token.
2023-04-11 22:44:32.504 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-11 22:44:32.508 +04:00 [DBG] Authorization was successful.
2023-04-11 22:44:32.511 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:44:32.515 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-11 22:44:32.518 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-11 22:44:32.519 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-11 22:44:32.521 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-11 22:44:32.522 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-11 22:44:32.524 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-11 22:44:32.525 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:44:32.528 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:44:32.538 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-11 22:44:32.542 +04:00 [DBG] Compiling query expression: 
'DbSet<CardEntity>()
    .Include(c => c.Account)
    .FirstOrDefault(c => c.Id == __cardId_0)'
2023-04-11 22:44:32.544 +04:00 [DBG] Including navigation: 'CardEntity.Account'.
2023-04-11 22:44:32.552 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CardEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<CardEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CardEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CardEntity.AccountId (Guid) Required FK Index, 1], [Property: CardEntity.CardNumber (string), 2], [Property: CardEntity.CreatedAt (DateTime) Required, 3], [Property: CardEntity.Cvv (string), 4], [Property: CardEntity.ExpiresAt (DateTime) Required, 5], [Property: CardEntity.FullName (string), 6], [Property: CardEntity.Pin (string), 7] }
                1 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AccountEntity.Amount (decimal) Required, 9], [Property: AccountEntity.Currency (CurrencyType) Required, 10], [Property: AccountEntity.Iban (string), 11], [Property: AccountEntity.UserId (Guid) Required FK Index, 12] }
            SELECT TOP(1) c.Id, c.AccountId, c.CardNumber, c.CreatedAt, c.Cvv, c.ExpiresAt, c.FullName, c.Pin, a.Id, a.Amount, a.Currency, a.Iban, a.UserId
            FROM Cards AS c
            INNER JOIN Accounts AS a ON c.AccountId == a.Id
            WHERE c.Id == @__cardId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CardEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-11 22:44:32.556 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:44:32.557 +04:00 [DBG] Creating DbConnection.
2023-04-11 22:44:32.558 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-11 22:44:32.559 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-11 22:44:32.560 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-11 22:44:32.561 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:32.563 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:32.565 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:44:32.570 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:44:32.573 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:32.574 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:32.575 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:32.577 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:32.579 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-11 22:44:32.580 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:32.581 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-11 22:44:32.583 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-11 22:44:32.584 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-11 22:44:32.585 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-11 22:44:32.585 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-11 22:44:32.586 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-11 22:44:32.588 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-11 22:44:32.592 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 67.2836ms
2023-04-11 22:44:32.594 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:44:32.594 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:44:32.595 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-11 22:44:32.595 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:44:32.596 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:32.597 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-11 22:44:32.598 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-11 22:44:32.599 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:44:32.600 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 136.2858ms
2023-04-11 22:44:32.601 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:44:32.602 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:44:32.603 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:44:32.605 +04:00 [DBG] Successfully validated the token.
2023-04-11 22:44:32.606 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-11 22:44:32.608 +04:00 [DBG] Authorization was successful.
2023-04-11 22:44:32.609 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:44:32.611 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-11 22:44:32.612 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-11 22:44:32.613 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-11 22:44:32.614 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-11 22:44:32.616 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-11 22:44:32.617 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-11 22:44:32.618 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:44:32.621 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:44:32.659 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-11 22:44:32.665 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:44:32.667 +04:00 [DBG] Creating DbConnection.
2023-04-11 22:44:32.668 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-11 22:44:32.668 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-04-11 22:44:32.669 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-11 22:44:32.671 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:32.672 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:32.673 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:44:32.675 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:44:32.678 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:32.679 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:32.680 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:32.681 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:32.682 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 3ms reading results.
2023-04-11 22:44:32.683 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:32.684 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-11 22:44:32.685 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-11 22:44:32.687 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-11 22:44:32.687 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-11 22:44:32.688 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-11 22:44:32.689 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-11 22:44:32.690 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-11 22:44:32.691 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 73.5976ms
2023-04-11 22:44:32.692 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:44:32.694 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-11 22:44:32.695 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:32.696 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-11 22:44:32.697 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 102.7664ms
2023-04-11 22:44:37.029 +04:00 [DBG] Connection id "0HMPQNIPJTK0A" received FIN.
2023-04-11 22:44:37.030 +04:00 [DBG] Connection id "0HMPQNIPJTK0A" is closed. The last processed stream ID was 11.
2023-04-11 22:44:37.030 +04:00 [DBG] Connection id "0HMPQNIPJTK0A" sending FIN because: "The client closed the connection."
2023-04-11 22:44:37.033 +04:00 [DBG] The connection queue processing loop for 0HMPQNIPJTK0A completed.
2023-04-11 22:44:37.034 +04:00 [DBG] Connection id "0HMPQNIPJTK0A" stopped.
2023-04-11 22:44:49.952 +04:00 [DBG] Connection id "0HMPQNIPJTK0B" accepted.
2023-04-11 22:44:49.954 +04:00 [DBG] Connection id "0HMPQNIPJTK0B" started.
2023-04-11 22:44:49.956 +04:00 [DBG] Connection 0HMPQNIPJTK0B established using the following protocol: "Tls12"
2023-04-11 22:44:49.957 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - -
2023-04-11 22:44:49.958 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-11 22:44:49.959 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-11 22:44:49.959 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:44:49.960 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:44:49.962 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:44:49.962 +04:00 [DBG] The request is a preflight request.
2023-04-11 22:44:49.963 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Transaction/cash-out - - - 204 - - 5.5817ms
2023-04-11 22:44:49.964 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 27
2023-04-11 22:44:49.964 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Transaction/cash-out'
2023-04-11 22:44:49.965 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)' with route pattern 'api/Transaction/cash-out' is valid for the request path '/api/Transaction/cash-out'
2023-04-11 22:44:49.967 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-11 22:44:49.967 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:44:49.968 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:44:49.968 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:44:49.969 +04:00 [DBG] Successfully validated the token.
2023-04-11 22:44:49.970 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-11 22:44:49.971 +04:00 [DBG] Authorization was successful.
2023-04-11 22:44:49.972 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-11 22:44:49.975 +04:00 [INF] Route matched with {action = "CashOut", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CashOut(BankSystem.Atm.Services.Models.Requests.CashOutRequest) on controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api).
2023-04-11 22:44:49.977 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-11 22:44:49.979 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-11 22:44:49.980 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-11 22:44:49.982 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-11 22:44:49.983 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-11 22:44:49.984 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-11 22:44:49.986 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.TransactionController (BankSystem.Atm.Api)
2023-04-11 22:44:49.988 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-11 22:44:49.989 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' using the name '' in request data ...
2023-04-11 22:44:49.990 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-11 22:44:49.995 +04:00 [DBG] Connection id "0HMPQNIPJTK0B", Request id "0HMPQNIPJTK0B:00000003": started reading request body.
2023-04-11 22:44:49.997 +04:00 [DBG] Connection id "0HMPQNIPJTK0B", Request id "0HMPQNIPJTK0B:00000003": done reading request body.
2023-04-11 22:44:50.010 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'
2023-04-11 22:44:50.012 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-11 22:44:50.013 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-11 22:44:50.014 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest' ...
2023-04-11 22:44:50.019 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.Atm.Services.Models.Requests.CashOutRequest'.
2023-04-11 22:44:50.025 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-11 22:44:50.029 +04:00 [DBG] Compiling query expression: 
'DbSet<CurrencyEntity>()'
2023-04-11 22:44:50.034 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CurrencyEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CurrencyEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CurrencyEntity.Code (string), 1], [Property: CurrencyEntity.Date (DateTime) Required, 2], [Property: CurrencyEntity.Diff (decimal) Required, 3], [Property: CurrencyEntity.DiffFormated (string), 4], [Property: CurrencyEntity.LastUpdatedAt (DateTime) Required, 5], [Property: CurrencyEntity.Name (string), 6], [Property: CurrencyEntity.Quantity (int) Required, 7], [Property: CurrencyEntity.Rate (decimal) Required, 8], [Property: CurrencyEntity.RateFormated (string), 9], [Property: CurrencyEntity.ValidFromDate (DateTime) Required, 10] }
        SELECT c.Id, c.Code, c.Date, c.Diff, c.DiffFormated, c.LastUpdatedAt, c.Name, c.Quantity, c.Rate, c.RateFormated, c.ValidFromDate
        FROM Currencies AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CurrencyEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-11 22:44:50.038 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:44:50.039 +04:00 [DBG] Creating DbConnection.
2023-04-11 22:44:50.039 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-11 22:44:50.040 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-11 22:44:50.041 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-11 22:44:50.043 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.044 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.045 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-11 22:44:50.049 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Code], [c].[Date], [c].[Diff], [c].[DiffFormated], [c].[LastUpdatedAt], [c].[Name], [c].[Quantity], [c].[Rate], [c].[RateFormated], [c].[ValidFromDate]
FROM [Currencies] AS [c]
2023-04-11 22:44:50.054 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.068 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.070 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.072 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.073 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.074 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.075 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.077 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.078 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.080 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.081 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.082 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.083 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.084 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.085 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.087 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.088 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.089 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.091 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.092 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.094 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.095 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.096 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.097 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.098 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.099 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.101 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.102 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.103 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.104 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.105 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.107 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.108 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.109 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.111 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.112 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.113 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.114 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.116 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.117 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.119 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.123 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.124 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CurrencyEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.126 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.127 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 76ms reading results.
2023-04-11 22:44:50.129 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.134 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (4ms).
2023-04-11 22:44:50.145 +04:00 [DBG] Compiling query expression: 
'DbSet<AccountEntity>()
    .Include(a => a.UserEntity)
    .FirstOrDefault(a => a.Cards
        .Any(c => c.Id == __cardId_0))'
2023-04-11 22:44:50.152 +04:00 [DBG] Including navigation: 'AccountEntity.UserEntity'.
2023-04-11 22:44:50.180 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AccountEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<AccountEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AccountEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AccountEntity.Amount (decimal) Required, 1], [Property: AccountEntity.Currency (CurrencyType) Required, 2], [Property: AccountEntity.Iban (string), 3], [Property: AccountEntity.UserId (Guid) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: UserEntity.AccessFailedCount (int) Required, 6], [Property: UserEntity.BirthDate (DateTime) Required, 7], [Property: UserEntity.ConcurrencyStamp (string) Concurrency, 8], [Property: UserEntity.Email (string) MaxLength(256), 9], [Property: UserEntity.EmailConfirmed (bool) Required, 10], [Property: UserEntity.FirstName (string), 11], [Property: UserEntity.LastName (string), 12], [Property: UserEntity.LockoutEnabled (bool) Required, 13], [Property: UserEntity.LockoutEnd (DateTimeOffset?), 14], [Property: UserEntity.NormalizedEmail (string) Index MaxLength(256), 15], [Property: UserEntity.NormalizedUserName (string) Index MaxLength(256), 16], [Property: UserEntity.PasswordHash (string), 17], [Property: UserEntity.PersonalNumber (string), 18], [Property: UserEntity.PhoneNumber (string), 19], [Property: UserEntity.PhoneNumberConfirmed (bool) Required, 20], [Property: UserEntity.RegisteredAt (DateTime) Required, 21], [Property: UserEntity.SecurityStamp (string), 22], [Property: UserEntity.TwoFactorEnabled (bool) Required, 23], [Property: UserEntity.UserName (string) MaxLength(256), 24] }
            SELECT TOP(1) a.Id, a.Amount, a.Currency, a.Iban, a.UserId, a0.Id, a0.AccessFailedCount, a0.BirthDate, a0.ConcurrencyStamp, a0.Email, a0.EmailConfirmed, a0.FirstName, a0.LastName, a0.LockoutEnabled, a0.LockoutEnd, a0.NormalizedEmail, a0.NormalizedUserName, a0.PasswordHash, a0.PersonalNumber, a0.PhoneNumber, a0.PhoneNumberConfirmed, a0.RegisteredAt, a0.SecurityStamp, a0.TwoFactorEnabled, a0.UserName
            FROM Accounts AS a
            INNER JOIN AspNetUsers AS a0 ON a.UserId == a0.Id
            WHERE EXISTS (
                SELECT 1
                FROM Cards AS c
                WHERE ((a.Id != NULL) && (a.Id == c.AccountId)) && (c.Id == @__cardId_0))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AccountEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-11 22:44:50.185 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:44:50.186 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-11 22:44:50.188 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-11 22:44:50.189 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.191 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.193 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-11 22:44:50.202 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[BirthDate], [a0].[ConcurrencyStamp], [a0].[Email], [a0].[EmailConfirmed], [a0].[FirstName], [a0].[LastName], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PersonalNumber], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[RegisteredAt], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Accounts] AS [a]
INNER JOIN [AspNetUsers] AS [a0] ON [a].[UserId] = [a0].[Id]
WHERE EXISTS (
    SELECT 1
    FROM [Cards] AS [c]
    WHERE [a].[Id] = [c].[AccountId] AND [c].[Id] = @__cardId_0)
2023-04-11 22:44:50.206 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.222 +04:00 [DBG] The navigation 'AccountEntity.UserEntity' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.224 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.250 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.252 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 46ms reading results.
2023-04-11 22:44:50.253 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.254 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-11 22:44:50.262 +04:00 [DBG] Compiling query expression: 
'DbSet<TransactionEntity>()
    .Where(t => t.AccountFromId == __accountId_0 && t.CreatedAt.Date == DateTime.Now.Date && (int)t.TransactionType == 0)'
2023-04-11 22:44:50.272 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<TransactionEntity>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TransactionEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TransactionEntity.AccountFromIban (string), 1], [Property: TransactionEntity.AccountFromId (Guid?), 2], [Property: TransactionEntity.AccountToIban (string), 3], [Property: TransactionEntity.AccountToId (Guid?), 4], [Property: TransactionEntity.CreatedAt (DateTime) Required, 5], [Property: TransactionEntity.CurrencyFrom (CurrencyType) Required, 6], [Property: TransactionEntity.CurrencyTo (CurrencyType) Required, 7], [Property: TransactionEntity.Fee (decimal) Required, 8], [Property: TransactionEntity.ReceivedAmount (decimal) Required, 9], [Property: TransactionEntity.TransactionType (TransactionType) Required, 10], [Property: TransactionEntity.WithDrawnAmount (decimal) Required, 11] }
        SELECT t.Id, t.AccountFromIban, t.AccountFromId, t.AccountToIban, t.AccountToId, t.CreatedAt, t.CurrencyFrom, t.CurrencyTo, t.Fee, t.ReceivedAmount, t.TransactionType, t.WithDrawnAmount
        FROM Transactions AS t
        WHERE ((t.AccountFromId == @__accountId_0) && (CONVERT(date, t.CreatedAt) == CONVERT(date, GETDATE()))) && (t.TransactionType == 0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TransactionEntity>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-11 22:44:50.279 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:44:50.280 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-04-11 22:44:50.282 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-04-11 22:44:50.283 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.284 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.285 +04:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-11 22:44:50.289 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountFromIban], [t].[AccountFromId], [t].[AccountToIban], [t].[AccountToId], [t].[CreatedAt], [t].[CurrencyFrom], [t].[CurrencyTo], [t].[Fee], [t].[ReceivedAmount], [t].[TransactionType], [t].[WithDrawnAmount]
FROM [Transactions] AS [t]
WHERE [t].[AccountFromId] = @__accountId_0 AND CONVERT(date, [t].[CreatedAt]) = CONVERT(date, GETDATE()) AND [t].[TransactionType] = 0
2023-04-11 22:44:50.293 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.294 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 1ms reading results.
2023-04-11 22:44:50.295 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.296 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-11 22:44:50.308 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.340 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'TransactionEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.355 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'EmailRequestEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.359 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-11 22:44:50.363 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-11 22:44:50.396 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-11 22:44:50.449 +04:00 [DBG] Executing 3 update commands as a batch.
2023-04-11 22:44:50.453 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.455 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.457 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-11 22:44:50.462 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-11 22:44:50.465 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:44:50.466 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-11 22:44:50.469 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-04-11 22:44:50.470 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-11 22:44:50.481 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 4000), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (DbType = Guid), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p20='?' (Precision = 18) (Scale = 3) (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (Precision = 18) (Scale = 3) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Amount] = @p0, [Currency] = @p1, [Iban] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [EmailRequests] ([Id], [Body], [CreatedAt], [Status], [Subject], [ToAddress])
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO [Transactions] ([Id], [AccountFromIban], [AccountFromId], [AccountToIban], [AccountToId], [CreatedAt], [CurrencyFrom], [CurrencyTo], [Fee], [ReceivedAmount], [TransactionType], [WithDrawnAmount])
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2023-04-11 22:44:50.488 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.489 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-11 22:44:50.494 +04:00 [DBG] Committing transaction.
2023-04-11 22:44:50.497 +04:00 [DBG] Committed transaction.
2023-04-11 22:44:50.500 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.501 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-11 22:44:50.503 +04:00 [DBG] Disposing transaction.
2023-04-11 22:44:50.507 +04:00 [DBG] An entity of type 'TransactionEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.510 +04:00 [DBG] An entity of type 'EmailRequestEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.512 +04:00 [DBG] An entity of type 'AccountEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:50.515 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 3 entities written to the database.
2023-04-11 22:44:50.516 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-11 22:44:50.518 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-11 22:44:50.519 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-11 22:44:50.520 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-11 22:44:50.521 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-11 22:44:50.522 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-11 22:44:50.529 +04:00 [INF] Executed action ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api) in 544.6614ms
2023-04-11 22:44:50.530 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.TransactionController.CashOut (BankSystem.Atm.Api)'
2023-04-11 22:44:50.531 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-11 22:44:50.532 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:50.533 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-11 22:44:50.534 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7261/api/Transaction/cash-out application/json 27 - 200 - application/json;+charset=utf-8 570.3485ms
2023-04-11 22:44:55.233 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:44:55.233 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:44:55.234 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:44:55.234 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:44:55.235 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-11 22:44:55.236 +04:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-04-11 22:44:55.237 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:44:55.238 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:44:55.239 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:44:55.240 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:44:55.240 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:44:55.241 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:44:55.242 +04:00 [DBG] The request is a preflight request.
2023-04-11 22:44:55.243 +04:00 [DBG] The request is a preflight request.
2023-04-11 22:44:55.244 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 11.3773ms
2023-04-11 22:44:55.245 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7261/api/Card/see-balance - - - 204 - - 12.0009ms
2023-04-11 22:44:55.246 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:44:55.247 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:44:55.248 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-11 22:44:55.249 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:44:55.250 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:44:55.251 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:44:55.252 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:44:55.253 +04:00 [DBG] Successfully validated the token.
2023-04-11 22:44:55.254 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-11 22:44:55.255 +04:00 [DBG] Authorization was successful.
2023-04-11 22:44:55.255 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:44:55.256 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-11 22:44:55.258 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-11 22:44:55.259 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-11 22:44:55.261 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-11 22:44:55.263 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-11 22:44:55.264 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-11 22:44:55.265 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:44:55.266 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:44:55.268 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-11 22:44:55.269 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:44:55.271 +04:00 [DBG] Creating DbConnection.
2023-04-11 22:44:55.272 +04:00 [DBG] Created DbConnection. (1ms).
2023-04-11 22:44:55.272 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-11 22:44:55.273 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-11 22:44:55.274 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:55.275 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:55.276 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:44:55.280 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:44:55.283 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:55.284 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:55.285 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:55.286 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:55.288 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 5ms reading results.
2023-04-11 22:44:55.289 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:55.290 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (1ms).
2023-04-11 22:44:55.292 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-11 22:44:55.294 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-11 22:44:55.295 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-11 22:44:55.295 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-11 22:44:55.296 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-11 22:44:55.297 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-11 22:44:55.298 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 33.1378ms
2023-04-11 22:44:55.299 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:44:55.299 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7261/api/Card/see-balance - -
2023-04-11 22:44:55.300 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-11 22:44:55.301 +04:00 [DBG] 1 candidate(s) found for the request path '/api/Card/see-balance'
2023-04-11 22:44:55.302 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:55.303 +04:00 [DBG] Endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)' with route pattern 'api/Card/see-balance' is valid for the request path '/api/Card/see-balance'
2023-04-11 22:44:55.304 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-11 22:44:55.305 +04:00 [DBG] Request matched endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:44:55.306 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 60.2665ms
2023-04-11 22:44:55.307 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-11 22:44:55.308 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2023-04-11 22:44:55.309 +04:00 [INF] CORS policy execution successful.
2023-04-11 22:44:55.310 +04:00 [DBG] Successfully validated the token.
2023-04-11 22:44:55.311 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-11 22:44:55.312 +04:00 [DBG] Authorization was successful.
2023-04-11 22:44:55.312 +04:00 [INF] Executing endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:44:55.313 +04:00 [INF] Route matched with {action = "SeeBalance", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SeeBalance() on controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api).
2023-04-11 22:44:55.315 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-11 22:44:55.315 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-11 22:44:55.316 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-11 22:44:55.318 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-11 22:44:55.320 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-11 22:44:55.322 +04:00 [DBG] Executing controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:44:55.323 +04:00 [DBG] Executed controller factory for controller ATM.Api.Controllers.CardController (BankSystem.Atm.Api)
2023-04-11 22:44:55.325 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-11 22:44:55.326 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-11 22:44:55.327 +04:00 [DBG] Creating DbConnection.
2023-04-11 22:44:55.328 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-11 22:44:55.329 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-04-11 22:44:55.329 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-04-11 22:44:55.330 +04:00 [DBG] Opening connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:55.331 +04:00 [DBG] Opened connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:55.332 +04:00 [DBG] Executing DbCommand [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:44:55.334 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cardId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AccountId], [c].[CardNumber], [c].[CreatedAt], [c].[Cvv], [c].[ExpiresAt], [c].[FullName], [c].[Pin], [a].[Id], [a].[Amount], [a].[Currency], [a].[Iban], [a].[UserId]
FROM [Cards] AS [c]
INNER JOIN [Accounts] AS [a] ON [c].[AccountId] = [a].[Id]
WHERE [c].[Id] = @__cardId_0
2023-04-11 22:44:55.336 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'CardEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:55.337 +04:00 [DBG] The navigation 'CardEntity.Account' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:55.338 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'AccountEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-11 22:44:55.339 +04:00 [DBG] Closing data reader to 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:55.340 +04:00 [DBG] A data reader for 'BankSystem' on server '(localdb)\MSSQLLocalDB' is being disposed after spending 4ms reading results.
2023-04-11 22:44:55.341 +04:00 [DBG] Closing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:55.342 +04:00 [DBG] Closed connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB' (0ms).
2023-04-11 22:44:55.344 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-11 22:44:55.345 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-11 22:44:55.346 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-11 22:44:55.347 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-11 22:44:55.347 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-11 22:44:55.349 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-11 22:44:55.350 +04:00 [INF] Executed action ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api) in 28.3189ms
2023-04-11 22:44:55.351 +04:00 [INF] Executed endpoint 'ATM.Api.Controllers.CardController.SeeBalance (BankSystem.Atm.Api)'
2023-04-11 22:44:55.353 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-11 22:44:55.354 +04:00 [DBG] Disposing connection to database 'BankSystem' on server '(localdb)\MSSQLLocalDB'.
2023-04-11 22:44:55.355 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-04-11 22:44:55.356 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7261/api/Card/see-balance - - - 200 - application/json;+charset=utf-8 56.4651ms
2023-04-11 22:44:57.061 +04:00 [DBG] Connection id "0HMPQNIPJTK0B" received FIN.
2023-04-11 22:44:57.062 +04:00 [DBG] Connection id "0HMPQNIPJTK0B" is closed. The last processed stream ID was 11.
2023-04-11 22:44:57.062 +04:00 [DBG] The connection queue processing loop for 0HMPQNIPJTK0B completed.
2023-04-11 22:44:57.064 +04:00 [DBG] Connection id "0HMPQNIPJTK0B" sending FIN because: "The client closed the connection."
2023-04-11 22:44:57.080 +04:00 [DBG] Connection id "0HMPQNIPJTK0B" stopped.
