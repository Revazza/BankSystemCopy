2023-04-12 16:43:04.462 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-12 16:43:04.544 +04:00 [DBG] Hosting starting
2023-04-12 16:43:04.552 +04:00 [INF] User profile is available. Using '/home/ana/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2023-04-12 16:43:04.558 +04:00 [DBG] Reading data from file '/home/ana/.aspnet/DataProtection-Keys/key-e188b912-05a9-43be-9954-20bc169a2d47.xml'.
2023-04-12 16:43:04.565 +04:00 [DBG] Found key {e188b912-05a9-43be-9954-20bc169a2d47}.
2023-04-12 16:43:04.575 +04:00 [DBG] Considering key {e188b912-05a9-43be-9954-20bc169a2d47} with expiration date 2023-04-16 19:10:03Z as default key.
2023-04-12 16:43:04.577 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-12 16:43:04.578 +04:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2023-04-12 16:43:04.578 +04:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2023-04-12 16:43:04.582 +04:00 [DBG] Using key {e188b912-05a9-43be-9954-20bc169a2d47} as the default key.
2023-04-12 16:43:04.583 +04:00 [DBG] Key ring with default key {e188b912-05a9-43be-9954-20bc169a2d47} was loaded during application startup.
2023-04-12 16:43:04.620 +04:00 [INF] Now listening on: http://localhost:5244
2023-04-12 16:43:04.620 +04:00 [DBG] Loaded hosting startup assembly BankSystem.InternetBank.Api
2023-04-12 16:43:04.620 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-12 16:43:04.620 +04:00 [INF] Hosting environment: Development
2023-04-12 16:43:04.620 +04:00 [INF] Content root path: /home/ana/RiderProjects/BankSystemCopy/InternetBank.Api
2023-04-12 16:43:04.620 +04:00 [DBG] Hosting started
2023-04-12 16:43:04.678 +04:00 [DBG] Connection id "0HMPRADQRSI1N" received FIN.
2023-04-12 16:43:04.683 +04:00 [DBG] Connection id "0HMPRADQRSI1N" accepted.
2023-04-12 16:43:04.684 +04:00 [DBG] Connection id "0HMPRADQRSI1N" started.
2023-04-12 16:43:04.693 +04:00 [DBG] Connection id "0HMPRADQRSI1N" sending FIN because: "The client closed the connection."
2023-04-12 16:43:04.695 +04:00 [DBG] Connection id "0HMPRADQRSI1N" disconnecting.
2023-04-12 16:43:04.698 +04:00 [DBG] Connection id "0HMPRADQRSI1N" stopped.
2023-04-12 16:43:04.985 +04:00 [DBG] Connection id "0HMPRADQRSI1O" accepted.
2023-04-12 16:43:04.985 +04:00 [DBG] Connection id "0HMPRADQRSI1O" started.
2023-04-12 16:43:04.986 +04:00 [DBG] Connection id "0HMPRADQRSI1P" accepted.
2023-04-12 16:43:04.986 +04:00 [DBG] Connection id "0HMPRADQRSI1P" started.
2023-04-12 16:43:05.015 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5244/swagger/index.html - -
2023-04-12 16:43:05.018 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-12 16:43:05.037 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-12 16:43:05.037 +04:00 [DBG] Request did not match any endpoints
2023-04-12 16:43:05.132 +04:00 [DBG] Connection id "0HMPRADQRSI1O" completed keep alive response.
2023-04-12 16:43:05.133 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5244/swagger/index.html - - - 200 - text/html;charset=utf-8 119.7871ms
2023-04-12 16:43:05.910 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5244/swagger/v1/swagger.json - -
2023-04-12 16:43:05.911 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-12 16:43:05.912 +04:00 [DBG] Request did not match any endpoints
2023-04-12 16:43:06.043 +04:00 [DBG] Connection id "0HMPRADQRSI1O" completed keep alive response.
2023-04-12 16:43:06.044 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5244/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 133.3374ms
2023-04-12 16:43:32.685 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5244/User/login application/json 68
2023-04-12 16:43:32.689 +04:00 [DBG] 1 candidate(s) found for the request path '/User/login'
2023-04-12 16:43:32.691 +04:00 [DBG] Endpoint 'BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync (BankSystem.InternetBank.Api)' with route pattern 'User/login' is valid for the request path '/User/login'
2023-04-12 16:43:32.691 +04:00 [DBG] Request matched endpoint 'BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:43:32.693 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-12 16:43:32.695 +04:00 [WRN] Failed to determine the https port for redirect.
2023-04-12 16:43:32.696 +04:00 [DBG] The request has an origin header: 'http://localhost:5244'.
2023-04-12 16:43:32.697 +04:00 [INF] CORS policy execution successful.
2023-04-12 16:43:32.706 +04:00 [DBG] AuthenticationScheme: Identity.Application was not authenticated.
2023-04-12 16:43:32.723 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-12 16:43:32.725 +04:00 [INF] Executing endpoint 'BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:43:32.742 +04:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(BankSystem.InternetBank.Models.Requests.LoginRequest) on controller BankSystem.InternetBank.Api.Controllers.UserController (BankSystem.InternetBank.Api).
2023-04-12 16:43:32.743 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-12 16:43:32.743 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-12 16:43:32.744 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-12 16:43:32.744 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-12 16:43:32.744 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-12 16:43:32.745 +04:00 [DBG] Executing controller factory for controller BankSystem.InternetBank.Api.Controllers.UserController (BankSystem.InternetBank.Api)
2023-04-12 16:43:32.851 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-12 16:43:32.881 +04:00 [DBG] Executed controller factory for controller BankSystem.InternetBank.Api.Controllers.UserController (BankSystem.InternetBank.Api)
2023-04-12 16:43:32.884 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest' ...
2023-04-12 16:43:32.886 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-12 16:43:32.887 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-12 16:43:32.892 +04:00 [DBG] Connection id "0HMPRADQRSI1O", Request id "0HMPRADQRSI1O:00000003": started reading request body.
2023-04-12 16:43:32.892 +04:00 [DBG] Connection id "0HMPRADQRSI1O", Request id "0HMPRADQRSI1O:00000003": done reading request body.
2023-04-12 16:43:32.898 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.InternetBank.Models.Requests.LoginRequest'
2023-04-12 16:43:32.898 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest'.
2023-04-12 16:43:32.898 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest'.
2023-04-12 16:43:32.899 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest' ...
2023-04-12 16:43:32.904 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest'.
2023-04-12 16:43:33.428 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2023-04-12 16:43:33.428 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2023-04-12 16:43:33.810 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-12 16:43:33.886 +04:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2023-04-12 16:43:34.059 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<UserEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.AccessFailedCount (int) Required, 1], [Property: UserEntity.BirthDate (DateTime) Required, 2], [Property: UserEntity.ConcurrencyStamp (string) Concurrency, 3], [Property: UserEntity.Email (string) MaxLength(256), 4], [Property: UserEntity.EmailConfirmed (bool) Required, 5], [Property: UserEntity.FirstName (string), 6], [Property: UserEntity.LastName (string), 7], [Property: UserEntity.LockoutEnabled (bool) Required, 8], [Property: UserEntity.LockoutEnd (DateTimeOffset?), 9], [Property: UserEntity.NormalizedEmail (string) Index MaxLength(256), 10], [Property: UserEntity.NormalizedUserName (string) Index MaxLength(256), 11], [Property: UserEntity.PasswordHash (string), 12], [Property: UserEntity.PersonalNumber (string), 13], [Property: UserEntity.PhoneNumber (string), 14], [Property: UserEntity.PhoneNumberConfirmed (bool) Required, 15], [Property: UserEntity.RegisteredAt (DateTime) Required, 16], [Property: UserEntity.SecurityStamp (string), 17], [Property: UserEntity.TwoFactorEnabled (bool) Required, 18], [Property: UserEntity.UserName (string) MaxLength(256), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PersonalNumber, a.PhoneNumber, a.PhoneNumberConfirmed, a.RegisteredAt, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-12 16:43:34.108 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:43:34.110 +04:00 [DBG] Creating DbConnection.
2023-04-12 16:43:34.148 +04:00 [DBG] Created DbConnection. (35ms).
2023-04-12 16:43:34.158 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (47ms).
2023-04-12 16:43:34.169 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (63ms).
2023-04-12 16:43:34.176 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:43:34.373 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:43:34.384 +04:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2023-04-12 16:43:34.436 +04:00 [INF] Executed DbCommand (54ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2023-04-12 16:43:34.449 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:43:34.458 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 14ms reading results.
2023-04-12 16:43:34.462 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:43:34.469 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (6ms).
2023-04-12 16:43:34.481 +04:00 [INF] Executed action BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync (BankSystem.InternetBank.Api) in 1732.3232ms
2023-04-12 16:43:34.483 +04:00 [INF] Executed endpoint 'BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:43:34.489 +04:00 [ERR] User Not Found
System.Exception: User Not Found
   at BankSystem.InternetBank.Services.UserLoginService.LoginUserAsync(LoginRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank/Services/UserLoginService.cs:line 28
   at BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync(LoginRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank.Api/Controllers/UserController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at InternetBank.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in /home/ana/RiderProjects/BankSystemCopy/InternetBank.Api/Middlewares/GlobalExceptionHandlingMiddleware.cs:line 47
2023-04-12 16:43:34.660 +04:00 [DBG] Connection id "0HMPRADQRSI1O" completed keep alive response.
2023-04-12 16:43:34.665 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-12 16:43:34.673 +04:00 [DBG] Disposing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:43:34.676 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-12 16:43:34.677 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5244/User/login application/json 68 - 2 - application/json 1991.8680ms
2023-04-12 16:43:41.635 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5244/User/login application/json 67
2023-04-12 16:43:41.637 +04:00 [DBG] 1 candidate(s) found for the request path '/User/login'
2023-04-12 16:43:41.637 +04:00 [DBG] Endpoint 'BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync (BankSystem.InternetBank.Api)' with route pattern 'User/login' is valid for the request path '/User/login'
2023-04-12 16:43:41.637 +04:00 [DBG] Request matched endpoint 'BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:43:41.637 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-12 16:43:41.638 +04:00 [DBG] The request has an origin header: 'http://localhost:5244'.
2023-04-12 16:43:41.638 +04:00 [INF] CORS policy execution successful.
2023-04-12 16:43:41.641 +04:00 [DBG] AuthenticationScheme: Identity.Application was not authenticated.
2023-04-12 16:43:41.643 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-12 16:43:41.643 +04:00 [INF] Executing endpoint 'BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:43:41.644 +04:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(BankSystem.InternetBank.Models.Requests.LoginRequest) on controller BankSystem.InternetBank.Api.Controllers.UserController (BankSystem.InternetBank.Api).
2023-04-12 16:43:41.644 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-12 16:43:41.644 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-12 16:43:41.644 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-12 16:43:41.644 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-12 16:43:41.644 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-12 16:43:41.644 +04:00 [DBG] Executing controller factory for controller BankSystem.InternetBank.Api.Controllers.UserController (BankSystem.InternetBank.Api)
2023-04-12 16:43:41.648 +04:00 [DBG] Executed controller factory for controller BankSystem.InternetBank.Api.Controllers.UserController (BankSystem.InternetBank.Api)
2023-04-12 16:43:41.649 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest' ...
2023-04-12 16:43:41.649 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-12 16:43:41.649 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-12 16:43:41.650 +04:00 [DBG] Connection id "0HMPRADQRSI1O", Request id "0HMPRADQRSI1O:00000004": started reading request body.
2023-04-12 16:43:41.650 +04:00 [DBG] Connection id "0HMPRADQRSI1O", Request id "0HMPRADQRSI1O:00000004": done reading request body.
2023-04-12 16:43:41.650 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.InternetBank.Models.Requests.LoginRequest'
2023-04-12 16:43:41.650 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest'.
2023-04-12 16:43:41.650 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest'.
2023-04-12 16:43:41.651 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest' ...
2023-04-12 16:43:41.651 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest'.
2023-04-12 16:43:41.693 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-12 16:43:41.696 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:43:41.697 +04:00 [DBG] Creating DbConnection.
2023-04-12 16:43:41.697 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-12 16:43:41.697 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:43:41.697 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:43:41.697 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:43:41.699 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:43:41.700 +04:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2023-04-12 16:43:41.714 +04:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2023-04-12 16:43:41.747 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:43:41.785 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:43:41.786 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 71ms reading results.
2023-04-12 16:43:41.786 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:43:41.787 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:43:41.860 +04:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Join(
        inner: DbSet<IdentityRole<Guid>>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2023-04-12 16:43:41.894 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-12 16:43:41.896 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:43:41.896 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:43:41.896 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:43:41.896 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:43:41.896 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:43:41.897 +04:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-04-12 16:43:41.913 +04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-04-12 16:43:41.914 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:43:41.914 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 1ms reading results.
2023-04-12 16:43:41.914 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:43:41.915 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:43:42.004 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-12 16:43:42.007 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-12 16:43:42.007 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-12 16:43:42.007 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-12 16:43:42.007 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-12 16:43:42.008 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-12 16:43:42.026 +04:00 [INF] Executed action BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync (BankSystem.InternetBank.Api) in 382.165ms
2023-04-12 16:43:42.027 +04:00 [INF] Executed endpoint 'BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:43:42.027 +04:00 [DBG] Connection id "0HMPRADQRSI1O" completed keep alive response.
2023-04-12 16:43:42.027 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-12 16:43:42.027 +04:00 [DBG] Disposing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:43:42.027 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-12 16:43:42.028 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5244/User/login application/json 67 - 200 - application/json;+charset=utf-8 392.6556ms
2023-04-12 16:44:13.352 +04:00 [DBG] Connection id "0HMPRADQRSI1P" received FIN.
2023-04-12 16:44:13.352 +04:00 [DBG] Connection id "0HMPRADQRSI1P" sending FIN because: "The client closed the connection."
2023-04-12 16:44:13.355 +04:00 [DBG] Connection id "0HMPRADQRSI1P" disconnecting.
2023-04-12 16:44:13.358 +04:00 [DBG] Connection id "0HMPRADQRSI1P" stopped.
2023-04-12 16:45:00.646 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 174
2023-04-12 16:45:00.646 +04:00 [DBG] 1 candidate(s) found for the request path '/Operator/register-user'
2023-04-12 16:45:00.646 +04:00 [DBG] Endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)' with route pattern 'Operator/register-user' is valid for the request path '/Operator/register-user'
2023-04-12 16:45:00.646 +04:00 [DBG] Request matched endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:45:00.646 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-12 16:45:00.647 +04:00 [DBG] The request has an origin header: 'http://localhost:5244'.
2023-04-12 16:45:00.647 +04:00 [INF] CORS policy execution successful.
2023-04-12 16:45:00.648 +04:00 [DBG] AuthenticationScheme: Identity.Application was not authenticated.
2023-04-12 16:45:00.694 +04:00 [DBG] Successfully validated the token.
2023-04-12 16:45:00.696 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-12 16:45:00.699 +04:00 [DBG] Authorization was successful.
2023-04-12 16:45:00.699 +04:00 [INF] Executing endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:45:00.702 +04:00 [INF] Route matched with {action = "RegisterUser", controller = "Operator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterUserAsync(BankSystem.InternetBank.Models.Requests.RegisterUserRequest) on controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api).
2023-04-12 16:45:00.702 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-12 16:45:00.702 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-12 16:45:00.702 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-12 16:45:00.702 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-12 16:45:00.702 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-12 16:45:00.702 +04:00 [DBG] Executing controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 16:45:00.705 +04:00 [DBG] Executed controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 16:45:00.705 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 16:45:00.706 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' using the name '' in request data ...
2023-04-12 16:45:00.706 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-12 16:45:00.713 +04:00 [DBG] Connection id "0HMPRADQRSI1O", Request id "0HMPRADQRSI1O:00000005": started reading request body.
2023-04-12 16:45:00.713 +04:00 [DBG] Connection id "0HMPRADQRSI1O", Request id "0HMPRADQRSI1O:00000005": done reading request body.
2023-04-12 16:45:00.716 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'
2023-04-12 16:45:00.716 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 16:45:00.716 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 16:45:00.716 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 16:45:00.718 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 16:45:00.730 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-12 16:45:00.733 +04:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .Any(u => u.PersonalNumber == __personalNumber_0)'
2023-04-12 16:45:00.738 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetUsers AS a
            WHERE a.PersonalNumber == @__personalNumber_0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)
    .Single()'
2023-04-12 16:45:00.747 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:45:00.747 +04:00 [DBG] Creating DbConnection.
2023-04-12 16:45:00.747 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-12 16:45:00.748 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:00.748 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:00.748 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:00.750 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:00.750 +04:00 [DBG] Executing DbCommand [Parameters=[@__personalNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[PersonalNumber] = @__personalNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:45:00.765 +04:00 [INF] Executed DbCommand (14ms) [Parameters=[@__personalNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[PersonalNumber] = @__personalNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:45:00.767 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:45:00.767 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 1ms reading results.
2023-04-12 16:45:00.768 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:00.768 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:45:00.769 +04:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .Any(u => u.Email == __email_0)'
2023-04-12 16:45:00.771 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetUsers AS a
            WHERE a.Email == @__email_0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)
    .Single()'
2023-04-12 16:45:00.772 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:45:00.772 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:00.772 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:00.772 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:00.773 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:00.773 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:45:00.778 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:45:00.778 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:45:00.778 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:45:00.778 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:00.779 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:45:00.779 +04:00 [INF] Executed action BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api) in 76.534ms
2023-04-12 16:45:00.779 +04:00 [INF] Executed endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:45:00.779 +04:00 [ERR] Incorrect email format
System.ArgumentException: Incorrect email format
   at BankSystem.InternetBank.Validations.RegisterUserValidator.Validate(RegisterUserRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank/Validations/RegisterUserValidator.cs:line 76
   at BankSystem.InternetBank.Services.AddUserService.AddUserAsync(RegisterUserRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank/Services/AddUserService.cs:line 32
   at BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync(RegisterUserRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank.Api/Controllers/OperatorController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at InternetBank.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in /home/ana/RiderProjects/BankSystemCopy/InternetBank.Api/Middlewares/GlobalExceptionHandlingMiddleware.cs:line 47
2023-04-12 16:45:00.781 +04:00 [DBG] Connection id "0HMPRADQRSI1O" completed keep alive response.
2023-04-12 16:45:00.781 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-12 16:45:00.781 +04:00 [DBG] Disposing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:00.781 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-12 16:45:00.781 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 174 - 1 - application/json 135.2673ms
2023-04-12 16:45:15.757 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 182
2023-04-12 16:45:15.758 +04:00 [DBG] 1 candidate(s) found for the request path '/Operator/register-user'
2023-04-12 16:45:15.759 +04:00 [DBG] Endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)' with route pattern 'Operator/register-user' is valid for the request path '/Operator/register-user'
2023-04-12 16:45:15.759 +04:00 [DBG] Request matched endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:45:15.759 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-12 16:45:15.759 +04:00 [DBG] The request has an origin header: 'http://localhost:5244'.
2023-04-12 16:45:15.759 +04:00 [INF] CORS policy execution successful.
2023-04-12 16:45:15.759 +04:00 [DBG] AuthenticationScheme: Identity.Application was not authenticated.
2023-04-12 16:45:15.760 +04:00 [DBG] Successfully validated the token.
2023-04-12 16:45:15.760 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-12 16:45:15.760 +04:00 [DBG] Authorization was successful.
2023-04-12 16:45:15.761 +04:00 [INF] Executing endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:45:15.761 +04:00 [INF] Route matched with {action = "RegisterUser", controller = "Operator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterUserAsync(BankSystem.InternetBank.Models.Requests.RegisterUserRequest) on controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api).
2023-04-12 16:45:15.761 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-12 16:45:15.761 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-12 16:45:15.761 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-12 16:45:15.761 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-12 16:45:15.761 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-12 16:45:15.761 +04:00 [DBG] Executing controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 16:45:15.763 +04:00 [DBG] Executed controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 16:45:15.763 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 16:45:15.763 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' using the name '' in request data ...
2023-04-12 16:45:15.763 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-12 16:45:15.763 +04:00 [DBG] Connection id "0HMPRADQRSI1O", Request id "0HMPRADQRSI1O:00000006": started reading request body.
2023-04-12 16:45:15.763 +04:00 [DBG] Connection id "0HMPRADQRSI1O", Request id "0HMPRADQRSI1O:00000006": done reading request body.
2023-04-12 16:45:15.764 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'
2023-04-12 16:45:15.764 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 16:45:15.764 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 16:45:15.764 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 16:45:15.764 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 16:45:15.765 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-12 16:45:15.766 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:45:15.766 +04:00 [DBG] Creating DbConnection.
2023-04-12 16:45:15.766 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-12 16:45:15.766 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:15.766 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:15.766 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:15.766 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:15.767 +04:00 [DBG] Executing DbCommand [Parameters=[@__personalNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[PersonalNumber] = @__personalNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:45:15.768 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__personalNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[PersonalNumber] = @__personalNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:45:15.768 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:45:15.768 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:45:15.768 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:15.768 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:45:15.769 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:45:15.769 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:15.769 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:15.769 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:15.769 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:15.770 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:45:15.771 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:45:15.771 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:45:15.772 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:45:15.772 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:15.772 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:45:15.844 +04:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2023-04-12 16:45:15.848 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<UserEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.AccessFailedCount (int) Required, 1], [Property: UserEntity.BirthDate (DateTime) Required, 2], [Property: UserEntity.ConcurrencyStamp (string) Concurrency, 3], [Property: UserEntity.Email (string) MaxLength(256), 4], [Property: UserEntity.EmailConfirmed (bool) Required, 5], [Property: UserEntity.FirstName (string), 6], [Property: UserEntity.LastName (string), 7], [Property: UserEntity.LockoutEnabled (bool) Required, 8], [Property: UserEntity.LockoutEnd (DateTimeOffset?), 9], [Property: UserEntity.NormalizedEmail (string) Index MaxLength(256), 10], [Property: UserEntity.NormalizedUserName (string) Index MaxLength(256), 11], [Property: UserEntity.PasswordHash (string), 12], [Property: UserEntity.PersonalNumber (string), 13], [Property: UserEntity.PhoneNumber (string), 14], [Property: UserEntity.PhoneNumberConfirmed (bool) Required, 15], [Property: UserEntity.RegisteredAt (DateTime) Required, 16], [Property: UserEntity.SecurityStamp (string), 17], [Property: UserEntity.TwoFactorEnabled (bool) Required, 18], [Property: UserEntity.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PersonalNumber, a.PhoneNumber, a.PhoneNumberConfirmed, a.RegisteredAt, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-12 16:45:15.848 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:45:15.848 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:15.848 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:15.848 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:15.848 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:15.848 +04:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-04-12 16:45:15.853 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-04-12 16:45:15.854 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:45:15.854 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:45:15.854 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:15.854 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:45:15.892 +04:00 [DBG] 'BankSystemDbContext' generated a value for the property 'Id.UserEntity'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:45:15.902 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:45:15.906 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-12 16:45:15.910 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-12 16:45:15.935 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-12 16:45:16.018 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.018 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.023 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:45:16.023 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:16.024 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-12 16:45:16.024 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [BirthDate], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PersonalNumber], [PhoneNumber], [PhoneNumberConfirmed], [RegisteredAt], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2023-04-12 16:45:16.042 +04:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [BirthDate], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PersonalNumber], [PhoneNumber], [PhoneNumberConfirmed], [RegisteredAt], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2023-04-12 16:45:16.044 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.044 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 2ms reading results.
2023-04-12 16:45:16.045 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.046 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:45:16.055 +04:00 [DBG] An entity of type 'UserEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:45:16.057 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 1 entities written to the database.
2023-04-12 16:45:16.063 +04:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole<Guid>>()
    .SingleOrDefault(r => r.NormalizedName == __normalizedRoleName_0)'
2023-04-12 16:45:16.067 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole<Guid>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole<Guid>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole<Guid>.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityRole<Guid>.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole<Guid>.Name (string) MaxLength(256), 2], [Property: IdentityRole<Guid>.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole<Guid>>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-12 16:45:16.067 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:45:16.068 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:16.068 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:16.068 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.068 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.068 +04:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2023-04-12 16:45:16.073 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2023-04-12 16:45:16.080 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:45:16.085 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.085 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 12ms reading results.
2023-04-12 16:45:16.086 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.086 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:45:16.096 +04:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "UserId"), 
        objB: __get_Item_0) && object.Equals(
        objA: EF.Property<object>(e, "RoleId"), 
        objB: __get_Item_1))'
2023-04-12 16:45:16.100 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUserRole<Guid>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityUserRole<Guid>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUserRole<Guid>.UserId (Guid) Required PK FK AfterSave:Throw, 0], [Property: IdentityUserRole<Guid>.RoleId (Guid) Required PK FK Index AfterSave:Throw, 1] }
            SELECT TOP(1) a.UserId, a.RoleId
            FROM AspNetUserRoles AS a
            WHERE (a.UserId == @__get_Item_0) && (a.RoleId == @__get_Item_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityUserRole<Guid>>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-12 16:45:16.102 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:45:16.102 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:16.103 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:16.103 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.103 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.103 +04:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid), @__get_Item_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__get_Item_0 AND [a].[RoleId] = @__get_Item_1
2023-04-12 16:45:16.106 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid), @__get_Item_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__get_Item_0 AND [a].[RoleId] = @__get_Item_1
2023-04-12 16:45:16.106 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.106 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:45:16.106 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.106 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:45:16.109 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:45:16.109 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:16.109 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:16.110 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.110 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.110 +04:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2023-04-12 16:45:16.111 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2023-04-12 16:45:16.111 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.111 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:45:16.112 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.112 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:45:16.123 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:45:16.125 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:45:16.125 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:16.125 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:16.125 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.125 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.125 +04:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-04-12 16:45:16.126 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-04-12 16:45:16.127 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.127 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:45:16.127 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.127 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:45:16.132 +04:00 [DBG] An entity of type 'UserEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:45:16.132 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-12 16:45:16.132 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-12 16:45:16.138 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-12 16:45:16.161 +04:00 [DBG] Executing 2 update commands as a batch.
2023-04-12 16:45:16.163 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.163 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.165 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-12 16:45:16.176 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-12 16:45:16.177 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:45:16.177 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:16.179 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-12 16:45:16.179 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p21='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p22='?' (Size = 4000), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = DateTime2), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [BirthDate] = @p3, [ConcurrencyStamp] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [FirstName] = @p7, [LastName] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [NormalizedEmail] = @p11, [NormalizedUserName] = @p12, [PasswordHash] = @p13, [PersonalNumber] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RegisteredAt] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2023-04-12 16:45:16.185 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p21='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p22='?' (Size = 4000), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = DateTime2), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [BirthDate] = @p3, [ConcurrencyStamp] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [FirstName] = @p7, [LastName] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [NormalizedEmail] = @p11, [NormalizedUserName] = @p12, [PasswordHash] = @p13, [PersonalNumber] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RegisteredAt] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2023-04-12 16:45:16.189 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.189 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 3ms reading results.
2023-04-12 16:45:16.192 +04:00 [DBG] Committing transaction.
2023-04-12 16:45:16.197 +04:00 [DBG] Committed transaction.
2023-04-12 16:45:16.199 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.199 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:45:16.201 +04:00 [DBG] Disposing transaction.
2023-04-12 16:45:16.201 +04:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:45:16.201 +04:00 [DBG] An entity of type 'UserEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:45:16.201 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 2 entities written to the database.
2023-04-12 16:45:16.203 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-12 16:45:16.203 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-12 16:45:16.203 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-12 16:45:16.203 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 0 entities written to the database.
2023-04-12 16:45:16.205 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-12 16:45:16.205 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-12 16:45:16.206 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-12 16:45:16.206 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-12 16:45:16.206 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-12 16:45:16.206 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-12 16:45:16.211 +04:00 [INF] Executed action BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api) in 449.1723ms
2023-04-12 16:45:16.211 +04:00 [INF] Executed endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:45:16.211 +04:00 [DBG] Connection id "0HMPRADQRSI1O" completed keep alive response.
2023-04-12 16:45:16.211 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-12 16:45:16.211 +04:00 [DBG] Disposing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:16.211 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-12 16:45:16.211 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 182 - 200 - application/json;+charset=utf-8 453.8926ms
2023-04-12 16:45:49.651 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 182
2023-04-12 16:45:49.651 +04:00 [DBG] 1 candidate(s) found for the request path '/Operator/register-user'
2023-04-12 16:45:49.651 +04:00 [DBG] Endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)' with route pattern 'Operator/register-user' is valid for the request path '/Operator/register-user'
2023-04-12 16:45:49.651 +04:00 [DBG] Request matched endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:45:49.651 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-12 16:45:49.651 +04:00 [DBG] The request has an origin header: 'http://localhost:5244'.
2023-04-12 16:45:49.651 +04:00 [INF] CORS policy execution successful.
2023-04-12 16:45:49.651 +04:00 [DBG] AuthenticationScheme: Identity.Application was not authenticated.
2023-04-12 16:45:49.652 +04:00 [DBG] Successfully validated the token.
2023-04-12 16:45:49.652 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-12 16:45:49.652 +04:00 [DBG] Authorization was successful.
2023-04-12 16:45:49.652 +04:00 [INF] Executing endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:45:49.653 +04:00 [INF] Route matched with {action = "RegisterUser", controller = "Operator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterUserAsync(BankSystem.InternetBank.Models.Requests.RegisterUserRequest) on controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api).
2023-04-12 16:45:49.653 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-12 16:45:49.653 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-12 16:45:49.653 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-12 16:45:49.653 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-12 16:45:49.653 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-12 16:45:49.653 +04:00 [DBG] Executing controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 16:45:49.661 +04:00 [DBG] Executed controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 16:45:49.661 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 16:45:49.661 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' using the name '' in request data ...
2023-04-12 16:45:49.661 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-12 16:45:49.661 +04:00 [DBG] Connection id "0HMPRADQRSI1O", Request id "0HMPRADQRSI1O:00000007": started reading request body.
2023-04-12 16:45:49.661 +04:00 [DBG] Connection id "0HMPRADQRSI1O", Request id "0HMPRADQRSI1O:00000007": done reading request body.
2023-04-12 16:45:49.661 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'
2023-04-12 16:45:49.661 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 16:45:49.661 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 16:45:49.661 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 16:45:49.662 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 16:45:49.662 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-12 16:45:49.662 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:45:49.663 +04:00 [DBG] Creating DbConnection.
2023-04-12 16:45:49.663 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-12 16:45:49.663 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:49.663 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:49.663 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:49.664 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:49.664 +04:00 [DBG] Executing DbCommand [Parameters=[@__personalNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[PersonalNumber] = @__personalNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:45:49.665 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__personalNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[PersonalNumber] = @__personalNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:45:49.665 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:45:49.665 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:45:49.665 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:49.665 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:45:49.666 +04:00 [INF] Executed action BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api) in 13.1175ms
2023-04-12 16:45:49.666 +04:00 [INF] Executed endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:45:49.666 +04:00 [ERR] User With this PersonalId Already Exists 
BankSystem.InternetBank.Exceptions.UserAlreadyExistsException: User With this PersonalId Already Exists 
   at BankSystem.InternetBank.Validations.RegisterUserValidator.Validate(RegisterUserRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank/Validations/RegisterUserValidator.cs:line 56
   at BankSystem.InternetBank.Services.AddUserService.AddUserAsync(RegisterUserRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank/Services/AddUserService.cs:line 32
   at BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync(RegisterUserRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank.Api/Controllers/OperatorController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at InternetBank.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in /home/ana/RiderProjects/BankSystemCopy/InternetBank.Api/Middlewares/GlobalExceptionHandlingMiddleware.cs:line 47
2023-04-12 16:45:49.668 +04:00 [DBG] Connection id "0HMPRADQRSI1O" completed keep alive response.
2023-04-12 16:45:49.668 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-12 16:45:49.668 +04:00 [DBG] Disposing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:49.668 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-12 16:45:49.668 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 182 - 1 - application/json 17.1860ms
2023-04-12 16:45:56.815 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 182
2023-04-12 16:45:56.815 +04:00 [DBG] 1 candidate(s) found for the request path '/Operator/register-user'
2023-04-12 16:45:56.816 +04:00 [DBG] Endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)' with route pattern 'Operator/register-user' is valid for the request path '/Operator/register-user'
2023-04-12 16:45:56.816 +04:00 [DBG] Request matched endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:45:56.816 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-12 16:45:56.816 +04:00 [DBG] The request has an origin header: 'http://localhost:5244'.
2023-04-12 16:45:56.816 +04:00 [INF] CORS policy execution successful.
2023-04-12 16:45:56.816 +04:00 [DBG] AuthenticationScheme: Identity.Application was not authenticated.
2023-04-12 16:45:56.817 +04:00 [DBG] Successfully validated the token.
2023-04-12 16:45:56.817 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-12 16:45:56.817 +04:00 [DBG] Authorization was successful.
2023-04-12 16:45:56.817 +04:00 [INF] Executing endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:45:56.817 +04:00 [INF] Route matched with {action = "RegisterUser", controller = "Operator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterUserAsync(BankSystem.InternetBank.Models.Requests.RegisterUserRequest) on controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api).
2023-04-12 16:45:56.817 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-12 16:45:56.817 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-12 16:45:56.817 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-12 16:45:56.817 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-12 16:45:56.818 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-12 16:45:56.818 +04:00 [DBG] Executing controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 16:45:56.818 +04:00 [DBG] Executed controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 16:45:56.818 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 16:45:56.818 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' using the name '' in request data ...
2023-04-12 16:45:56.818 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-12 16:45:56.818 +04:00 [DBG] Connection id "0HMPRADQRSI1O", Request id "0HMPRADQRSI1O:00000008": started reading request body.
2023-04-12 16:45:56.819 +04:00 [DBG] Connection id "0HMPRADQRSI1O", Request id "0HMPRADQRSI1O:00000008": done reading request body.
2023-04-12 16:45:56.819 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'
2023-04-12 16:45:56.819 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 16:45:56.819 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 16:45:56.819 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 16:45:56.819 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 16:45:56.820 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-12 16:45:56.820 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:45:56.820 +04:00 [DBG] Creating DbConnection.
2023-04-12 16:45:56.820 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-12 16:45:56.821 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:56.821 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:56.821 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:56.821 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:56.821 +04:00 [DBG] Executing DbCommand [Parameters=[@__personalNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[PersonalNumber] = @__personalNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:45:56.822 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__personalNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[PersonalNumber] = @__personalNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:45:56.823 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:45:56.823 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:45:56.823 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:56.823 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:45:56.823 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:45:56.823 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:56.823 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:45:56.823 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:56.824 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:56.824 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:45:56.825 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:45:56.825 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:45:56.825 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:45:56.825 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:56.825 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:45:56.826 +04:00 [INF] Executed action BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api) in 8.1973ms
2023-04-12 16:45:56.826 +04:00 [INF] Executed endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:45:56.826 +04:00 [ERR] User With this Email Already Exists 
BankSystem.InternetBank.Exceptions.UserAlreadyExistsException: User With this Email Already Exists 
   at BankSystem.InternetBank.Validations.RegisterUserValidator.Validate(RegisterUserRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank/Validations/RegisterUserValidator.cs:line 72
   at BankSystem.InternetBank.Services.AddUserService.AddUserAsync(RegisterUserRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank/Services/AddUserService.cs:line 32
   at BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync(RegisterUserRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank.Api/Controllers/OperatorController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at InternetBank.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in /home/ana/RiderProjects/BankSystemCopy/InternetBank.Api/Middlewares/GlobalExceptionHandlingMiddleware.cs:line 47
2023-04-12 16:45:56.828 +04:00 [DBG] Connection id "0HMPRADQRSI1O" completed keep alive response.
2023-04-12 16:45:56.828 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-12 16:45:56.828 +04:00 [DBG] Disposing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:45:56.828 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-12 16:45:56.828 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 182 - 1 - application/json 12.8110ms
2023-04-12 16:46:02.698 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 183
2023-04-12 16:46:02.698 +04:00 [DBG] 1 candidate(s) found for the request path '/Operator/register-user'
2023-04-12 16:46:02.698 +04:00 [DBG] Endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)' with route pattern 'Operator/register-user' is valid for the request path '/Operator/register-user'
2023-04-12 16:46:02.698 +04:00 [DBG] Request matched endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:46:02.698 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-12 16:46:02.698 +04:00 [DBG] The request has an origin header: 'http://localhost:5244'.
2023-04-12 16:46:02.698 +04:00 [INF] CORS policy execution successful.
2023-04-12 16:46:02.699 +04:00 [DBG] AuthenticationScheme: Identity.Application was not authenticated.
2023-04-12 16:46:02.699 +04:00 [DBG] Successfully validated the token.
2023-04-12 16:46:02.699 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-12 16:46:02.699 +04:00 [DBG] Authorization was successful.
2023-04-12 16:46:02.699 +04:00 [INF] Executing endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:46:02.699 +04:00 [INF] Route matched with {action = "RegisterUser", controller = "Operator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterUserAsync(BankSystem.InternetBank.Models.Requests.RegisterUserRequest) on controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api).
2023-04-12 16:46:02.699 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-12 16:46:02.700 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-12 16:46:02.700 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-12 16:46:02.700 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-12 16:46:02.700 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-12 16:46:02.700 +04:00 [DBG] Executing controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 16:46:02.700 +04:00 [DBG] Executed controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 16:46:02.701 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 16:46:02.701 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' using the name '' in request data ...
2023-04-12 16:46:02.701 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-12 16:46:02.701 +04:00 [DBG] Connection id "0HMPRADQRSI1O", Request id "0HMPRADQRSI1O:00000009": started reading request body.
2023-04-12 16:46:02.701 +04:00 [DBG] Connection id "0HMPRADQRSI1O", Request id "0HMPRADQRSI1O:00000009": done reading request body.
2023-04-12 16:46:02.701 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'
2023-04-12 16:46:02.701 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 16:46:02.701 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 16:46:02.701 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 16:46:02.702 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 16:46:02.702 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-12 16:46:02.703 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:46:02.703 +04:00 [DBG] Creating DbConnection.
2023-04-12 16:46:02.703 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-12 16:46:02.703 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.703 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.703 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.703 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.703 +04:00 [DBG] Executing DbCommand [Parameters=[@__personalNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[PersonalNumber] = @__personalNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:46:02.704 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__personalNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[PersonalNumber] = @__personalNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:46:02.705 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.705 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:46:02.705 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.705 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:46:02.706 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:46:02.706 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.706 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.706 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.706 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.706 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:46:02.707 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 16:46:02.707 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.707 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:46:02.708 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.708 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:46:02.782 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:46:02.782 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.782 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.782 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.782 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.783 +04:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-04-12 16:46:02.784 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-04-12 16:46:02.784 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.784 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:46:02.785 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.785 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:46:02.786 +04:00 [DBG] 'BankSystemDbContext' generated a value for the property 'Id.UserEntity'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:46:02.787 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:46:02.787 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-12 16:46:02.787 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-12 16:46:02.787 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-12 16:46:02.788 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.788 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.788 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:46:02.788 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.788 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.789 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [BirthDate], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PersonalNumber], [PhoneNumber], [PhoneNumberConfirmed], [RegisteredAt], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2023-04-12 16:46:02.792 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [BirthDate], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PersonalNumber], [PhoneNumber], [PhoneNumberConfirmed], [RegisteredAt], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2023-04-12 16:46:02.793 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.793 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:46:02.793 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.793 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:46:02.794 +04:00 [DBG] An entity of type 'UserEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:46:02.794 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 1 entities written to the database.
2023-04-12 16:46:02.794 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:46:02.794 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.794 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.794 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.795 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.795 +04:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2023-04-12 16:46:02.795 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2023-04-12 16:46:02.796 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:46:02.796 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.796 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:46:02.796 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.796 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:46:02.797 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:46:02.797 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.798 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.798 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.798 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.798 +04:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid), @__get_Item_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__get_Item_0 AND [a].[RoleId] = @__get_Item_1
2023-04-12 16:46:02.799 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (DbType = Guid), @__get_Item_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__get_Item_0 AND [a].[RoleId] = @__get_Item_1
2023-04-12 16:46:02.799 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.799 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:46:02.799 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.799 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:46:02.800 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:46:02.800 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.800 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.800 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.801 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.801 +04:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2023-04-12 16:46:02.802 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2023-04-12 16:46:02.802 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.802 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:46:02.803 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.803 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:46:02.803 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:46:02.804 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:46:02.804 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.804 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.804 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.804 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.805 +04:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-04-12 16:46:02.806 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-04-12 16:46:02.806 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.806 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:46:02.806 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.807 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:46:02.807 +04:00 [DBG] An entity of type 'UserEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:46:02.807 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-12 16:46:02.807 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-12 16:46:02.807 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-12 16:46:02.808 +04:00 [DBG] Executing 2 update commands as a batch.
2023-04-12 16:46:02.808 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.808 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.808 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-12 16:46:02.809 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-12 16:46:02.809 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 16:46:02.809 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.809 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 16:46:02.809 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p21='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p22='?' (Size = 4000), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = DateTime2), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [BirthDate] = @p3, [ConcurrencyStamp] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [FirstName] = @p7, [LastName] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [NormalizedEmail] = @p11, [NormalizedUserName] = @p12, [PasswordHash] = @p13, [PersonalNumber] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RegisteredAt] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2023-04-12 16:46:02.810 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p21='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p22='?' (Size = 4000), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = DateTime2), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [BirthDate] = @p3, [ConcurrencyStamp] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [FirstName] = @p7, [LastName] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [NormalizedEmail] = @p11, [NormalizedUserName] = @p12, [PasswordHash] = @p13, [PersonalNumber] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RegisteredAt] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2023-04-12 16:46:02.810 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.810 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 16:46:02.810 +04:00 [DBG] Committing transaction.
2023-04-12 16:46:02.812 +04:00 [DBG] Committed transaction.
2023-04-12 16:46:02.812 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.812 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 16:46:02.812 +04:00 [DBG] Disposing transaction.
2023-04-12 16:46:02.812 +04:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:46:02.812 +04:00 [DBG] An entity of type 'UserEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 16:46:02.812 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 2 entities written to the database.
2023-04-12 16:46:02.812 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-12 16:46:02.812 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-12 16:46:02.813 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-12 16:46:02.813 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 0 entities written to the database.
2023-04-12 16:46:02.813 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-12 16:46:02.813 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-12 16:46:02.813 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-12 16:46:02.813 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-12 16:46:02.813 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-12 16:46:02.813 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-12 16:46:02.813 +04:00 [INF] Executed action BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api) in 113.3092ms
2023-04-12 16:46:02.813 +04:00 [INF] Executed endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 16:46:02.813 +04:00 [DBG] Connection id "0HMPRADQRSI1O" completed keep alive response.
2023-04-12 16:46:02.813 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-12 16:46:02.813 +04:00 [DBG] Disposing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 16:46:02.814 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-12 16:46:02.814 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 183 - 200 - application/json;+charset=utf-8 115.8404ms
2023-04-12 16:47:34.818 +04:00 [INF] Application is shutting down...
2023-04-12 16:47:34.819 +04:00 [DBG] Hosting stopping
2023-04-12 16:47:34.823 +04:00 [DBG] Connection id "0HMPRADQRSI1O" disconnecting.
2023-04-12 16:47:34.824 +04:00 [DBG] Connection id "0HMPRADQRSI1O" stopped.
2023-04-12 16:47:34.824 +04:00 [DBG] Connection id "0HMPRADQRSI1O" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-12 16:47:34.828 +04:00 [DBG] Hosting stopped
2023-04-12 19:10:08.553 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-04-12 19:10:08.668 +04:00 [DBG] Hosting starting
2023-04-12 19:10:08.679 +04:00 [INF] User profile is available. Using '/home/ana/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2023-04-12 19:10:08.685 +04:00 [DBG] Reading data from file '/home/ana/.aspnet/DataProtection-Keys/key-e188b912-05a9-43be-9954-20bc169a2d47.xml'.
2023-04-12 19:10:08.694 +04:00 [DBG] Found key {e188b912-05a9-43be-9954-20bc169a2d47}.
2023-04-12 19:10:08.703 +04:00 [DBG] Considering key {e188b912-05a9-43be-9954-20bc169a2d47} with expiration date 2023-04-16 19:10:03Z as default key.
2023-04-12 19:10:08.705 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-04-12 19:10:08.707 +04:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2023-04-12 19:10:08.707 +04:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2023-04-12 19:10:08.711 +04:00 [DBG] Using key {e188b912-05a9-43be-9954-20bc169a2d47} as the default key.
2023-04-12 19:10:08.712 +04:00 [DBG] Key ring with default key {e188b912-05a9-43be-9954-20bc169a2d47} was loaded during application startup.
2023-04-12 19:10:08.749 +04:00 [INF] Now listening on: http://localhost:5244
2023-04-12 19:10:08.749 +04:00 [DBG] Loaded hosting startup assembly BankSystem.InternetBank.Api
2023-04-12 19:10:08.749 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2023-04-12 19:10:08.749 +04:00 [INF] Hosting environment: Development
2023-04-12 19:10:08.750 +04:00 [INF] Content root path: /home/ana/RiderProjects/BankSystemCopy/InternetBank.Api
2023-04-12 19:10:08.750 +04:00 [DBG] Hosting started
2023-04-12 19:10:08.818 +04:00 [DBG] Connection id "0HMPRD00LE9IT" received FIN.
2023-04-12 19:10:08.823 +04:00 [DBG] Connection id "0HMPRD00LE9IT" accepted.
2023-04-12 19:10:08.825 +04:00 [DBG] Connection id "0HMPRD00LE9IT" started.
2023-04-12 19:10:08.836 +04:00 [DBG] Connection id "0HMPRD00LE9IT" sending FIN because: "The client closed the connection."
2023-04-12 19:10:08.838 +04:00 [DBG] Connection id "0HMPRD00LE9IT" disconnecting.
2023-04-12 19:10:08.845 +04:00 [DBG] Connection id "0HMPRD00LE9IT" stopped.
2023-04-12 19:10:09.268 +04:00 [DBG] Connection id "0HMPRD00LE9IU" accepted.
2023-04-12 19:10:09.268 +04:00 [DBG] Connection id "0HMPRD00LE9IU" started.
2023-04-12 19:10:09.269 +04:00 [DBG] Connection id "0HMPRD00LE9IV" accepted.
2023-04-12 19:10:09.269 +04:00 [DBG] Connection id "0HMPRD00LE9IV" started.
2023-04-12 19:10:09.305 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5244/swagger/index.html - -
2023-04-12 19:10:09.308 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-04-12 19:10:09.330 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-04-12 19:10:09.330 +04:00 [DBG] Request did not match any endpoints
2023-04-12 19:10:09.423 +04:00 [DBG] Connection id "0HMPRD00LE9IU" completed keep alive response.
2023-04-12 19:10:09.424 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5244/swagger/index.html - - - 200 - text/html;charset=utf-8 122.6669ms
2023-04-12 19:10:09.965 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5244/swagger/v1/swagger.json - -
2023-04-12 19:10:09.965 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-04-12 19:10:09.966 +04:00 [DBG] Request did not match any endpoints
2023-04-12 19:10:10.083 +04:00 [DBG] Connection id "0HMPRD00LE9IU" completed keep alive response.
2023-04-12 19:10:10.084 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5244/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 119.1338ms
2023-04-12 19:10:33.102 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5244/User/login application/json 67
2023-04-12 19:10:33.105 +04:00 [DBG] 1 candidate(s) found for the request path '/User/login'
2023-04-12 19:10:33.107 +04:00 [DBG] Endpoint 'BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync (BankSystem.InternetBank.Api)' with route pattern 'User/login' is valid for the request path '/User/login'
2023-04-12 19:10:33.108 +04:00 [DBG] Request matched endpoint 'BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync (BankSystem.InternetBank.Api)'
2023-04-12 19:10:33.110 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-12 19:10:33.111 +04:00 [WRN] Failed to determine the https port for redirect.
2023-04-12 19:10:33.112 +04:00 [DBG] The request has an origin header: 'http://localhost:5244'.
2023-04-12 19:10:33.112 +04:00 [INF] CORS policy execution successful.
2023-04-12 19:10:33.122 +04:00 [DBG] AuthenticationScheme: Identity.Application was not authenticated.
2023-04-12 19:10:33.143 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-04-12 19:10:33.145 +04:00 [INF] Executing endpoint 'BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync (BankSystem.InternetBank.Api)'
2023-04-12 19:10:33.163 +04:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(BankSystem.InternetBank.Models.Requests.LoginRequest) on controller BankSystem.InternetBank.Api.Controllers.UserController (BankSystem.InternetBank.Api).
2023-04-12 19:10:33.165 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-12 19:10:33.165 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-12 19:10:33.165 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-12 19:10:33.165 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-12 19:10:33.165 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-12 19:10:33.167 +04:00 [DBG] Executing controller factory for controller BankSystem.InternetBank.Api.Controllers.UserController (BankSystem.InternetBank.Api)
2023-04-12 19:10:33.273 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-04-12 19:10:33.300 +04:00 [DBG] Executed controller factory for controller BankSystem.InternetBank.Api.Controllers.UserController (BankSystem.InternetBank.Api)
2023-04-12 19:10:33.304 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest' ...
2023-04-12 19:10:33.306 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest' using the name '' in request data ...
2023-04-12 19:10:33.308 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-12 19:10:33.313 +04:00 [DBG] Connection id "0HMPRD00LE9IU", Request id "0HMPRD00LE9IU:00000003": started reading request body.
2023-04-12 19:10:33.313 +04:00 [DBG] Connection id "0HMPRD00LE9IU", Request id "0HMPRD00LE9IU:00000003": done reading request body.
2023-04-12 19:10:33.320 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.InternetBank.Models.Requests.LoginRequest'
2023-04-12 19:10:33.320 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest'.
2023-04-12 19:10:33.320 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest'.
2023-04-12 19:10:33.321 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest' ...
2023-04-12 19:10:33.327 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.LoginRequest'.
2023-04-12 19:10:33.866 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2023-04-12 19:10:33.866 +04:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2023-04-12 19:10:34.211 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-12 19:10:34.279 +04:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2023-04-12 19:10:34.452 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<UserEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.AccessFailedCount (int) Required, 1], [Property: UserEntity.BirthDate (DateTime) Required, 2], [Property: UserEntity.ConcurrencyStamp (string) Concurrency, 3], [Property: UserEntity.Email (string) MaxLength(256), 4], [Property: UserEntity.EmailConfirmed (bool) Required, 5], [Property: UserEntity.FirstName (string), 6], [Property: UserEntity.LastName (string), 7], [Property: UserEntity.LockoutEnabled (bool) Required, 8], [Property: UserEntity.LockoutEnd (DateTimeOffset?), 9], [Property: UserEntity.NormalizedEmail (string) Index MaxLength(256), 10], [Property: UserEntity.NormalizedUserName (string) Index MaxLength(256), 11], [Property: UserEntity.PasswordHash (string), 12], [Property: UserEntity.PersonalNumber (string), 13], [Property: UserEntity.PhoneNumber (string), 14], [Property: UserEntity.PhoneNumberConfirmed (bool) Required, 15], [Property: UserEntity.RegisteredAt (DateTime) Required, 16], [Property: UserEntity.SecurityStamp (string), 17], [Property: UserEntity.TwoFactorEnabled (bool) Required, 18], [Property: UserEntity.UserName (string) MaxLength(256), 19] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PersonalNumber, a.PhoneNumber, a.PhoneNumberConfirmed, a.RegisteredAt, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-12 19:10:34.500 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 19:10:34.502 +04:00 [DBG] Creating DbConnection.
2023-04-12 19:10:34.540 +04:00 [DBG] Created DbConnection. (34ms).
2023-04-12 19:10:34.549 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (46ms).
2023-04-12 19:10:34.561 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (62ms).
2023-04-12 19:10:34.566 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:10:34.775 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:10:34.794 +04:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2023-04-12 19:10:34.856 +04:00 [INF] Executed DbCommand (69ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2023-04-12 19:10:34.902 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 19:10:34.962 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 19:10:34.970 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 107ms reading results.
2023-04-12 19:10:34.975 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:10:34.986 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (10ms).
2023-04-12 19:10:35.074 +04:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Join(
        inner: DbSet<IdentityRole<Guid>>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2023-04-12 19:10:35.115 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)'
2023-04-12 19:10:35.117 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 19:10:35.117 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:10:35.117 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:10:35.118 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:10:35.119 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:10:35.120 +04:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-04-12 19:10:35.125 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-04-12 19:10:35.127 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 19:10:35.127 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 1ms reading results.
2023-04-12 19:10:35.128 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:10:35.128 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 19:10:35.222 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-12 19:10:35.225 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-12 19:10:35.226 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-12 19:10:35.226 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-12 19:10:35.226 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-12 19:10:35.227 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-12 19:10:35.253 +04:00 [INF] Executed action BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync (BankSystem.InternetBank.Api) in 2083.5764ms
2023-04-12 19:10:35.255 +04:00 [INF] Executed endpoint 'BankSystem.InternetBank.Api.Controllers.UserController.LoginAsync (BankSystem.InternetBank.Api)'
2023-04-12 19:10:35.263 +04:00 [DBG] Connection id "0HMPRD00LE9IU" completed keep alive response.
2023-04-12 19:10:35.268 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-12 19:10:35.275 +04:00 [DBG] Disposing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:10:35.278 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-04-12 19:10:35.280 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5244/User/login application/json 67 - 200 - application/json;+charset=utf-8 2177.4042ms
2023-04-12 19:12:07.950 +04:00 [DBG] Connection id "0HMPRD00LE9IV" received FIN.
2023-04-12 19:12:07.950 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 175
2023-04-12 19:12:07.950 +04:00 [DBG] 1 candidate(s) found for the request path '/Operator/register-user'
2023-04-12 19:12:07.950 +04:00 [DBG] Endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)' with route pattern 'Operator/register-user' is valid for the request path '/Operator/register-user'
2023-04-12 19:12:07.950 +04:00 [DBG] Request matched endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 19:12:07.950 +04:00 [DBG] Connection id "0HMPRD00LE9IV" sending FIN because: "The client closed the connection."
2023-04-12 19:12:07.951 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-12 19:12:07.951 +04:00 [DBG] The request has an origin header: 'http://localhost:5244'.
2023-04-12 19:12:07.951 +04:00 [INF] CORS policy execution successful.
2023-04-12 19:12:07.951 +04:00 [DBG] Connection id "0HMPRD00LE9IV" disconnecting.
2023-04-12 19:12:07.953 +04:00 [DBG] Connection id "0HMPRD00LE9IV" stopped.
2023-04-12 19:12:07.954 +04:00 [DBG] AuthenticationScheme: Identity.Application was not authenticated.
2023-04-12 19:12:07.999 +04:00 [DBG] Successfully validated the token.
2023-04-12 19:12:08.001 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-12 19:12:08.004 +04:00 [DBG] Authorization was successful.
2023-04-12 19:12:08.004 +04:00 [INF] Executing endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 19:12:08.007 +04:00 [INF] Route matched with {action = "RegisterUser", controller = "Operator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterUserAsync(BankSystem.InternetBank.Models.Requests.RegisterUserRequest) on controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api).
2023-04-12 19:12:08.008 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-12 19:12:08.008 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-12 19:12:08.008 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-12 19:12:08.008 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-12 19:12:08.008 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-12 19:12:08.008 +04:00 [DBG] Executing controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 19:12:08.012 +04:00 [DBG] Executed controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 19:12:08.013 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 19:12:08.013 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' using the name '' in request data ...
2023-04-12 19:12:08.014 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-12 19:12:08.021 +04:00 [DBG] Connection id "0HMPRD00LE9IU", Request id "0HMPRD00LE9IU:00000004": started reading request body.
2023-04-12 19:12:08.021 +04:00 [DBG] Connection id "0HMPRD00LE9IU", Request id "0HMPRD00LE9IU:00000004": done reading request body.
2023-04-12 19:12:08.024 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'
2023-04-12 19:12:08.024 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 19:12:08.024 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 19:12:08.024 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 19:12:08.027 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 19:12:08.032 +04:00 [INF] Executed action BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api) in 24.0838ms
2023-04-12 19:12:08.033 +04:00 [INF] Executed endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 19:12:08.046 +04:00 [ERR] Personal Number must contain 11 digits
System.ArgumentException: Personal Number must contain 11 digits
   at BankSystem.InternetBank.Validations.RegisterUserValidator.Validate(RegisterUserRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank/Validations/RegisterUserValidator.cs:line 48
   at BankSystem.InternetBank.Services.AddUserService.AddUserAsync(RegisterUserRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank/Services/AddUserService.cs:line 32
   at BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync(RegisterUserRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank.Api/Controllers/OperatorController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at InternetBank.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in /home/ana/RiderProjects/BankSystemCopy/InternetBank.Api/Middlewares/GlobalExceptionHandlingMiddleware.cs:line 47
2023-04-12 19:12:08.126 +04:00 [DBG] Connection id "0HMPRD00LE9IU" completed keep alive response.
2023-04-12 19:12:08.126 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 175 - 1 - application/json 176.2124ms
2023-04-12 19:12:14.281 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 176
2023-04-12 19:12:14.282 +04:00 [DBG] 1 candidate(s) found for the request path '/Operator/register-user'
2023-04-12 19:12:14.282 +04:00 [DBG] Endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)' with route pattern 'Operator/register-user' is valid for the request path '/Operator/register-user'
2023-04-12 19:12:14.283 +04:00 [DBG] Request matched endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 19:12:14.283 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-12 19:12:14.283 +04:00 [DBG] The request has an origin header: 'http://localhost:5244'.
2023-04-12 19:12:14.283 +04:00 [INF] CORS policy execution successful.
2023-04-12 19:12:14.285 +04:00 [DBG] AuthenticationScheme: Identity.Application was not authenticated.
2023-04-12 19:12:14.287 +04:00 [DBG] Successfully validated the token.
2023-04-12 19:12:14.287 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-12 19:12:14.288 +04:00 [DBG] Authorization was successful.
2023-04-12 19:12:14.288 +04:00 [INF] Executing endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 19:12:14.288 +04:00 [INF] Route matched with {action = "RegisterUser", controller = "Operator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterUserAsync(BankSystem.InternetBank.Models.Requests.RegisterUserRequest) on controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api).
2023-04-12 19:12:14.289 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-12 19:12:14.290 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-12 19:12:14.290 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-12 19:12:14.290 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-12 19:12:14.290 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-12 19:12:14.291 +04:00 [DBG] Executing controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 19:12:14.295 +04:00 [DBG] Executed controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 19:12:14.295 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 19:12:14.295 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' using the name '' in request data ...
2023-04-12 19:12:14.295 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-12 19:12:14.296 +04:00 [DBG] Connection id "0HMPRD00LE9IU", Request id "0HMPRD00LE9IU:00000005": started reading request body.
2023-04-12 19:12:14.296 +04:00 [DBG] Connection id "0HMPRD00LE9IU", Request id "0HMPRD00LE9IU:00000005": done reading request body.
2023-04-12 19:12:14.296 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'
2023-04-12 19:12:14.296 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 19:12:14.296 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 19:12:14.296 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 19:12:14.296 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 19:12:14.340 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-12 19:12:14.344 +04:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .Any(u => u.PersonalNumber == __personalNumber_0)'
2023-04-12 19:12:14.349 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetUsers AS a
            WHERE a.PersonalNumber == @__personalNumber_0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)
    .Single()'
2023-04-12 19:12:14.358 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 19:12:14.358 +04:00 [DBG] Creating DbConnection.
2023-04-12 19:12:14.358 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-12 19:12:14.359 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:14.359 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:14.359 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:14.361 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:14.362 +04:00 [DBG] Executing DbCommand [Parameters=[@__personalNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[PersonalNumber] = @__personalNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 19:12:14.364 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__personalNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[PersonalNumber] = @__personalNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 19:12:14.366 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 19:12:14.366 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 2ms reading results.
2023-04-12 19:12:14.367 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:14.368 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 19:12:14.368 +04:00 [INF] Executed action BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api) in 77.0606ms
2023-04-12 19:12:14.368 +04:00 [INF] Executed endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 19:12:14.368 +04:00 [ERR] User must be at least 18 years old
System.ArgumentException: User must be at least 18 years old
   at BankSystem.InternetBank.Validations.RegisterUserValidator.Validate(RegisterUserRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank/Validations/RegisterUserValidator.cs:line 64
   at BankSystem.InternetBank.Services.AddUserService.AddUserAsync(RegisterUserRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank/Services/AddUserService.cs:line 32
   at BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync(RegisterUserRequest request) in /home/ana/RiderProjects/BankSystemCopy/InternetBank.Api/Controllers/OperatorController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at InternetBank.Api.Middlewares.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext httpContext, RequestDelegate next) in /home/ana/RiderProjects/BankSystemCopy/InternetBank.Api/Middlewares/GlobalExceptionHandlingMiddleware.cs:line 47
2023-04-12 19:12:14.370 +04:00 [DBG] Connection id "0HMPRD00LE9IU" completed keep alive response.
2023-04-12 19:12:14.370 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-12 19:12:14.370 +04:00 [DBG] Disposing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:14.370 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-12 19:12:14.370 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 176 - 1 - application/json 89.0363ms
2023-04-12 19:12:27.728 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 176
2023-04-12 19:12:27.728 +04:00 [DBG] 1 candidate(s) found for the request path '/Operator/register-user'
2023-04-12 19:12:27.728 +04:00 [DBG] Endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)' with route pattern 'Operator/register-user' is valid for the request path '/Operator/register-user'
2023-04-12 19:12:27.728 +04:00 [DBG] Request matched endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 19:12:27.729 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-04-12 19:12:27.729 +04:00 [DBG] The request has an origin header: 'http://localhost:5244'.
2023-04-12 19:12:27.729 +04:00 [INF] CORS policy execution successful.
2023-04-12 19:12:27.729 +04:00 [DBG] AuthenticationScheme: Identity.Application was not authenticated.
2023-04-12 19:12:27.729 +04:00 [DBG] Successfully validated the token.
2023-04-12 19:12:27.729 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-04-12 19:12:27.730 +04:00 [DBG] Authorization was successful.
2023-04-12 19:12:27.730 +04:00 [INF] Executing endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 19:12:27.730 +04:00 [INF] Route matched with {action = "RegisterUser", controller = "Operator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterUserAsync(BankSystem.InternetBank.Models.Requests.RegisterUserRequest) on controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api).
2023-04-12 19:12:27.730 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-04-12 19:12:27.730 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-04-12 19:12:27.730 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-04-12 19:12:27.730 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-04-12 19:12:27.730 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-04-12 19:12:27.731 +04:00 [DBG] Executing controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 19:12:27.738 +04:00 [DBG] Executed controller factory for controller BankSystem.InternetBank.Api.Controllers.OperatorController (BankSystem.InternetBank.Api)
2023-04-12 19:12:27.738 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 19:12:27.738 +04:00 [DBG] Attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' using the name '' in request data ...
2023-04-12 19:12:27.738 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-04-12 19:12:27.738 +04:00 [DBG] Connection id "0HMPRD00LE9IU", Request id "0HMPRD00LE9IU:00000006": started reading request body.
2023-04-12 19:12:27.738 +04:00 [DBG] Connection id "0HMPRD00LE9IU", Request id "0HMPRD00LE9IU:00000006": done reading request body.
2023-04-12 19:12:27.739 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'
2023-04-12 19:12:27.739 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 19:12:27.739 +04:00 [DBG] Done attempting to bind parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 19:12:27.739 +04:00 [DBG] Attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest' ...
2023-04-12 19:12:27.739 +04:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'BankSystem.InternetBank.Models.Requests.RegisterUserRequest'.
2023-04-12 19:12:27.748 +04:00 [DBG] Entity Framework Core 7.0.3 initialized 'BankSystemDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.3' with options: None
2023-04-12 19:12:27.752 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 19:12:27.752 +04:00 [DBG] Creating DbConnection.
2023-04-12 19:12:27.752 +04:00 [DBG] Created DbConnection. (0ms).
2023-04-12 19:12:27.752 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:27.752 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:27.752 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:27.753 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:27.753 +04:00 [DBG] Executing DbCommand [Parameters=[@__personalNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[PersonalNumber] = @__personalNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 19:12:27.754 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__personalNumber_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[PersonalNumber] = @__personalNumber_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 19:12:27.754 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 19:12:27.755 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 19:12:27.755 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:27.755 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 19:12:27.756 +04:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .Any(u => u.Email == __email_0)'
2023-04-12 19:12:27.759 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetUsers AS a
            WHERE a.Email == @__email_0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    BankSystem.Common.Db.BankSystemDbContext, 
    False, 
    False, 
    True
)
    .Single()'
2023-04-12 19:12:27.760 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 19:12:27.760 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:27.760 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:27.760 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:27.760 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:27.761 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 19:12:27.761 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-04-12 19:12:27.762 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 19:12:27.762 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 19:12:27.762 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:27.762 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 19:12:27.831 +04:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2023-04-12 19:12:27.836 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: new SingleQueryingEnumerable<UserEntity>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.AccessFailedCount (int) Required, 1], [Property: UserEntity.BirthDate (DateTime) Required, 2], [Property: UserEntity.ConcurrencyStamp (string) Concurrency, 3], [Property: UserEntity.Email (string) MaxLength(256), 4], [Property: UserEntity.EmailConfirmed (bool) Required, 5], [Property: UserEntity.FirstName (string), 6], [Property: UserEntity.LastName (string), 7], [Property: UserEntity.LockoutEnabled (bool) Required, 8], [Property: UserEntity.LockoutEnd (DateTimeOffset?), 9], [Property: UserEntity.NormalizedEmail (string) Index MaxLength(256), 10], [Property: UserEntity.NormalizedUserName (string) Index MaxLength(256), 11], [Property: UserEntity.PasswordHash (string), 12], [Property: UserEntity.PersonalNumber (string), 13], [Property: UserEntity.PhoneNumber (string), 14], [Property: UserEntity.PhoneNumberConfirmed (bool) Required, 15], [Property: UserEntity.RegisteredAt (DateTime) Required, 16], [Property: UserEntity.SecurityStamp (string), 17], [Property: UserEntity.TwoFactorEnabled (bool) Required, 18], [Property: UserEntity.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.BirthDate, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PersonalNumber, a.PhoneNumber, a.PhoneNumberConfirmed, a.RegisteredAt, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserEntity>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-12 19:12:27.837 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 19:12:27.837 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:27.837 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:27.837 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:27.837 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:27.838 +04:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-04-12 19:12:27.840 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-04-12 19:12:27.840 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 19:12:27.840 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 19:12:27.840 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:27.841 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 19:12:27.888 +04:00 [DBG] 'BankSystemDbContext' generated a value for the property 'Id.UserEntity'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 19:12:27.899 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 19:12:27.904 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-12 19:12:27.909 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-12 19:12:27.933 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-12 19:12:28.012 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.013 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.016 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 19:12:28.016 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:28.017 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-12 19:12:28.017 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [BirthDate], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PersonalNumber], [PhoneNumber], [PhoneNumberConfirmed], [RegisteredAt], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2023-04-12 19:12:28.031 +04:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [BirthDate], [ConcurrencyStamp], [Email], [EmailConfirmed], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PersonalNumber], [PhoneNumber], [PhoneNumberConfirmed], [RegisteredAt], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2023-04-12 19:12:28.033 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.033 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 2ms reading results.
2023-04-12 19:12:28.035 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.035 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 19:12:28.047 +04:00 [DBG] An entity of type 'UserEntity' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 19:12:28.049 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 1 entities written to the database.
2023-04-12 19:12:28.056 +04:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole<Guid>>()
    .SingleOrDefault(r => r.NormalizedName == __normalizedRoleName_0)'
2023-04-12 19:12:28.061 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole<Guid>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole<Guid>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole<Guid>.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityRole<Guid>.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole<Guid>.Name (string) MaxLength(256), 2], [Property: IdentityRole<Guid>.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole<Guid>>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-12 19:12:28.062 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 19:12:28.062 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:28.062 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:28.062 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.063 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.063 +04:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2023-04-12 19:12:28.064 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2023-04-12 19:12:28.072 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 19:12:28.080 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.080 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 15ms reading results.
2023-04-12 19:12:28.080 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.080 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 19:12:28.091 +04:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "UserId"), 
        objB: __get_Item_0) && object.Equals(
        objA: EF.Property<object>(e, "RoleId"), 
        objB: __get_Item_1))'
2023-04-12 19:12:28.096 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUserRole<Guid>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityUserRole<Guid>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUserRole<Guid>.UserId (Guid) Required PK FK AfterSave:Throw, 0], [Property: IdentityUserRole<Guid>.RoleId (Guid) Required PK FK Index AfterSave:Throw, 1] }
            SELECT TOP(1) a.UserId, a.RoleId
            FROM AspNetUserRoles AS a
            WHERE (a.UserId == @__get_Item_0) && (a.RoleId == @__get_Item_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityUserRole<Guid>>, 
        BankSystem.Common.Db.BankSystemDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-04-12 19:12:28.098 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 19:12:28.098 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:28.099 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:28.099 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.099 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.099 +04:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid), @__get_Item_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__get_Item_0 AND [a].[RoleId] = @__get_Item_1
2023-04-12 19:12:28.100 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (DbType = Guid), @__get_Item_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__get_Item_0 AND [a].[RoleId] = @__get_Item_1
2023-04-12 19:12:28.101 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.101 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 19:12:28.101 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.101 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 19:12:28.105 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 19:12:28.105 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:28.105 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:28.105 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.105 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.106 +04:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2023-04-12 19:12:28.107 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2023-04-12 19:12:28.108 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.108 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 19:12:28.108 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.108 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 19:12:28.116 +04:00 [DBG] Context 'BankSystemDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 19:12:28.118 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 19:12:28.118 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:28.118 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:28.118 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.118 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.119 +04:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-04-12 19:12:28.120 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[BirthDate], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonalNumber], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegisteredAt], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2023-04-12 19:12:28.120 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.120 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 0ms reading results.
2023-04-12 19:12:28.121 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.121 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 19:12:28.127 +04:00 [DBG] An entity of type 'UserEntity' tracked by 'BankSystemDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 19:12:28.127 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-12 19:12:28.127 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-12 19:12:28.132 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-12 19:12:28.162 +04:00 [DBG] Executing 2 update commands as a batch.
2023-04-12 19:12:28.165 +04:00 [DBG] Opening connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.165 +04:00 [DBG] Opened connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.167 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-04-12 19:12:28.180 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-04-12 19:12:28.181 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-04-12 19:12:28.182 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-04-12 19:12:28.183 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-04-12 19:12:28.183 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p21='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p22='?' (Size = 4000), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = DateTime2), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [BirthDate] = @p3, [ConcurrencyStamp] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [FirstName] = @p7, [LastName] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [NormalizedEmail] = @p11, [NormalizedUserName] = @p12, [PasswordHash] = @p13, [PersonalNumber] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RegisteredAt] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2023-04-12 19:12:28.186 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p21='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p22='?' (Size = 4000), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = DateTime2), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [BirthDate] = @p3, [ConcurrencyStamp] = @p4, [Email] = @p5, [EmailConfirmed] = @p6, [FirstName] = @p7, [LastName] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [NormalizedEmail] = @p11, [NormalizedUserName] = @p12, [PasswordHash] = @p13, [PersonalNumber] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RegisteredAt] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2023-04-12 19:12:28.189 +04:00 [DBG] Closing data reader to 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.190 +04:00 [DBG] A data reader for 'BankSystem' on server 'localhost' is being disposed after spending 3ms reading results.
2023-04-12 19:12:28.192 +04:00 [DBG] Committing transaction.
2023-04-12 19:12:28.208 +04:00 [DBG] Committed transaction.
2023-04-12 19:12:28.210 +04:00 [DBG] Closing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.210 +04:00 [DBG] Closed connection to database 'BankSystem' on server 'localhost' (0ms).
2023-04-12 19:12:28.212 +04:00 [DBG] Disposing transaction.
2023-04-12 19:12:28.212 +04:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'BankSystemDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 19:12:28.213 +04:00 [DBG] An entity of type 'UserEntity' tracked by 'BankSystemDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-04-12 19:12:28.213 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 2 entities written to the database.
2023-04-12 19:12:28.215 +04:00 [DBG] SaveChanges starting for 'BankSystemDbContext'.
2023-04-12 19:12:28.215 +04:00 [DBG] DetectChanges starting for 'BankSystemDbContext'.
2023-04-12 19:12:28.215 +04:00 [DBG] DetectChanges completed for 'BankSystemDbContext'.
2023-04-12 19:12:28.215 +04:00 [DBG] SaveChanges completed for 'BankSystemDbContext' with 0 entities written to the database.
2023-04-12 19:12:28.217 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-04-12 19:12:28.218 +04:00 [DBG] No information found on request to perform content negotiation.
2023-04-12 19:12:28.218 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-04-12 19:12:28.218 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-04-12 19:12:28.218 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-04-12 19:12:28.218 +04:00 [INF] Executing OkObjectResult, writing value of type 'BankSystem.Common.Models.HttpResult'.
2023-04-12 19:12:28.224 +04:00 [INF] Executed action BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api) in 493.5125ms
2023-04-12 19:12:28.224 +04:00 [INF] Executed endpoint 'BankSystem.InternetBank.Api.Controllers.OperatorController.RegisterUserAsync (BankSystem.InternetBank.Api)'
2023-04-12 19:12:28.224 +04:00 [DBG] Connection id "0HMPRD00LE9IU" completed keep alive response.
2023-04-12 19:12:28.224 +04:00 [DBG] 'BankSystemDbContext' disposed.
2023-04-12 19:12:28.225 +04:00 [DBG] Disposing connection to database 'BankSystem' on server 'localhost'.
2023-04-12 19:12:28.225 +04:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-04-12 19:12:28.225 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5244/Operator/register-user application/json 176 - 200 - application/json;+charset=utf-8 496.6447ms
2023-04-12 19:12:35.367 +04:00 [INF] Application is shutting down...
2023-04-12 19:12:35.370 +04:00 [DBG] Hosting stopping
2023-04-12 19:12:35.380 +04:00 [DBG] Connection id "0HMPRD00LE9IU" disconnecting.
2023-04-12 19:12:35.380 +04:00 [DBG] Connection id "0HMPRD00LE9IU" stopped.
2023-04-12 19:12:35.380 +04:00 [DBG] Connection id "0HMPRD00LE9IU" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-04-12 19:12:35.385 +04:00 [DBG] Hosting stopped
